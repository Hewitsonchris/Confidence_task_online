(()=>{var vse=Object.create;var py=Object.defineProperty;var cse=Object.getOwnPropertyDescriptor;var pse=Object.getOwnPropertyNames;var mse=Object.getPrototypeOf,gse=Object.prototype.hasOwnProperty;var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var xse=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of pse(t))!gse.call(e,s)&&s!==i&&py(e,s,{get:()=>t[s],enumerable:!(r=cse(t,s))||r.enumerable});return e};var yse=(e,t,i)=>(i=e!=null?vse(mse(e)):{},xse(t||!e||!e.__esModule?py(i,"default",{value:e,enumerable:!0}):i,e));var my=(e,t,i)=>new Promise((r,s)=>{var n=o=>{try{h(i.next(o))}catch(u){s(u)}},a=o=>{try{h(i.throw(o))}catch(u){s(u)}},h=o=>o.done?r(o.value):Promise.resolve(o.value).then(n,a);h((i=i.apply(e,t)).next())});var _i=l((Nke,gy)=>{gy.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}});var ud=l((Gke,xy)=>{var Tse={DEFAULT:0,LINEAR:0,NEAREST:1};xy.exports=Tse});var Qt=l((Bke,yy)=>{var Ese={VERSION:"3.60.0-dev",BlendModes:_i(),ScaleModes:ud(),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};yy.exports=Ese});var ae=l((Uke,Ty)=>{var Sse=function(e){if(typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0};Ty.exports=Sse});var Ye=l((kke,_y)=>{var Ey=ae(),Sy=function(){var e,t,i,r,s,n,a=arguments[0]||{},h=1,o=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},h=2),o===h&&(a=this,--h);h<o;h++)if((e=arguments[h])!=null)for(t in e)i=a[t],r=e[t],a!==r&&(u&&r&&(Ey(r)||(s=Array.isArray(r)))?(s?(s=!1,n=i&&Array.isArray(i)?i:[]):n=i&&Ey(i)?i:{},a[t]=Sy(u,n,r)):r!==void 0&&(a[t]=r));return a};_y.exports=Sy});var Ga=l((zke,wy)=>{var _se={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};wy.exports=_se});var wi=l((Yke,Cy)=>{var wse=function(e){return e.y+e.height-e.height*e.originY};Cy.exports=wse});var Ys=l((Xke,Ry)=>{var Cse=function(e){return e.x-e.width*e.originX+e.width*.5};Ry.exports=Cse});var Xs=l((Vke,qy)=>{var Rse=function(e,t){var i=e.width*e.originX;return e.x=t+i-e.width*.5,e};qy.exports=Rse});var Xi=l((Wke,Ay)=>{var qse=function(e,t){return e.y=t+e.height*e.originY,e};Ay.exports=qse});var ld=l((Hke,by)=>{var Ase=wi(),bse=Ys(),Pse=Xs(),Mse=Xi(),Lse=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Pse(e,bse(t)+i),Mse(e,Ase(t)+r),e};by.exports=Lse});var Ci=l((Kke,Py)=>{var Ose=function(e){return e.x-e.width*e.originX};Py.exports=Ose});var Vi=l((Zke,My)=>{var Fse=function(e,t){return e.x=t+e.width*e.originX,e};My.exports=Fse});var fd=l((Jke,Ly)=>{var Dse=wi(),Ise=Ci(),Nse=Vi(),Gse=Xi(),Bse=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Nse(e,Ise(t)-i),Gse(e,Dse(t)+r),e};Ly.exports=Bse});var Ri=l((Qke,Oy)=>{var Use=function(e){return e.x+e.width-e.width*e.originX};Oy.exports=Use});var Wi=l(($ke,Fy)=>{var kse=function(e,t){return e.x=t-e.width+e.width*e.originX,e};Fy.exports=kse});var dd=l((jke,Dy)=>{var zse=wi(),Yse=Ri(),Xse=Wi(),Vse=Xi(),Wse=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Xse(e,Yse(t)+i),Vse(e,zse(t)+r),e};Dy.exports=Wse});var Hi=l((eze,Iy)=>{var Hse=function(e,t){return e.y=t-e.height+e.height*e.originY,e};Iy.exports=Hse});var vd=l((tze,Ny)=>{var Kse=wi(),Zse=Ci(),Jse=Hi(),Qse=Wi(),$se=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Qse(e,Zse(t)-i),Jse(e,Kse(t)+r),e};Ny.exports=$se});var Vs=l((ize,Gy)=>{var jse=function(e){return e.y-e.height*e.originY+e.height*.5};Gy.exports=jse});var Ws=l((rze,By)=>{var ene=function(e,t){var i=e.height*e.originY;return e.y=t+i-e.height*.5,e};By.exports=ene});var cd=l((sze,Uy)=>{var tne=Vs(),ine=Ci(),rne=Ws(),sne=Wi(),nne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),sne(e,ine(t)-i),rne(e,tne(t)+r),e};Uy.exports=nne});var qi=l((nze,ky)=>{var ane=function(e){return e.y-e.height*e.originY};ky.exports=ane});var pd=l((aze,zy)=>{var hne=Ci(),one=qi(),une=Wi(),lne=Xi(),fne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),une(e,hne(t)-i),lne(e,one(t)-r),e};zy.exports=fne});var md=l((hze,Yy)=>{var dne=wi(),vne=Ri(),cne=Hi(),pne=Vi(),mne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),pne(e,vne(t)+i),cne(e,dne(t)+r),e};Yy.exports=mne});var gd=l((oze,Xy)=>{var gne=Vs(),xne=Ri(),yne=Ws(),Tne=Vi(),Ene=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Tne(e,xne(t)+i),yne(e,gne(t)+r),e};Xy.exports=Ene});var xd=l((uze,Vy)=>{var Sne=Ri(),_ne=qi(),wne=Vi(),Cne=Xi(),Rne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),wne(e,Sne(t)+i),Cne(e,_ne(t)-r),e};Vy.exports=Rne});var yd=l((lze,Wy)=>{var qne=Ys(),Ane=qi(),bne=Hi(),Pne=Xs(),Mne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Pne(e,qne(t)+i),bne(e,Ane(t)-r),e};Wy.exports=Mne});var Td=l((fze,Hy)=>{var Lne=Ci(),One=qi(),Fne=Hi(),Dne=Vi(),Ine=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Dne(e,Lne(t)-i),Fne(e,One(t)-r),e};Hy.exports=Ine});var Ed=l((dze,Ky)=>{var Nne=Ri(),Gne=qi(),Bne=Hi(),Une=Wi(),kne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Une(e,Nne(t)+i),Bne(e,Gne(t)-r),e};Ky.exports=kne});var Sd=l((vze,Zy)=>{var fi=Ga(),$t=[];$t[fi.BOTTOM_CENTER]=ld();$t[fi.BOTTOM_LEFT]=fd();$t[fi.BOTTOM_RIGHT]=dd();$t[fi.LEFT_BOTTOM]=vd();$t[fi.LEFT_CENTER]=cd();$t[fi.LEFT_TOP]=pd();$t[fi.RIGHT_BOTTOM]=md();$t[fi.RIGHT_CENTER]=gd();$t[fi.RIGHT_TOP]=xd();$t[fi.TOP_CENTER]=yd();$t[fi.TOP_LEFT]=Td();$t[fi.TOP_RIGHT]=Ed();var zne=function(e,t,i,r,s){return $t[i](e,t,r,s)};Zy.exports=zne});var Qy=l((cze,Jy)=>{var Yne=Sd(),Xne=function(e,t,i,r){for(var s=e[0],n=1;n<e.length;n++){var a=e[n];Yne(a,s,t,i,r),s=a}return e};Jy.exports=Xne});var Ai=l((pze,$y)=>{var Vne=function(e,t,i,r,s,n){r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=1);var a,h=0,o=e.length;if(n===1)for(a=s;a<o;a++)e[a][t]+=i+h*r,h++;else for(a=s;a>=0;a--)e[a][t]+=i+h*r,h++;return e};$y.exports=Vne});var eT=l((mze,jy)=>{var Wne=Ai(),Hne=function(e,t,i,r,s){return Wne(e,"angle",t,i,r,s)};jy.exports=Hne});var iT=l((gze,tT)=>{var Kne=function(e,t,i){for(var r=0;r<e.length;r++){var s=e[r];t.call(i,s)}return e};tT.exports=Kne});var sT=l((xze,rT)=>{var Zne=function(e,t,i){i===void 0&&(i=0);for(var r=i;r<e.length;r++){var s=e[r],n=!0;for(var a in t)s[a]!==t[a]&&(n=!1);if(n)return s}return null};rT.exports=Zne});var aT=l((yze,nT)=>{var Jne=function(e,t,i){i===void 0&&(i=0);for(var r=i;r<e.length;r++){var s=e[r],n=!0;for(var a in t)s[a]!==t[a]&&(n=!1);if(n)return s}return null};nT.exports=Jne});var _d=l((Tze,hT)=>{var Qne=wi(),$ne=Ys(),jne=Hi(),eae=Xs(),tae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),eae(e,$ne(t)+i),jne(e,Qne(t)+r),e};hT.exports=tae});var wd=l((Eze,oT)=>{var iae=wi(),rae=Ci(),sae=Hi(),nae=Vi(),aae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),nae(e,rae(t)-i),sae(e,iae(t)+r),e};oT.exports=aae});var Cd=l((Sze,uT)=>{var hae=wi(),oae=Ri(),uae=Hi(),lae=Wi(),fae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),lae(e,oae(t)+i),uae(e,hae(t)+r),e};uT.exports=fae});var Rd=l((_ze,lT)=>{var dae=Xs(),vae=Ws(),cae=function(e,t,i){return dae(e,t),vae(e,i)};lT.exports=cae});var qd=l((wze,fT)=>{var pae=Rd(),mae=Ys(),gae=Vs(),xae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),pae(e,mae(t)+i,gae(t)+r),e};fT.exports=xae});var Ad=l((Cze,dT)=>{var yae=Vs(),Tae=Ci(),Eae=Ws(),Sae=Vi(),_ae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Sae(e,Tae(t)-i),Eae(e,yae(t)+r),e};dT.exports=_ae});var bd=l((Rze,vT)=>{var wae=Vs(),Cae=Ri(),Rae=Ws(),qae=Wi(),Aae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),qae(e,Cae(t)+i),Rae(e,wae(t)+r),e};vT.exports=Aae});var Pd=l((qze,cT)=>{var bae=Ys(),Pae=qi(),Mae=Xs(),Lae=Xi(),Oae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Mae(e,bae(t)+i),Lae(e,Pae(t)-r),e};cT.exports=Oae});var Md=l((Aze,pT)=>{var Fae=Ci(),Dae=qi(),Iae=Vi(),Nae=Xi(),Gae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Iae(e,Fae(t)-i),Nae(e,Dae(t)-r),e};pT.exports=Gae});var Ld=l((bze,mT)=>{var Bae=Ri(),Uae=qi(),kae=Wi(),zae=Xi(),Yae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),kae(e,Bae(t)+i),zae(e,Uae(t)-r),e};mT.exports=Yae});var Od=l((Pze,gT)=>{var dt=Ga(),ht=[];ht[dt.BOTTOM_CENTER]=_d();ht[dt.BOTTOM_LEFT]=wd();ht[dt.BOTTOM_RIGHT]=Cd();ht[dt.CENTER]=qd();ht[dt.LEFT_CENTER]=Ad();ht[dt.RIGHT_CENTER]=bd();ht[dt.TOP_CENTER]=Pd();ht[dt.TOP_LEFT]=Md();ht[dt.TOP_RIGHT]=Ld();ht[dt.LEFT_BOTTOM]=ht[dt.BOTTOM_LEFT];ht[dt.LEFT_TOP]=ht[dt.TOP_LEFT];ht[dt.RIGHT_BOTTOM]=ht[dt.BOTTOM_RIGHT];ht[dt.RIGHT_TOP]=ht[dt.TOP_RIGHT];var Xae=function(e,t,i,r,s){return ht[i](e,t,r,s)};gT.exports=Xae});var z=l((Mze,xT)=>{var Vae=function(e,t,i){var r=typeof e;return!e||r==="number"||r==="string"?i:e.hasOwnProperty(t)&&e[t]!==void 0?e[t]:i};xT.exports=Vae});var B=l((Lze,yT)=>{var Wae=function(){};yT.exports=Wae});var C=l((Oze,ET)=>{function Hae(e){return!!e.get&&typeof e.get=="function"||!!e.set&&typeof e.set=="function"}function Kae(e,t,i){var r=i?e[t]:Object.getOwnPropertyDescriptor(e,t);return!i&&r.value&&typeof r.value=="object"&&(r=r.value),r&&Hae(r)?(typeof r.enumerable=="undefined"&&(r.enumerable=!0),typeof r.configurable=="undefined"&&(r.configurable=!0),r):!1}function Zae(e,t){var i=Object.getOwnPropertyDescriptor(e,t);return i?(i.value&&typeof i.value=="object"&&(i=i.value),i.configurable===!1):!1}function Fd(e,t,i,r){for(var s in t)if(!!t.hasOwnProperty(s)){var n=Kae(t,s,i);if(n!==!1){var a=r||e;if(Zae(a.prototype,s)){if(Ba.ignoreFinals)continue;throw new Error("cannot override final property '"+s+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(e.prototype,s,n)}else e.prototype[s]=t[s]}}function TT(e,t){if(!!t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)Fd(e,t[i].prototype||t[i])}}function Ba(e){e||(e={});var t,i;if(e.initialize){if(typeof e.initialize!="function")throw new Error("initialize must be a function");t=e.initialize,delete e.initialize}else if(e.Extends){var r=e.Extends;t=function(){r.apply(this,arguments)}}else t=function(){};e.Extends?(t.prototype=Object.create(e.Extends.prototype),t.prototype.constructor=t,i=e.Extends,delete e.Extends):t.prototype.constructor=t;var s=null;return e.Mixins&&(s=e.Mixins,delete e.Mixins),TT(t,s),Fd(t,e,!0,i),t}Ba.extend=Fd;Ba.mixin=TT;Ba.ignoreFinals=!1;ET.exports=Ba});var kr=l((Fze,ST)=>{var Jae=function(e,t,i){if(e.radius>0&&t>=e.left&&t<=e.right&&i>=e.top&&i<=e.bottom){var r=(e.x-t)*(e.x-t),s=(e.y-i)*(e.y-i);return r+s<=e.radius*e.radius}else return!1};ST.exports=Jae});var Ki=l((Dze,_T)=>{var Qae={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};_T.exports=Qae});var $=l((Ize,wT)=>{var $ae=C(),jae=Ki(),ehe=new $ae({initialize:function(t,i){t===void 0&&(t=0),i===void 0&&(i=t),this.type=jae.POINT,this.x=t,this.y=i},setTo:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x=e,this.y=t,this}});wT.exports=ehe});var Eo=l((Nze,CT)=>{var the=$(),ihe=function(e,t,i){return i===void 0&&(i=new the),i.x=e.x+e.radius*Math.cos(t),i.y=e.y+e.radius*Math.sin(t),i};CT.exports=ihe});var Le=l((Gze,RT)=>{var rhe=function(e,t,i){return Math.max(t,Math.min(i,e))};RT.exports=rhe});var En=l((Bze,qT)=>{var she=Le(),nhe=function(e,t,i){return e=she(e,0,1),(i-t)*e+t};qT.exports=nhe});var Oe=l((Uze,AT)=>{var ahe={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};AT.exports=ahe});var Dd=l((kze,bT)=>{var hhe=Eo(),ohe=En(),uhe=Oe(),lhe=$(),fhe=function(e,t,i){i===void 0&&(i=new lhe);var r=ohe(t,0,uhe.PI2);return hhe(e,r,i)};bT.exports=fhe});var Id=l((zze,PT)=>{var dhe=function(e){return 2*(Math.PI*e.radius)};PT.exports=dhe});var Nd=l((Yze,MT)=>{var vhe=Id(),che=Eo(),phe=En(),mhe=Oe(),ghe=function(e,t,i,r){r===void 0&&(r=[]),!t&&i>0&&(t=vhe(e)/i);for(var s=0;s<t;s++){var n=phe(s/t,0,mhe.PI2);r.push(che(e,n))}return r};MT.exports=ghe});var So=l((Xze,LT)=>{var xhe=$(),yhe=function(e,t){t===void 0&&(t=new xhe);var i=2*Math.PI*Math.random(),r=Math.random()+Math.random(),s=r>1?2-r:r,n=s*Math.cos(i),a=s*Math.sin(i);return t.x=e.x+n*e.radius,t.y=e.y+a*e.radius,t};LT.exports=yhe});var zr=l((Vze,OT)=>{var The=C(),Ehe=kr(),She=Dd(),_he=Nd(),whe=Ki(),Che=So(),Rhe=new The({initialize:function(t,i,r){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),this.type=whe.CIRCLE,this.x=t,this.y=i,this._radius=r,this._diameter=r*2},contains:function(e,t){return Ehe(this,e,t)},getPoint:function(e,t){return She(this,e,t)},getPoints:function(e,t,i){return _he(this,e,t,i)},getRandomPoint:function(e){return Che(this,e)},setTo:function(e,t,i){return this.x=e,this.y=t,this._radius=i,this._diameter=i*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(e){this._radius=e,this._diameter=e*2}},diameter:{get:function(){return this._diameter},set:function(e){this._diameter=e,this._radius=e*.5}},left:{get:function(){return this.x-this._radius},set:function(e){this.x=e+this._radius}},right:{get:function(){return this.x+this._radius},set:function(e){this.x=e-this._radius}},top:{get:function(){return this.y-this._radius},set:function(e){this.y=e+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(e){this.y=e-this._radius}}});OT.exports=Rhe});var DT=l((Wze,FT)=>{var mr=Le(),Sn=2,qhe={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(e,t,i,r){return e===void 0&&(e=1),t===void 0?this.alpha=e:(this._alphaTL=mr(e,0,1),this._alphaTR=mr(t,0,1),this._alphaBL=mr(i,0,1),this._alphaBR=mr(r,0,1)),this},alpha:{get:function(){return this._alpha},set:function(e){var t=mr(e,0,1);this._alpha=t,this._alphaTL=t,this._alphaTR=t,this._alphaBL=t,this._alphaBR=t,t===0?this.renderFlags&=~Sn:this.renderFlags|=Sn}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(e){var t=mr(e,0,1);this._alphaTL=t,t!==0&&(this.renderFlags|=Sn)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(e){var t=mr(e,0,1);this._alphaTR=t,t!==0&&(this.renderFlags|=Sn)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(e){var t=mr(e,0,1);this._alphaBL=t,t!==0&&(this.renderFlags|=Sn)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(e){var t=mr(e,0,1);this._alphaBR=t,t!==0&&(this.renderFlags|=Sn)}}};FT.exports=qhe});var Gd=l((Hze,NT)=>{var Ahe=Le(),IT=2,bhe={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(e){return e===void 0&&(e=1),this.alpha=e,this},alpha:{get:function(){return this._alpha},set:function(e){var t=Ahe(e,0,1);this._alpha=t,t===0?this.renderFlags&=~IT:this.renderFlags|=IT}}};NT.exports=bhe});var Bd=l((Kze,BT)=>{var GT=_i(),Phe={_blendMode:GT.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(e){typeof e=="string"&&(e=GT[e]),e|=0,e>=-1&&(this._blendMode=e)}},setBlendMode:function(e){return this.blendMode=e,this}};BT.exports=Phe});var kT=l((Zze,UT)=>{var Mhe={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,t){return this.width=e,this.height=t,this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this}};UT.exports=Mhe});var YT=l((Jze,zT)=>{var Lhe={texture:null,frame:null,isCropped:!1,setCrop:function(e,t,i,r){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,t,i,r,this.flipX,this.flipY);else{var s=e;this.frame.setCropUVs(this._crop,s.x,s.y,s.width,s.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};zT.exports=Lhe});var Ud=l((Qze,XT)=>{var Ohe={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};XT.exports=Ohe});var WT=l(($ze,VT)=>{var Fhe={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,t){return this.flipX=e,this.flipY=t,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};VT.exports=Fhe});var Yr=l((jze,HT)=>{var Dhe=function(e,t,i){return e.width<=0||e.height<=0?!1:e.x<=t&&e.x+e.width>=t&&e.y<=i&&e.y+e.height>=i};HT.exports=Dhe});var Ua=l((e3e,KT)=>{var Ihe=function(e){return 2*(e.width+e.height)};KT.exports=Ihe});var _o=l((t3e,ZT)=>{var Nhe=Ua(),Ghe=$(),Bhe=function(e,t,i){if(i===void 0&&(i=new Ghe),t<=0||t>=1)return i.x=e.x,i.y=e.y,i;var r=Nhe(e)*t;return t>.5?(r-=e.width+e.height,r<=e.width?(i.x=e.right-r,i.y=e.bottom):(i.x=e.x,i.y=e.bottom-(r-e.width))):r<=e.width?(i.x=e.x+r,i.y=e.y):(i.x=e.right,i.y=e.y+(r-e.width)),i};ZT.exports=Bhe});var kd=l((i3e,JT)=>{var Uhe=_o(),khe=Ua(),zhe=function(e,t,i,r){r===void 0&&(r=[]),!t&&i>0&&(t=khe(e)/i);for(var s=0;s<t;s++){var n=s/t;r.push(Uhe(e,n))}return r};JT.exports=zhe});var zd=l((r3e,QT)=>{var Yhe=$(),Xhe=function(e,t,i){return i===void 0&&(i=new Yhe),i.x=e.x1+(e.x2-e.x1)*t,i.y=e.y1+(e.y2-e.y1)*t,i};QT.exports=Xhe});var gr=l((s3e,$T)=>{var Vhe=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};$T.exports=Vhe});var wo=l((n3e,jT)=>{var Whe=gr(),Hhe=$(),Khe=function(e,t,i,r){r===void 0&&(r=[]),!t&&i>0&&(t=Whe(e)/i);for(var s=e.x1,n=e.y1,a=e.x2,h=e.y2,o=0;o<t;o++){var u=o/t,f=s+(a-s)*u,d=n+(h-n)*u;r.push(new Hhe(f,d))}return r};jT.exports=Khe});var Co=l((a3e,eE)=>{var Zhe=$(),Jhe=function(e,t){t===void 0&&(t=new Zhe);var i=Math.random();return t.x=e.x1+i*(e.x2-e.x1),t.y=e.y1+i*(e.y2-e.y1),t};eE.exports=Jhe});var Ro=l((h3e,tE)=>{var Qhe=function(e,t,i){return i===void 0&&(i=1e-4),Math.abs(e-t)<i};tE.exports=Qhe});var xe=l((o3e,rE)=>{var $he=C(),iE=Ro(),zt=new $he({initialize:function(t,i){this.x=0,this.y=0,typeof t=="object"?(this.x=t.x||0,this.y=t.y||0):(i===void 0&&(i=t),this.x=t||0,this.y=i||0)},clone:function(){return new zt(this.x,this.y)},copy:function(e){return this.x=e.x||0,this.y=e.y||0,this},setFromObject:function(e){return this.x=e.x||0,this.y=e.y||0,this},set:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},setTo:function(e,t){return this.set(e,t)},setToPolar:function(e,t){return t==null&&(t=1),this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this},equals:function(e){return this.x===e.x&&this.y===e.y},fuzzyEquals:function(e,t){return iE(this.x,e.x,t)&&iE(this.y,e.y,t)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},setAngle:function(e){return this.setToPolar(e,this.length())},add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},scale:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(e){var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},distanceSq:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},length:function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},setLength:function(e){return this.normalize().scale(e)},lengthSq:function(){var e=this.x,t=this.y;return e*e+t*t},normalize:function(){var e=this.x,t=this.y,i=e*e+t*t;return i>0&&(i=1/Math.sqrt(i),this.x=e*i,this.y=t*i),this},normalizeRightHand:function(){var e=this.x;return this.x=this.y*-1,this.y=e,this},normalizeLeftHand:function(){var e=this.x;return this.x=this.y,this.y=e*-1,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lerp:function(e,t){t===void 0&&(t=0);var i=this.x,r=this.y;return this.x=i+t*(e.x-i),this.y=r+t*(e.y-r),this},transformMat3:function(e){var t=this.x,i=this.y,r=e.val;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this},transformMat4:function(e){var t=this.x,i=this.y,r=e.val;return this.x=r[0]*t+r[4]*i+r[12],this.y=r[1]*t+r[5]*i+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(e){var t=this.length();return t&&t>e&&this.scale(e/t),this},reflect:function(e){return e=e.clone().normalize(),this.subtract(e.scale(2*this.dot(e)))},mirror:function(e){return this.reflect(e).negate()},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t*this.x-i*this.y,i*this.x+t*this.y)}});zt.ZERO=new zt;zt.RIGHT=new zt(1,0);zt.LEFT=new zt(-1,0);zt.UP=new zt(0,-1);zt.DOWN=new zt(0,1);zt.ONE=new zt(1,1);rE.exports=zt});var bi=l((u3e,nE)=>{var jhe=C(),eoe=zd(),toe=wo(),ioe=Ki(),roe=Co(),sE=xe(),soe=new jhe({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),this.type=ioe.LINE,this.x1=t,this.y1=i,this.x2=r,this.y2=s},getPoint:function(e,t){return eoe(this,e,t)},getPoints:function(e,t,i){return toe(this,e,t,i)},getRandomPoint:function(e){return roe(this,e)},setTo:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),this.x1=e,this.y1=t,this.x2=i,this.y2=r,this},getPointA:function(e){return e===void 0&&(e=new sE),e.set(this.x1,this.y1),e},getPointB:function(e){return e===void 0&&(e=new sE),e.set(this.x2,this.y2),e},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(e){this.x1<=this.x2?this.x1=e:this.x2=e}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(e){this.x1>this.x2?this.x1=e:this.x2=e}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(e){this.y1<=this.y2?this.y1=e:this.y2=e}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(e){this.y1>this.y2?this.y1=e:this.y2=e}}});nE.exports=soe});var qo=l((l3e,aE)=>{var noe=$(),aoe=function(e,t){return t===void 0&&(t=new noe),t.x=e.x+Math.random()*e.width,t.y=e.y+Math.random()*e.height,t};aE.exports=aoe});var Ae=l((f3e,hE)=>{var hoe=C(),ooe=Yr(),uoe=_o(),loe=kd(),foe=Ki(),Ao=bi(),doe=qo(),voe=new hoe({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),this.type=foe.RECTANGLE,this.x=t,this.y=i,this.width=r,this.height=s},contains:function(e,t){return ooe(this,e,t)},getPoint:function(e,t){return uoe(this,e,t)},getPoints:function(e,t,i){return loe(this,e,t,i)},getRandomPoint:function(e){return doe(this,e)},setTo:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},setSize:function(e,t){return t===void 0&&(t=e),this.width=e,this.height=t,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(e){return e===void 0&&(e=new Ao),e.setTo(this.x,this.y,this.right,this.y),e},getLineB:function(e){return e===void 0&&(e=new Ao),e.setTo(this.right,this.y,this.right,this.bottom),e},getLineC:function(e){return e===void 0&&(e=new Ao),e.setTo(this.right,this.bottom,this.x,this.bottom),e},getLineD:function(e){return e===void 0&&(e=new Ao),e.setTo(this.x,this.bottom,this.x,this.y),e},left:{get:function(){return this.x},set:function(e){e>=this.right?this.width=0:this.width=this.right-e,this.x=e}},right:{get:function(){return this.x+this.width},set:function(e){e<=this.x?this.width=0:this.width=e-this.x}},top:{get:function(){return this.y},set:function(e){e>=this.bottom?this.height=0:this.height=this.bottom-e,this.y=e}},bottom:{get:function(){return this.y+this.height},set:function(e){e<=this.y?this.height=0:this.height=e-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(e){this.x=e-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(e){this.y=e-this.height/2}}});hE.exports=voe});var Yd=l((d3e,oE)=>{var coe=function(e,t,i,r){var s=Math.cos(r),n=Math.sin(r),a=e.x-t,h=e.y-i;return e.x=a*s-h*n+t,e.y=a*n+h*s+i,e};oE.exports=coe});var lE=l((v3e,uE)=>{var poe=Ae(),moe=Yd(),xr=xe(),goe={prepareBoundsOutput:function(e,t){if(t===void 0&&(t=!1),this.rotation!==0&&moe(e,this.x,this.y,this.rotation),t&&this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix();i.transformPoint(e.x,e.y,e)}return e},getCenter:function(e){return e===void 0&&(e=new xr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,e},getTopLeft:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,t)},getTopCenter:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,t)},getTopRight:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,t)},getLeftCenter:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,t)},getRightCenter:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,t)},getBottomLeft:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,t)},getBottomCenter:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,t)},getBottomRight:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,t)},getBounds:function(e){e===void 0&&(e=new poe);var t,i,r,s,n,a,h,o;if(this.parentContainer){var u=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(e),u.transformPoint(e.x,e.y,e),t=e.x,i=e.y,this.getTopRight(e),u.transformPoint(e.x,e.y,e),r=e.x,s=e.y,this.getBottomLeft(e),u.transformPoint(e.x,e.y,e),n=e.x,a=e.y,this.getBottomRight(e),u.transformPoint(e.x,e.y,e),h=e.x,o=e.y}else this.getTopLeft(e),t=e.x,i=e.y,this.getTopRight(e),r=e.x,s=e.y,this.getBottomLeft(e),n=e.x,a=e.y,this.getBottomRight(e),h=e.x,o=e.y;return e.x=Math.min(t,r,n,h),e.y=Math.min(i,s,a,o),e.width=Math.max(t,r,n,h)-e.x,e.height=Math.max(i,s,a,o)-e.y,e}};uE.exports=goe});var dE=l((c3e,fE)=>{fE.exports="blur"});var cE=l((p3e,vE)=>{vE.exports="boot"});var mE=l((m3e,pE)=>{pE.exports="contextlost"});var xE=l((g3e,gE)=>{gE.exports="contextrestored"});var TE=l((x3e,yE)=>{yE.exports="destroy"});var SE=l((y3e,EE)=>{EE.exports="focus"});var wE=l((T3e,_E)=>{_E.exports="hidden"});var RE=l((E3e,CE)=>{CE.exports="pause"});var AE=l((S3e,qE)=>{qE.exports="postrender"});var PE=l((_3e,bE)=>{bE.exports="poststep"});var LE=l((w3e,ME)=>{ME.exports="prerender"});var FE=l((C3e,OE)=>{OE.exports="prestep"});var IE=l((R3e,DE)=>{DE.exports="ready"});var GE=l((q3e,NE)=>{NE.exports="resume"});var UE=l((A3e,BE)=>{BE.exports="step"});var zE=l((b3e,kE)=>{kE.exports="visible"});var Xe=l((P3e,YE)=>{YE.exports={BLUR:dE(),BOOT:cE(),CONTEXT_LOST:mE(),CONTEXT_RESTORED:xE(),DESTROY:TE(),FOCUS:SE(),HIDDEN:wE(),PAUSE:RE(),POST_RENDER:AE(),POST_STEP:PE(),PRE_RENDER:LE(),PRE_STEP:FE(),READY:IE(),RESUME:GE(),STEP:UE(),VISIBLE:zE()}});var VE=l((M3e,XE)=>{XE.exports="postrender"});var HE=l((L3e,WE)=>{WE.exports="prerender"});var ZE=l((O3e,KE)=>{KE.exports="render"});var QE=l((F3e,JE)=>{JE.exports="resize"});var Hs=l((D3e,$E)=>{$E.exports={POST_RENDER:VE(),PRE_RENDER:HE(),RENDER:ZE(),RESIZE:QE()}});var Xd=l((I3e,tS)=>{var xoe=C(),jE=Xe(),eS=Hs(),yoe=new xoe({initialize:function(t,i){var r=t.sys.renderer;this.renderer=r,this.bitmapMask=i,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.scene=t,this.createMask(),t.sys.game.events.on(jE.CONTEXT_RESTORED,this.createMask,this),r&&r.on(eS.RESIZE,this.createMask,this)},createMask:function(){var e=this.renderer;if(!(!e||!e.gl)){this.mainTexture&&this.clearMask();var t=e.width,i=e.height,r=(t&t-1)===0&&(i&i-1)===0,s=e.gl,n=r?s.REPEAT:s.CLAMP_TO_EDGE,a=s.LINEAR;this.mainTexture=e.createTexture2D(0,a,a,n,n,s.RGBA,null,t,i),this.maskTexture=e.createTexture2D(0,a,a,n,n,s.RGBA,null,t,i),this.mainFramebuffer=e.createFramebuffer(t,i,this.mainTexture,!0),this.maskFramebuffer=e.createFramebuffer(t,i,this.maskTexture,!0)}},clearMask:function(){var e=this.renderer;!e||!e.gl||!this.mainTexture||(e.deleteTexture(this.mainTexture),e.deleteTexture(this.maskTexture),e.deleteFramebuffer(this.mainFramebuffer),e.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(e){this.bitmapMask=e},preRenderWebGL:function(e,t,i){e.pipelines.BITMAPMASK_PIPELINE.beginMask(this,t,i)},postRenderWebGL:function(e,t){e.pipelines.BITMAPMASK_PIPELINE.endMask(this,t)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.scene.sys.game.events.off(jE.CONTEXT_RESTORED,this.createMask,this),this.renderer&&this.renderer.off(eS.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});tS.exports=yoe});var Vd=l((N3e,iS)=>{var Toe=C(),Eoe=new Toe({initialize:function(t,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(e){return this.geometryMask=e,this},setInvertAlpha:function(e){return e===void 0&&(e=!0),this.invertAlpha=e,this},preRenderWebGL:function(e,t,i){var r=e.gl;e.flush(),e.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),e.maskCount=0),e.currentCameraMask.mask!==this&&(e.currentMask.mask=this),e.maskStack.push({mask:this,camera:i}),this.applyStencil(e,i,!0),e.maskCount++},applyStencil:function(e,t,i){var r=e.gl,s=this.geometryMask,n=e.maskCount;r.colorMask(!1,!1,!1,!1),i?(r.stencilFunc(r.EQUAL,n,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,n+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),s.renderWebGL(e,s,t),e.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),i?this.invertAlpha?r.stencilFunc(r.NOTEQUAL,n+1,255):r.stencilFunc(r.EQUAL,n+1,255):this.invertAlpha?r.stencilFunc(r.NOTEQUAL,n,255):r.stencilFunc(r.EQUAL,n,255)},postRenderWebGL:function(e){var t=e.gl;e.maskStack.pop(),e.maskCount--,e.flush();var i=e.currentMask;if(e.maskStack.length===0)i.mask=null,t.disable(t.STENCIL_TEST);else{var r=e.maskStack[e.maskStack.length-1];r.mask.applyStencil(e,r.camera,!1),e.currentCameraMask.mask!==r.mask?(i.mask=r.mask,i.camera=r.camera):i.mask=null}},preRenderCanvas:function(e,t,i){var r=this.geometryMask;e.currentContext.save(),r.renderCanvas(e,r,i,null,null,!0),e.currentContext.clip()},postRenderCanvas:function(e){e.currentContext.restore()},destroy:function(){this.geometryMask=null}});iS.exports=Eoe});var Wd=l((G3e,rS)=>{var Soe=Xd(),_oe=Vd(),woe={mask:null,setMask:function(e){return this.mask=e,this},clearMask:function(e){return e===void 0&&(e=!1),e&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(e){return e===void 0&&(this.texture||this.shader)&&(e=this),new Soe(this.scene,e)},createGeometryMask:function(e){return e===void 0&&this.type==="Graphics"&&(e=this),new _oe(this.scene,e)}};rS.exports=woe});var nS=l((B3e,sS)=>{var Coe={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,t){return e===void 0&&(e=.5),t===void 0&&(t=e),this.originX=e,this.originY=t,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.displayOriginX=e,this.displayOriginY=t,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};sS.exports=Coe});var yr=l((U3e,aS)=>{var Roe=Oe(),qoe=function(e){return e*Roe.DEG_TO_RAD};aS.exports=qoe});var _n=l((k3e,hS)=>{var Aoe=function(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i};hS.exports=Aoe});var he=l((z3e,oS)=>{var boe=function(e,t,i){if(!e||typeof e=="number")return i;if(e.hasOwnProperty(t))return e[t];if(t.indexOf(".")!==-1){for(var r=t.split("."),s=e,n=i,a=0;a<r.length;a++)if(s.hasOwnProperty(r[a]))n=s[r[a]],s=s[r[a]];else{n=i;break}return n}else return i};oS.exports=boe});var wn=l((Y3e,uS)=>{var Poe={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};uS.exports=Poe});var vS=l((X3e,dS)=>{var lS=yr(),fS=_n(),bo=he(),ka=wn(),Hd=xe(),Moe={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:ka.PLAYING_FORWARD,setPath:function(e,t){t===void 0&&(t=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=e,t&&this.startFollow(t),this},setRotateToPath:function(e,t){return t===void 0&&(t=0),this.rotateToPath=e,this.pathRotationOffset=t,this},isFollowing:function(){var e=this.pathTween;return e&&e.isPlaying()},startFollow:function(e,t){e===void 0&&(e={}),t===void 0&&(t=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),typeof e=="number"&&(e={duration:e}),e.from=bo(e,"from",0),e.to=bo(e,"to",1);var r=fS(e,"positionOnPath",!1);this.rotateToPath=fS(e,"rotateToPath",!1),this.pathRotationOffset=bo(e,"rotationOffset",0);var s=bo(e,"startAt",t);if(s&&(e.onStart=function(a){var h=a.data[0];h.progress=s,h.elapsed=h.duration*s;var o=h.ease(h.progress);h.current=h.start+(h.end-h.start)*o,h.target[h.key]=h.current}),this.pathOffset||(this.pathOffset=new Hd(this.x,this.y)),this.pathVector||(this.pathVector=new Hd),this.pathDelta||(this.pathDelta=new Hd),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(e),this.path.getStartPoint(this.pathOffset),r&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=ka.PLAYING_FORWARD,this.rotateToPath){var n=this.path.getPoint(.1);this.rotation=Math.atan2(n.y-this.y,n.x-this.x)+lS(this.pathRotationOffset)}return this.pathConfig=e,this},pauseFollow:function(){var e=this.pathTween;return e&&e.isPlaying()&&e.pause(),this},resumeFollow:function(){var e=this.pathTween;return e&&e.isPaused()&&e.resume(),this},stopFollow:function(){var e=this.pathTween;return e&&e.isPlaying()&&e.stop(),this},pathUpdate:function(){var e=this.pathTween;if(e){var t=e.data[0],i=this.pathDelta,r=this.pathVector;if(i.copy(r).negate(),t.state===ka.COMPLETE){this.path.getPoint(1,r),i.add(r),r.add(this.pathOffset),this.setPosition(r.x,r.y);return}else if(t.state!==ka.PLAYING_FORWARD&&t.state!==ka.PLAYING_BACKWARD)return;this.path.getPoint(e.getValue(),r),i.add(r),r.add(this.pathOffset);var s=this.x,n=this.y;this.setPosition(r.x,r.y);var a=this.x-s,h=this.y-n;if(a===0&&h===0)return;if(t.state!==this._prevDirection){this._prevDirection=t.state;return}this.rotateToPath&&(this.rotation=Math.atan2(h,a)+lS(this.pathRotationOffset))}}};dS.exports=Moe});var Po=l((V3e,pS)=>{var cS=function(e){var t,i,r;if(typeof e!="object"||e===null)return e;t=Array.isArray(e)?[]:{};for(r in e)i=e[r],t[r]=cS(i);return t};pS.exports=cS});var Ks=l((W3e,mS)=>{var Loe={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};mS.exports=Loe});var Zs=l((H3e,gS)=>{var Ooe=function(e,t){if(!(t>=e.length)){for(var i=e.length-1,r=e[t],s=t;s<i;s++)e[s]=e[s+1];return e.length=i,r}};gS.exports=Ooe});var Kd=l((K3e,yS)=>{var xS=Po(),Foe=Ks(),Doe=Zs(),Ioe={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(e){e===void 0&&(e=Foe.MULTI_PIPELINE);var t=this.scene.sys.renderer;if(!t)return!1;var i=t.pipelines;if(this.postPipelines=[],this.pipelineData={},i){var r=i.get(e);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(e,t,i){var r=this.scene.sys.renderer;if(!r)return this;var s=r.pipelines;if(s){var n=s.get(e);n&&(this.pipeline=n),t&&(this.pipelineData=i?xS(t):t)}return this},setPostPipeline:function(e,t,i){var r=this.scene.sys.renderer;if(!r)return this;var s=r.pipelines;if(s){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var a=s.getPostPipeline(e[n],this);a&&this.postPipelines.push(a)}t&&(this.pipelineData=i?xS(t):t)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(e,t){var i=this.pipelineData;return t===void 0?delete i[e]:i[e]=t,this},getPostPipeline:function(e){for(var t=this.postPipelines,i=[],r=0;r<t.length;r++){var s=t[r];(typeof e=="string"&&s.name===e||s instanceof e)&&i.push(s)}return i.length===1?i[0]:i},resetPipeline:function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),this.pipeline=this.defaultPipeline,e&&(this.postPipelines=[],this.hasPostPipeline=!1),t&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(e){e===void 0&&(e=!1);for(var t=this.postPipelines,i=0;i<t.length;i++)t[i].destroy();this.postPipelines=[],this.hasPostPipeline=!1,e&&(this.pipelineData={})},removePostPipeline:function(e){for(var t=this.postPipelines,i=t.length-1;i>=0;i--){var r=t[i];(typeof e=="string"&&r.name===e||typeof e!="string"&&r instanceof e)&&(r.destroy(),Doe(t,i))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};yS.exports=Ioe});var Zd=l((Z3e,TS)=>{var Noe={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,t){return t===void 0&&(t=e),this.scrollFactorX=e,this.scrollFactorY=t,this}};TS.exports=Noe});var SS=l((J3e,ES)=>{var Goe={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){return e===void 0&&(e=this.frame),this.width=e.realWidth,this.height=e.realHeight,this},setSize:function(e,t){return this.width=e,this.height=t,this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this}};ES.exports=Goe});var CS=l((Q3e,wS)=>{var _S=8,Boe={texture:null,frame:null,isCropped:!1,setTexture:function(e,t){return this.texture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=!0),this.frame=this.texture.get(e),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~_S:this.renderFlags|=_S,this._sizeComponent&&t&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};wS.exports=Boe});var AS=l(($3e,qS)=>{var RS=8,Uoe={texture:null,frame:null,isCropped:!1,setCrop:function(e,t,i,r){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,t,i,r,this.flipX,this.flipY);else{var s=e;this.frame.setCropUVs(this._crop,s.x,s.y,s.width,s.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(e,t){return this.texture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=!0),this.frame=this.texture.get(e),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~RS:this.renderFlags|=RS,this._sizeComponent&&t&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};qS.exports=Uoe});var PS=l((j3e,bS)=>{var koe={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,t,i,r){return e===void 0&&(e=16777215),t===void 0&&(t=e,i=e,r=e),this.tintTopLeft=e,this.tintTopRight=t,this.tintBottomLeft=i,this.tintBottomRight=r,this.tintFill=!1,this},setTintFill:function(e,t,i,r){return this.setTint(e,t,i,r),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};bS.exports=koe});var Mo=l((eYe,MS)=>{var zoe=function(e){var t={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(t.textureKey=e.texture.key,t.frameKey=e.frame.name),t};MS.exports=zoe});var Tt=l((tYe,LS)=>{var Yoe=C(),Xoe=Oe(),Voe=xe(),Woe=new Yoe({initialize:function(t,i,r,s,n,a){t===void 0&&(t=1),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=1),n===void 0&&(n=0),a===void 0&&(a=0),this.matrix=new Float32Array([t,i,r,s,n,a,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(e){this.matrix[0]=e}},b:{get:function(){return this.matrix[1]},set:function(e){this.matrix[1]=e}},c:{get:function(){return this.matrix[2]},set:function(e){this.matrix[2]=e}},d:{get:function(){return this.matrix[3]},set:function(e){this.matrix[3]=e}},e:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},f:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},tx:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},ty:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var e=this.matrix,t=e[0],i=e[1],r=e[2],s=e[3];return t||i?i>0?Math.acos(t/this.scaleX):-Math.acos(t/this.scaleX):r||s?Xoe.TAU-(s>0?Math.acos(-r/this.scaleY):-Math.acos(r/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var e=this.matrix;return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,this},translate:function(e,t){var i=this.matrix;return i[4]=i[0]*e+i[2]*t+i[4],i[5]=i[1]*e+i[3]*t+i[5],this},scale:function(e,t){var i=this.matrix;return i[0]*=e,i[1]*=e,i[2]*=t,i[3]*=t,this},rotate:function(e){var t=Math.sin(e),i=Math.cos(e),r=this.matrix,s=r[0],n=r[1],a=r[2],h=r[3];return r[0]=s*i+a*t,r[1]=n*i+h*t,r[2]=s*-t+a*i,r[3]=n*-t+h*i,this},multiply:function(e,t){var i=this.matrix,r=e.matrix,s=i[0],n=i[1],a=i[2],h=i[3],o=i[4],u=i[5],f=r[0],d=r[1],v=r[2],c=r[3],p=r[4],m=r[5],x=t===void 0?this:t;return x.a=f*s+d*a,x.b=f*n+d*h,x.c=v*s+c*a,x.d=v*n+c*h,x.e=p*s+m*a+o,x.f=p*n+m*h+u,x},multiplyWithOffset:function(e,t,i){var r=this.matrix,s=e.matrix,n=r[0],a=r[1],h=r[2],o=r[3],u=r[4],f=r[5],d=t*n+i*h+u,v=t*a+i*o+f,c=s[0],p=s[1],m=s[2],x=s[3],g=s[4],y=s[5];return r[0]=c*n+p*h,r[1]=c*a+p*o,r[2]=m*n+x*h,r[3]=m*a+x*o,r[4]=g*n+y*h+d,r[5]=g*a+y*o+v,this},transform:function(e,t,i,r,s,n){var a=this.matrix,h=a[0],o=a[1],u=a[2],f=a[3],d=a[4],v=a[5];return a[0]=e*h+t*u,a[1]=e*o+t*f,a[2]=i*h+r*u,a[3]=i*o+r*f,a[4]=s*h+n*u+d,a[5]=s*o+n*f+v,this},transformPoint:function(e,t,i){i===void 0&&(i={x:0,y:0});var r=this.matrix,s=r[0],n=r[1],a=r[2],h=r[3],o=r[4],u=r[5];return i.x=e*s+t*a+o,i.y=e*n+t*h+u,i},invert:function(){var e=this.matrix,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=t*s-i*r;return e[0]=s/h,e[1]=-i/h,e[2]=-r/h,e[3]=t/h,e[4]=(r*a-s*n)/h,e[5]=-(t*a-i*n)/h,this},copyFrom:function(e){var t=this.matrix;return t[0]=e.a,t[1]=e.b,t[2]=e.c,t[3]=e.d,t[4]=e.e,t[5]=e.f,this},copyFromArray:function(e){var t=this.matrix;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this},copyToContext:function(e){var t=this.matrix;return e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e},setToContext:function(e){var t=this.matrix;return e.setTransform(t[0],t[1],t[2],t[3],t[4],t[5]),e},copyToArray:function(e){var t=this.matrix;return e===void 0?e=[t[0],t[1],t[2],t[3],t[4],t[5]]:(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5]),e},setTransform:function(e,t,i,r,s,n){var a=this.matrix;return a[0]=e,a[1]=t,a[2]=i,a[3]=r,a[4]=s,a[5]=n,this},decomposeMatrix:function(){var e=this.decomposedMatrix,t=this.matrix,i=t[0],r=t[1],s=t[2],n=t[3],a=i*n-r*s;if(e.translateX=t[4],e.translateY=t[5],i||r){var h=Math.sqrt(i*i+r*r);e.rotation=r>0?Math.acos(i/h):-Math.acos(i/h),e.scaleX=h,e.scaleY=a/h}else if(s||n){var o=Math.sqrt(s*s+n*n);e.rotation=Math.PI*.5-(n>0?Math.acos(-s/o):-Math.acos(s/o)),e.scaleX=a/o,e.scaleY=o}else e.rotation=0,e.scaleX=0,e.scaleY=0;return e},applyITRS:function(e,t,i,r,s){var n=this.matrix,a=Math.sin(i),h=Math.cos(i);return n[4]=e,n[5]=t,n[0]=h*r,n[1]=a*r,n[2]=-a*s,n[3]=h*s,this},applyInverse:function(e,t,i){i===void 0&&(i=new Voe);var r=this.matrix,s=r[0],n=r[1],a=r[2],h=r[3],o=r[4],u=r[5],f=1/(s*h+a*-n);return i.x=h*f*e+-a*f*t+(u*a-o*h)*f,i.y=s*f*t+-n*f*e+(-u*s+o*n)*f,i},getX:function(e,t){return e*this.a+t*this.c+this.e},getY:function(e,t){return e*this.b+t*this.d+this.f},getXRound:function(e,t,i){var r=this.getX(e,t);return i&&(r=Math.round(r)),r},getYRound:function(e,t,i){var r=this.getY(e,t);return i&&(r=Math.round(r)),r},getCSSMatrix:function(){var e=this.matrix;return"matrix("+e[0]+","+e[1]+","+e[2]+","+e[3]+","+e[4]+","+e[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});LS.exports=Woe});var Lo=l((iYe,OS)=>{var Hoe=xe(),Koe=function(e,t,i,r,s,n,a,h){h===void 0&&(h=new Hoe);var o=Math.sin(s),u=Math.cos(s),f=u*n,d=o*n,v=-o*a,c=u*a,p=1/(f*c+v*-d);return h.x=c*p*e+-v*p*t+(r*v-i*c)*p,h.y=f*p*t+-d*p*e+(-r*f+i*d)*p,h};OS.exports=Koe});var Xr=l((rYe,FS)=>{var Zoe=function(e,t,i){var r=i-t;return t+((e-t)%r+r)%r};FS.exports=Zoe});var Jd=l((sYe,DS)=>{var Joe=Xr(),Qoe=function(e){return Joe(e,-Math.PI,Math.PI)};DS.exports=Qoe});var Qd=l((nYe,IS)=>{var $oe=Xr(),joe=function(e){return $oe(e,-180,180)};IS.exports=joe});var jd=l((aYe,BS)=>{var NS=Oe(),$d=Tt(),eue=Lo(),tue=Jd(),GS=Qd(),iue=xe(),Cn=4,rue={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(e){this._scaleX=e,this._scaleY=e,e===0?this.renderFlags&=~Cn:this.renderFlags|=Cn}},scaleX:{get:function(){return this._scaleX},set:function(e){this._scaleX=e,e===0?this.renderFlags&=~Cn:this.renderFlags|=Cn}},scaleY:{get:function(){return this._scaleY},set:function(e){this._scaleY=e,e===0?this.renderFlags&=~Cn:this.renderFlags|=Cn}},angle:{get:function(){return GS(this._rotation*NS.RAD_TO_DEG)},set:function(e){this.rotation=GS(e)*NS.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=tue(e)}},setPosition:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=e),i===void 0&&(i=0),r===void 0&&(r=0),this.x=e,this.y=t,this.z=i,this.w=r,this},copyPosition:function(e){return e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.z!==void 0&&(this.z=e.z),e.w!==void 0&&(this.w=e.w),this},setRandomPosition:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.scene.sys.scale.width),r===void 0&&(r=this.scene.sys.scale.height),this.x=e+Math.random()*i,this.y=t+Math.random()*r,this},setRotation:function(e){return e===void 0&&(e=0),this.rotation=e,this},setAngle:function(e){return e===void 0&&(e=0),this.angle=e,this},setScale:function(e,t){return e===void 0&&(e=1),t===void 0&&(t=e),this.scaleX=e,this.scaleY=t,this},setX:function(e){return e===void 0&&(e=0),this.x=e,this},setY:function(e){return e===void 0&&(e=0),this.y=e,this},setZ:function(e){return e===void 0&&(e=0),this.z=e,this},setW:function(e){return e===void 0&&(e=0),this.w=e,this},getLocalTransformMatrix:function(e){return e===void 0&&(e=new $d),e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(e,t){e===void 0&&(e=new $d),t===void 0&&(t=new $d);var i=this.parentContainer;if(!i)return this.getLocalTransformMatrix(e);for(e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);i;)t.applyITRS(i.x,i.y,i._rotation,i._scaleX,i._scaleY),t.multiply(e,e),i=i.parentContainer;return e},getLocalPoint:function(e,t,i,r){i||(i=new iue),r||(r=this.scene.sys.cameras.main);var s=r.scrollX,n=r.scrollY,a=e+s*this.scrollFactorX-s,h=t+n*this.scrollFactorY-n;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(a,h,i):eue(a,h,this.x,this.y,this.rotation,this.scaleX,this.scaleY,i),this._originComponent&&(i.x+=this._displayOriginX,i.y+=this._displayOriginY),i},getParentRotation:function(){for(var e=0,t=this.parentContainer;t;)e+=t.rotation,t=t.parentContainer;return e}};BS.exports=rue});var ev=l((hYe,kS)=>{var US=1,sue={_visible:!0,visible:{get:function(){return this._visible},set:function(e){e?(this._visible=!0,this.renderFlags|=US):(this._visible=!1,this.renderFlags&=~US)}},setVisible:function(e){return this.visible=e,this}};kS.exports=sue});var ye=l((oYe,zS)=>{zS.exports={Alpha:DT(),AlphaSingle:Gd(),BlendMode:Bd(),ComputedSize:kT(),Crop:YT(),Depth:Ud(),Flip:WT(),GetBounds:lE(),Mask:Wd(),Origin:nS(),PathFollower:vS(),Pipeline:Kd(),ScrollFactor:Zd(),Size:SS(),Texture:CS(),TextureCrop:AS(),Tint:PS(),ToJSON:Mo(),Transform:jd(),TransformMatrix:Tt(),Visible:ev()}});var XS=l((uYe,YS)=>{YS.exports="changedata"});var WS=l((lYe,VS)=>{VS.exports="changedata-"});var KS=l((fYe,HS)=>{HS.exports="destroy"});var JS=l((dYe,ZS)=>{ZS.exports="removedata"});var $S=l((vYe,QS)=>{QS.exports="setdata"});var tv=l((cYe,jS)=>{jS.exports={CHANGE_DATA:XS(),CHANGE_DATA_KEY:WS(),DESTROY:KS(),REMOVE_DATA:JS(),SET_DATA:$S()}});var Js=l((pYe,e_)=>{var nue=C(),Tr=tv(),aue=new nue({initialize:function(t,i){this.parent=t,this.events=i,i||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(Tr.DESTROY,this.destroy,this)},get:function(e){var t=this.list;if(Array.isArray(e)){for(var i=[],r=0;r<e.length;r++)i.push(t[e[r]]);return i}else return t[e]},getAll:function(){var e={};for(var t in this.list)this.list.hasOwnProperty(t)&&(e[t]=this.list[t]);return e},query:function(e){var t={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(e)&&(t[i]=this.list[i]);return t},set:function(e,t){if(this._frozen)return this;if(typeof e=="string")return this.setValue(e,t);for(var i in e)this.setValue(i,e[i]);return this},inc:function(e,t){if(this._frozen)return this;t===void 0&&(t=1);var i=this.get(e);return i===void 0&&(i=0),this.set(e,i+t),this},toggle:function(e){return this._frozen?this:(this.set(e,!this.get(e)),this)},setValue:function(e,t){if(this._frozen)return this;if(this.has(e))this.values[e]=t;else{var i=this,r=this.list,s=this.events,n=this.parent;Object.defineProperty(this.values,e,{enumerable:!0,configurable:!0,get:function(){return r[e]},set:function(a){if(!i._frozen){var h=r[e];r[e]=a,s.emit(Tr.CHANGE_DATA,n,e,a,h),s.emit(Tr.CHANGE_DATA_KEY+e,n,a,h)}}}),r[e]=t,s.emit(Tr.SET_DATA,n,e,t)}return this},each:function(e,t){for(var i=[this.parent,null,void 0],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var s in this.list)i[1]=s,i[2]=this.list[s],e.apply(t,i);return this},merge:function(e,t){t===void 0&&(t=!0);for(var i in e)e.hasOwnProperty(i)&&(t||!t&&!this.has(i))&&this.setValue(i,e[i]);return this},remove:function(e){if(this._frozen)return this;if(Array.isArray(e))for(var t=0;t<e.length;t++)this.removeValue(e[t]);else return this.removeValue(e);return this},removeValue:function(e){if(this.has(e)){var t=this.list[e];delete this.list[e],delete this.values[e],this.events.emit(Tr.REMOVE_DATA,this.parent,e,t)}return this},pop:function(e){var t=void 0;return!this._frozen&&this.has(e)&&(t=this.list[e],delete this.list[e],delete this.values[e],this.events.emit(Tr.REMOVE_DATA,this.parent,e,t)),t},has:function(e){return this.list.hasOwnProperty(e)},setFreeze:function(e){return this._frozen=e,this},reset:function(){for(var e in this.list)delete this.list[e],delete this.values[e];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(Tr.CHANGE_DATA),this.events.off(Tr.SET_DATA),this.events.off(Tr.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(e){this._frozen=!!e}},count:{get:function(){var e=0;for(var t in this.list)this.list[t]!==void 0&&e++;return e}}});e_.exports=aue});var ue=l((mYe,iv)=>{"use strict";var hue=Object.prototype.hasOwnProperty,Lt="~";function za(){}Object.create&&(za.prototype=Object.create(null),new za().__proto__||(Lt=!1));function oue(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function t_(e,t,i,r,s){if(typeof i!="function")throw new TypeError("The listener must be a function");var n=new oue(i,r||e,s),a=Lt?Lt+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],n]:e._events[a].push(n):(e._events[a]=n,e._eventsCount++),e}function Oo(e,t){--e._eventsCount===0?e._events=new za:delete e._events[t]}function Et(){this._events=new za,this._eventsCount=0}Et.prototype.eventNames=function(){var t=[],i,r;if(this._eventsCount===0)return t;for(r in i=this._events)hue.call(i,r)&&t.push(Lt?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(i)):t};Et.prototype.listeners=function(t){var i=Lt?Lt+t:t,r=this._events[i];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,n=r.length,a=new Array(n);s<n;s++)a[s]=r[s].fn;return a};Et.prototype.listenerCount=function(t){var i=Lt?Lt+t:t,r=this._events[i];return r?r.fn?1:r.length:0};Et.prototype.emit=function(t,i,r,s,n,a){var h=Lt?Lt+t:t;if(!this._events[h])return!1;var o=this._events[h],u=arguments.length,f,d;if(o.fn){switch(o.once&&this.removeListener(t,o.fn,void 0,!0),u){case 1:return o.fn.call(o.context),!0;case 2:return o.fn.call(o.context,i),!0;case 3:return o.fn.call(o.context,i,r),!0;case 4:return o.fn.call(o.context,i,r,s),!0;case 5:return o.fn.call(o.context,i,r,s,n),!0;case 6:return o.fn.call(o.context,i,r,s,n,a),!0}for(d=1,f=new Array(u-1);d<u;d++)f[d-1]=arguments[d];o.fn.apply(o.context,f)}else{var v=o.length,c;for(d=0;d<v;d++)switch(o[d].once&&this.removeListener(t,o[d].fn,void 0,!0),u){case 1:o[d].fn.call(o[d].context);break;case 2:o[d].fn.call(o[d].context,i);break;case 3:o[d].fn.call(o[d].context,i,r);break;case 4:o[d].fn.call(o[d].context,i,r,s);break;default:if(!f)for(c=1,f=new Array(u-1);c<u;c++)f[c-1]=arguments[c];o[d].fn.apply(o[d].context,f)}}return!0};Et.prototype.on=function(t,i,r){return t_(this,t,i,r,!1)};Et.prototype.once=function(t,i,r){return t_(this,t,i,r,!0)};Et.prototype.removeListener=function(t,i,r,s){var n=Lt?Lt+t:t;if(!this._events[n])return this;if(!i)return Oo(this,n),this;var a=this._events[n];if(a.fn)a.fn===i&&(!s||a.once)&&(!r||a.context===r)&&Oo(this,n);else{for(var h=0,o=[],u=a.length;h<u;h++)(a[h].fn!==i||s&&!a[h].once||r&&a[h].context!==r)&&o.push(a[h]);o.length?this._events[n]=o.length===1?o[0]:o:Oo(this,n)}return this};Et.prototype.removeAllListeners=function(t){var i;return t?(i=Lt?Lt+t:t,this._events[i]&&Oo(this,i)):(this._events=new za,this._eventsCount=0),this};Et.prototype.off=Et.prototype.removeListener;Et.prototype.addListener=Et.prototype.on;Et.prefixed=Lt;Et.EventEmitter=Et;typeof iv!="undefined"&&(iv.exports=Et)});var r_=l((gYe,i_)=>{i_.exports="addedtoscene"});var n_=l((xYe,s_)=>{s_.exports="destroy"});var h_=l((yYe,a_)=>{a_.exports="removedfromscene"});var u_=l((TYe,o_)=>{o_.exports="complete"});var f_=l((EYe,l_)=>{l_.exports="created"});var v_=l((SYe,d_)=>{d_.exports="error"});var p_=l((_Ye,c_)=>{c_.exports="loop"});var g_=l((wYe,m_)=>{m_.exports="play"});var y_=l((CYe,x_)=>{x_.exports="seeked"});var E_=l((RYe,T_)=>{T_.exports="seeking"});var __=l((qYe,S_)=>{S_.exports="stop"});var C_=l((AYe,w_)=>{w_.exports="timeout"});var q_=l((bYe,R_)=>{R_.exports="unlocked"});var Vr=l((PYe,A_)=>{A_.exports={ADDED_TO_SCENE:r_(),DESTROY:n_(),REMOVED_FROM_SCENE:h_(),VIDEO_COMPLETE:u_(),VIDEO_CREATED:f_(),VIDEO_ERROR:v_(),VIDEO_LOOP:p_(),VIDEO_PLAY:g_(),VIDEO_SEEKED:y_(),VIDEO_SEEKING:E_(),VIDEO_STOP:__(),VIDEO_TIMEOUT:C_(),VIDEO_UNLOCKED:q_()}});var P_=l((MYe,b_)=>{b_.exports="addedtoscene"});var L_=l((LYe,M_)=>{M_.exports="boot"});var F_=l((OYe,O_)=>{O_.exports="create"});var I_=l((FYe,D_)=>{D_.exports="destroy"});var G_=l((DYe,N_)=>{N_.exports="pause"});var U_=l((IYe,B_)=>{B_.exports="postupdate"});var z_=l((NYe,k_)=>{k_.exports="prerender"});var X_=l((GYe,Y_)=>{Y_.exports="preupdate"});var W_=l((BYe,V_)=>{V_.exports="ready"});var K_=l((UYe,H_)=>{H_.exports="removedfromscene"});var J_=l((kYe,Z_)=>{Z_.exports="render"});var $_=l((zYe,Q_)=>{Q_.exports="resume"});var ew=l((YYe,j_)=>{j_.exports="shutdown"});var iw=l((XYe,tw)=>{tw.exports="sleep"});var sw=l((VYe,rw)=>{rw.exports="start"});var aw=l((WYe,nw)=>{nw.exports="transitioncomplete"});var ow=l((HYe,hw)=>{hw.exports="transitioninit"});var lw=l((KYe,uw)=>{uw.exports="transitionout"});var dw=l((ZYe,fw)=>{fw.exports="transitionstart"});var cw=l((JYe,vw)=>{vw.exports="transitionwake"});var mw=l((QYe,pw)=>{pw.exports="update"});var xw=l(($Ye,gw)=>{gw.exports="wake"});var Ge=l((jYe,yw)=>{yw.exports={ADDED_TO_SCENE:P_(),BOOT:L_(),CREATE:F_(),DESTROY:I_(),PAUSE:G_(),POST_UPDATE:U_(),PRE_RENDER:z_(),PRE_UPDATE:X_(),READY:W_(),REMOVED_FROM_SCENE:K_(),RENDER:J_(),RESUME:$_(),SHUTDOWN:ew(),SLEEP:iw(),START:sw(),TRANSITION_COMPLETE:aw(),TRANSITION_INIT:ow(),TRANSITION_OUT:lw(),TRANSITION_START:dw(),TRANSITION_WAKE:cw(),UPDATE:mw(),WAKE:xw()}});var Fe=l((eXe,Sw)=>{var uue=C(),lue=Mo(),Ya=Js(),Tw=ue(),Xa=Vr(),Ew=Ge(),rv=new uue({Extends:Tw,initialize:function(t,i){Tw.call(this),this.scene=t,this.displayList=null,this.type=i,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(Xa.ADDED_TO_SCENE,this.addedToScene,this),this.on(Xa.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(e){return this.active=e,this},setName:function(e){return this.name=e,this},setState:function(e){return this.state=e,this},setDataEnabled:function(){return this.data||(this.data=new Ya(this)),this},setData:function(e,t){return this.data||(this.data=new Ya(this)),this.data.set(e,t),this},incData:function(e,t){return this.data||(this.data=new Ya(this)),this.data.inc(e,t),this},toggleData:function(e){return this.data||(this.data=new Ya(this)),this.data.toggle(e),this},getData:function(e){return this.data||(this.data=new Ya(this)),this.data.get(e)},setInteractive:function(e,t,i){return this.scene.sys.input.enable(this,e,t,i),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return lue(this)},willRender:function(e){return!(rv.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&e.id)},getIndexList:function(){for(var e=this,t=this.parentContainer,i=[];t&&(i.unshift(t.getIndex(e)),e=t,t.parentContainer);)t=t.parentContainer;return this.displayList?i.unshift(this.displayList.getIndex(e)):i.unshift(this.scene.sys.displayList.getIndex(e)),i},addToDisplayList:function(e){return e===void 0&&(e=this.scene.sys.displayList),this.displayList&&this.displayList!==e&&this.removeFromDisplayList(),e.exists(this)||(this.displayList=e,e.add(this,!0),e.queueDepthSort(),this.emit(Xa.ADDED_TO_SCENE,this,this.scene),e.events.emit(Ew.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var e=this.displayList||this.scene.sys.displayList;return e.exists(this)&&(e.remove(this,!0),e.queueDepthSort(),this.displayList=null,this.emit(Xa.REMOVED_FROM_SCENE,this,this.scene),e.events.emit(Ew.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(e){!this.scene||this.ignoreDestroy||(e===void 0&&(e=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(Xa.DESTROY,this,e),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});rv.RENDER_MASK=15;Sw.exports=rv});var Va=l((tXe,ww)=>{var fue=_i(),due=zr(),vue=kr(),cue=C(),Rn=ye(),_w=Fe(),pue=Ae(),mue=Yr(),gue=new cue({Extends:_w,Mixins:[Rn.Depth,Rn.GetBounds,Rn.Origin,Rn.Transform,Rn.ScrollFactor,Rn.Visible],initialize:function(t,i,r,s,n){s===void 0&&(s=1),n===void 0&&(n=s),_w.call(this,t,"Zone"),this.setPosition(i,r),this.width=s,this.height=n,this.blendMode=fue.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,t,i){i===void 0&&(i=!0),this.width=e,this.height=t,this.updateDisplayOrigin();var r=this.input;return i&&r&&!r.customHitArea&&(r.hitArea.width=e,r.hitArea.height=t),this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this},setCircleDropZone:function(e){return this.setDropZone(new due(0,0,e),vue)},setRectangleDropZone:function(e,t){return this.setDropZone(new pue(0,0,e,t),mue)},setDropZone:function(e,t){return this.input||this.setInteractive(e,t,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(e,t,i){i.addToRenderList(t)},renderWebGL:function(e,t,i){i.addToRenderList(t)}});ww.exports=gue});var qw=l((iXe,Rw)=>{var xue=Od(),yue=Ga(),Qs=z(),Cw=B(),Tue=Va(),Pi=new Tue({sys:{queueDepthSort:Cw,events:{once:Cw}}},0,0,1,1),Eue=function(e,t){t===void 0&&(t={});var i=t.hasOwnProperty("width"),r=t.hasOwnProperty("height"),s=Qs(t,"width",-1),n=Qs(t,"height",-1),a=Qs(t,"cellWidth",1),h=Qs(t,"cellHeight",a),o=Qs(t,"position",yue.TOP_LEFT),u=Qs(t,"x",0),f=Qs(t,"y",0),d=0,v=0,c=s*a,p=n*h;Pi.setPosition(u,f),Pi.setSize(a,h);for(var m=0;m<e.length;m++)if(xue(e[m],Pi,o),i&&s===-1)Pi.x+=a;else if(r&&n===-1)Pi.y+=h;else if(r&&!i){if(v+=h,Pi.y+=h,v===p&&(v=0,d+=a,Pi.y=f,Pi.x+=a,d===c))break}else if(d+=a,Pi.x+=a,d===c&&(d=0,v+=h,Pi.x=u,Pi.y+=h,v===p))break;return e};Rw.exports=Eue});var bw=l((rXe,Aw)=>{var Sue=Ai(),_ue=function(e,t,i,r,s){return Sue(e,"alpha",t,i,r,s)};Aw.exports=_ue});var Mw=l((sXe,Pw)=>{var wue=Ai(),Cue=function(e,t,i,r,s){return wue(e,"x",t,i,r,s)};Pw.exports=Cue});var Fw=l((nXe,Ow)=>{var Lw=Ai(),Rue=function(e,t,i,r,s,n,a){return i==null&&(i=t),Lw(e,"x",t,r,n,a),Lw(e,"y",i,s,n,a)};Ow.exports=Rue});var Iw=l((aXe,Dw)=>{var que=Ai(),Aue=function(e,t,i,r,s){return que(e,"y",t,i,r,s)};Dw.exports=Aue});var Gw=l((hXe,Nw)=>{var bue=function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=6.28);for(var s=i,n=(r-i)/e.length,a=0;a<e.length;a++)e[a].x=t.x+t.radius*Math.cos(s),e[a].y=t.y+t.radius*Math.sin(s),s+=n;return e};Nw.exports=bue});var Uw=l((oXe,Bw)=>{var Pue=function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=6.28);for(var s=i,n=(r-i)/e.length,a=t.width/2,h=t.height/2,o=0;o<e.length;o++)e[o].x=t.x+a*Math.cos(s),e[o].y=t.y+h*Math.sin(s),s+=n;return e};Bw.exports=Pue});var zw=l((uXe,kw)=>{var Mue=wo(),Lue=function(e,t){for(var i=Mue(t,e.length),r=0;r<e.length;r++){var s=e[r],n=i[r];s.x=n.x,s.y=n.y}return e};kw.exports=Lue});var sv=l((lXe,Xw)=>{var Yw=Ua(),Oue=$(),Fue=function(e,t,i,r){if(r===void 0&&(r=[]),!t&&!i)return r;t?i=Math.round(Yw(e)/t):t=Yw(e)/i;for(var s=e.x,n=e.y,a=0,h=0;h<i;h++)switch(r.push(new Oue(s,n)),a){case 0:s+=t,s>=e.right&&(a=1,n+=s-e.right,s=e.right);break;case 1:n+=t,n>=e.bottom&&(a=2,s-=n-e.bottom,n=e.bottom);break;case 2:s-=t,s<=e.left&&(a=3,n-=e.left-s,s=e.left);break;case 3:n-=t,n<=e.top&&(a=0,n=e.top);break}return r};Xw.exports=Fue});var Fo=l((fXe,Vw)=>{var Due=function(e,t){t===void 0&&(t=1);for(var i=null,r=0;r<t;r++)i=e.shift(),e.push(i);return i};Vw.exports=Due});var Do=l((dXe,Ww)=>{var Iue=function(e,t){t===void 0&&(t=1);for(var i=null,r=0;r<t;r++)i=e.pop(),e.unshift(i);return i};Ww.exports=Iue});var Kw=l((vXe,Hw)=>{var Nue=sv(),Gue=Fo(),Bue=Do(),Uue=function(e,t,i){i===void 0&&(i=0);var r=Nue(t,!1,e.length);i>0?Gue(r,i):i<0&&Bue(r,Math.abs(i));for(var s=0;s<e.length;s++)e[s].x=r[s].x,e[s].y=r[s].y;return e};Hw.exports=Uue});var nv=l((cXe,Zw)=>{var kue=function(e,t,i){t===void 0&&(t=1),i===void 0&&(i=[]);var r=Math.round(e.x1),s=Math.round(e.y1),n=Math.round(e.x2),a=Math.round(e.y2),h=Math.abs(n-r),o=Math.abs(a-s),u=r<n?1:-1,f=s<a?1:-1,d=h-o;i.push({x:r,y:s});for(var v=1;!(r===n&&s===a);){var c=d<<1;c>-o&&(d-=o,r+=u),c<h&&(d+=h,s+=f),v%t===0&&i.push({x:r,y:s}),v++}return i};Zw.exports=kue});var Qw=l((pXe,Jw)=>{var av=nv(),zue=function(e,t,i){var r=av({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2},i),s=av({x1:t.x2,y1:t.y2,x2:t.x3,y2:t.y3},i),n=av({x1:t.x3,y1:t.y3,x2:t.x1,y2:t.y1},i);r.pop(),s.pop(),n.pop(),r=r.concat(s,n);for(var a=r.length/e.length,h=0,o=0;o<e.length;o++){var u=e[o],f=r[Math.floor(h)];u.x=f.x,u.y=f.y,h+=a}return e};Jw.exports=zue});var jw=l((mXe,$w)=>{var Yue=function(e,t,i){for(var r=0;r<e.length;r++){var s=e[r];s.anims&&s.anims.play(t,i)}return e};$w.exports=Yue});var vt=l((gXe,e1)=>{var Xue=function(e,t,i,r,s,n){r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=1);var a,h=0,o=e.length;if(n===1)for(a=s;a<o;a++)e[a][t]=i+h*r,h++;else for(a=s;a>=0;a--)e[a][t]=i+h*r,h++;return e};e1.exports=Xue});var i1=l((xXe,t1)=>{var Vue=So(),Wue=function(e,t){for(var i=0;i<e.length;i++)Vue(t,e[i]);return e};t1.exports=Wue});var Io=l((yXe,r1)=>{var Hue=$(),Kue=function(e,t){t===void 0&&(t=new Hue);var i=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return t.x=e.x+r*Math.cos(i)*e.width/2,t.y=e.y+r*Math.sin(i)*e.height/2,t};r1.exports=Kue});var n1=l((TXe,s1)=>{var Zue=Io(),Jue=function(e,t){for(var i=0;i<e.length;i++)Zue(t,e[i]);return e};s1.exports=Jue});var h1=l((EXe,a1)=>{var Que=Co(),$ue=function(e,t){for(var i=0;i<e.length;i++)Que(t,e[i]);return e};a1.exports=$ue});var u1=l((SXe,o1)=>{var jue=qo(),ele=function(e,t){for(var i=0;i<e.length;i++)jue(t,e[i]);return e};o1.exports=ele});var No=l((_Xe,l1)=>{var tle=$(),ile=function(e,t){t===void 0&&(t=new tle);var i=e.x2-e.x1,r=e.y2-e.y1,s=e.x3-e.x1,n=e.y3-e.y1,a=Math.random(),h=Math.random();return a+h>=1&&(a=1-a,h=1-h),t.x=e.x1+(i*a+s*h),t.y=e.y1+(r*a+n*h),t};l1.exports=ile});var d1=l((wXe,f1)=>{var rle=No(),sle=function(e,t){for(var i=0;i<e.length;i++)rle(t,e[i]);return e};f1.exports=sle});var c1=l((CXe,v1)=>{var nle=Ai(),ale=function(e,t,i,r,s){return nle(e,"rotation",t,i,r,s)};v1.exports=ale});var Go=l((RXe,p1)=>{var hle=function(e,t,i,r,s){var n=r+Math.atan2(e.y-i,e.x-t);return e.x=t+s*Math.cos(n),e.y=i+s*Math.sin(n),e};p1.exports=hle});var Wr=l((qXe,m1)=>{var ole=function(e,t,i,r){var s=e-i,n=t-r;return Math.sqrt(s*s+n*n)};m1.exports=ole});var x1=l((AXe,g1)=>{var ule=Go(),lle=Wr(),fle=function(e,t,i){for(var r=t.x,s=t.y,n=0;n<e.length;n++){var a=e[n];ule(a,r,s,i,Math.max(1,lle(a.x,a.y,r,s)))}return e};g1.exports=fle});var T1=l((bXe,y1)=>{var dle=Go(),vle=function(e,t,i,r){var s=t.x,n=t.y;if(r===0)return e;for(var a=0;a<e.length;a++)dle(e[a],s,n,i,r);return e};y1.exports=vle});var S1=l((PXe,E1)=>{var cle=Ai(),ple=function(e,t,i,r,s){return cle(e,"scaleX",t,i,r,s)};E1.exports=ple});var C1=l((MXe,w1)=>{var _1=Ai(),mle=function(e,t,i,r,s,n,a){return i==null&&(i=t),_1(e,"scaleX",t,r,n,a),_1(e,"scaleY",i,s,n,a)};w1.exports=mle});var q1=l((LXe,R1)=>{var gle=Ai(),xle=function(e,t,i,r,s){return gle(e,"scaleY",t,i,r,s)};R1.exports=xle});var b1=l((OXe,A1)=>{var yle=vt(),Tle=function(e,t,i,r,s){return yle(e,"alpha",t,i,r,s)};A1.exports=Tle});var M1=l((FXe,P1)=>{var Ele=vt(),Sle=function(e,t,i,r){return Ele(e,"blendMode",t,0,i,r)};P1.exports=Sle});var O1=l((DXe,L1)=>{var _le=vt(),wle=function(e,t,i,r,s){return _le(e,"depth",t,i,r,s)};L1.exports=wle});var D1=l((IXe,F1)=>{var Cle=function(e,t,i){for(var r=0;r<e.length;r++)e[r].setInteractive(t,i);return e};F1.exports=Cle});var G1=l((NXe,N1)=>{var I1=vt(),Rle=function(e,t,i,r,s,n,a){return i==null&&(i=t),I1(e,"originX",t,r,n,a),I1(e,"originY",i,s,n,a),e.forEach(function(h){h.updateDisplayOrigin()}),e};N1.exports=Rle});var U1=l((GXe,B1)=>{var qle=vt(),Ale=function(e,t,i,r,s){return qle(e,"rotation",t,i,r,s)};B1.exports=Ale});var Y1=l((BXe,z1)=>{var k1=vt(),ble=function(e,t,i,r,s,n,a){return i==null&&(i=t),k1(e,"scaleX",t,r,n,a),k1(e,"scaleY",i,s,n,a)};z1.exports=ble});var V1=l((UXe,X1)=>{var Ple=vt(),Mle=function(e,t,i,r,s){return Ple(e,"scaleX",t,i,r,s)};X1.exports=Mle});var H1=l((kXe,W1)=>{var Lle=vt(),Ole=function(e,t,i,r,s){return Lle(e,"scaleY",t,i,r,s)};W1.exports=Ole});var J1=l((zXe,Z1)=>{var K1=vt(),Fle=function(e,t,i,r,s,n,a){return i==null&&(i=t),K1(e,"scrollFactorX",t,r,n,a),K1(e,"scrollFactorY",i,s,n,a)};Z1.exports=Fle});var $1=l((YXe,Q1)=>{var Dle=vt(),Ile=function(e,t,i,r,s){return Dle(e,"scrollFactorX",t,i,r,s)};Q1.exports=Ile});var eC=l((XXe,j1)=>{var Nle=vt(),Gle=function(e,t,i,r,s){return Nle(e,"scrollFactorY",t,i,r,s)};j1.exports=Gle});var iC=l((VXe,tC)=>{var Ble=function(e,t,i,r,s){for(var n=0;n<e.length;n++)e[n].setTint(t,i,r,s);return e};tC.exports=Ble});var sC=l((WXe,rC)=>{var Ule=vt(),kle=function(e,t,i,r){return Ule(e,"visible",t,0,i,r)};rC.exports=kle});var aC=l((HXe,nC)=>{var zle=vt(),Yle=function(e,t,i,r,s){return zle(e,"x",t,i,r,s)};nC.exports=Yle});var uC=l((KXe,oC)=>{var hC=vt(),Xle=function(e,t,i,r,s,n,a){return i==null&&(i=t),hC(e,"x",t,r,n,a),hC(e,"y",i,s,n,a)};oC.exports=Xle});var fC=l((ZXe,lC)=>{var Vle=vt(),Wle=function(e,t,i,r,s){return Vle(e,"y",t,i,r,s)};lC.exports=Wle});var vC=l((JXe,dC)=>{var Hle=xe(),Kle=function(e,t,i,r,s){r===void 0&&(r=0),s===void 0&&(s=new Hle);var n,a;if(e.length>1){var h,o,u,f;if(r===0){var d=e.length-1;for(n=e[d].x,a=e[d].y,h=d-1;h>=0;h--)f=e[h],o=f.x,u=f.y,f.x=n,f.y=a,n=o,a=u;e[d].x=t,e[d].y=i}else{for(n=e[0].x,a=e[0].y,h=1;h<e.length;h++)f=e[h],o=f.x,u=f.y,f.x=n,f.y=a,n=o,a=u;e[0].x=t,e[0].y=i}}else n=e[0].x,a=e[0].y,e[0].x=t,e[0].y=i;return s.x=n,s.y=a,s};dC.exports=Kle});var Bo=l((QXe,cC)=>{var Zle=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[i],e[i]=r}return e};cC.exports=Zle});var mC=l(($Xe,pC)=>{var Jle=Bo(),Qle=function(e){return Jle(e)};pC.exports=Qle});var Uo=l((jXe,gC)=>{var $le=function(e,t,i){return e=Math.max(0,Math.min(1,(e-t)/(i-t))),e*e*e*(e*(e*6-15)+10)};gC.exports=$le});var TC=l((eVe,yC)=>{var xC=Uo(),jle=function(e,t,i,r,s){s===void 0&&(s=!1);var n=Math.abs(r-i)/e.length,a;if(s)for(a=0;a<e.length;a++)e[a][t]+=xC(a*n,i,r);else for(a=0;a<e.length;a++)e[a][t]=xC(a*n,i,r);return e};yC.exports=jle});var ko=l((tVe,EC)=>{var efe=function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))};EC.exports=efe});var wC=l((iVe,_C)=>{var SC=ko(),tfe=function(e,t,i,r,s){s===void 0&&(s=!1);var n=Math.abs(r-i)/e.length,a;if(s)for(a=0;a<e.length;a++)e[a][t]+=SC(a*n,i,r);else for(a=0;a<e.length;a++)e[a][t]=SC(a*n,i,r);return e};_C.exports=tfe});var RC=l((rVe,CC)=>{var ife=function(e,t,i,r,s){s===void 0&&(s=!1);var n=Math.abs(r-i)/e.length,a;if(s)for(a=0;a<e.length;a++)e[a][t]+=a*n+i;else for(a=0;a<e.length;a++)e[a][t]=a*n+i;return e};CC.exports=ife});var AC=l((sVe,qC)=>{var rfe=function(e){for(var t=0;t<e.length;t++)e[t].visible=!e[t].visible;return e};qC.exports=rfe});var MC=l((nVe,PC)=>{var bC=Xr(),sfe=function(e,t,i){i===void 0&&(i=0);for(var r=0;r<e.length;r++){var s=e[r];s.x=bC(s.x,t.left-i,t.right+i),s.y=bC(s.y,t.top-i,t.bottom+i)}return e};PC.exports=sfe});var hv=l((aVe,LC)=>{LC.exports={AlignTo:Qy(),Angle:eT(),Call:iT(),GetFirst:sT(),GetLast:aT(),GridAlign:qw(),IncAlpha:bw(),IncX:Mw(),IncXY:Fw(),IncY:Iw(),PlaceOnCircle:Gw(),PlaceOnEllipse:Uw(),PlaceOnLine:zw(),PlaceOnRectangle:Kw(),PlaceOnTriangle:Qw(),PlayAnimation:jw(),PropertyValueInc:Ai(),PropertyValueSet:vt(),RandomCircle:i1(),RandomEllipse:n1(),RandomLine:h1(),RandomRectangle:u1(),RandomTriangle:d1(),Rotate:c1(),RotateAround:x1(),RotateAroundDistance:T1(),ScaleX:S1(),ScaleXY:C1(),ScaleY:q1(),SetAlpha:b1(),SetBlendMode:M1(),SetDepth:O1(),SetHitArea:D1(),SetOrigin:G1(),SetRotation:U1(),SetScale:Y1(),SetScaleX:V1(),SetScaleY:H1(),SetScrollFactor:J1(),SetScrollFactorX:$1(),SetScrollFactorY:eC(),SetTint:iC(),SetVisible:sC(),SetX:aC(),SetXY:uC(),SetY:fC(),ShiftPosition:vC(),Shuffle:mC(),SmootherStep:TC(),SmoothStep:wC(),Spread:RC(),ToggleVisible:AC(),WrapInRectangle:MC()}});var qn=l((hVe,OC)=>{var nfe=C(),afe=new nfe({initialize:function(t){if(this.entries={},this.size=0,Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i][0],t[i][1])},set:function(e,t){return this.has(e)||this.size++,this.entries[e]=t,this},get:function(e){if(this.has(e))return this.entries[e]},getArray:function(){var e=[],t=this.entries;for(var i in t)e.push(t[i]);return e},has:function(e){return this.entries.hasOwnProperty(e)},delete:function(e){return this.has(e)&&(delete this.entries[e],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(e){delete this.entries[e]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var e=[],t=this.entries;for(var i in t)e.push(t[i]);return e},dump:function(){var e=this.entries;console.group("Map");for(var t in e)console.log(t,e[t]);console.groupEnd()},each:function(e){var t=this.entries;for(var i in t)if(e(i,t[i])===!1)break;return this},contains:function(e){var t=this.entries;for(var i in t)if(t[i]===e)return!0;return!1},merge:function(e,t){t===void 0&&(t=!1);var i=this.entries,r=e.entries;for(var s in r)i.hasOwnProperty(s)&&t?i[s]=r[s]:this.set(s,r[s]);return this}});OC.exports=afe});var DC=l((oVe,FC)=>{FC.exports="add"});var NC=l((uVe,IC)=>{IC.exports="remove"});var ov=l((lVe,GC)=>{GC.exports={ADD:DC(),REMOVE:NC()}});var uv=l((fVe,UC)=>{var hfe=C(),ofe=qn(),ufe=ue(),BC=ov(),lfe=new hfe({initialize:function(){this.entries=new ofe,this.events=new ufe},add:function(e,t){return this.entries.set(e,t),this.events.emit(BC.ADD,this,e,t),this},has:function(e){return this.entries.has(e)},exists:function(e){return this.entries.has(e)},get:function(e){return this.entries.get(e)},remove:function(e){var t=this.get(e);return t&&(this.entries.delete(e),this.events.emit(BC.REMOVE,this,e,t.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});UC.exports=lfe});var lv=l((dVe,kC)=>{var jt=uv(),ffe=C(),dfe=Xe(),vfe=new ffe({initialize:function(t){this.game=t,this.binary=new jt,this.bitmapFont=new jt,this.json=new jt,this.physics=new jt,this.shader=new jt,this.audio=new jt,this.video=new jt,this.text=new jt,this.html=new jt,this.obj=new jt,this.tilemap=new jt,this.xml=new jt,this.custom={},this.game.events.once(dfe.DESTROY,this.destroy,this)},addCustom:function(e){return this.custom.hasOwnProperty(e)||(this.custom[e]=new jt),this.custom[e]},destroy:function(){for(var e=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],t=0;t<e.length;t++)this[e[t]].destroy(),this[e[t]]=null;for(var i in this.custom)this.custom[i].destroy();this.custom=null,this.game=null}});kC.exports=vfe});var YC=l((vVe,zC)=>{zC.exports={BaseCache:uv(),CacheManager:lv(),Events:ov()}});var VC=l((cVe,XC)=>{var cfe=C(),ei=he(),pfe=new cfe({initialize:function(t){this.camera=ei(t,"camera",null),this.left=ei(t,"left",null),this.right=ei(t,"right",null),this.up=ei(t,"up",null),this.down=ei(t,"down",null),this.zoomIn=ei(t,"zoomIn",null),this.zoomOut=ei(t,"zoomOut",null),this.zoomSpeed=ei(t,"zoomSpeed",.01),this.minZoom=ei(t,"minZoom",.001),this.maxZoom=ei(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var i=ei(t,"speed",null);typeof i=="number"?(this.speedX=i,this.speedY=i):(this.speedX=ei(t,"speed.x",0),this.speedY=ei(t,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(e){return this.camera=e,this},update:function(e){if(!!this.active){e===void 0&&(e=1);var t=this.camera;this.up&&this.up.isDown?t.scrollY-=this.speedY*e|0:this.down&&this.down.isDown&&(t.scrollY+=this.speedY*e|0),this.left&&this.left.isDown?t.scrollX-=this.speedX*e|0:this.right&&this.right.isDown&&(t.scrollX+=this.speedX*e|0),this.zoomIn&&this.zoomIn.isDown?(t.zoom-=this.zoomSpeed,t.zoom<this.minZoom&&(t.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(t.zoom+=this.zoomSpeed,t.zoom>this.maxZoom&&(t.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});XC.exports=pfe});var HC=l((pVe,WC)=>{var mfe=C(),Qe=he(),gfe=new mfe({initialize:function(t){this.camera=Qe(t,"camera",null),this.left=Qe(t,"left",null),this.right=Qe(t,"right",null),this.up=Qe(t,"up",null),this.down=Qe(t,"down",null),this.zoomIn=Qe(t,"zoomIn",null),this.zoomOut=Qe(t,"zoomOut",null),this.zoomSpeed=Qe(t,"zoomSpeed",.01),this.minZoom=Qe(t,"minZoom",.001),this.maxZoom=Qe(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var i=Qe(t,"acceleration",null);typeof i=="number"?(this.accelX=i,this.accelY=i):(this.accelX=Qe(t,"acceleration.x",0),this.accelY=Qe(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var r=Qe(t,"drag",null);typeof r=="number"?(this.dragX=r,this.dragY=r):(this.dragX=Qe(t,"drag.x",0),this.dragY=Qe(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var s=Qe(t,"maxSpeed",null);typeof s=="number"?(this.maxSpeedX=s,this.maxSpeedY=s):(this.maxSpeedX=Qe(t,"maxSpeed.x",0),this.maxSpeedY=Qe(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(e){return this.camera=e,this},update:function(e){if(!!this.active){e===void 0&&(e=1);var t=this.camera;this._speedX>0?(this._speedX-=this.dragX*e,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*e,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*e,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*e,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(t.scrollX-=this._speedX*e|0),this._speedY!==0&&(t.scrollY-=this._speedY*e|0),this._zoom!==0&&(t.zoom+=this._zoom,t.zoom<this.minZoom?t.zoom=this.minZoom:t.zoom>this.maxZoom&&(t.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});WC.exports=gfe});var ZC=l((mVe,KC)=>{KC.exports={FixedKeyControl:VC(),SmoothedKeyControl:HC()}});var QC=l((gVe,JC)=>{JC.exports="cameradestroy"});var jC=l((xVe,$C)=>{$C.exports="camerafadeincomplete"});var tR=l((yVe,eR)=>{eR.exports="camerafadeinstart"});var rR=l((TVe,iR)=>{iR.exports="camerafadeoutcomplete"});var nR=l((EVe,sR)=>{sR.exports="camerafadeoutstart"});var hR=l((SVe,aR)=>{aR.exports="cameraflashcomplete"});var uR=l((_Ve,oR)=>{oR.exports="cameraflashstart"});var fR=l((wVe,lR)=>{lR.exports="followupdate"});var vR=l((CVe,dR)=>{dR.exports="camerapancomplete"});var pR=l((RVe,cR)=>{cR.exports="camerapanstart"});var gR=l((qVe,mR)=>{mR.exports="postrender"});var yR=l((AVe,xR)=>{xR.exports="prerender"});var ER=l((bVe,TR)=>{TR.exports="camerarotatecomplete"});var _R=l((PVe,SR)=>{SR.exports="camerarotatestart"});var CR=l((MVe,wR)=>{wR.exports="camerashakecomplete"});var qR=l((LVe,RR)=>{RR.exports="camerashakestart"});var bR=l((OVe,AR)=>{AR.exports="camerazoomcomplete"});var MR=l((FVe,PR)=>{PR.exports="camerazoomstart"});var di=l((DVe,LR)=>{LR.exports={DESTROY:QC(),FADE_IN_COMPLETE:jC(),FADE_IN_START:tR(),FADE_OUT_COMPLETE:rR(),FADE_OUT_START:nR(),FLASH_COMPLETE:hR(),FLASH_START:uR(),FOLLOW_UPDATE:fR(),PAN_COMPLETE:vR(),PAN_START:pR(),POST_RENDER:gR(),PRE_RENDER:yR(),ROTATE_COMPLETE:ER(),ROTATE_START:_R(),SHAKE_COMPLETE:CR(),SHAKE_START:qR(),ZOOM_COMPLETE:bR(),ZOOM_START:MR()}});var An=l((IVe,OR)=>{var xfe=function(e,t,i){return e<<16|t<<8|i};OR.exports=xfe});var fv=l((NVe,FR)=>{var yfe=function(e,t,i,r){return r<<24|e<<16|t<<8|i};FR.exports=yfe});var zo=l((GVe,IR)=>{var DR=An();function dv(e,t,i,r){var s=(e+t*6)%6,n=Math.min(s,4-s,1);return Math.round(255*(r-r*i*Math.max(0,n)))}var Tfe=function(e,t,i,r){t===void 0&&(t=1),i===void 0&&(i=1);var s=dv(5,e,t,i),n=dv(3,e,t,i),a=dv(1,e,t,i);return r?r.setTo?r.setTo(s,n,a,r.alpha,!1):(r.r=s,r.g=n,r.b=a,r.color=DR(s,n,a),r):{r:s,g:n,b:a,color:DR(s,n,a)}};IR.exports=Tfe});var vv=l((BVe,NR)=>{var Efe=function(e,t,i,r){r===void 0&&(r={h:0,s:0,v:0}),e/=255,t/=255,i/=255;var s=Math.min(e,t,i),n=Math.max(e,t,i),a=n-s,h=0,o=n===0?0:a/n,u=n;return n!==s&&(n===e?h=(t-i)/a+(t<i?6:0):n===t?h=(i-e)/a+2:n===i&&(h=(e-t)/a+4),h/=6),r.hasOwnProperty("_h")?(r._h=h,r._s=o,r._v=u):(r.h=h,r.s=o,r.v=u),r};NR.exports=Efe});var vi=l((UVe,UR)=>{var Sfe=C(),_fe=An(),wfe=fv(),Yo=zo(),GR=vv(),BR=new Sfe({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,i,r,s)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(e,t,i,r,s){return r===void 0&&(r=255),s===void 0&&(s=!0),this._locked=!0,this.red=e,this.green=t,this.blue=i,this.alpha=r,this._locked=!1,this.update(s)},setGLTo:function(e,t,i,r){return r===void 0&&(r=1),this._locked=!0,this.redGL=e,this.greenGL=t,this.blueGL=i,this.alphaGL=r,this._locked=!1,this.update(!0)},setFromRGB:function(e){return this._locked=!0,this.red=e.r,this.green=e.g,this.blue=e.b,e.hasOwnProperty("a")&&(this.alpha=e.a),this._locked=!1,this.update(!0)},setFromHSV:function(e,t,i){return Yo(e,t,i,this)},update:function(e){if(e===void 0&&(e=!1),this._locked)return this;var t=this.r,i=this.g,r=this.b,s=this.a;return this._color=_fe(t,i,r),this._color32=wfe(t,i,r,s),this._rgba="rgba("+t+","+i+","+r+","+s/255+")",e&&GR(t,i,r,this),this},updateHSV:function(){var e=this.r,t=this.g,i=this.b;return GR(e,t,i,this),this},clone:function(){return new BR(this.r,this.g,this.b,this.a)},gray:function(e){return this.setTo(e,e,e)},random:function(e,t){e===void 0&&(e=0),t===void 0&&(t=255);var i=Math.floor(e+Math.random()*(t-e)),r=Math.floor(e+Math.random()*(t-e)),s=Math.floor(e+Math.random()*(t-e));return this.setTo(i,r,s)},randomGray:function(e,t){e===void 0&&(e=0),t===void 0&&(t=255);var i=Math.floor(e+Math.random()*(t-e));return this.setTo(i,i,i)},saturate:function(e){return this.s+=e/100,this},desaturate:function(e){return this.s-=e/100,this},lighten:function(e){return this.v+=e/100,this},darken:function(e){return this.v-=e/100,this},brighten:function(e){var t=this.r,i=this.g,r=this.b;return t=Math.max(0,Math.min(255,t-Math.round(255*-(e/100)))),i=Math.max(0,Math.min(255,i-Math.round(255*-(e/100)))),r=Math.max(0,Math.min(255,r-Math.round(255*-(e/100)))),this.setTo(t,i,r)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(e){this.gl[0]=Math.min(Math.abs(e),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(e){this.gl[1]=Math.min(Math.abs(e),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(e){this.gl[2]=Math.min(Math.abs(e),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(e){this.gl[3]=Math.min(Math.abs(e),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(e){e=Math.floor(Math.abs(e)),this.r=Math.min(e,255),this.gl[0]=e/255,this.update(!0)}},green:{get:function(){return this.g},set:function(e){e=Math.floor(Math.abs(e)),this.g=Math.min(e,255),this.gl[1]=e/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(e){e=Math.floor(Math.abs(e)),this.b=Math.min(e,255),this.gl[2]=e/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(e){e=Math.floor(Math.abs(e)),this.a=Math.min(e,255),this.gl[3]=e/255,this.update()}},h:{get:function(){return this._h},set:function(e){this._h=e,Yo(e,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(e){this._s=e,Yo(this._h,e,this._v,this)}},v:{get:function(){return this._v},set:function(e){this._v=e,Yo(this._h,this._s,e,this)}}});UR.exports=BR});var cv=l((kVe,kR)=>{var Cfe=vi(),Rfe=function(e){var t=new Cfe;e=e.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,h,o,u){return h+h+o+o+u+u});var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(i){var r=parseInt(i[1],16),s=parseInt(i[2],16),n=parseInt(i[3],16);t.setTo(r,s,n)}return t};kR.exports=Rfe});var pv=l((zVe,zR)=>{var qfe=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};zR.exports=qfe});var Xo=l((YVe,YR)=>{var Afe=vi(),bfe=pv(),Pfe=function(e){var t=bfe(e);return new Afe(t.r,t.g,t.b,t.a)};YR.exports=Pfe});var mv=l((XVe,XR)=>{var Mfe=vi(),Lfe=function(e){return new Mfe(e.r,e.g,e.b,e.a)};XR.exports=Lfe});var gv=l((VVe,VR)=>{var Ofe=vi(),Ffe=function(e){var t=new Ofe,i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e.toLowerCase());if(i){var r=parseInt(i[1],10),s=parseInt(i[2],10),n=parseInt(i[3],10),a=i[4]!==void 0?parseFloat(i[4]):1;t.setTo(r,s,n,a*255)}return t};VR.exports=Ffe});var Vo=l((WVe,WR)=>{var Dfe=cv(),Ife=Xo(),Nfe=mv(),Gfe=gv(),Bfe=function(e){var t=typeof e;switch(t){case"string":return e.substr(0,3).toLowerCase()==="rgb"?Gfe(e):Dfe(e);case"number":return Ife(e);case"object":return Nfe(e)}};WR.exports=Bfe});var Wa=l((HVe,JR)=>{var Ufe=C(),HR=ye(),kfe=yr(),KR=ue(),zfe=di(),xv=Ae(),Yfe=Tt(),ZR=Vo(),yv=xe(),Xfe=new Ufe({Extends:KR,Mixins:[HR.Alpha,HR.Visible],initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),KR.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new xv,this.dirty=!0,this._x=t,this._y=i,this._width=r,this._height=s,this._bounds=new xv,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new Yfe,this.transparent=!0,this.backgroundColor=ZR("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new yv(r/2,s/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(e){this.renderList.push(e)},setOrigin:function(e,t){return e===void 0&&(e=.5),t===void 0&&(t=e),this.originX=e,this.originY=t,this},getScroll:function(e,t,i){i===void 0&&(i=new yv);var r=this.width*.5,s=this.height*.5;return i.x=e-r,i.y=t-s,this.useBounds&&(i.x=this.clampX(i.x),i.y=this.clampY(i.y)),i},centerOnX:function(e){var t=this.width*.5;return this.midPoint.x=e,this.scrollX=e-t,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(e){var t=this.height*.5;return this.midPoint.y=e,this.scrollY=e-t,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(e,t){return this.centerOnX(e),this.centerOnY(t),this},centerToBounds:function(){if(this.useBounds){var e=this._bounds,t=this.width*.5,i=this.height*.5;this.midPoint.set(e.centerX,e.centerY),this.scrollX=e.centerX-t,this.scrollY=e.centerY-i}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(e){if(this.disableCull)return e;var t=this.matrix.matrix,i=t[0],r=t[1],s=t[2],n=t[3],a=i*n-r*s;if(!a)return e;var h=t[4],o=t[5],u=this.scrollX,f=this.scrollY,d=this.width,v=this.height,c=this.y,p=c+v,m=this.x,x=m+d,g=this.culledObjects,y=e.length;a=1/a,g.length=0;for(var T=0;T<y;++T){var S=e[T];if(!S.hasOwnProperty("width")||S.parentContainer){g.push(S);continue}var E=S.width,_=S.height,w=S.x-u*S.scrollFactorX-E*S.originX,R=S.y-f*S.scrollFactorY-_*S.originY,q=w*i+R*s+h,A=w*r+R*n+o,b=(w+E)*i+(R+_)*s+h,L=(w+E)*r+(R+_)*n+o;b>m&&q<x&&L>c&&A<p&&g.push(S)}return g},getWorldPoint:function(e,t,i){i===void 0&&(i=new yv);var r=this.matrix.matrix,s=r[0],n=r[1],a=r[2],h=r[3],o=r[4],u=r[5],f=s*h-n*a;if(!f)return i.x=e,i.y=t,i;f=1/f;var d=h*f,v=-n*f,c=-a*f,p=s*f,m=(a*u-h*o)*f,x=(n*o-s*u)*f,g=Math.cos(this.rotation),y=Math.sin(this.rotation),T=this.zoomX,S=this.zoomY,E=this.scrollX,_=this.scrollY,w=e+(E*g-_*y)*T,R=t+(E*y+_*g)*S;return i.x=w*d+R*c+m,i.y=w*v+R*p+x,i},ignore:function(e){var t=this.id;Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i];Array.isArray(r)?this.ignore(r):r.isParent?this.ignore(r.getChildren()):r.cameraFilter|=t}return this},preRender:function(){this.renderList.length=0;var e=this.width,t=this.height,i=e*.5,r=t*.5,s=this.zoomX,n=this.zoomY,a=this.matrix,h=e*this.originX,o=t*this.originY,u=this.scrollX,f=this.scrollY;this.useBounds&&(u=this.clampX(u),f=this.clampY(f)),this.roundPixels&&(h=Math.round(h),o=Math.round(o)),this.scrollX=u,this.scrollY=f;var d=u+i,v=f+r;this.midPoint.set(d,v);var c=e/s,p=t/n;this.worldView.setTo(d-c/2,v-p/2,c,p),a.applyITRS(this.x+h,this.y+o,this.rotation,s,n),a.translate(-h,-o)},clampX:function(e){var t=this._bounds,i=this.displayWidth,r=t.x+(i-this.width)/2,s=Math.max(r,r+t.width-i);return e<r?e=r:e>s&&(e=s),e},clampY:function(e){var t=this._bounds,i=this.displayHeight,r=t.y+(i-this.height)/2,s=Math.max(r,r+t.height-i);return e<r?e=r:e>s&&(e=s),e},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(e){return e===void 0&&(e=0),this.rotation=kfe(e),this},setBackgroundColor:function(e){return e===void 0&&(e="rgba(0,0,0,0)"),this.backgroundColor=ZR(e),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(e,t,i,r,s){return s===void 0&&(s=!1),this._bounds.setTo(e,t,i,r),this.dirty=!0,this.useBounds=!0,s?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(e){e===void 0&&(e=new xv);var t=this._bounds;return e.setTo(t.x,t.y,t.width,t.height),e},setName:function(e){return e===void 0&&(e=""),this.name=e,this},setPosition:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},setRotation:function(e){return e===void 0&&(e=0),this.rotation=e,this},setRoundPixels:function(e){return this.roundPixels=e,this},setScene:function(e){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=e;var t=e.sys;return this.sceneManager=t.game.scene,this.scaleManager=t.scale,this.cameraManager=t.cameras,this.updateSystem(),this},setScroll:function(e,t){return t===void 0&&(t=e),this.scrollX=e,this.scrollY=t,this},setSize:function(e,t){return t===void 0&&(t=e),this.width=e,this.height=t,this},setViewport:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},setZoom:function(e,t){return e===void 0&&(e=1),t===void 0&&(t=e),e===0&&(e=.001),t===0&&(t=.001),this.zoomX=e,this.zoomY=t,this},setMask:function(e,t){return t===void 0&&(t=!0),this.mask=e,this._maskCamera=t?this.cameraManager.default:this,this},clearMask:function(e){return e===void 0&&(e=!1),e&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var e={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(e.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),e},update:function(){},updateSystem:function(){if(!!this.scaleManager){var e=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,t=this.sceneManager;e&&!this._customViewport?t.customViewports++:!e&&this._customViewport&&t.customViewports--,this.dirty=!0,this._customViewport=e}},destroy:function(){this.emit(zfe.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(e){this._x=e,this.updateSystem()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.updateSystem()}},width:{get:function(){return this._width},set:function(e){this._width=e,this.updateSystem()}},height:{get:function(){return this._height},set:function(e){this._height=e,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(e){this._scrollX=e,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(e){this._scrollY=e,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(e){this._zoomX=e,this._zoomY=e,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(e){this._zoomX=e,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(e){this._zoomY=e,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=e,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});JR.exports=Xfe});var Wo=l((KVe,QR)=>{var Vfe=function(e,t,i){return e.x=t-e.width/2,e.y=i-e.height/2,e};QR.exports=Vfe});var jR=l((ZVe,$R)=>{var Wfe=Le(),Hfe=C(),Ho=di(),Kfe=new Hfe({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s,n,a,h){if(e===void 0&&(e=!0),t===void 0&&(t=1e3),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=!1),a===void 0&&(a=null),h===void 0&&(h=this.camera.scene),!n&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=t,this.direction=e,this.progress=0,this.red=i,this.green=r,this.blue=s,this.alpha=e?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h;var o=e?Ho.FADE_OUT_START:Ho.FADE_IN_START;return this.camera.emit(o,this.camera,this,t,i,r,s),this.camera},update:function(e,t){!this.isRunning||(this._elapsed+=t,this.progress=Wfe(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(e){if(!this.isRunning&&!this.isComplete)return!1;var t=this.camera;return e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",e.fillRect(t.x,t.y,t.width,t.height),!0},postRenderWebGL:function(e,t){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera,r=this.red/255,s=this.green/255,n=this.blue/255;return e.drawFillRect(i.x,i.y,i.width,i.height,t(n,s,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var e=this.direction?Ho.FADE_OUT_COMPLETE:Ho.FADE_IN_COMPLETE;this.camera.emit(e,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});$R.exports=Kfe});var iq=l((JVe,tq)=>{var Zfe=Le(),Jfe=C(),eq=di(),Qfe=new Jfe({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s,n,a){return e===void 0&&(e=250),t===void 0&&(t=255),i===void 0&&(i=255),r===void 0&&(r=255),s===void 0&&(s=!1),n===void 0&&(n=null),a===void 0&&(a=this.camera.scene),!s&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=e,this.progress=0,this.red=t,this.green=i,this.blue=r,this.alpha=1,this._elapsed=0,this._onUpdate=n,this._onUpdateScope=a,this.camera.emit(eq.FLASH_START,this.camera,this,e,t,i,r),this.camera)},update:function(e,t){!this.isRunning||(this._elapsed+=t,this.progress=Zfe(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(e){if(!this.isRunning)return!1;var t=this.camera;return e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",e.fillRect(t.x,t.y,t.width,t.height),!0},postRenderWebGL:function(e,t){if(!this.isRunning)return!1;var i=this.camera,r=this.red/255,s=this.green/255,n=this.blue/255;return e.drawFillRect(i.x,i.y,i.width,i.height,t(n,s,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(eq.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});tq.exports=Qfe});var sq=l((QVe,rq)=>{var $fe=function(e,t){return t===void 0&&(t=1.70158),e*e*((t+1)*e-t)};rq.exports=$fe});var aq=l(($Ve,nq)=>{var jfe=function(e,t){return t===void 0&&(t=1.70158),--e*e*((t+1)*e+t)+1};nq.exports=jfe});var oq=l((jVe,hq)=>{var ede=function(e,t){t===void 0&&(t=1.70158);var i=t*1.525;return(e*=2)<1?.5*(e*e*((i+1)*e-i)):.5*((e-=2)*e*((i+1)*e+i)+2)};hq.exports=ede});var Tv=l((e5e,uq)=>{uq.exports={In:sq(),Out:aq(),InOut:oq()}});var fq=l((t5e,lq)=>{var tde=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};lq.exports=tde});var vq=l((i5e,dq)=>{var ide=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};dq.exports=ide});var pq=l((r5e,cq)=>{var rde=function(e){var t=!1;return e<.5?(e=1-e*2,t=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,t?(1-e)*.5:e*.5+.5};cq.exports=rde});var Ev=l((s5e,mq)=>{mq.exports={In:fq(),Out:vq(),InOut:pq()}});var xq=l((n5e,gq)=>{var sde=function(e){return 1-Math.sqrt(1-e*e)};gq.exports=sde});var Tq=l((a5e,yq)=>{var nde=function(e){return Math.sqrt(1- --e*e)};yq.exports=nde});var Sq=l((h5e,Eq)=>{var ade=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};Eq.exports=ade});var Sv=l((o5e,_q)=>{_q.exports={In:xq(),Out:Tq(),InOut:Sq()}});var Cq=l((u5e,wq)=>{var hde=function(e){return e*e*e};wq.exports=hde});var qq=l((l5e,Rq)=>{var ode=function(e){return--e*e*e+1};Rq.exports=ode});var bq=l((f5e,Aq)=>{var ude=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};Aq.exports=ude});var _v=l((d5e,Pq)=>{Pq.exports={In:Cq(),Out:qq(),InOut:bq()}});var Lq=l((v5e,Mq)=>{var lde=function(e,t,i){if(t===void 0&&(t=.1),i===void 0&&(i=.1),e===0)return 0;if(e===1)return 1;var r=i/4;return t<1?t=1:r=i*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i))};Mq.exports=lde});var Fq=l((c5e,Oq)=>{var fde=function(e,t,i){if(t===void 0&&(t=.1),i===void 0&&(i=.1),e===0)return 0;if(e===1)return 1;var r=i/4;return t<1?t=1:r=i*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*e)*Math.sin((e-r)*(2*Math.PI)/i)+1};Oq.exports=fde});var Iq=l((p5e,Dq)=>{var dde=function(e,t,i){if(t===void 0&&(t=.1),i===void 0&&(i=.1),e===0)return 0;if(e===1)return 1;var r=i/4;return t<1?t=1:r=i*Math.asin(1/t)/(2*Math.PI),(e*=2)<1?-.5*(t*Math.pow(2,10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i)):t*Math.pow(2,-10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i)*.5+1};Dq.exports=dde});var wv=l((m5e,Nq)=>{Nq.exports={In:Lq(),Out:Fq(),InOut:Iq()}});var Bq=l((g5e,Gq)=>{var vde=function(e){return Math.pow(2,10*(e-1))-.001};Gq.exports=vde});var kq=l((x5e,Uq)=>{var cde=function(e){return 1-Math.pow(2,-10*e)};Uq.exports=cde});var Yq=l((y5e,zq)=>{var pde=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};zq.exports=pde});var Cv=l((T5e,Xq)=>{Xq.exports={In:Bq(),Out:kq(),InOut:Yq()}});var Wq=l((E5e,Vq)=>{var mde=function(e){return e};Vq.exports=mde});var Rv=l((S5e,Hq)=>{Hq.exports=Wq()});var Zq=l((_5e,Kq)=>{var gde=function(e){return e*e};Kq.exports=gde});var Qq=l((w5e,Jq)=>{var xde=function(e){return e*(2-e)};Jq.exports=xde});var jq=l((C5e,$q)=>{var yde=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};$q.exports=yde});var qv=l((R5e,eA)=>{eA.exports={In:Zq(),Out:Qq(),InOut:jq()}});var iA=l((q5e,tA)=>{var Tde=function(e){return e*e*e*e};tA.exports=Tde});var sA=l((A5e,rA)=>{var Ede=function(e){return 1- --e*e*e*e};rA.exports=Ede});var aA=l((b5e,nA)=>{var Sde=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};nA.exports=Sde});var Av=l((P5e,hA)=>{hA.exports={In:iA(),Out:sA(),InOut:aA()}});var uA=l((M5e,oA)=>{var _de=function(e){return e*e*e*e*e};oA.exports=_de});var fA=l((L5e,lA)=>{var wde=function(e){return--e*e*e*e*e+1};lA.exports=wde});var vA=l((O5e,dA)=>{var Cde=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};dA.exports=Cde});var bv=l((F5e,cA)=>{cA.exports={In:uA(),Out:fA(),InOut:vA()}});var mA=l((D5e,pA)=>{var Rde=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};pA.exports=Rde});var xA=l((I5e,gA)=>{var qde=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};gA.exports=qde});var TA=l((N5e,yA)=>{var Ade=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};yA.exports=Ade});var Pv=l((G5e,EA)=>{EA.exports={In:mA(),Out:xA(),InOut:TA()}});var _A=l((B5e,SA)=>{var bde=function(e,t){return t===void 0&&(t=1),e<=0?0:e>=1?1:((t*e|0)+1)*(1/t)};SA.exports=bde});var Mv=l((U5e,wA)=>{wA.exports=_A()});var Qa=l((k5e,RA)=>{var Ko=Tv(),Zo=Ev(),Jo=Sv(),Ha=_v(),Qo=wv(),$o=Cv(),CA=Rv(),Ka=qv(),Za=Av(),Ja=bv(),jo=Pv(),Pde=Mv();RA.exports={Power0:CA,Power1:Ka.Out,Power2:Ha.Out,Power3:Za.Out,Power4:Ja.Out,Linear:CA,Quad:Ka.Out,Cubic:Ha.Out,Quart:Za.Out,Quint:Ja.Out,Sine:jo.Out,Expo:$o.Out,Circ:Jo.Out,Elastic:Qo.Out,Back:Ko.Out,Bounce:Zo.Out,Stepped:Pde,"Quad.easeIn":Ka.In,"Cubic.easeIn":Ha.In,"Quart.easeIn":Za.In,"Quint.easeIn":Ja.In,"Sine.easeIn":jo.In,"Expo.easeIn":$o.In,"Circ.easeIn":Jo.In,"Elastic.easeIn":Qo.In,"Back.easeIn":Ko.In,"Bounce.easeIn":Zo.In,"Quad.easeOut":Ka.Out,"Cubic.easeOut":Ha.Out,"Quart.easeOut":Za.Out,"Quint.easeOut":Ja.Out,"Sine.easeOut":jo.Out,"Expo.easeOut":$o.Out,"Circ.easeOut":Jo.Out,"Elastic.easeOut":Qo.Out,"Back.easeOut":Ko.Out,"Bounce.easeOut":Zo.Out,"Quad.easeInOut":Ka.InOut,"Cubic.easeInOut":Ha.InOut,"Quart.easeInOut":Za.InOut,"Quint.easeInOut":Ja.InOut,"Sine.easeInOut":jo.InOut,"Expo.easeInOut":$o.InOut,"Circ.easeInOut":Jo.InOut,"Elastic.easeInOut":Qo.InOut,"Back.easeInOut":Ko.InOut,"Bounce.easeInOut":Zo.InOut}});var bA=l((z5e,AA)=>{var Mde=Le(),Lde=C(),Lv=Qa(),qA=di(),Ov=xe(),Ode=new Lde({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new Ov,this.current=new Ov,this.destination=new Ov,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s,n,a){i===void 0&&(i=1e3),r===void 0&&(r=Lv.Linear),s===void 0&&(s=!1),n===void 0&&(n=null),a===void 0&&(a=this.camera.scene);var h=this.camera;return!s&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(h.scrollX,h.scrollY),this.destination.set(e,t),h.getScroll(e,t,this.current),typeof r=="string"&&Lv.hasOwnProperty(r)?this.ease=Lv[r]:typeof r=="function"&&(this.ease=r),this._elapsed=0,this._onUpdate=n,this._onUpdateScope=a,this.camera.emit(qA.PAN_START,this.camera,this,i,e,t)),h},update:function(e,t){if(!!this.isRunning){this._elapsed+=t;var i=Mde(this._elapsed/this.duration,0,1);this.progress=i;var r=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);r.getScroll(this.destination.x,this.destination.y,this.current);var n=this.source.x+(this.current.x-this.source.x)*s,a=this.source.y+(this.current.y-this.source.y)*s;r.setScroll(n,a),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,n,a)}else r.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,r.scrollX,r.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(qA.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});AA.exports=Ode});var LA=l((Y5e,MA)=>{var Fde=Le(),Dde=C(),PA=di(),Ide=xe(),Nde=new Dde({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new Ide,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s){return e===void 0&&(e=100),t===void 0&&(t=.05),i===void 0&&(i=!1),r===void 0&&(r=null),s===void 0&&(s=this.camera.scene),!i&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=e,this.progress=0,typeof t=="number"?this.intensity.set(t):this.intensity.set(t.x,t.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=r,this._onUpdateScope=s,this.camera.emit(PA.SHAKE_START,this.camera,this,e,t),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(e,t){if(!!this.isRunning)if(this._elapsed+=t,this.progress=Fde(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var i=this.intensity,r=this.camera.width,s=this.camera.height,n=this.camera.zoom;this._offsetX=(Math.random()*i.x*r*2-i.x*r)*n,this._offsetY=(Math.random()*i.y*s*2-i.y*s)*n,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(PA.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});MA.exports=Nde});var DA=l((X5e,FA)=>{var Gde=Le(),Bde=C(),OA=di(),Fv=Qa(),Ude=new Bde({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(e,t,i,r,s,n,a){i===void 0&&(i=1e3),r===void 0&&(r=Fv.Linear),s===void 0&&(s=!1),n===void 0&&(n=null),a===void 0&&(a=this.camera.scene),t===void 0&&(t=!1),this.shortestPath=t;var h=e;e<0?(h=-1*e,this.clockwise=!1):this.clockwise=!0;var o=360*Math.PI/180;h=h-Math.floor(h/o)*o;var u=this.camera;if(!s&&this.isRunning)return u;if(this.isRunning=!0,this.duration=i,this.progress=0,this.source=u.rotation,this.destination=h,typeof r=="string"&&Fv.hasOwnProperty(r)?this.ease=Fv[r]:typeof r=="function"&&(this.ease=r),this._elapsed=0,this._onUpdate=n,this._onUpdateScope=a,this.shortestPath){var f=0,d=0;this.destination>this.source?f=Math.abs(this.destination-this.source):f=Math.abs(this.destination+o)-this.source,this.source>this.destination?d=Math.abs(this.source-this.destination):d=Math.abs(this.source+o)-this.destination,f<d?this.clockwise=!0:f>d&&(this.clockwise=!1)}return this.camera.emit(OA.ROTATE_START,this.camera,this,i,h),u},update:function(e,t){if(!!this.isRunning){this._elapsed+=t;var i=Gde(this._elapsed/this.duration,0,1);this.progress=i;var r=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);this.current=r.rotation;var n=0,a=360*Math.PI/180,h=this.destination,o=this.current;this.clockwise===!1&&(h=this.current,o=this.destination),h>=o?n=Math.abs(h-o):n=Math.abs(h+a)-o;var u=0;this.clockwise?u=r.rotation+n*s:u=r.rotation-n*s,r.rotation=u,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,u)}else r.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(OA.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});FA.exports=Ude});var GA=l((V5e,NA)=>{var kde=Le(),zde=C(),Dv=Qa(),IA=di(),Yde=new zde({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s,n){t===void 0&&(t=1e3),i===void 0&&(i=Dv.Linear),r===void 0&&(r=!1),s===void 0&&(s=null),n===void 0&&(n=this.camera.scene);var a=this.camera;return!r&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.source=a.zoom,this.destination=e,typeof i=="string"&&Dv.hasOwnProperty(i)?this.ease=Dv[i]:typeof i=="function"&&(this.ease=i),this._elapsed=0,this._onUpdate=s,this._onUpdateScope=n,this.camera.emit(IA.ZOOM_START,this.camera,this,t,e)),a},update:function(e,t){!this.isRunning||(this._elapsed+=t,this.progress=kde(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(IA.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});NA.exports=Yde});var Iv=l((W5e,BA)=>{BA.exports={Fade:jR(),Flash:iq(),Pan:bA(),Shake:LA(),RotateTo:DA(),Zoom:GA()}});var $a=l((H5e,UA)=>{var Xde=function(e,t,i){return(t-e)*i+e};UA.exports=Xde});var Bv=l((K5e,XA)=>{var Nv=Wa(),kA=Wo(),zA=Le(),Vde=C(),Gv=ye(),bn=Iv(),Wde=di(),Pn=$a(),Hde=Ae(),YA=xe(),Kde=new Vde({Extends:Nv,Mixins:[Gv.Flip,Gv.Tint,Gv.Pipeline],initialize:function(t,i,r,s){Nv.call(this,t,i,r,s),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new bn.Fade(this),this.flashEffect=new bn.Flash(this),this.shakeEffect=new bn.Shake(this),this.panEffect=new bn.Pan(this),this.rotateToEffect=new bn.RotateTo(this),this.zoomEffect=new bn.Zoom(this),this.lerp=new YA(1,1),this.followOffset=new YA,this.deadzone=null,this._follow=null},setDeadzone:function(e,t){if(e===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=e,this.deadzone.height=t):this.deadzone=new Hde(0,0,e,t),this._follow){var i=this.width/2,r=this.height/2,s=this._follow.x-this.followOffset.x,n=this._follow.y-this.followOffset.y;this.midPoint.set(s,n),this.scrollX=s-i,this.scrollY=n-r}kA(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(e,t,i,r,s,n){return this.fadeEffect.start(!1,e,t,i,r,!0,s,n)},fadeOut:function(e,t,i,r,s,n){return this.fadeEffect.start(!0,e,t,i,r,!0,s,n)},fadeFrom:function(e,t,i,r,s,n,a){return this.fadeEffect.start(!1,e,t,i,r,s,n,a)},fade:function(e,t,i,r,s,n,a){return this.fadeEffect.start(!0,e,t,i,r,s,n,a)},flash:function(e,t,i,r,s,n,a){return this.flashEffect.start(e,t,i,r,s,n,a)},shake:function(e,t,i,r,s){return this.shakeEffect.start(e,t,i,r,s)},pan:function(e,t,i,r,s,n,a){return this.panEffect.start(e,t,i,r,s,n,a)},rotateTo:function(e,t,i,r,s,n,a){return this.rotateToEffect.start(e,t,i,r,s,n,a)},zoomTo:function(e,t,i,r,s,n){return this.zoomEffect.start(e,t,i,r,s,n)},preRender:function(){this.renderList.length=0;var e=this.width,t=this.height,i=e*.5,r=t*.5,s=this.zoom,n=this.matrix,a=e*this.originX,h=t*this.originY,o=this._follow,u=this.deadzone,f=this.scrollX,d=this.scrollY;u&&kA(u,this.midPoint.x,this.midPoint.y);var v=!1;if(o&&!this.panEffect.isRunning){var c=o.x-this.followOffset.x,p=o.y-this.followOffset.y;u?(c<u.x?f=Pn(f,f-(u.x-c),this.lerp.x):c>u.right&&(f=Pn(f,f+(c-u.right),this.lerp.x)),p<u.y?d=Pn(d,d-(u.y-p),this.lerp.y):p>u.bottom&&(d=Pn(d,d+(p-u.bottom),this.lerp.y))):(f=Pn(f,c-a,this.lerp.x),d=Pn(d,p-h,this.lerp.y)),v=!0}this.useBounds&&(f=this.clampX(f),d=this.clampY(d)),this.roundPixels&&(a=Math.round(a),h=Math.round(h),f=Math.round(f),d=Math.round(d)),this.scrollX=f,this.scrollY=d;var m=f+i,x=d+r;this.midPoint.set(m,x);var g=e/s,y=t/s,T=m-g/2,S=x-y/2;this.roundPixels&&(T=Math.round(T),S=Math.round(S)),this.worldView.setTo(T,S,g,y),n.applyITRS(this.x+a,this.y+h,this.rotation,s,s),n.translate(-a,-h),this.shakeEffect.preRender(),v&&this.emit(Wde.FOLLOW_UPDATE,this,o)},setLerp:function(e,t){return e===void 0&&(e=1),t===void 0&&(t=e),this.lerp.set(e,t),this},setFollowOffset:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=0),this.followOffset.set(e,t),this},startFollow:function(e,t,i,r,s,n){t===void 0&&(t=!1),i===void 0&&(i=1),r===void 0&&(r=i),s===void 0&&(s=0),n===void 0&&(n=s),this._follow=e,this.roundPixels=t,i=zA(i,0,1),r=zA(r,0,1),this.lerp.set(i,r),this.followOffset.set(s,n);var a=this.width/2,h=this.height/2,o=e.x-s,u=e.y-n;return this.midPoint.set(o,u),this.scrollX=o-a,this.scrollY=u-h,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(e,t){this.visible&&(this.rotateToEffect.update(e,t),this.panEffect.update(e,t),this.zoomEffect.update(e,t),this.shakeEffect.update(e,t),this.flashEffect.update(e,t),this.fadeEffect.update(e,t))},destroy:function(){this.resetFX(),Nv.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});XA.exports=Kde});var ct=l((Z5e,VA)=>{var Hr={},Zi={},ci={};ci.register=function(e,t,i,r){r===void 0&&(r=!1),Hr[e]={plugin:t,mapping:i,custom:r}};ci.registerCustom=function(e,t,i,r){Zi[e]={plugin:t,mapping:i,data:r}};ci.hasCore=function(e){return Hr.hasOwnProperty(e)};ci.hasCustom=function(e){return Zi.hasOwnProperty(e)};ci.getCore=function(e){return Hr[e]};ci.getCustom=function(e){return Zi[e]};ci.getCustomClass=function(e){return Zi.hasOwnProperty(e)?Zi[e].plugin:null};ci.remove=function(e){Hr.hasOwnProperty(e)&&delete Hr[e]};ci.removeCustom=function(e){Zi.hasOwnProperty(e)&&delete Zi[e]};ci.destroyCorePlugins=function(){for(var e in Hr)Hr.hasOwnProperty(e)&&delete Hr[e]};ci.destroyCustomPlugins=function(){for(var e in Zi)Zi.hasOwnProperty(e)&&delete Zi[e]};VA.exports=ci});var HA=l((J5e,WA)=>{WA.exports="enterfullscreen"});var ZA=l((Q5e,KA)=>{KA.exports="fullscreenfailed"});var QA=l(($5e,JA)=>{JA.exports="fullscreenunsupported"});var jA=l((j5e,$A)=>{$A.exports="leavefullscreen"});var tb=l((eWe,eb)=>{eb.exports="orientationchange"});var rb=l((tWe,ib)=>{ib.exports="resize"});var Mn=l((iWe,sb)=>{sb.exports={ENTER_FULLSCREEN:HA(),FULLSCREEN_FAILED:ZA(),FULLSCREEN_UNSUPPORTED:QA(),LEAVE_FULLSCREEN:jA(),ORIENTATION_CHANGE:tb(),RESIZE:rb()}});var ob=l((rWe,hb)=>{var nb=Bv(),Zde=C(),pt=z(),Jde=ct(),Qde=Yr(),$de=Mn(),Kr=Ge(),ab=new Zde({initialize:function(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(Kr.BOOT,this.boot,this),t.sys.events.on(Kr.START,this.start,this)},boot:function(){var e=this.systems;e.settings.cameras?this.fromJSON(e.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new nb(0,0,e.scale.width,e.scale.height).setScene(this.scene),e.game.scale.on($de.RESIZE,this.onResize,this),this.systems.events.once(Kr.DESTROY,this.destroy,this)},start:function(){if(!this.main){var e=this.systems;e.settings.cameras?this.fromJSON(e.settings.cameras):this.add(),this.main=this.cameras[0]}var t=this.systems.events;t.on(Kr.UPDATE,this.update,this),t.once(Kr.SHUTDOWN,this.shutdown,this)},add:function(e,t,i,r,s,n){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.scene.sys.scale.width),r===void 0&&(r=this.scene.sys.scale.height),s===void 0&&(s=!1),n===void 0&&(n="");var a=new nb(e,t,i,r);return a.setName(n),a.setScene(this.scene),a.setRoundPixels(this.roundPixels),a.id=this.getNextID(),this.cameras.push(a),s&&(this.main=a),a},addExisting:function(e,t){t===void 0&&(t=!1);var i=this.cameras.indexOf(e);return i===-1?(e.id=this.getNextID(),e.setRoundPixels(this.roundPixels),this.cameras.push(e),t&&(this.main=e),e):null},getNextID:function(){for(var e=this.cameras,t=1,i=0;i<32;i++){for(var r=!1,s=0;s<e.length;s++){var n=e[s];if(n&&n.id===t){r=!0;continue}}if(r)t=t<<1;else return t}return 0},getTotal:function(e){e===void 0&&(e=!1);for(var t=0,i=this.cameras,r=0;r<i.length;r++){var s=i[r];(!e||e&&s.visible)&&t++}return t},fromJSON:function(e){Array.isArray(e)||(e=[e]);for(var t=this.scene.sys.scale.width,i=this.scene.sys.scale.height,r=0;r<e.length;r++){var s=e[r],n=pt(s,"x",0),a=pt(s,"y",0),h=pt(s,"width",t),o=pt(s,"height",i),u=this.add(n,a,h,o);u.name=pt(s,"name",""),u.zoom=pt(s,"zoom",1),u.rotation=pt(s,"rotation",0),u.scrollX=pt(s,"scrollX",0),u.scrollY=pt(s,"scrollY",0),u.roundPixels=pt(s,"roundPixels",!1),u.visible=pt(s,"visible",!0);var f=pt(s,"backgroundColor",!1);f&&u.setBackgroundColor(f);var d=pt(s,"bounds",null);if(d){var v=pt(d,"x",0),c=pt(d,"y",0),p=pt(d,"width",t),m=pt(d,"height",i);u.setBounds(v,c,p,m)}}return this},getCamera:function(e){for(var t=this.cameras,i=0;i<t.length;i++)if(t[i].name===e)return t[i];return null},getCamerasBelowPointer:function(e){for(var t=this.cameras,i=e.x,r=e.y,s=[],n=0;n<t.length;n++){var a=t[n];a.visible&&a.inputEnabled&&Qde(a,i,r)&&s.unshift(a)}return s},remove:function(e,t){t===void 0&&(t=!0),Array.isArray(e)||(e=[e]);for(var i=0,r=this.cameras,s=0;s<e.length;s++){var n=r.indexOf(e[s]);n!==-1&&(t?r[n].destroy():r[n].renderList=[],r.splice(n,1),i++)}return!this.main&&r[0]&&(this.main=r[0]),i},render:function(e,t){for(var i=this.scene,r=this.cameras,s=0;s<this.cameras.length;s++){var n=r[s];if(n.visible&&n.alpha>0){n.preRender();var a=this.getVisibleChildren(t.getChildren(),n);e.render(i,a,n)}}},getVisibleChildren:function(e,t){for(var i=[],r=0;r<e.length;r++){var s=e[r];s.willRender(t)&&i.push(s)}return i},resetAll:function(){for(var e=0;e<this.cameras.length;e++)this.cameras[e].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(e,t){for(var i=0;i<this.cameras.length;i++)this.cameras[i].update(e,t)},onResize:function(e,t,i,r,s){for(var n=0;n<this.cameras.length;n++){var a=this.cameras[n];a._x===0&&a._y===0&&a._width===r&&a._height===s&&a.setSize(t.width,t.height)}},resize:function(e,t){for(var i=0;i<this.cameras.length;i++)this.cameras[i].setSize(e,t)},shutdown:function(){this.main=void 0;for(var e=0;e<this.cameras.length;e++)this.cameras[e].destroy();this.cameras=[];var t=this.systems.events;t.off(Kr.UPDATE,this.update,this),t.off(Kr.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(Kr.START,this.start,this),this.scene=null,this.systems=null}});Jde.register("CameraManager",ab,"cameras");hb.exports=ab});var lb=l((sWe,ub)=>{ub.exports={Camera:Bv(),BaseCamera:Wa(),CameraManager:ob(),Effects:Iv(),Events:di()}});var db=l((nWe,fb)=>{fb.exports={Controls:ZC(),Scene2D:lb()}});var Ln=l((aWe,vb)=>{var re={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function jde(){if(typeof importScripts=="function")return re;var e=navigator.userAgent;/Windows/.test(e)?re.windows=!0:/Mac OS/.test(e)&&!/like Mac OS/.test(e)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(re.iOS=!0,re.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),re.iOSVersion=parseInt(RegExp.$1,10)):re.macOS=!0:/Android/.test(e)?re.android=!0:/Linux/.test(e)?re.linux=!0:/iP[ao]d|iPhone/i.test(e)?(re.iOS=!0,navigator.appVersion.match(/OS (\d+)/),re.iOSVersion=parseInt(RegExp.$1,10),re.iPhone=e.toLowerCase().indexOf("iphone")!==-1,re.iPad=e.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(e)||/\bKF[A-Z][A-Z]+/.test(e)||/Silk.*Mobile Safari/.test(e)?re.kindle=!0:/CrOS/.test(e)&&(re.chromeOS=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(re.android=!1,re.iOS=!1,re.macOS=!1,re.windows=!0,re.windowsPhone=!0);var t=/Silk/.test(e);return(re.windows||re.macOS||re.linux&&!t||re.chromeOS)&&(re.desktop=!0),(re.windowsPhone||/Windows NT/i.test(e)&&/Touch/i.test(e))&&(re.desktop=!1),navigator.standalone&&(re.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(re.cordova=!0),window.ejecta!==void 0&&(re.ejecta=!0)),typeof process!="undefined"&&process.versions&&process.versions.node&&(re.node=!0),re.node&&typeof process.versions=="object"&&(re.nodeWebkit=!!process.versions["node-webkit"],re.electron=!!process.versions.electron),/Crosswalk/.test(e)&&(re.crosswalk=!0),re.pixelRatio=window.devicePixelRatio||1,re}vb.exports=jde()});var ja=l((hWe,cb)=>{var Uv=Ln(),St={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function eve(){var e=navigator.userAgent;return/Edge\/\d+/.test(e)?St.edge=!0:/Chrome\/(\d+)/.test(e)&&!Uv.windowsPhone?(St.chrome=!0,St.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(e)?(St.firefox=!0,St.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(e)&&Uv.iOS?St.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(e)?(St.ie=!0,St.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(e)?St.opera=!0:/Safari/.test(e)&&!Uv.windowsPhone?St.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(e)&&(St.ie=!0,St.trident=!0,St.tridentVersion=parseInt(RegExp.$1,10),St.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(e)&&(St.silk=!0),St}cb.exports=eve()});var eu=l((oWe,pb)=>{var Ji="",tve=function(){var e=function(s){for(var n=["i","webkitI","msI","mozI","oI"],a=0;a<n.length;a++){var h=n[a]+"mageSmoothingEnabled";if(h in s)return h}return null},t=function(s){return Ji===""&&(Ji=e(s)),Ji&&(s[Ji]=!0),s},i=function(s){return Ji===""&&(Ji=e(s)),Ji&&(s[Ji]=!1),s},r=function(s){return Ji!==null?s[Ji]:null};return{disable:i,enable:t,getPrefix:e,isEnabled:r}};pb.exports=tve()});var Ot=l((uWe,mb)=>{var $s=Qt(),ive=eu(),js=[],kv=!1,rve=function(){var e=function(u,f,d,v,c){f===void 0&&(f=1),d===void 0&&(d=1),v===void 0&&(v=$s.CANVAS),c===void 0&&(c=!1);var p,m=r(v);return m===null?(m={parent:u,canvas:document.createElement("canvas"),type:v},v===$s.CANVAS&&js.push(m),p=m.canvas):(m.parent=u,p=m.canvas),c&&(m.parent=p),p.width=f,p.height=d,kv&&v===$s.CANVAS&&ive.disable(p.getContext("2d")),p},t=function(u,f,d){return e(u,f,d,$s.CANVAS)},i=function(u,f,d){return e(u,f,d,$s.WEBGL)},r=function(u){if(u===void 0&&(u=$s.CANVAS),u===$s.WEBGL)return null;for(var f=0;f<js.length;f++){var d=js[f];if(!d.parent&&d.type===u)return d}return null},s=function(u){var f=u instanceof HTMLCanvasElement;js.forEach(function(d){(f&&d.canvas===u||!f&&d.parent===u)&&(d.parent=null,d.canvas.width=1,d.canvas.height=1)})},n=function(){var u=0;return js.forEach(function(f){f.parent&&u++}),u},a=function(){return js.length-n()},h=function(){kv=!0},o=function(){kv=!1};return{create2D:t,create:e,createWebGL:i,disableSmoothing:h,enableSmoothing:o,first:r,free:a,pool:js,remove:s,total:n}};mb.exports=rve()});var iu=l((lWe,gb)=>{var sve=Ln(),en=ja(),tu=Ot(),$e={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function nve(){var e=new ArrayBuffer(4),t=new Uint8Array(e),i=new Uint32Array(e);return t[0]=161,t[1]=178,t[2]=195,t[3]=212,i[0]===3569595041?!0:i[0]===2712847316?!1:null}function ave(){if(typeof importScripts=="function")return $e;$e.canvas=!!window.CanvasRenderingContext2D;try{$e.localStorage=!!localStorage.getItem}catch(i){$e.localStorage=!1}$e.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,$e.fileSystem=!!window.requestFileSystem;var e=!1,t=function(){if(window.WebGLRenderingContext)try{var i=tu.createWebGL(this),r=i.getContext("webgl")||i.getContext("experimental-webgl"),s=tu.create2D(this),n=s.getContext("2d"),a=n.createImageData(1,1);return e=a.data instanceof Uint8ClampedArray,tu.remove(i),tu.remove(s),!!r}catch(h){return!1}return!1};return $e.webGL=t(),$e.worker=!!window.Worker,$e.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,$e.getUserMedia=$e.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,en.firefox&&en.firefoxVersion<21&&($e.getUserMedia=!1),!sve.iOS&&(en.ie||en.firefox||en.chrome)&&($e.canvasBitBltShift=!0),(en.safari||en.mobileSafari)&&($e.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&($e.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&($e.littleEndian=nve()),$e.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&$e.littleEndian!==null&&e,$e}gb.exports=ave()});var Tb=l((fWe,yb)=>{var xb=ja(),Zr={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function hve(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(Zr.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(Zr.mspointer=!0),navigator.getGamepads&&(Zr.gamepads=!0),"onwheel"in window||xb.ie&&"WheelEvent"in window?Zr.wheelEvent="wheel":"onmousewheel"in window?Zr.wheelEvent="mousewheel":xb.firefox&&"MouseScrollEvent"in window&&(Zr.wheelEvent="DOMMouseScroll")),Zr}yb.exports=hve()});var Sb=l((dWe,Eb)=>{var zv=ja(),pi={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function ove(){if(typeof importScripts=="function")return pi;pi.audioData=!!window.Audio,pi.webAudio=!!(window.AudioContext||window.webkitAudioContext);var e=document.createElement("audio"),t=!!e.canPlayType;try{if(t&&(e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(pi.ogg=!0),(e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||e.canPlayType("audio/opus;").replace(/^no$/,""))&&(pi.opus=!0),e.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(pi.mp3=!0),e.canPlayType("audio/wav").replace(/^no$/,"")&&(pi.wav=!0),(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;").replace(/^no$/,""))&&(pi.m4a=!0),e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(pi.webm=!0),e.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(zv.edge)pi.dolby=!0;else if(zv.safari&&zv.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var i=parseInt(RegExp.$1,10),r=parseInt(RegExp.$2,10);(i===10&&r>=11||i>10)&&(pi.dolby=!0)}}}catch(s){}return pi}Eb.exports=ove()});var wb=l((vWe,_b)=>{var Jr={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function uve(){if(typeof importScripts=="function")return Jr;var e=document.createElement("video"),t=!!e.canPlayType;try{t&&(e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(Jr.ogg=!0),e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(Jr.h264=!0,Jr.mp4=!0),e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(Jr.webm=!0),e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(Jr.vp9=!0),e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(Jr.hls=!0))}catch(i){}return Jr}_b.exports=uve()});var Rb=l((cWe,Cb)=>{var Qr={available:!1,cancel:"",keyboard:!1,request:""};function lve(){if(typeof importScripts=="function")return Qr;var e,t="Fullscreen",i="FullScreen",r=["request"+t,"request"+i,"webkitRequest"+t,"webkitRequest"+i,"msRequest"+t,"msRequest"+i,"mozRequest"+i,"mozRequest"+t];for(e=0;e<r.length;e++)if(document.documentElement[r[e]]){Qr.available=!0,Qr.request=r[e];break}var s=["cancel"+i,"exit"+t,"webkitCancel"+i,"webkitExit"+t,"msCancel"+i,"msExit"+t,"mozCancel"+i,"mozExit"+t];if(Qr.available){for(e=0;e<s.length;e++)if(document[s[e]]){Qr.cancel=s[e];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(Qr.keyboard=!0),Object.defineProperty(Qr,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),Qr}Cb.exports=lve()});var Xv=l((pWe,qb)=>{var Yv=Ot(),ru={supportInverseAlpha:!1,supportNewBlendModes:!1};function fve(){var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",t="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",i=new Image;return i.onload=function(){var r=new Image;r.onload=function(){var s=Yv.create(r,6,1),n=s.getContext("2d");if(n.globalCompositeOperation="multiply",n.drawImage(i,0,0),n.drawImage(r,2,0),!n.getImageData(2,0,1,1))return!1;var a=n.getImageData(2,0,1,1).data;Yv.remove(r),ru.supportNewBlendModes=a[0]===255&&a[1]===0&&a[2]===0},r.src=e+"/wCKxvRF"+t},i.src=e+"AP804Oa6"+t,!1}function dve(){var e=Yv.create(this,2,1),t=e.getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var i=t.getImageData(0,0,1,1);if(i===null)return!1;t.putImageData(i,1,0);var r=t.getImageData(1,0,1,1);return r.data[0]===i.data[0]&&r.data[1]===i.data[1]&&r.data[2]===i.data[2]&&r.data[3]===i.data[3]}function vve(){return typeof importScripts!="function"&&document!==void 0&&(ru.supportNewBlendModes=fve(),ru.supportInverseAlpha=dve()),ru}qb.exports=vve()});var Vv=l((mWe,Ab)=>{Ab.exports={os:Ln(),browser:ja(),features:iu(),input:Tb(),audio:Sb(),video:wb(),fullscreen:Rb(),canvasFeatures:Xv()}});var Wv=l((gWe,bb)=>{var cve=function(e,t,i,r){return Math.atan2(r-t,i-e)};bb.exports=cve});var Mb=l((xWe,Pb)=>{var pve=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)};Pb.exports=pve});var Ob=l((yWe,Lb)=>{var mve=function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)};Lb.exports=mve});var Db=l((TWe,Fb)=>{var gve=function(e,t,i,r){return Math.atan2(i-e,r-t)};Fb.exports=gve});var Nb=l((EWe,Ib)=>{var eh=Oe(),xve=function(e){return e>Math.PI&&(e-=eh.PI2),Math.abs(((e+eh.TAU)%eh.PI2-eh.PI2)%eh.PI2)};Ib.exports=xve});var Hv=l((SWe,Gb)=>{var yve=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};Gb.exports=yve});var th=l((_We,Bb)=>{var Tve=function(e,t){return Math.random()*(t-e)+e};Bb.exports=Tve});var kb=l((wWe,Ub)=>{var Eve=th(),Sve=function(){return Eve(-Math.PI,Math.PI)};Ub.exports=Sve});var Yb=l((CWe,zb)=>{var _ve=th(),wve=function(){return _ve(-180,180)};zb.exports=wve});var Vb=l((RWe,Xb)=>{var Cve=Hv(),Rve=function(e){return Cve(e+Math.PI)};Xb.exports=Rve});var Hb=l((qWe,Wb)=>{var Kv=Oe(),qve=function(e,t,i){return i===void 0&&(i=.05),e===t||(Math.abs(t-e)<=i||Math.abs(t-e)>=Kv.PI2-i?e=t:(Math.abs(t-e)>Math.PI&&(t<e?t+=Kv.PI2:t-=Kv.PI2),t>e?e+=i:t<e&&(e-=i))),e};Wb.exports=qve});var Zb=l((AWe,Kb)=>{var Ave=function(e,t){var i=t-e;if(i===0)return 0;var r=Math.floor((i- -180)/360);return i-r*360};Kb.exports=Ave});var Qb=l((bWe,Jb)=>{Jb.exports={Between:Wv(),BetweenPoints:Mb(),BetweenPointsY:Ob(),BetweenY:Db(),CounterClockwise:Nb(),Normalize:Hv(),Random:kb(),RandomDegrees:Yb(),Reverse:Vb(),RotateTo:Hb(),ShortestBetween:Zb(),Wrap:Jd(),WrapDegrees:Qd()}});var Zv=l((PWe,$b)=>{var bve=function(e,t){var i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)};$b.exports=bve});var eP=l((MWe,jb)=>{var Pve=function(e,t){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r};jb.exports=Pve});var iP=l((LWe,tP)=>{var Mve=function(e,t,i,r){return Math.max(Math.abs(e-i),Math.abs(t-r))};tP.exports=Mve});var sP=l((OWe,rP)=>{var Lve=function(e,t,i,r,s){return s===void 0&&(s=2),Math.sqrt(Math.pow(i-e,s)+Math.pow(r-t,s))};rP.exports=Lve});var aP=l((FWe,nP)=>{var Ove=function(e,t,i,r){return Math.abs(e-i)+Math.abs(t-r)};nP.exports=Ove});var oP=l((DWe,hP)=>{var Fve=function(e,t,i,r){var s=e-i,n=t-r;return s*s+n*n};hP.exports=Fve});var lP=l((IWe,uP)=>{uP.exports={Between:Wr(),BetweenPoints:Zv(),BetweenPointsSquared:eP(),Chebyshev:iP(),Power:sP(),Snake:aP(),Squared:oP()}});var dP=l((NWe,fP)=>{fP.exports={Back:Tv(),Bounce:Ev(),Circular:Sv(),Cubic:_v(),Elastic:wv(),Expo:Cv(),Linear:Rv(),Quadratic:qv(),Quartic:Av(),Quintic:bv(),Sine:Pv(),Stepped:Mv()}});var cP=l((GWe,vP)=>{var Dve=function(e,t){return t===void 0&&(t=1e-4),Math.ceil(e-t)};vP.exports=Dve});var mP=l((BWe,pP)=>{var Ive=function(e,t){return t===void 0&&(t=1e-4),Math.floor(e+t)};pP.exports=Ive});var xP=l((UWe,gP)=>{var Nve=function(e,t,i){return i===void 0&&(i=1e-4),e>t-i};gP.exports=Nve});var TP=l((kWe,yP)=>{var Gve=function(e,t,i){return i===void 0&&(i=1e-4),e<t+i};yP.exports=Gve});var SP=l((zWe,EP)=>{EP.exports={Ceil:cP(),Equal:Ro(),Floor:mP(),GreaterThan:xP(),LessThan:TP()}});var Jv=l((YWe,_P)=>{var Bve=function(e){if(e===0)return 1;for(var t=e;--e;)t*=e;return t};_P.exports=Bve});var $v=l((XWe,wP)=>{var Qv=Jv(),Uve=function(e,t){return Qv(e)/Qv(t)/Qv(e-t)};wP.exports=Uve});var RP=l((VWe,CP)=>{var kve=$v(),zve=function(e,t){for(var i=0,r=e.length-1,s=0;s<=r;s++)i+=Math.pow(1-t,r-s)*Math.pow(t,s)*e[s]*kve(r,s);return i};CP.exports=zve});var jv=l((WWe,qP)=>{var Yve=function(e,t,i,r,s){var n=(r-t)*.5,a=(s-i)*.5,h=e*e,o=e*h;return(2*i-2*r+n+a)*o+(-3*i+3*r-2*n-a)*h+n*e+i};qP.exports=Yve});var bP=l((HWe,AP)=>{var su=jv(),Xve=function(e,t){var i=e.length-1,r=i*t,s=Math.floor(r);return e[0]===e[i]?(t<0&&(s=Math.floor(r=i*(1+t))),su(r-s,e[(s-1+i)%i],e[s],e[(s+1)%i],e[(s+2)%i])):t<0?e[0]-(su(-r,e[0],e[0],e[1],e[1])-e[0]):t>1?e[i]-(su(r-i,e[i],e[i],e[i-1],e[i-1])-e[i]):su(r-s,e[s?s-1:0],e[s],e[i<s+1?i:s+1],e[i<s+2?i:s+2])};AP.exports=Xve});var MP=l((KWe,PP)=>{function Vve(e,t){var i=1-e;return i*i*i*t}function Wve(e,t){var i=1-e;return 3*i*i*e*t}function Hve(e,t){return 3*(1-e)*e*e*t}function Kve(e,t){return e*e*e*t}var Zve=function(e,t,i,r,s){return Vve(e,t)+Wve(e,i)+Hve(e,r)+Kve(e,s)};PP.exports=Zve});var OP=l((ZWe,LP)=>{var ec=$a(),Jve=function(e,t){var i=e.length-1,r=i*t,s=Math.floor(r);return t<0?ec(e[0],e[1],r):t>1?ec(e[i],e[i-1],i-r):ec(e[s],e[s+1>i?i:s+1],r-s)};LP.exports=Jve});var DP=l((JWe,FP)=>{function Qve(e,t){var i=1-e;return i*i*t}function $ve(e,t){return 2*(1-e)*e*t}function jve(e,t){return e*e*t}var ece=function(e,t,i,r){return Qve(e,t)+$ve(e,i)+jve(e,r)};FP.exports=ece});var tc=l((QWe,IP)=>{var tce=ko(),ice=function(e,t,i){return t+(i-t)*tce(e,0,1)};IP.exports=ice});var GP=l(($We,NP)=>{var rce=Uo(),sce=function(e,t,i){return t+(i-t)*rce(e,0,1)};NP.exports=sce});var UP=l((jWe,BP)=>{BP.exports={Bezier:RP(),CatmullRom:bP(),CubicBezier:MP(),Linear:OP(),QuadraticBezier:DP(),SmoothStep:tc(),SmootherStep:GP()}});var ic=l((e4e,kP)=>{var nce=function(e){var t=Math.log(e)/.6931471805599453;return 1<<Math.ceil(t)};kP.exports=nce});var ih=l((t4e,zP)=>{var ace=function(e,t){return e>0&&(e&e-1)===0&&t>0&&(t&t-1)===0};zP.exports=ace});var XP=l((i4e,YP)=>{var hce=function(e){return e>0&&(e&e-1)===0};YP.exports=hce});var WP=l((r4e,VP)=>{VP.exports={GetNext:ic(),IsSize:ih(),IsValue:XP()}});var KP=l((s4e,HP)=>{var oce=function(e,t,i,r){return i===void 0&&(i=0),t===0?e:(e-=i,e=t*Math.ceil(e/t),r?(i+e)/t:i+e)};HP.exports=oce});var rh=l((n4e,ZP)=>{var uce=function(e,t,i,r){return i===void 0&&(i=0),t===0?e:(e-=i,e=t*Math.floor(e/t),r?(i+e)/t:i+e)};ZP.exports=uce});var QP=l((a4e,JP)=>{var lce=function(e,t,i,r){return i===void 0&&(i=0),t===0?e:(e-=i,e=t*Math.round(e/t),r?(i+e)/t:i+e)};JP.exports=lce});var jP=l((h4e,$P)=>{$P.exports={Ceil:KP(),Floor:rh(),To:QP()}});var tM=l((o4e,eM)=>{var fce=C(),dce=new fce({initialize:function(t){t===void 0&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var e=2091639*this.s0+this.c*23283064365386963e-26;return this.c=e|0,this.s0=this.s1,this.s1=this.s2,this.s2=e-this.c,this.s2},hash:function(e){var t,i=this.n;e=e.toString();for(var r=0;r<e.length;r++)i+=e.charCodeAt(r),t=.02519603282416938*i,i=t>>>0,t-=i,t*=i,i=t>>>0,t-=i,i+=t*4294967296;return this.n=i,(i>>>0)*23283064365386963e-26},init:function(e){typeof e=="string"?this.state(e):this.sow(e)},sow:function(e){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!e)for(var t=0;t<e.length&&e[t]!=null;t++){var i=e[t];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},between:function(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},realInRange:function(e,t){return this.frac()*(t-e)+e},normal:function(){return 1-2*this.frac()},uuid:function(){var e="",t="";for(t=e="";e++<36;t+=~e%5|e*3&4?(e^15?8^this.frac()*(e^20?16:4):4).toString(16):"-");return t},pick:function(e){return e[this.integerInRange(0,e.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(e){return e[~~(Math.pow(this.frac(),2)*(e.length-1)+.5)]},timestamp:function(e,t){return this.realInRange(e||9466848e5,t||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(e){return typeof e=="string"&&e.match(/^!rnd/)&&(e=e.split(","),this.c=parseFloat(e[1]),this.s0=parseFloat(e[2]),this.s1=parseFloat(e[3]),this.s2=parseFloat(e[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(e){for(var t=e.length-1,i=t;i>0;i--){var r=Math.floor(this.frac()*(i+1)),s=e[r];e[r]=e[i],e[i]=s}return e}});eM.exports=dce});var rM=l((u4e,iM)=>{var vce=function(e){for(var t=0,i=0;i<e.length;i++)t+=+e[i];return t/e.length};iM.exports=vce});var nu=l((l4e,sM)=>{var cce=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};sM.exports=cce});var aM=l((f4e,nM)=>{var pce=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=10);var r=Math.pow(i,-t);return Math.ceil(e*r)/r};nM.exports=pce});var oM=l((d4e,hM)=>{var mce=function(e,t){return Math.abs(e-t)};hM.exports=mce});var mi=l((v4e,uM)=>{var gce=C(),ot=new gce({initialize:function(t,i,r){this.x=0,this.y=0,this.z=0,typeof t=="object"?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clone:function(){return new ot(this.x,this.y,this.z)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},crossVectors:function(e,t){var i=e.x,r=e.y,s=e.z,n=t.x,a=t.y,h=t.z;return this.x=r*h-s*a,this.y=s*n-i*h,this.z=i*a-r*n,this},equals:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z||0,this},set:function(e,t,i){return typeof e=="object"?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):(this.x=e||0,this.y=t||0,this.z=i||0),this},setFromMatrixPosition:function(e){return this.fromArray(e.val,12)},setFromMatrixColumn:function(e,t){return this.fromArray(e.val,t*4)},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z||0,this},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addScale:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t||0,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z||0,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z||1,this},scale:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0;return Math.sqrt(t*t+i*i+r*r)},distanceSq:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0;return t*t+i*i+r*r},length:function(){var e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)},lengthSq:function(){var e=this.x,t=this.y,i=this.z;return e*e+t*t+i*i},normalize:function(){var e=this.x,t=this.y,i=this.z,r=e*e+t*t+i*i;return r>0&&(r=1/Math.sqrt(r),this.x=e*r,this.y=t*r,this.z=i*r),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},cross:function(e){var t=this.x,i=this.y,r=this.z,s=e.x,n=e.y,a=e.z;return this.x=i*a-r*n,this.y=r*s-t*a,this.z=t*n-i*s,this},lerp:function(e,t){t===void 0&&(t=0);var i=this.x,r=this.y,s=this.z;return this.x=i+t*(e.x-i),this.y=r+t*(e.y-r),this.z=s+t*(e.z-s),this},applyMatrix3:function(e){var t=this.x,i=this.y,r=this.z,s=e.val;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,s=e.val,n=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*n,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*n,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*n,this},transformMat3:function(e){var t=this.x,i=this.y,r=this.z,s=e.val;return this.x=t*s[0]+i*s[3]+r*s[6],this.y=t*s[1]+i*s[4]+r*s[7],this.z=t*s[2]+i*s[5]+r*s[8],this},transformMat4:function(e){var t=this.x,i=this.y,r=this.z,s=e.val;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12],this.y=s[1]*t+s[5]*i+s[9]*r+s[13],this.z=s[2]*t+s[6]*i+s[10]*r+s[14],this},transformCoordinates:function(e){var t=this.x,i=this.y,r=this.z,s=e.val,n=t*s[0]+i*s[4]+r*s[8]+s[12],a=t*s[1]+i*s[5]+r*s[9]+s[13],h=t*s[2]+i*s[6]+r*s[10]+s[14],o=t*s[3]+i*s[7]+r*s[11]+s[15];return this.x=n/o,this.y=a/o,this.z=h/o,this},transformQuat:function(e){var t=this.x,i=this.y,r=this.z,s=e.x,n=e.y,a=e.z,h=e.w,o=h*t+n*r-a*i,u=h*i+a*t-s*r,f=h*r+s*i-n*t,d=-s*t-n*i-a*r;return this.x=o*h+d*-s+u*-a-f*-n,this.y=u*h+d*-n+f*-s-o*-a,this.z=f*h+d*-a+o*-n-u*-s,this},project:function(e){var t=this.x,i=this.y,r=this.z,s=e.val,n=s[0],a=s[1],h=s[2],o=s[3],u=s[4],f=s[5],d=s[6],v=s[7],c=s[8],p=s[9],m=s[10],x=s[11],g=s[12],y=s[13],T=s[14],S=s[15],E=1/(t*o+i*v+r*x+S);return this.x=(t*n+i*u+r*c+g)*E,this.y=(t*a+i*f+r*p+y)*E,this.z=(t*h+i*d+r*m+T)*E,this},projectViewMatrix:function(e,t){return this.applyMatrix4(e).applyMatrix4(t)},unprojectViewMatrix:function(e,t){return this.applyMatrix4(e).applyMatrix4(t)},unproject:function(e,t){var i=e.x,r=e.y,s=e.z,n=e.w,a=this.x-i,h=n-this.y-1-r,o=this.z;return this.x=2*a/s-1,this.y=2*h/n-1,this.z=2*o-1,this.project(t)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});ot.ZERO=new ot;ot.RIGHT=new ot(1,0,0);ot.LEFT=new ot(-1,0,0);ot.UP=new ot(0,-1,0);ot.DOWN=new ot(0,1,0);ot.FORWARD=new ot(0,0,1);ot.BACK=new ot(0,0,-1);ot.ONE=new ot(1,1,1);uM.exports=ot});var Er=l((c4e,lM)=>{var xce=C(),rc=mi(),au=1e-6,ou=new xce({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new ou(this)},set:function(e){return this.copy(e)},setValues:function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p,m){var x=this.val;return x[0]=e,x[1]=t,x[2]=i,x[3]=r,x[4]=s,x[5]=n,x[6]=a,x[7]=h,x[8]=o,x[9]=u,x[10]=f,x[11]=d,x[12]=v,x[13]=c,x[14]=p,x[15]=m,this},copy:function(e){var t=e.val;return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},fromArray:function(e){return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(e,t,i){var r=On.fromQuat(i),s=r.val,n=t.x,a=t.y,h=t.z;return this.setValues(s[0]*n,s[1]*n,s[2]*n,0,s[4]*a,s[5]*a,s[6]*a,0,s[8]*h,s[9]*h,s[10]*h,0,e.x,e.y,e.z,1)},xyz:function(e,t,i){this.identity();var r=this.val;return r[12]=e,r[13]=t,r[14]=i,this},scaling:function(e,t,i){this.zero();var r=this.val;return r[0]=e,r[5]=t,r[10]=i,r[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var e=this.val,t=e[1],i=e[2],r=e[3],s=e[6],n=e[7],a=e[11];return e[1]=e[4],e[2]=e[8],e[3]=e[12],e[4]=t,e[6]=e[9],e[7]=e[13],e[8]=i,e[9]=s,e[11]=e[14],e[12]=r,e[13]=n,e[14]=a,this},getInverse:function(e){return this.copy(e),this.invert()},invert:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=e[6],o=e[7],u=e[8],f=e[9],d=e[10],v=e[11],c=e[12],p=e[13],m=e[14],x=e[15],g=t*a-i*n,y=t*h-r*n,T=t*o-s*n,S=i*h-r*a,E=i*o-s*a,_=r*o-s*h,w=u*p-f*c,R=u*m-d*c,q=u*x-v*c,A=f*m-d*p,b=f*x-v*p,L=d*x-v*m,M=g*L-y*b+T*A+S*q-E*R+_*w;return M?(M=1/M,this.setValues((a*L-h*b+o*A)*M,(r*b-i*L-s*A)*M,(p*_-m*E+x*S)*M,(d*E-f*_-v*S)*M,(h*q-n*L-o*R)*M,(t*L-r*q+s*R)*M,(m*T-c*_-x*y)*M,(u*_-d*T+v*y)*M,(n*b-a*q+o*w)*M,(i*q-t*b-s*w)*M,(c*E-p*T+x*g)*M,(f*T-u*E-v*g)*M,(a*R-n*A-h*w)*M,(t*A-i*R+r*w)*M,(p*y-c*S-m*g)*M,(u*S-f*y+d*g)*M)):this},adjoint:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=e[6],o=e[7],u=e[8],f=e[9],d=e[10],v=e[11],c=e[12],p=e[13],m=e[14],x=e[15];return this.setValues(a*(d*x-v*m)-f*(h*x-o*m)+p*(h*v-o*d),-(i*(d*x-v*m)-f*(r*x-s*m)+p*(r*v-s*d)),i*(h*x-o*m)-a*(r*x-s*m)+p*(r*o-s*h),-(i*(h*v-o*d)-a*(r*v-s*d)+f*(r*o-s*h)),-(n*(d*x-v*m)-u*(h*x-o*m)+c*(h*v-o*d)),t*(d*x-v*m)-u*(r*x-s*m)+c*(r*v-s*d),-(t*(h*x-o*m)-n*(r*x-s*m)+c*(r*o-s*h)),t*(h*v-o*d)-n*(r*v-s*d)+u*(r*o-s*h),n*(f*x-v*p)-u*(a*x-o*p)+c*(a*v-o*f),-(t*(f*x-v*p)-u*(i*x-s*p)+c*(i*v-s*f)),t*(a*x-o*p)-n*(i*x-s*p)+c*(i*o-s*a),-(t*(a*v-o*f)-n*(i*v-s*f)+u*(i*o-s*a)),-(n*(f*m-d*p)-u*(a*m-h*p)+c*(a*d-h*f)),t*(f*m-d*p)-u*(i*m-r*p)+c*(i*d-r*f),-(t*(a*m-h*p)-n*(i*m-r*p)+c*(i*h-r*a)),t*(a*d-h*f)-n*(i*d-r*f)+u*(i*h-r*a))},determinant:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=e[6],o=e[7],u=e[8],f=e[9],d=e[10],v=e[11],c=e[12],p=e[13],m=e[14],x=e[15],g=t*a-i*n,y=t*h-r*n,T=t*o-s*n,S=i*h-r*a,E=i*o-s*a,_=r*o-s*h,w=u*p-f*c,R=u*m-d*c,q=u*x-v*c,A=f*m-d*p,b=f*x-v*p,L=d*x-v*m;return g*L-y*b+T*A+S*q-E*R+_*w},multiply:function(e){var t=this.val,i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],h=t[5],o=t[6],u=t[7],f=t[8],d=t[9],v=t[10],c=t[11],p=t[12],m=t[13],x=t[14],g=t[15],y=e.val,T=y[0],S=y[1],E=y[2],_=y[3];return t[0]=T*i+S*a+E*f+_*p,t[1]=T*r+S*h+E*d+_*m,t[2]=T*s+S*o+E*v+_*x,t[3]=T*n+S*u+E*c+_*g,T=y[4],S=y[5],E=y[6],_=y[7],t[4]=T*i+S*a+E*f+_*p,t[5]=T*r+S*h+E*d+_*m,t[6]=T*s+S*o+E*v+_*x,t[7]=T*n+S*u+E*c+_*g,T=y[8],S=y[9],E=y[10],_=y[11],t[8]=T*i+S*a+E*f+_*p,t[9]=T*r+S*h+E*d+_*m,t[10]=T*s+S*o+E*v+_*x,t[11]=T*n+S*u+E*c+_*g,T=y[12],S=y[13],E=y[14],_=y[15],t[12]=T*i+S*a+E*f+_*p,t[13]=T*r+S*h+E*d+_*m,t[14]=T*s+S*o+E*v+_*x,t[15]=T*n+S*u+E*c+_*g,this},multiplyLocal:function(e){var t=this.val,i=e.val;return this.setValues(t[0]*i[0]+t[1]*i[4]+t[2]*i[8]+t[3]*i[12],t[0]*i[1]+t[1]*i[5]+t[2]*i[9]+t[3]*i[13],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]+t[3]*i[14],t[0]*i[3]+t[1]*i[7]+t[2]*i[11]+t[3]*i[15],t[4]*i[0]+t[5]*i[4]+t[6]*i[8]+t[7]*i[12],t[4]*i[1]+t[5]*i[5]+t[6]*i[9]+t[7]*i[13],t[4]*i[2]+t[5]*i[6]+t[6]*i[10]+t[7]*i[14],t[4]*i[3]+t[5]*i[7]+t[6]*i[11]+t[7]*i[15],t[8]*i[0]+t[9]*i[4]+t[10]*i[8]+t[11]*i[12],t[8]*i[1]+t[9]*i[5]+t[10]*i[9]+t[11]*i[13],t[8]*i[2]+t[9]*i[6]+t[10]*i[10]+t[11]*i[14],t[8]*i[3]+t[9]*i[7]+t[10]*i[11]+t[11]*i[15],t[12]*i[0]+t[13]*i[4]+t[14]*i[8]+t[15]*i[12],t[12]*i[1]+t[13]*i[5]+t[14]*i[9]+t[15]*i[13],t[12]*i[2]+t[13]*i[6]+t[14]*i[10]+t[15]*i[14],t[12]*i[3]+t[13]*i[7]+t[14]*i[11]+t[15]*i[15])},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.val,r=t.val,s=i[0],n=i[4],a=i[8],h=i[12],o=i[1],u=i[5],f=i[9],d=i[13],v=i[2],c=i[6],p=i[10],m=i[14],x=i[3],g=i[7],y=i[11],T=i[15],S=r[0],E=r[4],_=r[8],w=r[12],R=r[1],q=r[5],A=r[9],b=r[13],L=r[2],M=r[6],G=r[10],P=r[14],D=r[3],I=r[7],F=r[11],O=r[15];return this.setValues(s*S+n*R+a*L+h*D,o*S+u*R+f*L+d*D,v*S+c*R+p*L+m*D,x*S+g*R+y*L+T*D,s*E+n*q+a*M+h*I,o*E+u*q+f*M+d*I,v*E+c*q+p*M+m*I,x*E+g*q+y*M+T*I,s*_+n*A+a*G+h*F,o*_+u*A+f*G+d*F,v*_+c*A+p*G+m*F,x*_+g*A+y*G+T*F,s*w+n*b+a*P+h*O,o*w+u*b+f*P+d*O,v*w+c*b+p*P+m*O,x*w+g*b+y*P+T*O)},translate:function(e){return this.translateXYZ(e.x,e.y,e.z)},translateXYZ:function(e,t,i){var r=this.val;return r[12]=r[0]*e+r[4]*t+r[8]*i+r[12],r[13]=r[1]*e+r[5]*t+r[9]*i+r[13],r[14]=r[2]*e+r[6]*t+r[10]*i+r[14],r[15]=r[3]*e+r[7]*t+r[11]*i+r[15],this},scale:function(e){return this.scaleXYZ(e.x,e.y,e.z)},scaleXYZ:function(e,t,i){var r=this.val;return r[0]=r[0]*e,r[1]=r[1]*e,r[2]=r[2]*e,r[3]=r[3]*e,r[4]=r[4]*t,r[5]=r[5]*t,r[6]=r[6]*t,r[7]=r[7]*t,r[8]=r[8]*i,r[9]=r[9]*i,r[10]=r[10]*i,r[11]=r[11]*i,this},makeRotationAxis:function(e,t){var i=Math.cos(t),r=Math.sin(t),s=1-i,n=e.x,a=e.y,h=e.z,o=s*n,u=s*a;return this.setValues(o*n+i,o*a-r*h,o*h+r*a,0,o*a+r*h,u*a+i,u*h-r*n,0,o*h-r*a,u*h+r*n,s*h*h+i,0,0,0,0,1)},rotate:function(e,t){var i=this.val,r=t.x,s=t.y,n=t.z,a=Math.sqrt(r*r+s*s+n*n);if(Math.abs(a)<au)return this;a=1/a,r*=a,s*=a,n*=a;var h=Math.sin(e),o=Math.cos(e),u=1-o,f=i[0],d=i[1],v=i[2],c=i[3],p=i[4],m=i[5],x=i[6],g=i[7],y=i[8],T=i[9],S=i[10],E=i[11],_=i[12],w=i[13],R=i[14],q=i[15],A=r*r*u+o,b=s*r*u+n*h,L=n*r*u-s*h,M=r*s*u-n*h,G=s*s*u+o,P=n*s*u+r*h,D=r*n*u+s*h,I=s*n*u-r*h,F=n*n*u+o;return this.setValues(f*A+p*b+y*L,d*A+m*b+T*L,v*A+x*b+S*L,c*A+g*b+E*L,f*M+p*G+y*P,d*M+m*G+T*P,v*M+x*G+S*P,c*M+g*G+E*P,f*D+p*I+y*F,d*D+m*I+T*F,v*D+x*I+S*F,c*D+g*I+E*F,_,w,R,q)},rotateX:function(e){var t=this.val,i=Math.sin(e),r=Math.cos(e),s=t[4],n=t[5],a=t[6],h=t[7],o=t[8],u=t[9],f=t[10],d=t[11];return t[4]=s*r+o*i,t[5]=n*r+u*i,t[6]=a*r+f*i,t[7]=h*r+d*i,t[8]=o*r-s*i,t[9]=u*r-n*i,t[10]=f*r-a*i,t[11]=d*r-h*i,this},rotateY:function(e){var t=this.val,i=Math.sin(e),r=Math.cos(e),s=t[0],n=t[1],a=t[2],h=t[3],o=t[8],u=t[9],f=t[10],d=t[11];return t[0]=s*r-o*i,t[1]=n*r-u*i,t[2]=a*r-f*i,t[3]=h*r-d*i,t[8]=s*i+o*r,t[9]=n*i+u*r,t[10]=a*i+f*r,t[11]=h*i+d*r,this},rotateZ:function(e){var t=this.val,i=Math.sin(e),r=Math.cos(e),s=t[0],n=t[1],a=t[2],h=t[3],o=t[4],u=t[5],f=t[6],d=t[7];return t[0]=s*r+o*i,t[1]=n*r+u*i,t[2]=a*r+f*i,t[3]=h*r+d*i,t[4]=o*r-s*i,t[5]=u*r-n*i,t[6]=f*r-a*i,t[7]=d*r-h*i,this},fromRotationTranslation:function(e,t){var i=e.x,r=e.y,s=e.z,n=e.w,a=i+i,h=r+r,o=s+s,u=i*a,f=i*h,d=i*o,v=r*h,c=r*o,p=s*o,m=n*a,x=n*h,g=n*o;return this.setValues(1-(v+p),f+g,d-x,0,f-g,1-(u+p),c+m,0,d+x,c-m,1-(u+v),0,t.x,t.y,t.z,1)},fromQuat:function(e){var t=e.x,i=e.y,r=e.z,s=e.w,n=t+t,a=i+i,h=r+r,o=t*n,u=t*a,f=t*h,d=i*a,v=i*h,c=r*h,p=s*n,m=s*a,x=s*h;return this.setValues(1-(d+c),u+x,f-m,0,u-x,1-(o+c),v+p,0,f+m,v-p,1-(o+d),0,0,0,0,1)},frustum:function(e,t,i,r,s,n){var a=1/(t-e),h=1/(r-i),o=1/(s-n);return this.setValues(s*2*a,0,0,0,0,s*2*h,0,0,(t+e)*a,(r+i)*h,(n+s)*o,-1,0,0,n*s*2*o,0)},perspective:function(e,t,i,r){var s=1/Math.tan(e/2),n=1/(i-r);return this.setValues(s/t,0,0,0,0,s,0,0,0,0,(r+i)*n,-1,0,0,2*r*i*n,0)},perspectiveLH:function(e,t,i,r){return this.setValues(2*i/e,0,0,0,0,2*i/t,0,0,0,0,-r/(i-r),1,0,0,i*r/(i-r),0)},ortho:function(e,t,i,r,s,n){var a=e-t,h=i-r,o=s-n;return a=a===0?a:1/a,h=h===0?h:1/h,o=o===0?o:1/o,this.setValues(-2*a,0,0,0,0,-2*h,0,0,0,0,2*o,0,(e+t)*a,(r+i)*h,(n+s)*o,1)},lookAtRH:function(e,t,i){var r=this.val;return ti.subVectors(e,t),ti.getLengthSquared()===0&&(ti.z=1),ti.normalize(),$r.crossVectors(i,ti),$r.getLengthSquared()===0&&(Math.abs(i.z)===1?ti.x+=1e-4:ti.z+=1e-4,ti.normalize(),$r.crossVectors(i,ti)),$r.normalize(),hu.crossVectors(ti,$r),r[0]=$r.x,r[1]=$r.y,r[2]=$r.z,r[4]=hu.x,r[5]=hu.y,r[6]=hu.z,r[8]=ti.x,r[9]=ti.y,r[10]=ti.z,this},lookAt:function(e,t,i){var r=e.x,s=e.y,n=e.z,a=i.x,h=i.y,o=i.z,u=t.x,f=t.y,d=t.z;if(Math.abs(r-u)<au&&Math.abs(s-f)<au&&Math.abs(n-d)<au)return this.identity();var v=r-u,c=s-f,p=n-d,m=1/Math.sqrt(v*v+c*c+p*p);v*=m,c*=m,p*=m;var x=h*p-o*c,g=o*v-a*p,y=a*c-h*v;m=Math.sqrt(x*x+g*g+y*y),m?(m=1/m,x*=m,g*=m,y*=m):(x=0,g=0,y=0);var T=c*y-p*g,S=p*x-v*y,E=v*g-c*x;return m=Math.sqrt(T*T+S*S+E*E),m?(m=1/m,T*=m,S*=m,E*=m):(T=0,S=0,E=0),this.setValues(x,T,v,0,g,S,c,0,y,E,p,0,-(x*r+g*s+y*n),-(T*r+S*s+E*n),-(v*r+c*s+p*n),1)},yawPitchRoll:function(e,t,i){this.zero(),On.zero(),sh.zero();var r=this.val,s=On.val,n=sh.val,a=Math.sin(i),h=Math.cos(i);return r[10]=1,r[15]=1,r[0]=h,r[1]=a,r[4]=-a,r[5]=h,a=Math.sin(t),h=Math.cos(t),s[0]=1,s[15]=1,s[5]=h,s[10]=h,s[9]=-a,s[6]=a,a=Math.sin(e),h=Math.cos(e),n[5]=1,n[15]=1,n[0]=h,n[2]=-a,n[8]=a,n[10]=h,this.multiplyLocal(On),this.multiplyLocal(sh),this},setWorldMatrix:function(e,t,i,r,s){return this.yawPitchRoll(e.y,e.x,e.z),On.scaling(i.x,i.y,i.z),sh.xyz(t.x,t.y,t.z),this.multiplyLocal(On),this.multiplyLocal(sh),r&&this.multiplyLocal(r),s&&this.multiplyLocal(s),this},multiplyToMat4:function(e,t){var i=this.val,r=e.val,s=i[0],n=i[1],a=i[2],h=i[3],o=i[4],u=i[5],f=i[6],d=i[7],v=i[8],c=i[9],p=i[10],m=i[11],x=i[12],g=i[13],y=i[14],T=i[15],S=r[0],E=r[1],_=r[2],w=r[3],R=r[4],q=r[5],A=r[6],b=r[7],L=r[8],M=r[9],G=r[10],P=r[11],D=r[12],I=r[13],F=r[14],O=r[15];return t.setValues(S*s+E*o+_*v+w*x,E*n+E*u+_*c+w*g,_*a+E*f+_*p+w*y,w*h+E*d+_*m+w*T,R*s+q*o+A*v+b*x,R*n+q*u+A*c+b*g,R*a+q*f+A*p+b*y,R*h+q*d+A*m+b*T,L*s+M*o+G*v+P*x,L*n+M*u+G*c+P*g,L*a+M*f+G*p+P*y,L*h+M*d+G*m+P*T,D*s+I*o+F*v+O*x,D*n+I*u+F*c+O*g,D*a+I*f+F*p+O*y,D*h+I*d+F*m+O*T)},fromRotationXYTranslation:function(e,t,i){var r=t.x,s=t.y,n=t.z,a=Math.sin(e.x),h=Math.cos(e.x),o=Math.sin(e.y),u=Math.cos(e.y),f=r,d=s,v=n,c=-a,p=0-c*o,m=0-h*o,x=c*u,g=h*u;return i||(f=u*r+o*n,d=p*r+h*s+x*n,v=m*r+a*s+g*n),this.setValues(u,p,m,0,0,h,a,0,o,x,g,0,f,d,v,1)},getMaxScaleOnAxis:function(){var e=this.val,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}}),On=new ou,sh=new ou,$r=new rc,hu=new rc,ti=new rc;lM.exports=ou});var vM=l((p4e,dM)=>{var Fn=Le(),yce=C(),Tce=Er(),Ece=B(),fM=new Tce,sc=new yce({initialize:function e(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=e.DefaultOrder),this._x=t,this._y=i,this._z=r,this._order=s,this.onChangeCallback=Ece},x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback(this)}},set:function(e,t,i,r){return r===void 0&&(r=this._order),this._x=e,this._y=t,this._z=i,this._order=r,this.onChangeCallback(this),this},copy:function(e){return this.set(e.x,e.y,e.z,e.order)},setFromQuaternion:function(e,t,i){return t===void 0&&(t=this._order),i===void 0&&(i=!1),fM.fromQuat(e),this.setFromRotationMatrix(fM,t,i)},setFromRotationMatrix:function(e,t,i){t===void 0&&(t=this._order),i===void 0&&(i=!1);var r=e.val,s=r[0],n=r[4],a=r[8],h=r[1],o=r[5],u=r[9],f=r[2],d=r[6],v=r[10],c=0,p=0,m=0,x=.99999;switch(t){case"XYZ":{p=Math.asin(Fn(a,-1,1)),Math.abs(a)<x?(c=Math.atan2(-u,v),m=Math.atan2(-n,s)):c=Math.atan2(d,o);break}case"YXZ":{c=Math.asin(-Fn(u,-1,1)),Math.abs(u)<x?(p=Math.atan2(a,v),m=Math.atan2(h,o)):p=Math.atan2(-f,s);break}case"ZXY":{c=Math.asin(Fn(d,-1,1)),Math.abs(d)<x?(p=Math.atan2(-f,v),m=Math.atan2(-n,o)):m=Math.atan2(h,s);break}case"ZYX":{p=Math.asin(-Fn(f,-1,1)),Math.abs(f)<x?(c=Math.atan2(d,v),m=Math.atan2(h,s)):m=Math.atan2(-n,o);break}case"YZX":{m=Math.asin(Fn(h,-1,1)),Math.abs(h)<x?(c=Math.atan2(-u,o),p=Math.atan2(-f,s)):p=Math.atan2(a,v);break}case"XZY":{m=Math.asin(-Fn(n,-1,1)),Math.abs(n)<x?(c=Math.atan2(d,o),p=Math.atan2(a,s)):c=Math.atan2(-u,v);break}}return this._x=c,this._y=p,this._z=m,this._order=t,i&&this.onChangeCallback(this),this}});sc.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"];sc.DefaultOrder="XYZ";dM.exports=sc});var pM=l((m4e,cM)=>{var Sce=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=10);var r=Math.pow(i,-t);return Math.floor(e*r)/r};cM.exports=Sce});var gM=l((g4e,mM)=>{var _ce=function(e,t){return e/t/1e3};mM.exports=_ce});var yM=l((x4e,xM)=>{var wce=function(e){return e==parseFloat(e)?!(e%2):void 0};xM.exports=wce});var EM=l((y4e,TM)=>{var Cce=function(e){return e===parseFloat(e)?!(e%2):void 0};TM.exports=Cce});var _M=l((T4e,SM)=>{var Rce=function(e,t,i){return Math.min(e+t,i)};SM.exports=Rce});var CM=l((E4e,wM)=>{var qce=function(e){var t=e.length;if(t===0)return 0;e.sort(function(r,s){return r-s});var i=Math.floor(t/2);return t%2===0?(e[i]+e[i-1])/2:e[i]};wM.exports=qce});var qM=l((S4e,RM)=>{var Ace=function(e,t,i){return Math.max(e-t,i)};RM.exports=Ace});var bM=l((_4e,AM)=>{var bce=function(e,t,i,r){i===void 0&&(i=t+1);var s=(e-t)/(i-t);return s>1?r!==void 0?(s=(r-e)/(r-i),s<0&&(s=0)):s=1:s<0&&(s=0),s};AM.exports=bce});var MM=l((w4e,PM)=>{var Pce=Oe(),Mce=function(e){return e*Pce.RAD_TO_DEG};PM.exports=Mce});var OM=l((C4e,LM)=>{var Lce=function(e,t){t===void 0&&(t=1);var i=Math.random()*2*Math.PI;return e.x=Math.cos(i)*t,e.y=Math.sin(i)*t,e};LM.exports=Lce});var DM=l((R4e,FM)=>{var Oce=function(e,t){t===void 0&&(t=1);var i=Math.random()*2*Math.PI,r=Math.random()*2-1,s=Math.sqrt(1-r*r)*t;return e.x=Math.cos(i)*s,e.y=Math.sin(i)*s,e.z=r*t,e};FM.exports=Oce});var NM=l((q4e,IM)=>{var Fce=function(e,t){return t===void 0&&(t=1),e.x=(Math.random()*2-1)*t,e.y=(Math.random()*2-1)*t,e.z=(Math.random()*2-1)*t,e.w=(Math.random()*2-1)*t,e};IM.exports=Fce});var BM=l((A4e,GM)=>{var Dce=function(e,t){var i=e.x,r=e.y;return e.x=i*Math.cos(t)-r*Math.sin(t),e.y=i*Math.sin(t)+r*Math.cos(t),e};GM.exports=Dce});var kM=l((b4e,UM)=>{var Ice=function(e,t,i,r,s){return e.x=t+s*Math.cos(r),e.y=i+s*Math.sin(r),e};UM.exports=Ice});var nc=l((P4e,zM)=>{var Nce=function(e){return e>0?Math.ceil(e):Math.floor(e)};zM.exports=Nce});var XM=l((M4e,YM)=>{var Gce=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=10);var r=Math.pow(i,-t);return Math.round(e*r)/r};YM.exports=Gce});var WM=l((L4e,VM)=>{var Bce=function(e,t,i,r){t===void 0&&(t=1),i===void 0&&(i=1),r===void 0&&(r=1),r*=Math.PI/e;for(var s=[],n=[],a=0;a<e;a++)i-=t*r,t+=i*r,s[a]=i,n[a]=t;return{sin:n,cos:s,length:e}};VM.exports=Bce});var KM=l((O4e,HM)=>{var Uce=xe(),kce=function(e,t,i,r){r===void 0&&(r=new Uce);var s=0,n=0,a=t*i;return e>0&&e<=a&&(e>t-1?(n=Math.floor(e/t),s=e-n*t):s=e),r.set(s,n)};HM.exports=kce});var JM=l((F4e,ZM)=>{var zce=function(e,t,i){return Math.abs(e-t)<=i};ZM.exports=zce});var nh=l((D4e,QM)=>{var Yce=C(),_t=new Yce({initialize:function(t,i,r,s){this.x=0,this.y=0,this.z=0,this.w=0,typeof t=="object"?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=r||0,this.w=s||0)},clone:function(){return new _t(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z||0,this.w=e.w||0,this},equals:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w},set:function(e,t,i,r){return typeof e=="object"?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.w=e.w||0):(this.x=e||0,this.y=t||0,this.z=i||0,this.w=r||0),this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z||0,this.w+=e.w||0,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z||0,this.w-=e.w||0,this},scale:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},length:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return Math.sqrt(e*e+t*t+i*i+r*r)},lengthSq:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return e*e+t*t+i*i+r*r},normalize:function(){var e=this.x,t=this.y,i=this.z,r=this.w,s=e*e+t*t+i*i+r*r;return s>0&&(s=1/Math.sqrt(s),this.x=e*s,this.y=t*s,this.z=i*s,this.w=r*s),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lerp:function(e,t){t===void 0&&(t=0);var i=this.x,r=this.y,s=this.z,n=this.w;return this.x=i+t*(e.x-i),this.y=r+t*(e.y-r),this.z=s+t*(e.z-s),this.w=n+t*(e.w-n),this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z||1,this.w*=e.w||1,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z||1,this.w/=e.w||1,this},distance:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0,s=e.w-this.w||0;return Math.sqrt(t*t+i*i+r*r+s*s)},distanceSq:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0,s=e.w-this.w||0;return t*t+i*i+r*r+s*s},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(e){var t=this.x,i=this.y,r=this.z,s=this.w,n=e.val;return this.x=n[0]*t+n[4]*i+n[8]*r+n[12]*s,this.y=n[1]*t+n[5]*i+n[9]*r+n[13]*s,this.z=n[2]*t+n[6]*i+n[10]*r+n[14]*s,this.w=n[3]*t+n[7]*i+n[11]*r+n[15]*s,this},transformQuat:function(e){var t=this.x,i=this.y,r=this.z,s=e.x,n=e.y,a=e.z,h=e.w,o=h*t+n*r-a*i,u=h*i+a*t-s*r,f=h*r+s*i-n*t,d=-s*t-n*i-a*r;return this.x=o*h+d*-s+u*-a-f*-n,this.y=u*h+d*-n+f*-s-o*-a,this.z=f*h+d*-a+o*-n-u*-s,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});_t.prototype.sub=_t.prototype.subtract;_t.prototype.mul=_t.prototype.multiply;_t.prototype.div=_t.prototype.divide;_t.prototype.dist=_t.prototype.distance;_t.prototype.distSq=_t.prototype.distanceSq;_t.prototype.len=_t.prototype.length;_t.prototype.lenSq=_t.prototype.lengthSq;QM.exports=_t});var ac=l((I4e,jM)=>{var Xce=C(),$M=new Xce({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new $M(this)},set:function(e){return this.copy(e)},copy:function(e){var t=this.val,i=e.val;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this},fromMat4:function(e){var t=e.val,i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[4],i[4]=t[5],i[5]=t[6],i[6]=t[8],i[7]=t[9],i[8]=t[10],this},fromArray:function(e){var t=this.val;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},identity:function(){var e=this.val;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,this},transpose:function(){var e=this.val,t=e[1],i=e[2],r=e[5];return e[1]=e[3],e[2]=e[6],e[3]=t,e[5]=e[7],e[6]=i,e[7]=r,this},invert:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=e[6],o=e[7],u=e[8],f=u*n-a*o,d=-u*s+a*h,v=o*s-n*h,c=t*f+i*d+r*v;return c?(c=1/c,e[0]=f*c,e[1]=(-u*i+r*o)*c,e[2]=(a*i-r*n)*c,e[3]=d*c,e[4]=(u*t-r*h)*c,e[5]=(-a*t+r*s)*c,e[6]=v*c,e[7]=(-o*t+i*h)*c,e[8]=(n*t-i*s)*c,this):null},adjoint:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=e[6],o=e[7],u=e[8];return e[0]=n*u-a*o,e[1]=r*o-i*u,e[2]=i*a-r*n,e[3]=a*h-s*u,e[4]=t*u-r*h,e[5]=r*s-t*a,e[6]=s*o-n*h,e[7]=i*h-t*o,e[8]=t*n-i*s,this},determinant:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=e[6],o=e[7],u=e[8];return t*(u*n-a*o)+i*(-u*s+a*h)+r*(o*s-n*h)},multiply:function(e){var t=this.val,i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],h=t[5],o=t[6],u=t[7],f=t[8],d=e.val,v=d[0],c=d[1],p=d[2],m=d[3],x=d[4],g=d[5],y=d[6],T=d[7],S=d[8];return t[0]=v*i+c*n+p*o,t[1]=v*r+c*a+p*u,t[2]=v*s+c*h+p*f,t[3]=m*i+x*n+g*o,t[4]=m*r+x*a+g*u,t[5]=m*s+x*h+g*f,t[6]=y*i+T*n+S*o,t[7]=y*r+T*a+S*u,t[8]=y*s+T*h+S*f,this},translate:function(e){var t=this.val,i=e.x,r=e.y;return t[6]=i*t[0]+r*t[3]+t[6],t[7]=i*t[1]+r*t[4]+t[7],t[8]=i*t[2]+r*t[5]+t[8],this},rotate:function(e){var t=this.val,i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],h=t[5],o=Math.sin(e),u=Math.cos(e);return t[0]=u*i+o*n,t[1]=u*r+o*a,t[2]=u*s+o*h,t[3]=u*n-o*i,t[4]=u*a-o*r,t[5]=u*h-o*s,this},scale:function(e){var t=this.val,i=e.x,r=e.y;return t[0]=i*t[0],t[1]=i*t[1],t[2]=i*t[2],t[3]=r*t[3],t[4]=r*t[4],t[5]=r*t[5],this},fromQuat:function(e){var t=e.x,i=e.y,r=e.z,s=e.w,n=t+t,a=i+i,h=r+r,o=t*n,u=t*a,f=t*h,d=i*a,v=i*h,c=r*h,p=s*n,m=s*a,x=s*h,g=this.val;return g[0]=1-(d+c),g[3]=u+x,g[6]=f-m,g[1]=u-x,g[4]=1-(o+c),g[7]=v+p,g[2]=f+m,g[5]=v-p,g[8]=1-(o+d),this},normalFromMat4:function(e){var t=e.val,i=this.val,r=t[0],s=t[1],n=t[2],a=t[3],h=t[4],o=t[5],u=t[6],f=t[7],d=t[8],v=t[9],c=t[10],p=t[11],m=t[12],x=t[13],g=t[14],y=t[15],T=r*o-s*h,S=r*u-n*h,E=r*f-a*h,_=s*u-n*o,w=s*f-a*o,R=n*f-a*u,q=d*x-v*m,A=d*g-c*m,b=d*y-p*m,L=v*g-c*x,M=v*y-p*x,G=c*y-p*g,P=T*G-S*M+E*L+_*b-w*A+R*q;return P?(P=1/P,i[0]=(o*G-u*M+f*L)*P,i[1]=(u*b-h*G-f*A)*P,i[2]=(h*M-o*b+f*q)*P,i[3]=(n*M-s*G-a*L)*P,i[4]=(r*G-n*b+a*A)*P,i[5]=(s*b-r*M-a*q)*P,i[6]=(x*R-g*w+y*_)*P,i[7]=(g*E-m*R-y*S)*P,i[8]=(m*w-x*E+y*T)*P,this):null}});jM.exports=$M});var oc=l((N4e,rL)=>{var Vce=C(),Wce=ac(),Hce=B(),hc=mi(),eL=1e-6,tL=new Int8Array([1,2,0]),Dn=new Float32Array([0,0,0]),Kce=new hc(1,0,0),Zce=new hc(0,1,0),jr=new hc,iL=new Wce,Jce=new Vce({initialize:function(t,i,r,s){this.onChangeCallback=Hce,this.set(t,i,r,s)},x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback(this)}},copy:function(e){return this.set(e)},set:function(e,t,i,r,s){return s===void 0&&(s=!0),typeof e=="object"?(this._x=e.x||0,this._y=e.y||0,this._z=e.z||0,this._w=e.w||0):(this._x=e||0,this._y=t||0,this._z=i||0,this._w=r||0),s&&this.onChangeCallback(this),this},add:function(e){return this._x+=e.x,this._y+=e.y,this._z+=e.z,this._w+=e.w,this.onChangeCallback(this),this},subtract:function(e){return this._x-=e.x,this._y-=e.y,this._z-=e.z,this._w-=e.w,this.onChangeCallback(this),this},scale:function(e){return this._x*=e,this._y*=e,this._z*=e,this._w*=e,this.onChangeCallback(this),this},length:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return Math.sqrt(e*e+t*t+i*i+r*r)},lengthSq:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return e*e+t*t+i*i+r*r},normalize:function(){var e=this.x,t=this.y,i=this.z,r=this.w,s=e*e+t*t+i*i+r*r;return s>0&&(s=1/Math.sqrt(s),this._x=e*s,this._y=t*s,this._z=i*s,this._w=r*s),this.onChangeCallback(this),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lerp:function(e,t){t===void 0&&(t=0);var i=this.x,r=this.y,s=this.z,n=this.w;return this.set(i+t*(e.x-i),r+t*(e.y-r),s+t*(e.z-s),n+t*(e.w-n))},rotationTo:function(e,t){var i=e.x*t.x+e.y*t.y+e.z*t.z;return i<-.999999?(jr.copy(Kce).cross(e).length()<eL&&jr.copy(Zce).cross(e),jr.normalize(),this.setAxisAngle(jr,Math.PI)):i>.999999?this.set(0,0,0,1):(jr.copy(e).cross(t),this._x=jr.x,this._y=jr.y,this._z=jr.z,this._w=1+i,this.normalize())},setAxes:function(e,t,i){var r=iL.val;return r[0]=t.x,r[3]=t.y,r[6]=t.z,r[1]=i.x,r[4]=i.y,r[7]=i.z,r[2]=-e.x,r[5]=-e.y,r[8]=-e.z,this.fromMat3(iL).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(e,t){t=t*.5;var i=Math.sin(t);return this.set(i*e.x,i*e.y,i*e.z,Math.cos(t))},multiply:function(e){var t=this.x,i=this.y,r=this.z,s=this.w,n=e.x,a=e.y,h=e.z,o=e.w;return this.set(t*o+s*n+i*h-r*a,i*o+s*a+r*n-t*h,r*o+s*h+t*a-i*n,s*o-t*n-i*a-r*h)},slerp:function(e,t){var i=this.x,r=this.y,s=this.z,n=this.w,a=e.x,h=e.y,o=e.z,u=e.w,f=i*a+r*h+s*o+n*u;f<0&&(f=-f,a=-a,h=-h,o=-o,u=-u);var d=1-t,v=t;if(1-f>eL){var c=Math.acos(f),p=Math.sin(c);d=Math.sin((1-t)*c)/p,v=Math.sin(t*c)/p}return this.set(d*i+v*a,d*r+v*h,d*s+v*o,d*n+v*u)},invert:function(){var e=this.x,t=this.y,i=this.z,r=this.w,s=e*e+t*t+i*i+r*r,n=s?1/s:0;return this.set(-e*n,-t*n,-i*n,r*n)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(e){e*=.5;var t=this.x,i=this.y,r=this.z,s=this.w,n=Math.sin(e),a=Math.cos(e);return this.set(t*a+s*n,i*a+r*n,r*a-i*n,s*a-t*n)},rotateY:function(e){e*=.5;var t=this.x,i=this.y,r=this.z,s=this.w,n=Math.sin(e),a=Math.cos(e);return this.set(t*a-r*n,i*a+s*n,r*a+t*n,s*a-i*n)},rotateZ:function(e){e*=.5;var t=this.x,i=this.y,r=this.z,s=this.w,n=Math.sin(e),a=Math.cos(e);return this.set(t*a+i*n,i*a-t*n,r*a+s*n,s*a-r*n)},calculateW:function(){var e=this.x,t=this.y,i=this.z;return this.w=-Math.sqrt(1-e*e-t*t-i*i),this},setFromEuler:function(e,t){var i=e.x/2,r=e.y/2,s=e.z/2,n=Math.cos(i),a=Math.cos(r),h=Math.cos(s),o=Math.sin(i),u=Math.sin(r),f=Math.sin(s);switch(e.order){case"XYZ":{this.set(o*a*h+n*u*f,n*u*h-o*a*f,n*a*f+o*u*h,n*a*h-o*u*f,t);break}case"YXZ":{this.set(o*a*h+n*u*f,n*u*h-o*a*f,n*a*f-o*u*h,n*a*h+o*u*f,t);break}case"ZXY":{this.set(o*a*h-n*u*f,n*u*h+o*a*f,n*a*f+o*u*h,n*a*h-o*u*f,t);break}case"ZYX":{this.set(o*a*h-n*u*f,n*u*h+o*a*f,n*a*f-o*u*h,n*a*h+o*u*f,t);break}case"YZX":{this.set(o*a*h+n*u*f,n*u*h+o*a*f,n*a*f-o*u*h,n*a*h-o*u*f,t);break}case"XZY":{this.set(o*a*h-n*u*f,n*u*h-o*a*f,n*a*f+o*u*h,n*a*h+o*u*f,t);break}}return this},setFromRotationMatrix:function(e){var t=e.val,i=t[0],r=t[4],s=t[8],n=t[1],a=t[5],h=t[9],o=t[2],u=t[6],f=t[10],d=i+a+f,v;return d>0?(v=.5/Math.sqrt(d+1),this.set((u-h)*v,(s-o)*v,(n-r)*v,.25/v)):i>a&&i>f?(v=2*Math.sqrt(1+i-a-f),this.set(.25*v,(r+n)/v,(s+o)/v,(u-h)/v)):a>f?(v=2*Math.sqrt(1+a-i-f),this.set((r+n)/v,.25*v,(h+u)/v,(s-o)/v)):(v=2*Math.sqrt(1+f-i-a),this.set((s+o)/v,(h+u)/v,.25*v,(n-r)/v)),this},fromMat3:function(e){var t=e.val,i=t[0]+t[4]+t[8],r;if(i>0)r=Math.sqrt(i+1),this.w=.5*r,r=.5/r,this._x=(t[7]-t[5])*r,this._y=(t[2]-t[6])*r,this._z=(t[3]-t[1])*r;else{var s=0;t[4]>t[0]&&(s=1),t[8]>t[s*3+s]&&(s=2);var n=tL[s],a=tL[n];r=Math.sqrt(t[s*3+s]-t[n*3+n]-t[a*3+a]+1),Dn[s]=.5*r,r=.5/r,Dn[n]=(t[n*3+s]+t[s*3+n])*r,Dn[a]=(t[a*3+s]+t[s*3+a])*r,this._x=Dn[0],this._y=Dn[1],this._z=Dn[2],this._w=(t[a*3+n]-t[n*3+a])*r}return this.onChangeCallback(this),this}});rL.exports=Jce});var hL=l((G4e,aL)=>{var Qce=mi(),$ce=Er(),jce=oc(),sL=new $ce,nL=new jce,epe=new Qce,tpe=function(e,t,i){return nL.setAxisAngle(t,i),sL.fromRotationTranslation(nL,epe.set(0,0,0)),e.transformMat4(sL)};aL.exports=tpe});var uu=l((B4e,oL)=>{var ipe=Oe(),rpe=Ye(),uc={Angle:Qb(),Distance:lP(),Easing:dP(),Fuzzy:SP(),Interpolation:UP(),Pow2:WP(),Snap:jP(),RandomDataGenerator:tM(),Average:rM(),Bernstein:$v(),Between:nu(),CatmullRom:jv(),CeilTo:aM(),Clamp:Le(),DegToRad:yr(),Difference:oM(),Euler:vM(),Factorial:Jv(),FloatBetween:th(),FloorTo:pM(),FromPercent:En(),GetSpeed:gM(),IsEven:yM(),IsEvenStrict:EM(),Linear:$a(),MaxAdd:_M(),Median:CM(),MinSub:qM(),Percent:bM(),RadToDeg:MM(),RandomXY:OM(),RandomXYZ:DM(),RandomXYZW:NM(),Rotate:BM(),RotateAround:Yd(),RotateAroundDistance:Go(),RotateTo:kM(),RoundAwayFromZero:nc(),RoundTo:XM(),SinCosTableGenerator:WM(),SmootherStep:Uo(),SmoothStep:ko(),ToXY:KM(),TransformXY:Lo(),Within:JM(),Wrap:Xr(),Vector2:xe(),Vector3:mi(),Vector4:nh(),Matrix3:ac(),Matrix4:Er(),Quaternion:oc(),RotateVec3:hL()};uc=rpe(!1,uc,ipe);oL.exports=uc});var lu=l((U4e,uL)=>{var lc={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};lc.DefaultScene.push("CameraManager3D");lc.Global.push("facebook");uL.exports=lc});var dc=l((k4e,pL)=>{var spe=C(),fc=Qt(),lL=Vv(),fL=z(),N=he(),npe=ae(),dL=uu(),vL=B(),ape=lu(),cL=Vo(),hpe=new spe({initialize:function(t){t===void 0&&(t={});var i=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],r="#ffffff";this.width=N(t,"width",1024),this.height=N(t,"height",768),this.zoom=N(t,"zoom",1),this.parent=N(t,"parent",void 0),this.scaleMode=N(t,"scaleMode",0),this.expandParent=N(t,"expandParent",!0),this.autoRound=N(t,"autoRound",!1),this.autoCenter=N(t,"autoCenter",0),this.resizeInterval=N(t,"resizeInterval",500),this.fullscreenTarget=N(t,"fullscreenTarget",null),this.minWidth=N(t,"minWidth",0),this.maxWidth=N(t,"maxWidth",0),this.minHeight=N(t,"minHeight",0),this.maxHeight=N(t,"maxHeight",0);var s=N(t,"scale",null);s&&(this.width=N(s,"width",this.width),this.height=N(s,"height",this.height),this.zoom=N(s,"zoom",this.zoom),this.parent=N(s,"parent",this.parent),this.scaleMode=N(s,"mode",this.scaleMode),this.expandParent=N(s,"expandParent",this.expandParent),this.autoRound=N(s,"autoRound",this.autoRound),this.autoCenter=N(s,"autoCenter",this.autoCenter),this.resizeInterval=N(s,"resizeInterval",this.resizeInterval),this.fullscreenTarget=N(s,"fullscreenTarget",this.fullscreenTarget),this.minWidth=N(s,"min.width",this.minWidth),this.maxWidth=N(s,"max.width",this.maxWidth),this.minHeight=N(s,"min.height",this.minHeight),this.maxHeight=N(s,"max.height",this.maxHeight)),this.renderType=N(t,"type",fc.AUTO),this.canvas=N(t,"canvas",null),this.context=N(t,"context",null),this.canvasStyle=N(t,"canvasStyle",null),this.customEnvironment=N(t,"customEnvironment",!1),this.sceneConfig=N(t,"scene",null),this.seed=N(t,"seed",[(Date.now()*Math.random()).toString()]),dL.RND=new dL.RandomDataGenerator(this.seed),this.gameTitle=N(t,"title",""),this.gameURL=N(t,"url","https://phaser.io"),this.gameVersion=N(t,"version",""),this.autoFocus=N(t,"autoFocus",!0),this.domCreateContainer=N(t,"dom.createContainer",!1),this.domPointerEvents=N(t,"dom.pointerEvents","none"),this.inputKeyboard=N(t,"input.keyboard",!0),this.inputKeyboardEventTarget=N(t,"input.keyboard.target",window),this.inputKeyboardCapture=N(t,"input.keyboard.capture",[]),this.inputMouse=N(t,"input.mouse",!0),this.inputMouseEventTarget=N(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=N(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=N(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=N(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=N(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=N(t,"input.touch",lL.input.touch),this.inputTouchEventTarget=N(t,"input.touch.target",null),this.inputTouchCapture=N(t,"input.touch.capture",!0),this.inputActivePointers=N(t,"input.activePointers",1),this.inputSmoothFactor=N(t,"input.smoothFactor",0),this.inputWindowEvents=N(t,"input.windowEvents",!0),this.inputGamepad=N(t,"input.gamepad",!1),this.inputGamepadEventTarget=N(t,"input.gamepad.target",window),this.disableContextMenu=N(t,"disableContextMenu",!1),this.audio=N(t,"audio",{}),this.hideBanner=N(t,"banner",null)===!1,this.hidePhaser=N(t,"banner.hidePhaser",!1),this.bannerTextColor=N(t,"banner.text",r),this.bannerBackgroundColor=N(t,"banner.background",i),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=N(t,"fps",null);var n=N(t,"render",t);this.pipeline=N(n,"pipeline",null),this.antialias=N(n,"antialias",!0),this.antialiasGL=N(n,"antialiasGL",!0),this.mipmapFilter=N(n,"mipmapFilter","LINEAR"),this.desynchronized=N(n,"desynchronized",!1),this.roundPixels=N(n,"roundPixels",!1),this.pixelArt=N(n,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=N(n,"transparent",!1),this.clearBeforeRender=N(n,"clearBeforeRender",!0),this.preserveDrawingBuffer=N(n,"preserveDrawingBuffer",!1),this.premultipliedAlpha=N(n,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=N(n,"failIfMajorPerformanceCaveat",!1),this.powerPreference=N(n,"powerPreference","default"),this.batchSize=N(n,"batchSize",4096),this.maxTextures=N(n,"maxTextures",-1),this.maxLights=N(n,"maxLights",10);var a=N(t,"backgroundColor",0);this.backgroundColor=cL(a),this.transparent&&(this.backgroundColor=cL(0),this.backgroundColor.alpha=0),this.preBoot=N(t,"callbacks.preBoot",vL),this.postBoot=N(t,"callbacks.postBoot",vL),this.physics=N(t,"physics",{}),this.defaultPhysicsSystem=N(this.physics,"default",!1),this.loaderBaseURL=N(t,"loader.baseURL",""),this.loaderPath=N(t,"loader.path","");var h=lL.os.android?6:32;this.loaderMaxParallelDownloads=N(t,"loader.maxParallelDownloads",h),this.loaderCrossOrigin=N(t,"loader.crossOrigin",void 0),this.loaderResponseType=N(t,"loader.responseType",""),this.loaderAsync=N(t,"loader.async",!0),this.loaderUser=N(t,"loader.user",""),this.loaderPassword=N(t,"loader.password",""),this.loaderTimeout=N(t,"loader.timeout",0),this.loaderWithCredentials=N(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var o=N(t,"plugins",null),u=ape.DefaultScene;o&&(Array.isArray(o)?this.defaultPlugins=o:npe(o)&&(this.installGlobalPlugins=fL(o,"global",[]),this.installScenePlugins=fL(o,"scene",[]),Array.isArray(o.default)?u=o.default:Array.isArray(o.defaultMerge)&&(u=u.concat(o.defaultMerge)))),this.defaultPlugins=u;var f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=N(t,"images.default",f+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=N(t,"images.missing",f+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=N(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=fc.WEBGL:window.FORCE_CANVAS&&(this.renderType=fc.CANVAS))}});pL.exports=hpe});var vc=l((z4e,mL)=>{var ope={setCrisp:function(e){var t=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return t.forEach(function(i){e.style["image-rendering"]=i}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};mL.exports=ope});var pc=l((Y4e,gL)=>{var cc=Ot(),upe=vi(),es=z(),lpe=function(e,t){var i=es(t,"callback"),r=es(t,"type","image/png"),s=es(t,"encoder",.92),n=Math.abs(Math.round(es(t,"x",0))),a=Math.abs(Math.round(es(t,"y",0))),h=es(t,"width",e.width),o=es(t,"height",e.height),u=es(t,"getPixel",!1);if(u){var f=e.getContext("2d"),d=f.getImageData(n,a,1,1),v=d.data;i.call(null,new upe(v[0],v[1],v[2],v[3]/255))}else if(n!==0||a!==0||h!==e.width||o!==e.height){var c=cc.createWebGL(this,h,o),p=c.getContext("2d");p.drawImage(e,n,a,h,o,0,0,h,o);var m=new Image;m.onerror=function(){i.call(null),cc.remove(c)},m.onload=function(){i.call(null,m),cc.remove(c)},m.src=c.toDataURL(r,s)}else{var x=new Image;x.onerror=function(){i.call(null)},x.onload=function(){i.call(null,x)},x.src=e.toDataURL(r,s)}};gL.exports=lpe});var mc=l((X4e,xL)=>{var me=_i(),fpe=Xv(),dpe=function(){var e=[],t=fpe.supportNewBlendModes,i="source-over";return e[me.NORMAL]=i,e[me.ADD]="lighter",e[me.MULTIPLY]=t?"multiply":i,e[me.SCREEN]=t?"screen":i,e[me.OVERLAY]=t?"overlay":i,e[me.DARKEN]=t?"darken":i,e[me.LIGHTEN]=t?"lighten":i,e[me.COLOR_DODGE]=t?"color-dodge":i,e[me.COLOR_BURN]=t?"color-burn":i,e[me.HARD_LIGHT]=t?"hard-light":i,e[me.SOFT_LIGHT]=t?"soft-light":i,e[me.DIFFERENCE]=t?"difference":i,e[me.EXCLUSION]=t?"exclusion":i,e[me.HUE]=t?"hue":i,e[me.SATURATION]=t?"saturation":i,e[me.COLOR]=t?"color":i,e[me.LUMINOSITY]=t?"luminosity":i,e[me.ERASE]="destination-out",e[me.SOURCE_IN]="source-in",e[me.SOURCE_OUT]="source-out",e[me.SOURCE_ATOP]="source-atop",e[me.DESTINATION_OVER]="destination-over",e[me.DESTINATION_IN]="destination-in",e[me.DESTINATION_OUT]="destination-out",e[me.DESTINATION_ATOP]="destination-atop",e[me.LIGHTER]="lighter",e[me.COPY]="copy",e[me.XOR]="xor",e};xL.exports=dpe});var TL=l((V4e,yL)=>{yL.exports="addtexture"});var SL=l((W4e,EL)=>{EL.exports="onerror"});var wL=l((H4e,_L)=>{_L.exports="onload"});var RL=l((K4e,CL)=>{CL.exports="ready"});var AL=l((Z4e,qL)=>{qL.exports="removetexture"});var In=l((J4e,bL)=>{bL.exports={ADD:TL(),ERROR:SL(),LOAD:wL(),READY:RL(),REMOVE:AL()}});var xc=l((Q4e,OL)=>{var PL=di(),ML=pc(),vpe=C(),cpe=Qt(),LL=ue(),fu=Hs(),ppe=mc(),mpe=Mn(),gpe=In(),gc=Tt(),xpe=new vpe({Extends:LL,initialize:function(t){LL.call(this);var i=t.config;this.config={clearBeforeRender:i.clearBeforeRender,backgroundColor:i.backgroundColor,antialias:i.antialias,roundPixels:i.roundPixels},this.game=t,this.type=cpe.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var r={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=i.context?i.context:this.gameCanvas.getContext("2d",r),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=ppe(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new gc,this._tempMatrix2=new gc,this._tempMatrix3=new gc,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(gpe.READY,this.boot,this)},boot:function(){var e=this.game,t=e.scale.baseSize;this.width=t.width,this.height=t.height,this.isBooted=!0,e.scale.on(mpe.RESIZE,this.onResize,this),this.resize(t.width,t.height)},onResize:function(e,t){(t.width!==this.width||t.height!==this.height)&&this.resize(t.width,t.height)},resize:function(e,t){this.width=e,this.height=t,this.emit(fu.RESIZE,e,t)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(e){return this.currentContext.globalCompositeOperation=e,this},setContext:function(e){return this.currentContext=e||this.gameContext,this},setAlpha:function(e){return this.currentContext.globalAlpha=e,this},preRender:function(){var e=this.gameContext,t=this.config,i=this.width,r=this.height;e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),t.clearBeforeRender&&(e.clearRect(0,0,i,r),t.transparent||(e.fillStyle=t.backgroundColor.rgba,e.fillRect(0,0,i,r))),e.save(),this.drawCount=0,this.emit(fu.PRE_RENDER)},render:function(e,t,i){var r=t.length;this.emit(fu.RENDER,e,i);var s=i.x,n=i.y,a=i.width,h=i.height,o=i.renderToTexture?i.context:e.sys.context;o.save(),this.game.scene.customViewports&&(o.beginPath(),o.rect(s,n,a,h),o.clip()),this.currentContext=o;var u=i.mask;u&&u.preRenderCanvas(this,null,i._maskCamera),i.transparent||(o.fillStyle=i.backgroundColor.rgba,o.fillRect(s,n,a,h)),o.globalAlpha=i.alpha,o.globalCompositeOperation="source-over",this.drawCount+=r,i.renderToTexture&&i.emit(PL.PRE_RENDER,i),i.matrix.copyToContext(o);for(var f=0;f<r;f++){var d=t[f];d.mask&&d.mask.preRenderCanvas(this,d,i),d.renderCanvas(this,d,i),d.mask&&d.mask.postRenderCanvas(this,d,i)}o.setTransform(1,0,0,1,0,0),o.globalCompositeOperation="source-over",o.globalAlpha=1,i.flashEffect.postRenderCanvas(o),i.fadeEffect.postRenderCanvas(o),i.dirty=!1,u&&u.postRenderCanvas(this),o.restore(),i.renderToTexture&&(i.emit(PL.POST_RENDER,i),i.renderToGame&&e.sys.context.drawImage(i.canvas,s,n))},postRender:function(){var e=this.gameContext;e.restore(),this.emit(fu.POST_RENDER);var t=this.snapshotState;t.callback&&(ML(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function(e,t,i,r,s,n,a,h,o){i===void 0&&(i=!1),this.snapshotArea(r,s,n,a,t,h,o);var u=this.snapshotState;return u.getPixel=i,ML(e,u),u.callback=null,this},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,e,t,i)},snapshotArea:function(e,t,i,r,s,n,a){var h=this.snapshotState;return h.callback=s,h.type=n,h.encoder=a,h.getPixel=!1,h.x=e,h.y=t,h.width=Math.min(i,this.gameCanvas.width),h.height=Math.min(r,this.gameCanvas.height),this},snapshotPixel:function(e,t,i){return this.snapshotArea(e,t,1,1,i),this.snapshotState.getPixel=!0,this},batchSprite:function(e,t,i,r){var s=i.alpha*e.alpha;if(s!==0){var n=this.currentContext,a=this._tempMatrix1,h=this._tempMatrix2,o=t.canvasData,u=o.x,f=o.y,d=t.cutWidth,v=t.cutHeight,c=t.customPivot,p=t.source.resolution,m=e.displayOriginX,x=e.displayOriginY,g=-m+t.x,y=-x+t.y;if(e.isCropped){var T=e._crop;(T.flipX!==e.flipX||T.flipY!==e.flipY)&&t.updateCropUVs(T,e.flipX,e.flipY),d=T.cw,v=T.ch,u=T.cx,f=T.cy,g=-m+T.x,y=-x+T.y,e.flipX&&(g>=0?g=-(g+d):g<0&&(g=Math.abs(g)-d)),e.flipY&&(y>=0?y=-(y+v):y<0&&(y=Math.abs(y)-v))}var S=1,E=1;e.flipX&&(c||(g+=-t.realWidth+m*2),S=-1),e.flipY&&(c||(y+=-t.realHeight+x*2),E=-1),h.applyITRS(e.x,e.y,e.rotation,e.scaleX*S,e.scaleY*E),a.copyFrom(i.matrix),r?(a.multiplyWithOffset(r,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),h.e=e.x,h.f=e.y):(h.e-=i.scrollX*e.scrollFactorX,h.f-=i.scrollY*e.scrollFactorY),a.multiply(h),n.save(),a.setToContext(n),n.globalCompositeOperation=this.blendModes[e.blendMode],n.globalAlpha=s,n.imageSmoothingEnabled=!(!this.antialias||t.source.scaleMode),e.mask&&e.mask.preRenderCanvas(this,e,i),n.drawImage(t.source.image,u,f,d,v,g,y,d/p,v/p),e.mask&&e.mask.postRenderCanvas(this,e,i),n.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});OL.exports=xpe});var tn=l(($4e,DL)=>{var FL=Zs(),ype=function(e,t,i,r){r===void 0&&(r=e);var s;if(!Array.isArray(t))return s=e.indexOf(t),s!==-1?(FL(e,s),i&&i.call(r,t),t):null;for(var n=t.length-1,a=[];n>=0;){var h=t[n];s=e.indexOf(h),s!==-1&&(FL(e,s),a.push(h),i&&i.call(r,h)),n--}return a};DL.exports=ype});var NL=l((j4e,IL)=>{IL.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)});var BL=l((eHe,GL)=>{GL.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)});var Nn=l((tHe,UL)=>{var Tpe={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};UL.exports=Tpe});var zL=l((iHe,kL)=>{kL.exports="pipelineafterflush"});var XL=l((rHe,YL)=>{YL.exports="pipelinebeforeflush"});var WL=l((sHe,VL)=>{VL.exports="pipelinebind"});var KL=l((nHe,HL)=>{HL.exports="pipelineboot"});var JL=l((aHe,ZL)=>{ZL.exports="pipelinedestroy"});var $L=l((hHe,QL)=>{QL.exports="pipelinerebind"});var eO=l((oHe,jL)=>{jL.exports="pipelineresize"});var yc=l((uHe,tO)=>{tO.exports={AFTER_FLUSH:zL(),BEFORE_FLUSH:XL(),BIND:WL(),BOOT:KL(),DESTROY:JL(),REBIND:$L(),RESIZE:eO()}});var ah=l((lHe,iO)=>{var Epe=C(),Tc=Hs(),Spe=new Epe({initialize:function(t,i,r,s,n,a,h){s===void 0&&(s=1),n===void 0&&(n=0),a===void 0&&(a=!0),h===void 0&&(h=!1),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=s,this.minFilter=n,this.autoClear=a,this.autoResize=!1,this.resize(i,r),h&&this.setAutoResize(!0)},setAutoResize:function(e){return e&&!this.autoResize?(this.renderer.on(Tc.RESIZE,this.resize,this),this.autoResize=!0):!e&&this.autoResize&&(this.renderer.off(Tc.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(e,t){var i=e*this.scale,r=t*this.scale;if(i!==this.width||r!==this.height){var s=this.renderer;s.deleteFramebuffer(this.framebuffer),s.deleteTexture(this.texture),e*=this.scale,t*=this.scale,e=Math.round(e),t=Math.round(t),e<=0&&(e=1),t<=0&&(t=1),this.texture=s.createTextureFromSource(null,e,t,this.minFilter),this.framebuffer=s.createFramebuffer(e,t,this.texture,!1),this.width=e,this.height=t}return this},bind:function(e,t,i){if(e===void 0&&(e=!1),e&&this.renderer.flush(),t&&i&&this.resize(t,i),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),e&&this.adjustViewport(),this.autoClear){var r=this.renderer.gl;r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)}},adjustViewport:function(){var e=this.renderer.gl;e.viewport(0,0,this.width,this.height),e.disable(e.SCISSOR_TEST)},clear:function(){var e=this.renderer,t=e.gl;e.pushFramebuffer(this.framebuffer),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e.popFramebuffer(),e.resetScissor()},unbind:function(e){e===void 0&&(e=!1);var t=this.renderer;return e&&t.flush(),t.popFramebuffer()},destroy:function(){var e=this.renderer;e.deleteFramebuffer(this.framebuffer),e.deleteTexture(this.texture),e.off(Tc.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});iO.exports=Spe});var Te=l((fHe,rO)=>{function _pe(e){for(var t="",i=0;i<e;++i)i>0&&(t+=`
else `),i<e-1&&(t+="if(test == "+i+".0){}");return t}rO.exports={getTintFromFloats:function(e,t,i,r){var s=(e*255|0)&255,n=(t*255|0)&255,a=(i*255|0)&255,h=(r*255|0)&255;return(h<<24|s<<16|n<<8|a)>>>0},getTintAppendFloatAlpha:function(e,t){var i=(t*255|0)&255;return(i<<24|e)>>>0},getTintAppendFloatAlphaAndSwap:function(e,t){var i=(e>>16|0)&255,r=(e>>8|0)&255,s=(e|0)&255,n=(t*255|0)&255;return(n<<24|s<<16|r<<8|i)>>>0},getFloatsFromUintRGB:function(e){var t=(e>>16|0)&255,i=(e>>8|0)&255,r=(e|0)&255;return[t/255,i/255,r/255]},checkShaderMax:function(e,t){(!t||t===-1)&&(t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS));for(var i=e.createShader(e.FRAGMENT_SHADER),r=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var s=r.replace(/%forloop%/gi,_pe(t));if(e.shaderSource(i,s),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))t=t/2|0;else break}return t},parseFragmentShaderMaxTextures:function(e,t){if(!e)return"";for(var i="",r=0;r<t;r++)r>0&&(i+=`
	else `),r<t-1&&(i+="if (outTexId < "+r+".5)"),i+=`
	{`,i+=`
		texture = texture2D(uMainSampler[`+r+"], outTexCoord);",i+=`
	}`;return e=e.replace(/%count%/gi,t.toString()),e.replace(/%forloop%/gi,i)}}});var Ec=l((dHe,nO)=>{var wpe=C(),sO=z(),Cpe=Nn(),Rpe=new wpe({initialize:function(t,i,r,s,n){this.pipeline=t,this.name=i,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(r,s),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(n),this.createUniforms()},createAttributes:function(e){var t=0,i=0,r=[];this.vertexComponentCount=0;for(var s=0;s<e.length;s++){var n=e[s],a=n.name,h=sO(n,"size",1),o=sO(n,"type",Cpe.FLOAT),u=o.enum,f=o.size,d=!!n.normalized;r.push({name:a,size:h,type:u,normalized:d,offset:i,enabled:!1,location:-1}),f===4?t+=h:t++,i+=h*f}this.vertexSize=i,this.vertexComponentCount=t,this.attributes=r},bind:function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),t&&this.pipeline.flush(),this.renderer.setProgram(this.program),e&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(e){e===void 0&&(e=!1);for(var t=this.gl,i=this.vertexSize,r=this.attributes,s=this.program,n=0;n<r.length;n++){var a=r[n],h=a.size,o=a.type,u=a.offset,f=a.enabled,d=a.location,v=!!a.normalized;if(e){var c=t.getAttribLocation(s,a.name);c>=0?(t.enableVertexAttribArray(c),t.vertexAttribPointer(c,h,o,v,i,u),a.enabled=!0,a.location=c):c!==-1&&t.disableVertexAttribArray(c)}else f?t.vertexAttribPointer(d,h,o,v,i,u):!f&&d>-1&&(t.disableVertexAttribArray(d),a.location=-1)}return this},createUniforms:function(){var e=this.gl,t=this.program,i=this.uniforms,r,s,n,a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(r=0;r<a;r++){var h=e.getActiveUniform(t,r);if(h){s=h.name,n=e.getUniformLocation(t,s),n!==null&&(i[s]={name:s,location:n,value1:null,value2:null,value3:null,value4:null});var o=s.indexOf("[");o>0&&(s=s.substr(0,o),i.hasOwnProperty(s)||(n=e.getUniformLocation(t,s),n!==null&&(i[s]={name:s,location:n,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(e){return this.uniforms.hasOwnProperty(e)},resetUniform:function(e){var t=this.uniforms[e];return t&&(t.value1=null,t.value2=null,t.value3=null,t.value4=null),this},setUniform1:function(e,t,i,r){var s=this.uniforms[t];return s?((r||s.value1!==i)&&(s.value1=i,this.renderer.setProgram(this.program),e.call(this.gl,s.location,i),this.pipeline.currentShader=this),this):this},setUniform2:function(e,t,i,r,s){var n=this.uniforms[t];return n?((s||n.value1!==i||n.value2!==r)&&(n.value1=i,n.value2=r,this.renderer.setProgram(this.program),e.call(this.gl,n.location,i,r),this.pipeline.currentShader=this),this):this},setUniform3:function(e,t,i,r,s,n){var a=this.uniforms[t];return a?((n||a.value1!==i||a.value2!==r||a.value3!==s)&&(a.value1=i,a.value2=r,a.value3=s,this.renderer.setProgram(this.program),e.call(this.gl,a.location,i,r,s),this.pipeline.currentShader=this),this):this},setUniform4:function(e,t,i,r,s,n,a){var h=this.uniforms[t];return h?((a||h.value1!==i||h.value2!==r||h.value3!==s||h.value4!==n)&&(h.value1=i,h.value2=r,h.value3=s,h.value4=n,this.renderer.setProgram(this.program),e.call(this.gl,h.location,i,r,s,n),this.pipeline.currentShader=this),this):this},set1f:function(e,t){return this.setUniform1(this.gl.uniform1f,e,t)},set2f:function(e,t,i){return this.setUniform2(this.gl.uniform2f,e,t,i)},set3f:function(e,t,i,r){return this.setUniform3(this.gl.uniform3f,e,t,i,r)},set4f:function(e,t,i,r,s){return this.setUniform4(this.gl.uniform4f,e,t,i,r,s)},set1fv:function(e,t){return this.setUniform1(this.gl.uniform1fv,e,t,!0)},set2fv:function(e,t){return this.setUniform1(this.gl.uniform2fv,e,t,!0)},set3fv:function(e,t){return this.setUniform1(this.gl.uniform3fv,e,t,!0)},set4fv:function(e,t){return this.setUniform1(this.gl.uniform4fv,e,t,!0)},set1iv:function(e,t){return this.setUniform1(this.gl.uniform1iv,e,t,!0)},set2iv:function(e,t){return this.setUniform1(this.gl.uniform2iv,e,t,!0)},set3iv:function(e,t){return this.setUniform1(this.gl.uniform3iv,e,t,!0)},set4iv:function(e,t){return this.setUniform1(this.gl.uniform4iv,e,t,!0)},set1i:function(e,t){return this.setUniform1(this.gl.uniform1i,e,t)},set2i:function(e,t,i){return this.setUniform2(this.gl.uniform2i,e,t,i)},set3i:function(e,t,i,r){return this.setUniform3(this.gl.uniform3i,e,t,i,r)},set4i:function(e,t,i,r,s){return this.setUniform4(this.gl.uniform4i,e,t,i,r,s)},setMatrix2fv:function(e,t,i){return this.setUniform2(this.gl.uniformMatrix2fv,e,t,i,!0)},setMatrix3fv:function(e,t,i){return this.setUniform2(this.gl.uniformMatrix3fv,e,t,i,!0)},setMatrix4fv:function(e,t,i){return this.setUniform2(this.gl.uniformMatrix4fv,e,t,i,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});nO.exports=Rpe});var Qi=l((vHe,lO)=>{var qpe=C(),aO=Po(),hO=ue(),rn=yc(),mt=z(),Ape=Er(),ts=Hs(),oO=ah(),Sc=Te(),uO=Ec(),bpe=new qpe({Extends:hO,initialize:function(t){hO.call(this);var i=t.game,r=i.renderer,s=r.gl;this.name=mt(t,"name","WebGLPipeline"),this.game=i,this.renderer=r,this.manager,this.gl=s,this.view=i.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=mt(t,"topology",s.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=mt(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1},boot:function(){var e,t=this.gl,i=this.config,r=this.renderer;this.isPostFX||(this.projectionMatrix=new Ape().identity());var s=this.renderTargets,n=mt(i,"renderTarget",!1);typeof n=="boolean"&&n&&(n=1);var a=r.width,h=r.height;if(typeof n=="number")for(e=0;e<n;e++)s.push(new oO(r,a,h,1,0,!0));else if(Array.isArray(n))for(e=0;e<n.length;e++){var o=mt(n[e],"scale",1),u=mt(n[e],"minFilter",0),f=mt(n[e],"autoClear",1);s.push(new oO(r,a,h,o,u,f))}s.length&&(this.currentRenderTarget=s[0]),this.setShadersFromConfig(i);var d=this.shaders,v=0;for(e=0;e<d.length;e++)d[e].vertexSize>v&&(v=d[e].vertexSize);var c=mt(i,"batchSize",r.config.batchSize);this.vertexCapacity=c*6;var p=new ArrayBuffer(this.vertexCapacity*v);this.vertexData=p,this.bytes=new Uint8Array(p),this.vertexViewF32=new Float32Array(p),this.vertexViewU32=new Uint32Array(p);var m=mt(i,"vertices",null);for(m?(this.vertexViewF32.set(m),this.vertexBuffer=r.createVertexBuffer(p,t.STATIC_DRAW)):this.vertexBuffer=r.createVertexBuffer(p.byteLength,t.DYNAMIC_DRAW),this.setVertexBuffer(),e=d.length-1;e>=0;e--)d[e].rebind();this.hasBooted=!0,r.on(ts.RESIZE,this.resize,this),r.on(ts.PRE_RENDER,this.onPreRender,this),r.on(ts.RENDER,this.onRender,this),r.on(ts.POST_RENDER,this.onPostRender,this),this.emit(rn.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(e,t){var i=this.renderer;if(e!==this.currentShader||i.currentProgram!==this.currentShader.program){this.flush(),i.resetTextures();var r=this.setVertexBuffer();r&&!t&&(t=!0),e.bind(t,!1),this.currentShader=e}return this},getShaderByName:function(e){for(var t=this.shaders,i=0;i<t.length;i++)if(t[i].name===e)return t[i]},setShadersFromConfig:function(e){var t,i=this.shaders,r=this.renderer;for(t=0;t<i.length;t++)i[t].destroy();var s="vertShader",n="fragShader",a="attributes",h=mt(e,s,null),o=Sc.parseFragmentShaderMaxTextures(mt(e,n,null),r.maxTextures),u=mt(e,a,null),f=mt(e,"shaders",[]),d=f.length;if(d===0)h&&o&&(this.shaders=[new uO(this,"default",h,o,aO(u))]);else{var v=[];for(t=0;t<d;t++){var c=f[t],p=mt(c,"name","default"),m=mt(c,s,h),x=Sc.parseFragmentShaderMaxTextures(mt(c,n,o),r.maxTextures),g=mt(c,a,u);m&&x&&v.push(new uO(this,p,m,x,aO(g)))}this.shaders=v}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(e,t){return t===void 0&&(t=e.frame),this.currentUnit=this.renderer.setTextureSource(t.source),this.currentUnit},shouldFlush:function(e){return e===void 0&&(e=0),this.vertexCount+e>this.vertexCapacity},resize:function(e,t){(e!==this.width||t!==this.height)&&this.flush(),this.width=e,this.height=t;for(var i=this.renderTargets,r=0;r<i.length;r++)i[r].resize(e,t);return this.setProjectionMatrix(e,t),this.emit(rn.RESIZE,e,t,this),this.onResize(e,t),this},setProjectionMatrix:function(e,t){var i=this.projectionMatrix;if(!i)return this;this.projectionWidth=e,this.projectionHeight=t,i.ortho(0,e,t,0,-1e3,1e3);for(var r=this.shaders,s="uProjectionMatrix",n=0;n<r.length;n++){var a=r[n];a.hasUniform(s)&&(a.resetUniform(s),a.setMatrix4fv(s,!1,i.val,a))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var e=this.renderer.projectionWidth,t=this.renderer.projectionHeight;(this.projectionWidth!==e||this.projectionHeight!==t)&&this.setProjectionMatrix(e,t)}},bind:function(e){if(e===void 0&&(e=this.currentShader),this.glReset)return this.rebind(e);var t=this.setVertexBuffer();return e.bind(t),this.currentShader=e,this.emit(rn.BIND,this,e),this.onActive(e),this},rebind:function(e){this.setVertexBuffer();for(var t=this.shaders,i=t.length-1;i>=0;i--){var r=t[i].rebind();(!e||r===e)&&(this.currentShader=r)}return this.emit(rn.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var e=this.gl,t=this.vertexBuffer;return e.getParameter(e.ARRAY_BUFFER_BINDING)!==t?(e.bindBuffer(e.ARRAY_BUFFER,t),!0):!1},preBatch:function(e){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(e),this},postBatch:function(e){return this.onDraw(this.currentRenderTarget),this.onPostBatch(e),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(e){if(e===void 0&&(e=!1),this.vertexCount>0){this.emit(rn.BEFORE_FLUSH,this,e),this.onBeforeFlush(e);var t=this.gl,i=this.vertexCount,r=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),i===this.vertexCapacity?t.bufferData(t.ARRAY_BUFFER,this.vertexData,t.DYNAMIC_DRAW):t.bufferSubData(t.ARRAY_BUFFER,0,this.bytes.subarray(0,i*r)),t.drawArrays(this.topology,0,i)),this.vertexCount=0,this.emit(rn.AFTER_FLUSH,this,e),this.onAfterFlush(e)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(e,t,i,r,s,n,a){var h=this.vertexViewF32,o=this.vertexViewU32,u=this.vertexCount*this.currentShader.vertexComponentCount-1;h[++u]=e,h[++u]=t,h[++u]=i,h[++u]=r,h[++u]=s,h[++u]=n,o[++u]=a,this.vertexCount++},batchQuad:function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p,m,x,g,y,T){T===void 0&&(T=this.currentUnit);var S=!1;return this.shouldFlush(6)&&(this.flush(),S=!0,T=this.setTexture2D(y)),this.batchVert(t,i,u,f,T,g,c),this.batchVert(r,s,u,v,T,g,m),this.batchVert(n,a,d,v,T,g,x),this.batchVert(t,i,u,f,T,g,c),this.batchVert(n,a,d,v,T,g,x),this.batchVert(h,o,d,f,T,g,p),this.onBatch(e),S},batchTri:function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p,m,x){x===void 0&&(x=this.currentUnit);var g=!1;return this.shouldFlush(3)&&(this.flush(),g=!0,x=this.setTexture2D(m)),this.batchVert(t,i,h,o,x,p,d),this.batchVert(r,s,h,f,x,p,v),this.batchVert(n,a,u,f,x,p,c),this.onBatch(e),g},drawFillRect:function(e,t,i,r,s,n,a,h){a===void 0&&(a=this.renderer.whiteTexture.glTexture),h===void 0&&(h=!0),e=Math.floor(e),t=Math.floor(t);var o=Math.floor(e+i),u=Math.floor(t+r),f=this.setTexture2D(a),d=Sc.getTintAppendFloatAlphaAndSwap(s,n),v=0,c=0,p=1,m=1;h&&(c=1,m=0),this.batchQuad(null,e,t,e,u,o,u,o,t,v,c,p,m,d,d,d,d,0,a,f)},setTexture2D:function(e){return e===void 0&&(e=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(e),this.currentUnit},bindTexture:function(e,t){t===void 0&&(t=0);var i=this.gl;return i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,e),this},bindRenderTarget:function(e,t){return this.bindTexture(e.texture,t)},setTime:function(e){return this.set1f(e,this.game.loop.getDuration()),this},set1f:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set1f(e,t),this},set2f:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.set2f(e,t,i),this},set3f:function(e,t,i,r,s){return s===void 0&&(s=this.currentShader),s.set3f(e,t,i,r),this},set4f:function(e,t,i,r,s,n){return n===void 0&&(n=this.currentShader),n.set4f(e,t,i,r,s),this},set1fv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set1fv(e,t),this},set2fv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set2fv(e,t),this},set3fv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set3fv(e,t),this},set4fv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set4fv(e,t),this},set1iv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set1iv(e,t),this},set2iv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set2iv(e,t),this},set3iv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set3iv(e,t),this},set4iv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set4iv(e,t),this},set1i:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set1i(e,t),this},set2i:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.set2i(e,t,i),this},set3i:function(e,t,i,r,s){return s===void 0&&(s=this.currentShader),s.set3i(e,t,i,r),this},set4i:function(e,t,i,r,s,n){return n===void 0&&(n=this.currentShader),n.set4i(e,t,i,r,s),this},setMatrix2fv:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.setMatrix2fv(e,t,i),this},setMatrix3fv:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.setMatrix3fv(e,t,i),this},setMatrix4fv:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.setMatrix4fv(e,t,i),this},destroy:function(){this.emit(rn.DESTROY,this);var e,t=this.shaders;for(e=0;e<t.length;e++)t[e].destroy();var i=this.renderTargets;for(e=0;e<i.length;e++)i[e].destroy();this.gl.deleteBuffer(this.vertexBuffer);var r=this.renderer;return r.off(ts.RESIZE,this.resize,this),r.off(ts.PRE_RENDER,this.onPreRender,this),r.off(ts.RENDER,this.onRender,this),r.off(ts.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});lO.exports=bpe});var _c=l((cHe,fO)=>{var Ppe=C(),hh=z(),Mpe=NL(),Lpe=BL(),Ope=Nn(),du=Qi(),Fpe=new Ppe({Extends:du,initialize:function(t){t.fragShader=hh(t,"fragShader",Mpe),t.vertShader=hh(t,"vertShader",Lpe),t.batchSize=hh(t,"batchSize",1),t.vertices=hh(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=hh(t,"attributes",[{name:"inPosition",size:2,type:Ope.FLOAT}]),du.call(this,t)},boot:function(){du.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(e,t){du.prototype.resize.call(this,e,t),this.set2f("uResolution",e,t)},beginMask:function(e,t,i){var r=this.gl;if(e.bitmapMask&&r){var s=this.renderer;s.flush(),s.pushFramebuffer(e.mainFramebuffer),r.disable(r.STENCIL_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),s.currentCameraMask.mask!==e&&(s.currentMask.mask=e,s.currentMask.camera=i)}},endMask:function(e,t){var i=this.gl,r=this.renderer,s=e.bitmapMask;if(s&&i){r.flush(),r.pushFramebuffer(e.maskFramebuffer),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),r.setBlendMode(0,!0),s.renderWebGL(r,s,t),r.flush(),r.popFramebuffer(),r.popFramebuffer();var n=r.getCurrentStencilMask();n?(i.enable(i.STENCIL_TEST),n.mask.applyStencil(r,n.camera,!0)):r.currentMask.mask=null,r.pipelines.set(this),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,e.maskTexture),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.mainTexture),this.set1i("uInvertMaskAlpha",e.invertAlpha),i.drawArrays(this.topology,0,3),r.resetTextures()}}});fO.exports=Fpe});var $i=l((pHe,mO)=>{"use strict";function qc(e,t,i){i=i||2;var r=t&&t.length,s=r?t[0]*i:e.length,n=vO(e,0,s,i,!0),a=[];if(!n||n.next===n.prev)return a;var h,o,u,f,d,v,c;if(r&&(n=Bpe(e,t,n,i)),e.length>80*i){h=u=e[0],o=f=e[1];for(var p=i;p<s;p+=i)d=e[p],v=e[p+1],d<h&&(h=d),v<o&&(o=v),d>u&&(u=d),v>f&&(f=v);c=Math.max(u-h,f-o),c=c!==0?1/c:0}return oh(n,a,i,h,o,c),a}function vO(e,t,i,r,s){var n,a;if(s===Rc(e,t,i,r)>0)for(n=t;n<i;n+=r)a=dO(n,e[n],e[n+1],a);else for(n=i-r;n>=t;n-=r)a=dO(n,e[n],e[n+1],a);return a&&pu(a,a.next)&&(lh(a),a=a.next),a}function is(e,t){if(!e)return e;t||(t=e);var i=e,r;do if(r=!1,!i.steiner&&(pu(i,i.next)||be(i.prev,i,i.next)===0)){if(lh(i),i=t=i.prev,i===i.next)break;r=!0}else i=i.next;while(r||i!==t);return t}function oh(e,t,i,r,s,n,a){if(!!e){!a&&n&&Xpe(e,r,s,n);for(var h=e,o,u;e.prev!==e.next;){if(o=e.prev,u=e.next,n?Ipe(e,r,s,n):Dpe(e)){t.push(o.i/i),t.push(e.i/i),t.push(u.i/i),lh(e),e=u.next,h=u.next;continue}if(e=u,e===h){a?a===1?(e=Npe(is(e),t,i),oh(e,t,i,r,s,n,2)):a===2&&Gpe(e,t,i,r,s,n):oh(is(e),t,i,r,s,n,1);break}}}}function Dpe(e){var t=e.prev,i=e,r=e.next;if(be(t,i,r)>=0)return!1;for(var s=e.next.next;s!==e.prev;){if(Gn(t.x,t.y,i.x,i.y,r.x,r.y,s.x,s.y)&&be(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function Ipe(e,t,i,r){var s=e.prev,n=e,a=e.next;if(be(s,n,a)>=0)return!1;for(var h=s.x<n.x?s.x<a.x?s.x:a.x:n.x<a.x?n.x:a.x,o=s.y<n.y?s.y<a.y?s.y:a.y:n.y<a.y?n.y:a.y,u=s.x>n.x?s.x>a.x?s.x:a.x:n.x>a.x?n.x:a.x,f=s.y>n.y?s.y>a.y?s.y:a.y:n.y>a.y?n.y:a.y,d=wc(h,o,t,i,r),v=wc(u,f,t,i,r),c=e.prevZ,p=e.nextZ;c&&c.z>=d&&p&&p.z<=v;){if(c!==e.prev&&c!==e.next&&Gn(s.x,s.y,n.x,n.y,a.x,a.y,c.x,c.y)&&be(c.prev,c,c.next)>=0||(c=c.prevZ,p!==e.prev&&p!==e.next&&Gn(s.x,s.y,n.x,n.y,a.x,a.y,p.x,p.y)&&be(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;c&&c.z>=d;){if(c!==e.prev&&c!==e.next&&Gn(s.x,s.y,n.x,n.y,a.x,a.y,c.x,c.y)&&be(c.prev,c,c.next)>=0)return!1;c=c.prevZ}for(;p&&p.z<=v;){if(p!==e.prev&&p!==e.next&&Gn(s.x,s.y,n.x,n.y,a.x,a.y,p.x,p.y)&&be(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Npe(e,t,i){var r=e;do{var s=r.prev,n=r.next.next;!pu(s,n)&&cO(s,r,r.next,n)&&uh(s,n)&&uh(n,s)&&(t.push(s.i/i),t.push(r.i/i),t.push(n.i/i),lh(r),lh(r.next),r=e=n),r=r.next}while(r!==e);return is(r)}function Gpe(e,t,i,r,s,n){var a=e;do{for(var h=a.next.next;h!==a.prev;){if(a.i!==h.i&&Hpe(a,h)){var o=pO(a,h);a=is(a,a.next),o=is(o,o.next),oh(a,t,i,r,s,n),oh(o,t,i,r,s,n);return}h=h.next}a=a.next}while(a!==e)}function Bpe(e,t,i,r){var s=[],n,a,h,o,u;for(n=0,a=t.length;n<a;n++)h=t[n]*r,o=n<a-1?t[n+1]*r:e.length,u=vO(e,h,o,r,!1),u===u.next&&(u.steiner=!0),s.push(Wpe(u));for(s.sort(Upe),n=0;n<s.length;n++)kpe(s[n],i),i=is(i,i.next);return i}function Upe(e,t){return e.x-t.x}function kpe(e,t){if(t=zpe(e,t),t){var i=pO(t,e);is(t,t.next),is(i,i.next)}}function zpe(e,t){var i=t,r=e.x,s=e.y,n=-1/0,a;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var h=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(h<=r&&h>n){if(n=h,h===r){if(s===i.y)return i;if(s===i.next.y)return i.next}a=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!a)return null;if(r===n)return a;var o=a,u=a.x,f=a.y,d=1/0,v;i=a;do r>=i.x&&i.x>=u&&r!==i.x&&Gn(s<f?r:n,s,u,f,s<f?n:r,s,i.x,i.y)&&(v=Math.abs(s-i.y)/(r-i.x),uh(i,e)&&(v<d||v===d&&(i.x>a.x||i.x===a.x&&Ype(a,i)))&&(a=i,d=v)),i=i.next;while(i!==o);return a}function Ype(e,t){return be(e.prev,e,t.prev)<0&&be(t.next,e,e.next)<0}function Xpe(e,t,i,r){var s=e;do s.z===null&&(s.z=wc(s.x,s.y,t,i,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,Vpe(s)}function Vpe(e){var t,i,r,s,n,a,h,o,u=1;do{for(i=e,e=null,n=null,a=0;i;){for(a++,r=i,h=0,t=0;t<u&&(h++,r=r.nextZ,!!r);t++);for(o=u;h>0||o>0&&r;)h!==0&&(o===0||!r||i.z<=r.z)?(s=i,i=i.nextZ,h--):(s=r,r=r.nextZ,o--),n?n.nextZ=s:e=s,s.prevZ=n,n=s;i=r}n.nextZ=null,u*=2}while(a>1);return e}function wc(e,t,i,r,s){return e=32767*(e-i)*s,t=32767*(t-r)*s,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Wpe(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Gn(e,t,i,r,s,n,a,h){return(s-a)*(t-h)-(e-a)*(n-h)>=0&&(e-a)*(r-h)-(i-a)*(t-h)>=0&&(i-a)*(n-h)-(s-a)*(r-h)>=0}function Hpe(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Kpe(e,t)&&(uh(e,t)&&uh(t,e)&&Zpe(e,t)&&(be(e.prev,e,t.prev)||be(e,t.prev,t))||pu(e,t)&&be(e.prev,e,e.next)>0&&be(t.prev,t,t.next)>0)}function be(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function pu(e,t){return e.x===t.x&&e.y===t.y}function cO(e,t,i,r){var s=cu(be(e,t,i)),n=cu(be(e,t,r)),a=cu(be(i,r,e)),h=cu(be(i,r,t));return!!(s!==n&&a!==h||s===0&&vu(e,i,t)||n===0&&vu(e,r,t)||a===0&&vu(i,e,r)||h===0&&vu(i,t,r))}function vu(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function cu(e){return e>0?1:e<0?-1:0}function Kpe(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&cO(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function uh(e,t){return be(e.prev,e,e.next)<0?be(e,t,e.next)>=0&&be(e,e.prev,t)>=0:be(e,t,e.prev)<0||be(e,e.next,t)<0}function Zpe(e,t){var i=e,r=!1,s=(e.x+t.x)/2,n=(e.y+t.y)/2;do i.y>n!=i.next.y>n&&i.next.y!==i.y&&s<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==e);return r}function pO(e,t){var i=new Cc(e.i,e.x,e.y),r=new Cc(t.i,t.x,t.y),s=e.next,n=t.prev;return e.next=t,t.prev=e,i.next=s,s.prev=i,r.next=i,i.prev=r,n.next=r,r.prev=n,r}function dO(e,t,i,r){var s=new Cc(e,t,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function lh(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Cc(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}qc.deviation=function(e,t,i,r){var s=t&&t.length,n=s?t[0]*i:e.length,a=Math.abs(Rc(e,0,n,i));if(s)for(var h=0,o=t.length;h<o;h++){var u=t[h]*i,f=h<o-1?t[h+1]*i:e.length;a-=Math.abs(Rc(e,u,f,i))}var d=0;for(h=0;h<r.length;h+=3){var v=r[h]*i,c=r[h+1]*i,p=r[h+2]*i;d+=Math.abs((e[v]-e[p])*(e[c+1]-e[v+1])-(e[v]-e[c])*(e[p+1]-e[v+1]))}return a===0&&d===0?0:Math.abs((d-a)/a)};function Rc(e,t,i,r){for(var s=0,n=t,a=i-r;n<i;n+=r)s+=(e[a]-e[n])*(e[n+1]+e[a+1]),a=n;return s}qc.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,s=0;s<e.length;s++){for(var n=0;n<e[s].length;n++)for(var a=0;a<t;a++)i.vertices.push(e[s][n][a]);s>0&&(r+=e[s-1].length,i.holes.push(r))}return i};mO.exports=qc});var xO=l((mHe,gO)=>{gO.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)});var TO=l((gHe,yO)=>{yO.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)});var Pc=l((xHe,EO)=>{var Jpe=C(),Qpe=$i(),Ac=z(),$pe=xO(),jpe=TO(),eme=Tt(),tme=Nn(),bc=Qi(),ime=new Jpe({Extends:bc,initialize:function(t){t.fragShader=Ac(t,"fragShader",$pe),t.vertShader=Ac(t,"vertShader",jpe),t.attributes=Ac(t,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:tme.UNSIGNED_BYTE,normalized:!0}]),bc.call(this,t),this.calcMatrix=new eme,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(e,t,i,r,s,n){this.renderer.pipelines.set(this);var a=this.calcMatrix;n&&n.multiply(s,a);var h=e+i,o=t+r,u=a.getX(e,t),f=a.getY(e,t),d=a.getX(e,o),v=a.getY(e,o),c=a.getX(h,o),p=a.getY(h,o),m=a.getX(h,t),x=a.getY(h,t),g=this.fillTint;this.batchQuad(u,f,d,v,c,p,m,x,g.TL,g.TR,g.BL,g.BR)},batchFillTriangle:function(e,t,i,r,s,n,a,h){this.renderer.pipelines.set(this);var o=this.calcMatrix;h&&h.multiply(a,o);var u=o.getX(e,t),f=o.getY(e,t),d=o.getX(i,r),v=o.getY(i,r),c=o.getX(s,n),p=o.getY(s,n),m=this.fillTint;this.batchTri(u,f,d,v,c,p,m.TL,m.TR,m.BL)},batchStrokeTriangle:function(e,t,i,r,s,n,a,h,o){var u=this.tempTriangle;u[0].x=e,u[0].y=t,u[0].width=a,u[1].x=i,u[1].y=r,u[1].width=a,u[2].x=s,u[2].y=n,u[2].width=a,u[3].x=e,u[3].y=t,u[3].width=a,this.batchStrokePath(u,a,!1,h,o)},batchFillPath:function(e,t,i){this.renderer.pipelines.set(this);var r=this.calcMatrix;i&&i.multiply(t,r);for(var s=e.length,n=this.polygonCache,a,h,o=this.fillTint.TL,u=this.fillTint.TR,f=this.fillTint.BL,d=0;d<s;++d)h=e[d],n.push(h.x,h.y);a=Qpe(n),s=a.length;for(var v=0;v<s;v+=3){var c=a[v+0]*2,p=a[v+1]*2,m=a[v+2]*2,x=n[c+0],g=n[c+1],y=n[p+0],T=n[p+1],S=n[m+0],E=n[m+1],_=r.getX(x,g),w=r.getY(x,g),R=r.getX(y,T),q=r.getY(y,T),A=r.getX(S,E),b=r.getY(S,E);this.batchTri(_,w,R,q,A,b,o,u,f)}n.length=0},batchStrokePath:function(e,t,i,r,s){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var n=e.length-1,a=0;a<n;a++){var h=e[a],o=e[a+1];this.batchLine(h.x,h.y,o.x,o.y,h.width/2,o.width/2,t,a,!i&&a===n-1,r,s)}},batchLine:function(e,t,i,r,s,n,a,h,o,u,f){this.renderer.pipelines.set(this);var d=this.calcMatrix;f&&f.multiply(u,d);var v=i-e,c=r-t,p=Math.sqrt(v*v+c*c),m=s*(r-t)/p,x=s*(e-i)/p,g=n*(r-t)/p,y=n*(e-i)/p,T=i-g,S=r-y,E=e-m,_=t-x,w=i+g,R=r+y,q=e+m,A=t+x,b=d.getX(T,S),L=d.getY(T,S),M=d.getX(E,_),G=d.getY(E,_),P=d.getX(w,R),D=d.getY(w,R),I=d.getX(q,A),F=d.getY(q,A),O=this.strokeTint,K=O.TL,H=O.TR,Y=O.BL,ee=O.BR;if(this.batchQuad(I,F,M,G,b,L,P,D,K,H,Y,ee),!(a<=2)){var U=this.prevQuad,J=this.firstQuad;h>0&&U[4]?this.batchQuad(I,F,M,G,U[0],U[1],U[2],U[3],K,H,Y,ee):(J[0]=I,J[1]=F,J[2]=M,J[3]=G,J[4]=1),o&&J[4]?this.batchQuad(b,L,P,D,J[0],J[1],J[2],J[3],K,H,Y,ee):(U[0]=b,U[1]=L,U[2]=P,U[3]=D,U[4]=1)}},batchVert:function(e,t,i){var r=this.vertexViewF32,s=this.vertexViewU32,n=this.vertexCount*this.currentShader.vertexComponentCount-1;r[++n]=e,r[++n]=t,s[++n]=i,this.vertexCount++},batchQuad:function(e,t,i,r,s,n,a,h,o,u,f,d){var v=!1;return this.shouldFlush(6)&&(this.flush(),v=!0),this.batchVert(e,t,o),this.batchVert(i,r,f),this.batchVert(s,n,d),this.batchVert(e,t,o),this.batchVert(s,n,d),this.batchVert(a,h,u),v},batchTri:function(e,t,i,r,s,n,a,h,o){var u=!1;return this.shouldFlush(3)&&(this.flush(),u=!0),this.batchVert(e,t,a),this.batchVert(i,r,h),this.batchVert(s,n,o),u},destroy:function(){return bc.prototype.destroy.call(this),this.polygonCache=null,this}});EO.exports=ime});var _O=l((yHe,SO)=>{SO.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)});var CO=l((THe,wO)=>{wO.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)});var qO=l((EHe,RO)=>{RO.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)});var Bn=l((SHe,AO)=>{var rme=C(),sme=$i(),Mc=z(),nme=CO(),ame=qO(),mu=Tt(),Lc=Te(),hme=Nn(),Oc=Qi(),ome=new rme({Extends:Oc,initialize:function(t){var i=t.game.renderer,r=Mc(t,"fragShader",nme);t.fragShader=Lc.parseFragmentShaderMaxTextures(r,i.maxTextures),t.vertShader=Mc(t,"vertShader",ame),t.attributes=Mc(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:hme.UNSIGNED_BYTE,normalized:!0}]),Oc.call(this,t),this._tempMatrix1=new mu,this._tempMatrix2=new mu,this._tempMatrix3=new mu,this.calcMatrix=new mu,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){Oc.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(e,t,i){this.manager.set(this,e);var r=this._tempMatrix1,s=this._tempMatrix2,n=this._tempMatrix3,a=e.frame,h=a.glTexture,o=a.u0,u=a.v0,f=a.u1,d=a.v1,v=a.x,c=a.y,p=a.cutWidth,m=a.cutHeight,x=a.customPivot,g=e.displayOriginX,y=e.displayOriginY,T=-g+v,S=-y+c;if(e.isCropped){var E=e._crop;(E.flipX!==e.flipX||E.flipY!==e.flipY)&&a.updateCropUVs(E,e.flipX,e.flipY),o=E.u0,u=E.v0,f=E.u1,d=E.v1,p=E.width,m=E.height,v=E.x,c=E.y,T=-g+v,S=-y+c}var _=1,w=1;e.flipX&&(x||(T+=-a.realWidth+g*2),_=-1),(e.flipY||a.source.isGLTexture&&!h.flipY)&&(x||(S+=-a.realHeight+y*2),w=-1),s.applyITRS(e.x,e.y,e.rotation,e.scaleX*_,e.scaleY*w),r.copyFrom(t.matrix),i?(r.multiplyWithOffset(i,-t.scrollX*e.scrollFactorX,-t.scrollY*e.scrollFactorY),s.e=e.x,s.f=e.y):(s.e-=t.scrollX*e.scrollFactorX,s.f-=t.scrollY*e.scrollFactorY),r.multiply(s,n);var R=T+p,q=S+m,A=t.roundPixels,b=n.getXRound(T,S,A),L=n.getYRound(T,S,A),M=n.getXRound(T,q,A),G=n.getYRound(T,q,A),P=n.getXRound(R,q,A),D=n.getYRound(R,q,A),I=n.getXRound(R,S,A),F=n.getYRound(R,S,A),O=Lc.getTintAppendFloatAlpha,K=t.alpha,H=O(e.tintTopLeft,K*e._alphaTL),Y=O(e.tintTopRight,K*e._alphaTR),ee=O(e.tintBottomLeft,K*e._alphaBL),U=O(e.tintBottomRight,K*e._alphaBR);this.shouldFlush(6)&&this.flush();var J=this.setGameObject(e,a);this.manager.preBatch(e),this.batchQuad(e,b,L,M,G,P,D,I,F,o,u,f,d,H,Y,ee,U,e.tintFill,h,J),this.manager.postBatch(e)},batchTexture:function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p,m,x,g,y,T,S,E,_,w,R,q,A,b,L,M,G,P){this.manager.set(this,e);var D=this._tempMatrix1,I=this._tempMatrix2,F=this._tempMatrix3,O=g/i+A,K=y/r+b,H=(g+T)/i+A,Y=(y+S)/r+b,ee=a,U=h,J=-m,nt=-x;if(e.isCropped){var ve=e._crop,yt=ve.width,_e=ve.height;ee=yt,U=_e,a=yt,h=_e,g=ve.x,y=ve.y;var at=g,Je=y;d&&(at=T-ve.x-yt),v&&(Je=S-ve.y-_e),O=at/i+A,K=Je/r+b,H=(at+yt)/i+A,Y=(Je+_e)/r+b,J=-m+g,nt=-x+y}v=v^(!G&&t.isRenderTexture?1:0),d&&(ee*=-1,J+=a),v&&(U*=-1,nt+=h);var te=J+ee,ke=nt+U;I.applyITRS(s,n,f,o,u),D.copyFrom(L.matrix),M?(D.multiplyWithOffset(M,-L.scrollX*c,-L.scrollY*p),I.e=s,I.f=n):(I.e-=L.scrollX*c,I.f-=L.scrollY*p),D.multiply(I,F);var qe=L.roundPixels,Mt=F.getXRound(J,nt,qe),lt=F.getYRound(J,nt,qe),oe=F.getXRound(J,ke,qe),ze=F.getYRound(J,ke,qe),ft=F.getXRound(te,ke,qe),X=F.getYRound(te,ke,qe),V=F.getXRound(te,nt,qe),Z=F.getYRound(te,nt,qe);P===void 0&&(P=this.renderer.setTexture2D(t)),e&&this.manager.preBatch(e),this.batchQuad(e,Mt,lt,oe,ze,ft,X,V,Z,O,K,H,Y,E,_,w,R,q,t,P),e&&this.manager.postBatch(e)},batchTextureFrame:function(e,t,i,r,s,n,a){this.manager.set(this);var h=this._tempMatrix1.copyFrom(n),o=this._tempMatrix2,u=t+e.width,f=i+e.height;a?h.multiply(a,o):o=h;var d=o.getX(t,i),v=o.getY(t,i),c=o.getX(t,f),p=o.getY(t,f),m=o.getX(u,f),x=o.getY(u,f),g=o.getX(u,i),y=o.getY(u,i),T=this.renderer.setTextureSource(e.source);r=Lc.getTintAppendFloatAlpha(r,s),this.batchQuad(null,d,v,c,p,m,x,g,y,e.u0,e.v0,e.u1,e.v1,r,r,r,r,0,e.glTexture,T)},batchFillRect:function(e,t,i,r,s,n){this.renderer.pipelines.set(this);var a=this.calcMatrix;n&&n.multiply(s,a);var h=e+i,o=t+r,u=a.getX(e,t),f=a.getY(e,t),d=a.getX(e,o),v=a.getY(e,o),c=a.getX(h,o),p=a.getY(h,o),m=a.getX(h,t),x=a.getY(h,t),g=this.fillTint;this.batchQuad(null,u,f,d,v,c,p,m,x,0,0,1,1,g.TL,g.TR,g.BL,g.BR,2)},batchFillTriangle:function(e,t,i,r,s,n,a,h){this.renderer.pipelines.set(this);var o=this.calcMatrix;h&&h.multiply(a,o);var u=o.getX(e,t),f=o.getY(e,t),d=o.getX(i,r),v=o.getY(i,r),c=o.getX(s,n),p=o.getY(s,n),m=this.fillTint;this.batchTri(null,u,f,d,v,c,p,0,0,1,1,m.TL,m.TR,m.BL,2)},batchStrokeTriangle:function(e,t,i,r,s,n,a,h,o){var u=this.tempTriangle;u[0].x=e,u[0].y=t,u[0].width=a,u[1].x=i,u[1].y=r,u[1].width=a,u[2].x=s,u[2].y=n,u[2].width=a,u[3].x=e,u[3].y=t,u[3].width=a,this.batchStrokePath(u,a,!1,h,o)},batchFillPath:function(e,t,i){this.renderer.pipelines.set(this);var r=this.calcMatrix;i&&i.multiply(t,r);for(var s=e.length,n=this.polygonCache,a,h,o=this.fillTint.TL,u=this.fillTint.TR,f=this.fillTint.BL,d=0;d<s;++d)h=e[d],n.push(h.x,h.y);a=sme(n),s=a.length;for(var v=0;v<s;v+=3){var c=a[v+0]*2,p=a[v+1]*2,m=a[v+2]*2,x=n[c+0],g=n[c+1],y=n[p+0],T=n[p+1],S=n[m+0],E=n[m+1],_=r.getX(x,g),w=r.getY(x,g),R=r.getX(y,T),q=r.getY(y,T),A=r.getX(S,E),b=r.getY(S,E);this.batchTri(null,_,w,R,q,A,b,0,0,1,1,o,u,f,2)}n.length=0},batchStrokePath:function(e,t,i,r,s){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var n=e.length-1,a=0;a<n;a++){var h=e[a],o=e[a+1];this.batchLine(h.x,h.y,o.x,o.y,h.width/2,o.width/2,t,a,!i&&a===n-1,r,s)}},batchLine:function(e,t,i,r,s,n,a,h,o,u,f){this.renderer.pipelines.set(this);var d=this.calcMatrix;f&&f.multiply(u,d);var v=i-e,c=r-t,p=Math.sqrt(v*v+c*c),m=s*(r-t)/p,x=s*(e-i)/p,g=n*(r-t)/p,y=n*(e-i)/p,T=i-g,S=r-y,E=e-m,_=t-x,w=i+g,R=r+y,q=e+m,A=t+x,b=d.getX(T,S),L=d.getY(T,S),M=d.getX(E,_),G=d.getY(E,_),P=d.getX(w,R),D=d.getY(w,R),I=d.getX(q,A),F=d.getY(q,A),O=this.strokeTint,K=O.TL,H=O.TR,Y=O.BL,ee=O.BR;if(this.batchQuad(null,I,F,M,G,b,L,P,D,0,0,1,1,K,H,Y,ee,2),!(a<=2)){var U=this.prevQuad,J=this.firstQuad;h>0&&U[4]?this.batchQuad(null,I,F,M,G,U[0],U[1],U[2],U[3],0,0,1,1,K,H,Y,ee,2):(J[0]=I,J[1]=F,J[2]=M,J[3]=G,J[4]=1),o&&J[4]?this.batchQuad(null,b,L,P,D,J[0],J[1],J[2],J[3],0,0,1,1,K,H,Y,ee,2):(U[0]=b,U[1]=L,U[2]=P,U[3]=D,U[4]=1)}}});AO.exports=ome});var Ic=l((_He,PO)=>{var ume=C(),lme=z(),fme=_O(),fh=Bn(),dme=xe(),vme=Qi(),Dc=10,Fc=new dme,bO=new ume({Extends:fh,initialize:function(t){Dc=t.game.renderer.config.maxLights;for(var i=lme(t,"fragShader",fme),r=[],s=1;s<=Dc;s++)r.push({name:"lights"+s,fragShader:i.replace("%LIGHT_COUNT%",s.toString())});t.shaders=r,fh.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){vme.prototype.boot.call(this);var e=this.gl,t=e.createTexture();e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:t};for(var i=0;i<this.shaders.length;i++)this["lightShader"+(i+1)]=this.shaders[i]},onRender:function(e,t){var i=e.sys.lights;if(this.lightsActive=!1,!(!i||!i.active)){var r=i.getLights(t),s=r.length;if(s!==0){this.lightsActive=!0,this.setShader(this["lightShader"+s],!0);var n,a=this.renderer,h=a.height,o=t.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",t.x,t.y,t.rotation,t.zoom),this.set3f("uAmbientLightColor",i.ambientColor.r,i.ambientColor.g,i.ambientColor.b),n=0;n<s;n++){var u=r[n].light,f=u.color,d="uLights["+n+"].";o.transformPoint(u.x,u.y,Fc),this.set2f(d+"position",Fc.x-t.scrollX*u.scrollFactorX*t.zoom,h-(Fc.y-t.scrollY*u.scrollFactorY*t.zoom)),this.set3f(d+"color",f.r,f.g,f.b),this.set1f(d+"intensity",u.intensity),this.set1f(d+"radius",u.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(e){if(e!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var t=this.inverseRotationMatrix;if(e){var i=-e,r=Math.cos(i),s=Math.sin(i);t[1]=s,t[3]=-s,t[0]=t[4]=r}else t[0]=t[4]=1,t[1]=t[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,t),this.currentNormalMapRotation=e}},setTexture2D:function(e,t){var i=this.renderer;e===void 0&&(e=i.tempTextures[0]);var r=this.getNormalMap(t);i.isNewNormalMap(e,r)&&(this.flush(),i.setTextureZero(e),i.setNormalMap(r));var s=t?t.rotation:0;return this.setNormalMapRotation(s),this.currentUnit=0,0},setGameObject:function(e,t){t===void 0&&(t=e.frame);var i=this.renderer,r=t.glTexture,s=this.getNormalMap(e);return i.isNewNormalMap()&&(this.flush(),i.setTextureZero(r),i.setNormalMap(s)),this.setNormalMapRotation(e.rotation),this.currentUnit=0,0},getNormalMap:function(e){var t;return e?e.displayTexture?t=e.displayTexture.dataSource[e.displayFrame.sourceIndex]:e.texture?t=e.texture.dataSource[e.frame.sourceIndex]:e.tileset&&(Array.isArray(e.tileset)?t=e.tileset[0].image.dataSource[0]:t=e.tileset.image.dataSource[0]):t=this.defaultNormalMap,t||(t=this.defaultNormalMap),t.glTexture},batchSprite:function(e,t,i){this.lightsActive&&fh.prototype.batchSprite.call(this,e,t,i)},batchTexture:function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p,m,x,g,y,T,S,E,_,w,R,q,A,b,L,M,G,P){this.lightsActive&&fh.prototype.batchTexture.call(this,e,t,i,r,s,n,a,h,o,u,f,d,v,c,p,m,x,g,y,T,S,E,_,w,R,q,A,b,L,M,G,P)},batchTextureFrame:function(e,t,i,r,s,n,a){this.lightsActive&&fh.prototype.batchTextureFrame.call(this,e,t,i,r,s,n,a)}});bO.LIGHT_COUNT=Dc;PO.exports=bO});var LO=l((wHe,MO)=>{MO.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)});var FO=l((CHe,OO)=>{OO.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)});var Gc=l((RHe,IO)=>{var cme=C(),Nc=z(),pme=LO(),mme=FO(),DO=Qi(),gme=new cme({Extends:DO,initialize:function(t){t.vertShader=Nc(t,"vertShader",mme),t.fragShader=Nc(t,"fragShader",pme),t.attributes=Nc(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),DO.call(this,t)},onRender:function(e,t){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",t.zoom)},batchPointLight:function(e,t,i,r,s,n,a,h,o,u,f,d){var v=e.color,c=e.intensity,p=e.radius,m=e.attenuation,x=v.r*c,g=v.g*c,y=v.b*c,T=t.alpha*e.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(i,r,f,d,p,m,x,g,y,T),this.batchLightVert(s,n,f,d,p,m,x,g,y,T),this.batchLightVert(a,h,f,d,p,m,x,g,y,T),this.batchLightVert(i,r,f,d,p,m,x,g,y,T),this.batchLightVert(a,h,f,d,p,m,x,g,y,T),this.batchLightVert(o,u,f,d,p,m,x,g,y,T)},batchLightVert:function(e,t,i,r,s,n,a,h,o,u){var f=this.vertexViewF32,d=this.vertexCount*this.currentShader.vertexComponentCount-1;f[++d]=e,f[++d]=t,f[++d]=i,f[++d]=r,f[++d]=s,f[++d]=n,f[++d]=a,f[++d]=h,f[++d]=o,f[++d]=u,this.vertexCount++}});IO.exports=gme});var Bc=l((qHe,GO)=>{var xme=C(),yme=z(),NO=Bn(),Tme=new xme({Extends:NO,initialize:function(t){t.topology=5,t.batchSize=yme(t,"batchSize",256),NO.call(this,t)}});GO.exports=Tme});var UO=l((AHe,BO)=>{BO.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)});var zO=l((bHe,kO)=>{kO.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)});var Uc=l((PHe,VO)=>{var Eme=C(),YO=z(),XO=Bn(),Sme=UO(),_me=zO(),wme=Qi(),Cme=new Eme({Extends:XO,initialize:function(t){t.fragShader=YO(t,"fragShader",Sme),t.vertShader=YO(t,"vertShader",_me),t.forceZero=!0,XO.call(this,t)},boot:function(){wme.prototype.boot.call(this),this.set1i("uMainSampler",0)}});VO.exports=Cme});var HO=l((MHe,WO)=>{WO.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)});var gu=l((LHe,KO)=>{var Rme=C(),qme=new Rme({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(e){return this._matrix=e,this._dirty=!0,this},reset:function(){var e=this._matrix;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=1,e[7]=0,e[8]=0,e[9]=0,e[10]=0,e[11]=0,e[12]=1,e[13]=0,e[14]=0,e[15]=0,e[16]=0,e[17]=0,e[18]=1,e[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var e=new Float32Array(this._matrix);e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,this._data=e,this._dirty=!1}return this._data},brightness:function(e,t){e===void 0&&(e=0),t===void 0&&(t=!1);var i=e;return this.multiply([i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0],t)},saturate:function(e,t){e===void 0&&(e=0),t===void 0&&(t=!1);var i=e*2/3+1,r=(i-1)*-.5;return this.multiply([i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0],t)},desaturate:function(e){return e===void 0&&(e=!1),this.saturate(-1,e)},hue:function(e,t){e===void 0&&(e=0),t===void 0&&(t=!1),e=e/180*Math.PI;var i=Math.cos(e),r=Math.sin(e),s=.213,n=.715,a=.072;return this.multiply([s+i*(1-s)+r*-s,n+i*-n+r*-n,a+i*-a+r*(1-a),0,0,s+i*-s+r*.143,n+i*(1-n)+r*.14,a+i*-a+r*-.283,0,0,s+i*-s+r*-(1-s),n+i*-n+r*n,a+i*(1-a)+r*a,0,0,0,0,0,1,0],t)},grayscale:function(e,t){return e===void 0&&(e=1),t===void 0&&(t=!1),this.saturate(-e,t)},blackWhite:function(e){return e===void 0&&(e=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},contrast:function(e,t){e===void 0&&(e=0),t===void 0&&(t=!1);var i=e+1,r=-.5*(i-1);return this.multiply([i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0],t)},negative:function(e){return e===void 0&&(e=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},desaturateLuminance:function(e){return e===void 0&&(e=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],e)},sepia:function(e){return e===void 0&&(e=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},night:function(e,t){return e===void 0&&(e=.1),t===void 0&&(t=!1),this.multiply([e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0],t)},lsd:function(e){return e===void 0&&(e=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},brown:function(e){return e===void 0&&(e=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},vintagePinhole:function(e){return e===void 0&&(e=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},kodachrome:function(e){return e===void 0&&(e=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},technicolor:function(e){return e===void 0&&(e=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},polaroid:function(e){return e===void 0&&(e=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},shiftToBGR:function(e){return e===void 0&&(e=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},multiply:function(e,t){t||this.reset();for(var i=this._matrix,r=[],s=0;s<20;s++)r[s]=i[s];return i[0]=r[0]*e[0]+r[1]*e[5]+r[2]*e[10]+r[3]*e[15],i[1]=r[0]*e[1]+r[1]*e[6]+r[2]*e[11]+r[3]*e[16],i[2]=r[0]*e[2]+r[1]*e[7]+r[2]*e[12]+r[3]*e[17],i[3]=r[0]*e[3]+r[1]*e[8]+r[2]*e[13]+r[3]*e[18],i[4]=r[0]*e[4]+r[1]*e[9]+r[2]*e[14]+r[3]*e[19]+r[4],i[5]=r[5]*e[0]+r[6]*e[5]+r[7]*e[10]+r[8]*e[15],i[6]=r[5]*e[1]+r[6]*e[6]+r[7]*e[11]+r[8]*e[16],i[7]=r[5]*e[2]+r[6]*e[7]+r[7]*e[12]+r[8]*e[17],i[8]=r[5]*e[3]+r[6]*e[8]+r[7]*e[13]+r[8]*e[18],i[9]=r[5]*e[4]+r[6]*e[9]+r[7]*e[14]+r[8]*e[19]+r[9],i[10]=r[10]*e[0]+r[11]*e[5]+r[12]*e[10]+r[13]*e[15],i[11]=r[10]*e[1]+r[11]*e[6]+r[12]*e[11]+r[13]*e[16],i[12]=r[10]*e[2]+r[11]*e[7]+r[12]*e[12]+r[13]*e[17],i[13]=r[10]*e[3]+r[11]*e[8]+r[12]*e[13]+r[13]*e[18],i[14]=r[10]*e[4]+r[11]*e[9]+r[12]*e[14]+r[13]*e[19]+r[14],i[15]=r[15]*e[0]+r[16]*e[5]+r[17]*e[10]+r[18]*e[15],i[16]=r[15]*e[1]+r[16]*e[6]+r[17]*e[11]+r[18]*e[16],i[17]=r[15]*e[2]+r[16]*e[7]+r[17]*e[12]+r[18]*e[17],i[18]=r[15]*e[3]+r[16]*e[8]+r[17]*e[13]+r[18]*e[18],i[19]=r[15]*e[4]+r[16]*e[9]+r[17]*e[14]+r[18]*e[19]+r[19],this._dirty=!0,this}});KO.exports=qme});var JO=l((OHe,ZO)=>{ZO.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)});var $O=l((FHe,QO)=>{QO.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)});var eF=l((DHe,jO)=>{jO.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)});var kc=l((IHe,tF)=>{tF.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)});var Yc=l((NHe,iF)=>{var Ame=HO(),bme=_i(),Pme=C(),Mme=gu(),Lme=JO(),Ome=$O(),xu=z(),Fme=eF(),Dme=kc(),zc=Qi(),Ime=new Pme({Extends:zc,initialize:function(t){t.renderTarget=xu(t,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),t.vertShader=xu(t,"vertShader",Dme),t.shaders=xu(t,"shaders",[{name:"Copy",fragShader:Ome},{name:"AddBlend",fragShader:Ame},{name:"LinearBlend",fragShader:Fme},{name:"ColorMatrix",fragShader:Lme}]),t.attributes=xu(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,zc.call(this,t),this.colorMatrix=new Mme,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){zc.prototype.boot.call(this);var e=this.shaders,t=this.renderTargets;this.copyShader=e[0],this.addShader=e[1],this.linearShader=e[2],this.colorMatrixShader=e[3],this.fullFrame1=t[0],this.fullFrame2=t[1],this.halfFrame1=t[2],this.halfFrame2=t[3]},copyFrame:function(e,t,i,r,s){i===void 0&&(i=1),r===void 0&&(r=!0),s===void 0&&(s=!0);var n=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.texture),t?(n.viewport(0,0,t.width,t.height),n.bindFramebuffer(n.FRAMEBUFFER,t.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t.texture,0)):n.viewport(0,0,e.width,e.height),r&&(s?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT)),n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.STATIC_DRAW),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)},blitFrame:function(e,t,i,r,s,n){i===void 0&&(i=1),r===void 0&&(r=!0),s===void 0&&(s=!0),n===void 0&&(n=!1);var a=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.texture),e.height>t.height)a.viewport(0,0,e.width,e.height),this.setTargetUVs(e,t);else{var h=t.height-e.height;a.viewport(0,h,e.width,e.height)}if(a.bindFramebuffer(a.FRAMEBUFFER,t.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t.texture,0),r&&(s?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT)),n){var o=this.renderer.currentBlendMode;this.renderer.setBlendMode(bme.ERASE)}a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),n&&this.renderer.setBlendMode(o),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(e,t,i,r,s,n,a,h){a===void 0&&(a=!0),h===void 0&&(h=!0);var o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,e.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e.texture,0),a&&(h?o.clearColor(0,0,0,0):o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT)),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture),o.copyTexSubImage2D(o.TEXTURE_2D,0,0,0,i,r,s,n),o.bindFramebuffer(o.FRAMEBUFFER,null),o.bindTexture(o.TEXTURE_2D,null)},copyToGame:function(e){var t=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e.texture),t.bufferData(t.ARRAY_BUFFER,this.vertexData,t.STATIC_DRAW),t.drawArrays(t.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(e,t,i,r){i===void 0&&(i=!0),r===void 0&&(r=this.colorMatrix);var s=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",r.getData()),this.set1f("uAlpha",r.alpha),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e.texture),t?(s.viewport(0,0,t.width,t.height),s.bindFramebuffer(s.FRAMEBUFFER,t.framebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,t.texture,0)):s.viewport(0,0,e.width,e.height),i?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindTexture(s.TEXTURE_2D,null)},blendFrames:function(e,t,i,r,s,n){r===void 0&&(r=1),s===void 0&&(s=!0),n===void 0&&(n=this.linearShader);var a=this.gl;this.setShader(n),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",r),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.texture),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,t.texture),i?(a.bindFramebuffer(a.FRAMEBUFFER,i.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i.texture,0),a.viewport(0,0,i.width,i.height)):a.viewport(0,0,e.width,e.height),s?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT),a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null)},blendFramesAdditive:function(e,t,i,r,s){this.blendFrames(e,t,i,r,s,this.addShader)},clearFrame:function(e,t){t===void 0&&(t=!0);var i=this.gl;i.viewport(0,0,e.width,e.height),i.bindFramebuffer(i.FRAMEBUFFER,e.framebuffer),t?i.clearColor(0,0,0,0):i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);var r=this.renderer.currentFramebuffer;i.bindFramebuffer(i.FRAMEBUFFER,r)},setUVs:function(e,t,i,r,s,n,a,h){var o=this.vertexViewF32;o[2]=e,o[3]=t,o[6]=i,o[7]=r,o[10]=s,o[11]=n,o[14]=e,o[15]=t,o[18]=s,o[19]=n,o[22]=a,o[23]=h},setTargetUVs:function(e,t){var i=t.height/e.height;i>.5?i=.5-(i-.5):i=.5+(.5-i),this.setUVs(0,i,0,1+i,1,1+i,1,i)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});iF.exports=Ime});var Vc=l((GHe,rF)=>{var Nme=C(),Mi=Ks(),Xc=qn(),Gme=_c(),Bme=Pc(),Ume=Ic(),kme=Bn(),zme=Gc(),Yme=Bc(),Xme=Uc(),Vme=Yc(),Wme=new Nme({initialize:function(t){this.game=t.game,this.renderer=t,this.classes=new Xc([[Mi.UTILITY_PIPELINE,Vme],[Mi.MULTI_PIPELINE,kme],[Mi.BITMAPMASK_PIPELINE,Gme],[Mi.SINGLE_PIPELINE,Xme],[Mi.ROPE_PIPELINE,Yme],[Mi.LIGHT_PIPELINE,Ume],[Mi.POINTLIGHT_PIPELINE,zme],[Mi.GRAPHICS_PIPELINE,Bme]]),this.postPipelineClasses=new Xc,this.pipelines=new Xc,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(e){var t,i,r=this,s=this.game;if(this.classes.each(function(a,h){t=r.add(a,new h({game:s})),a===Mi.UTILITY_PIPELINE&&(r.UTILITY_PIPELINE=t,r.fullFrame1=t.fullFrame1,r.fullFrame2=t.fullFrame2,r.halfFrame1=t.halfFrame1,r.halfFrame2=t.halfFrame2)}),this.MULTI_PIPELINE=this.get(Mi.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(Mi.BITMAPMASK_PIPELINE),e)for(i in e){var n=e[i];t=new n(s),t.isPostFX?this.postPipelineClasses.set(i,n):this.has(i)||(this.classes.set(i,n),this.add(i,t))}},add:function(e,t){if(t.isPostFX){console.warn(e+" is a Post Pipeline. Use `addPostPipeline` instead");return}var i=this.pipelines,r=this.renderer;return i.has(e)?console.warn("Pipeline exists: "+e):(t.name=e,t.manager=this,i.set(e,t)),t.hasBooted||t.boot(),r.width!==0&&r.height!==0&&t.resize(r.width,r.height),t},addPostPipeline:function(e,t){this.postPipelineClasses.has(e)||this.postPipelineClasses.set(e,t)},flush:function(){this.current&&this.current.flush()},has:function(e){var t=this.pipelines;return typeof e=="string"?t.has(e):!!t.contains(e)},get:function(e){var t=this.pipelines;if(typeof e=="string")return t.get(e);if(t.contains(e))return e},getPostPipeline:function(e,t){var i=this.postPipelineClasses,r;if(typeof e=="string"?r=i.get(e):typeof e=="function"?i.contains(e)&&(r=e):typeof e=="object"&&(r=i.get(e.name)),r){var s=new r(this.game);return t&&(s.gameObject=t),s}},remove:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!0),this.pipelines.delete(e),t&&this.classes.delete(e),i&&this.postPipelineClasses.delete(e)},set:function(e,t,i){if(!e.isPostFX)return this.isCurrent(e,i)||(this.flush(),this.current&&this.current.unbind(),this.current=e,e.bind(i)),e.updateProjectionMatrix(),e.onBind(t),e},preBatch:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=t.length-1;i>=0;i--){var r=t[i];r.active&&r.preBatch(e)}}},postBatch:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=0;i<t.length;i++){var r=t[i];r.active&&r.postBatch(e)}}},preBatchCamera:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=t.length-1;i>=0;i--){var r=t[i];r.active&&r.preBatch(e)}}},postBatchCamera:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=0;i<t.length;i++){var r=t[i];r.active&&r.postBatch(e)}}},isCurrent:function(e,t){var i=this.renderer,r=this.current;return r&&!t&&(t=r.currentShader),!(r!==e||t.program!==i.currentProgram)},copyFrame:function(e,t,i,r,s){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(e,t,i,r,s),this},copyToGame:function(e){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(e),this},drawFrame:function(e,t,i,r){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(e,t,i,r),this},blendFrames:function(e,t,i,r,s){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(e,t,i,r,s),this},blendFramesAdditive:function(e,t,i,r,s){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(e,t,i,r,s),this},clearFrame:function(e,t){return this.UTILITY_PIPELINE.clearFrame(e,t),this},blitFrame:function(e,t,i,r,s,n){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(e,t,i,r,s,n),this},copyFrameRect:function(e,t,i,r,s,n,a,h){return this.UTILITY_PIPELINE.copyFrameRect(e,t,i,r,s,n,a,h),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(e){return this.UTILITY_PIPELINE.bind(e)},rebind:function(e){e===void 0&&this.previous&&(e=this.previous);var t=this.renderer,i=t.gl;i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),t.hasActiveStencilMask()?i.clear(i.DEPTH_BUFFER_BIT):(i.disable(i.STENCIL_TEST),i.clear(i.DEPTH_BUFFER_BIT|i.STENCIL_BUFFER_BIT)),i.viewport(0,0,t.width,t.height),t.currentProgram=null,t.setBlendMode(0,!0);var r=this.pipelines.entries;for(var s in r)r[s].glReset=!0;e&&(this.current=e,e.rebind()),t.resetTextures()},clear:function(){var e=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,e.currentProgram=null,e.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});rF.exports=Wme});var Hc=l((BHe,sF)=>{var Wc=Ot(),Hme=vi(),Li=z(),Kme=function(e,t){var i=e.getContext("experimental-webgl"),r=Li(t,"callback"),s=Li(t,"type","image/png"),n=Li(t,"encoder",.92),a=Li(t,"x",0),h=Li(t,"y",0),o=Li(t,"getPixel",!1),u=Li(t,"isFramebuffer",!1),f=u?Li(t,"bufferWidth",1):i.drawingBufferWidth,d=u?Li(t,"bufferHeight",1):i.drawingBufferHeight;if(o){var v=new Uint8Array(4),c=u?h:d-h;i.readPixels(a,c,1,1,i.RGBA,i.UNSIGNED_BYTE,v),r.call(null,new Hme(v[0],v[1],v[2],v[3]/255))}else{var p=Li(t,"width",f),m=Li(t,"height",d),x=p*m*4,g=new Uint8Array(x);i.readPixels(a,d-h-m,p,m,i.RGBA,i.UNSIGNED_BYTE,g);for(var y=Wc.createWebGL(this,p,m),T=y.getContext("2d"),S=T.getImageData(0,0,p,m),E=S.data,_=0;_<m;_++)for(var w=0;w<p;w++){var R=((m-_-1)*p+w)*4,q=(_*p+w)*4;E[q+0]=g[R+0],E[q+1]=g[R+1],E[q+2]=g[R+2],E[q+3]=g[R+3]}T.putImageData(S,0,0);var A=new Image;A.onerror=function(){r.call(null),Wc.remove(y)},A.onload=function(){r.call(null,A),Wc.remove(y)},A.src=y.toDataURL(s,n)}};sF.exports=Kme});var Kc=l((UHe,lF)=>{var Zme=tn(),nF=di(),Jme=C(),Un=Qt(),aF=ue(),yu=Hs(),hF=Xe(),Tu=ih(),Qme=Er(),oF=B(),$me=Vc(),jme=ah(),ege=Mn(),tge=In(),Eu=Te(),uF=Hc(),ige=new Jme({Extends:aF,initialize:function(t){aF.call(this);var i=t.config,r={alpha:i.transparent,desynchronized:i.desynchronized,depth:!1,antialias:i.antialiasGL,premultipliedAlpha:i.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:i.failIfMajorPerformanceCaveat,powerPreference:i.powerPreference,preserveDrawingBuffer:i.preserveDrawingBuffer};this.config={clearBeforeRender:i.clearBeforeRender,antialias:i.antialias,backgroundColor:i.backgroundColor,contextCreation:r,roundPixels:i.roundPixels,maxTextures:i.maxTextures,maxTextureSize:i.maxTextureSize,batchSize:i.batchSize,maxLights:i.maxLights,mipmapFilter:i.mipmapFilter},this.game=t,this.type=Un.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=oF,this.contextRestoredHandler=oF,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(e){var t,i=this.game,r=this.canvas,s=e.backgroundColor;if(i.config.context?t=i.config.context:t=r.getContext("webgl",e.contextCreation)||r.getContext("experimental-webgl",e.contextCreation),!t||t.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=t;var n=this;this.contextLostHandler=function(x){n.contextLost=!0,n.game.events.emit(hF.CONTEXT_LOST,n),x.preventDefault()},this.contextRestoredHandler=function(){n.contextLost=!1,n.init(n.config),n.game.events.emit(hF.CONTEXT_RESTORED,n)},r.addEventListener("webglcontextlost",this.contextLostHandler,!1),r.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),i.context=t;for(var a=0;a<=27;a++)this.blendModes.push({func:[t.ONE,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_ADD});this.blendModes[1].func=[t.ONE,t.DST_ALPHA],this.blendModes[2].func=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[t.ONE,t.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[t.ZERO,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=t.BYTE,this.glFormats[1]=t.SHORT,this.glFormats[2]=t.UNSIGNED_BYTE,this.glFormats[3]=t.UNSIGNED_SHORT,this.glFormats[4]=t.FLOAT,this.glFuncMap={mat2:{func:t.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:t.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:t.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:t.uniform1f,length:1},"1fv":{func:t.uniform1fv,length:1},"1i":{func:t.uniform1i,length:1},"1iv":{func:t.uniform1iv,length:1},"2f":{func:t.uniform2f,length:2},"2fv":{func:t.uniform2fv,length:1},"2i":{func:t.uniform2i,length:2},"2iv":{func:t.uniform2iv,length:1},"3f":{func:t.uniform3f,length:3},"3fv":{func:t.uniform3fv,length:1},"3i":{func:t.uniform3i,length:3},"3iv":{func:t.uniform3iv,length:1},"4f":{func:t.uniform4f,length:4},"4fv":{func:t.uniform4fv,length:1},"4i":{func:t.uniform4i,length:4},"4iv":{func:t.uniform4iv,length:1}};var h=t.getSupportedExtensions();(!e.maxTextures||e.maxTextures===-1)&&(e.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),e.maxTextureSize||(e.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE));var o="WEBGL_compressed_texture_",u="WEBKIT_"+o;this.compression.ETC1=t.getExtension(o+"etc1")||t.getExtension(u+"etc1"),this.compression.PVRTC=t.getExtension(o+"pvrtc")||t.getExtension(u+"pvrtc"),this.compression.S3TC=t.getExtension(o+"s3tc")||t.getExtension(u+"s3tc"),this.supportedExtensions=h;var f="ANGLE_instanced_arrays";this.instancedArraysExtension=h.indexOf(f)>-1?t.getExtension(f):null;var d="OES_vertex_array_object";this.vaoExtension=h.indexOf(d)>-1?t.getExtension(d):null,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.clearColor(s.redGL,s.greenGL,s.blueGL,s.alphaGL),this.mipmapFilter=t[e.mipmapFilter],this.maxTextures=Eu.checkShaderMax(t,e.maxTextures),this.textureIndexes=[];var v=this.tempTextures;if(Array.isArray(v))for(var c=0;a<this.maxTextures;c++)t.deleteTexture(v[c]);else v=new Array(this.maxTextures);for(var p=0;p<this.maxTextures;p++){var m=t.createTexture();t.activeTexture(t.TEXTURE0+p),t.bindTexture(t.TEXTURE_2D,m),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),v[p]=m,this.textureIndexes.push(p)}return this.tempTextures=v,this.currentActiveTexture=1,this.startActiveTexture++,t.activeTexture(t.TEXTURE1),this.pipelines=new $me(this),this.setBlendMode(Un.BlendModes.NORMAL),this.projectionMatrix=new Qme().identity(),i.textures.once(tge.READY,this.boot,this),this},boot:function(){var e=this.game,t=this.pipelines,i=e.scale.baseSize;this.width=i.width,this.height=i.height,this.isBooted=!0,this.renderTarget=new jme(this,this.width,this.height,1,0,!0,!0),t.boot(e.config.pipeline),this.blankTexture=e.textures.getFrame("__DEFAULT"),this.whiteTexture=e.textures.getFrame("__WHITE");var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,null),r.enable(r.SCISSOR_TEST),e.scale.on(ege.RESIZE,this.onResize,this),this.resize(i.width,i.height)},onResize:function(e,t){(t.width!==this.width||t.height!==this.height)&&this.resize(t.width,t.height)},beginCapture:function(e,t){e===void 0&&(e=this.width),t===void 0&&(t=this.height),this.renderTarget.bind(!0,e,t),this.setProjectionMatrix(e,t),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(e,t){var i=this.gl;return this.width=e,this.height=t,this.setProjectionMatrix(e,t),i.viewport(0,0,e,t),this.drawingBufferHeight=i.drawingBufferHeight,i.scissor(0,i.drawingBufferHeight-t,e,t),this.defaultScissor[2]=e,this.defaultScissor[3]=t,this.emit(yu.RESIZE,e,t),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(e,t){return(e!==this.projectionWidth||t!==this.projectionHeight)&&(this.projectionWidth=e,this.projectionHeight=t,this.projectionMatrix.ortho(0,e,t,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(e){return this.supportedExtensions?this.supportedExtensions.indexOf(e):!1},getExtension:function(e){return this.hasExtension(e)?(e in this.extensions||(this.extensions[e]=this.gl.getExtension(e)),this.extensions[e]):null},flush:function(){this.pipelines.flush()},pushScissor:function(e,t,i,r,s){s===void 0&&(s=this.drawingBufferHeight);var n=this.scissorStack,a=[e,t,i,r];return n.push(a),this.setScissor(e,t,i,r,s),this.currentScissor=a,a},setScissor:function(e,t,i,r,s){s===void 0&&(s=this.drawingBufferHeight);var n=this.gl,a=this.currentScissor,h=i>0&&r>0;if(a&&h){var o=a[0],u=a[1],f=a[2],d=a[3];h=o!==e||u!==t||f!==i||d!==r}h&&(this.flush(),n.scissor(e,s-t-r,i,r))},resetScissor:function(){var e=this.gl;e.enable(e.SCISSOR_TEST);var t=this.currentScissor;if(t){var i=t[0],r=t[1],s=t[2],n=t[3];s>0&&n>0&&e.scissor(i,this.drawingBufferHeight-r-n,s,n)}},popScissor:function(){var e=this.scissorStack;e.pop();var t=e[e.length-1];t&&this.setScissor(t[0],t[1],t[2],t[3]),this.currentScissor=t},hasActiveStencilMask:function(){var e=this.currentMask.mask,t=this.currentCameraMask.mask;return e&&e.isStencil||t&&t.isStencil},resetViewport:function(){var e=this.gl;e.viewport(0,0,this.width,this.height),this.drawingBufferHeight=e.drawingBufferHeight},setBlendMode:function(e,t){t===void 0&&(t=!1);var i=this.gl,r=this.blendModes[e];return t||e!==Un.BlendModes.SKIP_CHECK&&this.currentBlendMode!==e?(this.flush(),i.enable(i.BLEND),i.blendEquation(r.equation),r.func.length>2?i.blendFuncSeparate(r.func[0],r.func[1],r.func[2],r.func[3]):i.blendFunc(r.func[0],r.func[1]),this.currentBlendMode=e,!0):!1},addBlendMode:function(e,t){var i=this.blendModes.push({func:e,equation:t});return i-1},updateBlendMode:function(e,t,i){return this.blendModes[e]&&(this.blendModes[e].func=t,i&&(this.blendModes[e].equation=i)),this},removeBlendMode:function(e){return e>17&&this.blendModes[e]&&this.blendModes.splice(e,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(e){if(this.pipelines.forceZero())return this.setTextureZero(e.glTexture,!0),0;var t=this.gl,i=this.currentActiveTexture;return e.glIndexCounter<this.startActiveTexture&&(e.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(e.glIndex=i,t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,e.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,e.glIndexCounter=this.startActiveTexture,e.glIndex=1,t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,e.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,e.glIndex},isNewNormalMap:function(e,t){return this.textureZero!==e||this.normalTexture!==t},setTextureZero:function(e,t){if(this.textureZero!==e){t&&this.flush();var i=this.gl;i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e),this.textureZero=e}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(e){if(this.normalTexture!==e){var t=this.gl;t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,e),this.normalTexture=e,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var e=this.gl,t=this.tempTextures,i=0;i<t.length;i++)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(e){if(e===void 0&&(e=!1),!this.isTextureClean){this.flush();var t=this.gl,i=this.tempTextures;if(e){for(var r=0;r<i.length;r++)t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,i[r]);t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,i[1]),this.isTextureClean=!0}else t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i[0]),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,i[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(e){if(this.pipelines.forceZero())return this.setTextureZero(e,!0),0;var t=this.gl,i=this.currentActiveTexture;return e.glIndexCounter<this.startActiveTexture&&(e.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(e.glIndex=i,t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,e),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,e.glIndexCounter=this.startActiveTexture,e.glIndex=1,t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,e),this.currentActiveTexture=2)),this.isTextureClean=!1,e.glIndex},pushFramebuffer:function(e,t,i,r){return e===this.currentFramebuffer?this:(this.fboStack.push(e),this.setFramebuffer(e,t,i,r))},setFramebuffer:function(e,t,i,r){if(t===void 0&&(t=!1),i===void 0&&(i=!1),r===void 0&&(r=!0),e===this.currentFramebuffer)return this;var s=this.gl,n=this.width,a=this.height;return e&&e.renderTexture&&r?(n=e.renderTexture.width,a=e.renderTexture.height):this.flush(),s.bindFramebuffer(s.FRAMEBUFFER,e),r&&s.viewport(0,0,n,a),t&&(e?(this.drawingBufferHeight=a,this.pushScissor(0,0,n,a)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=e,i&&this.resetTextures(),this},popFramebuffer:function(e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1),i===void 0&&(i=!0);var r=this.fboStack;r.pop();var s=r[r.length-1];return s||(s=null),this.setFramebuffer(s,e,t,i),s},setProgram:function(e){return e!==this.currentProgram?(this.flush(),this.gl.useProgram(e),this.currentProgram=e,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(e,t,i,r){var s=this.gl,n=s.NEAREST,a=s.NEAREST,h=s.CLAMP_TO_EDGE,o=null;t=e?e.width:t,i=e?e.height:i;var u=Tu(t,i);return u&&(h=s.REPEAT),r===Un.ScaleModes.LINEAR&&this.config.antialias&&(n=u?this.mipmapFilter:s.LINEAR,a=s.LINEAR),!e&&typeof t=="number"&&typeof i=="number"?o=this.createTexture2D(0,n,a,h,h,s.RGBA,null,t,i):o=this.createTexture2D(0,n,a,h,h,s.RGBA,e),o},createTexture2D:function(e,t,i,r,s,n,a,h,o,u,f,d){u=u==null?!0:u,f===void 0&&(f=!1),d===void 0&&(d=!1);var v=this.gl,c=v.createTexture();v.activeTexture(v.TEXTURE0);var p=v.getParameter(v.TEXTURE_BINDING_2D);return v.bindTexture(v.TEXTURE_2D,c),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,t),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,i),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,s),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,r),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,d),a==null?v.texImage2D(v.TEXTURE_2D,e,n,h,o,0,n,v.UNSIGNED_BYTE,null):(f||(h=a.width,o=a.height),v.texImage2D(v.TEXTURE_2D,e,n,n,v.UNSIGNED_BYTE,a)),Tu(h,o)&&v.generateMipmap(v.TEXTURE_2D),p&&v.bindTexture(v.TEXTURE_2D,p),c.isAlphaPremultiplied=u,c.isRenderTexture=!1,c.width=h,c.height=o,c.glIndex=0,c.glIndexCounter=-1,c},createFramebuffer:function(e,t,i,r){var s=this.gl,n=s.createFramebuffer(),a=0;if(this.setFramebuffer(n),r){var h=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,h),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,e,t),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,h)}if(i.isRenderTexture=!0,i.isAlphaPremultiplied=!1,s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,i,0),a=s.checkFramebufferStatus(s.FRAMEBUFFER),a!==s.FRAMEBUFFER_COMPLETE){var o={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+o[a])}return n.renderTexture=i,this.setFramebuffer(null),this.resetTextures(),n},createProgram:function(e,t){var i=this.gl,r=i.createProgram(),s=i.createShader(i.VERTEX_SHADER),n=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(s,e),i.shaderSource(n,t),i.compileShader(s),i.compileShader(n),!i.getShaderParameter(s,i.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+i.getShaderInfoLog(s));if(!i.getShaderParameter(n,i.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+i.getShaderInfoLog(n));if(i.attachShader(r,s),i.attachShader(r,n),i.linkProgram(r),!i.getProgramParameter(r,i.LINK_STATUS))throw new Error(`Link Program failed:
`+i.getProgramInfoLog(r));return i.useProgram(r),r},createVertexBuffer:function(e,t){var i=this.gl,r=i.createBuffer();return i.bindBuffer(i.ARRAY_BUFFER,r),i.bufferData(i.ARRAY_BUFFER,e,t),i.bindBuffer(i.ARRAY_BUFFER,null),r},createIndexBuffer:function(e,t){var i=this.gl,r=i.createBuffer();return i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e,t),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),r},deleteTexture:function(e,t){return t&&this.resetTextures(!0),e&&this.gl.deleteTexture(e),this},deleteFramebuffer:function(e){return e&&(this.gl.deleteFramebuffer(e),Zme(this.fboStack,e),this.currentFramebuffer===e&&(this.currentFramebuffer=null)),this},deleteProgram:function(e){return e&&this.gl.deleteProgram(e),this},deleteBuffer:function(e){return this.gl.deleteBuffer(e),this},preRenderCamera:function(e){var t=e.x,i=e.y,r=e.width,s=e.height,n=e.backgroundColor;if(e.emit(nF.PRE_RENDER,e),this.pipelines.preBatchCamera(e),this.pushScissor(t,i,r,s),e.mask&&(this.currentCameraMask.mask=e.mask,this.currentCameraMask.camera=e._maskCamera,e.mask.preRenderWebGL(this,e,e._maskCamera)),n.alphaGL>0){var a=this.pipelines.setMulti();a.drawFillRect(t,i,r,s,Eu.getTintFromFloats(n.blueGL,n.greenGL,n.redGL,1),n.alphaGL)}},getCurrentStencilMask:function(){var e=null,t=this.maskStack,i=this.currentCameraMask;return t.length>0?e=t[t.length-1]:i.mask&&i.mask.isStencil&&(e=i),e},postRenderCamera:function(e){var t=e.flashEffect,i=e.fadeEffect;if(t.isRunning||i.isRunning||i.isComplete){var r=this.pipelines.setMulti();t.postRenderWebGL(r,Eu.getTintFromFloats),i.postRenderWebGL(r,Eu.getTintFromFloats)}e.dirty=!1,this.popScissor(),e.mask&&(this.currentCameraMask.mask=null,e.mask.postRenderWebGL(this,e._maskCamera)),this.pipelines.postBatchCamera(e),e.emit(nF.POST_RENDER,e)},preRender:function(){if(!this.contextLost){var e=this.gl;if(e.bindFramebuffer(e.FRAMEBUFFER,null),this.config.clearBeforeRender){var t=this.config.backgroundColor;e.clearColor(t.redGL,t.greenGL,t.blueGL,t.alphaGL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}e.enable(e.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&e.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(yu.PRE_RENDER)}},render:function(e,t,i){if(!this.contextLost){var r=t.length;if(this.emit(yu.RENDER,e,i),this.preRenderCamera(i),r===0){this.setBlendMode(Un.BlendModes.NORMAL),this.postRenderCamera(i);return}this.currentType="";for(var s=this.currentMask,n=0;n<r;n++){this.finalType=n===r-1;var a=t[n],h=a.mask;s=this.currentMask,s.mask&&s.mask!==h&&s.mask.postRenderWebGL(this,s.camera),h&&s.mask!==h&&h.preRenderWebGL(this,a,i),a.blendMode!==this.currentBlendMode&&this.setBlendMode(a.blendMode);var o=a.type;o!==this.currentType&&(this.newType=!0,this.currentType=o),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=t[n+1].type===this.currentType,a.renderWebGL(this,a,i),this.newType=!1}s=this.currentMask,s.mask&&s.mask.postRenderWebGL(this,s.camera),this.setBlendMode(Un.BlendModes.NORMAL),this.postRenderCamera(i)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(yu.POST_RENDER);var e=this.snapshotState;e.callback&&(uF(this.canvas,e),e.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,e,t,i)},snapshotArea:function(e,t,i,r,s,n,a){var h=this.snapshotState;return h.callback=s,h.type=n,h.encoder=a,h.getPixel=!1,h.x=e,h.y=t,h.width=Math.min(i,this.gl.drawingBufferWidth),h.height=Math.min(r,this.gl.drawingBufferHeight),this},snapshotPixel:function(e,t,i){return this.snapshotArea(e,t,1,1,i),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(e,t,i,r,s,n,a,h,o,u,f){s===void 0&&(s=!1),n===void 0&&(n=0),a===void 0&&(a=0),h===void 0&&(h=t),o===void 0&&(o=i);var d=this.currentFramebuffer;this.snapshotArea(n,a,h,o,r,u,f);var v=this.snapshotState;return v.getPixel=s,v.isFramebuffer=!0,v.bufferWidth=t,v.bufferHeight=i,this.setFramebuffer(e),uF(this.canvas,v),this.setFramebuffer(d),v.callback=null,v.isFramebuffer=!1,this},canvasToTexture:function(e,t,i,r){return i===void 0&&(i=!1),r===void 0&&(r=!1),t?this.updateCanvasTexture(e,t,r):this.createCanvasTexture(e,i,r)},createCanvasTexture:function(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r=this.gl,s=r.NEAREST,n=r.NEAREST,a=e.width,h=e.height,o=r.CLAMP_TO_EDGE,u=Tu(a,h);return!t&&u&&(o=r.REPEAT),this.config.antialias&&(s=u?this.mipmapFilter:r.LINEAR,n=r.LINEAR),this.createTexture2D(0,s,n,o,o,r.RGBA,e,a,h,!0,!1,i)},updateCanvasTexture:function(e,t,i){i===void 0&&(i=!1);var r=this.gl,s=e.width,n=e.height;if(s>0&&n>0){r.activeTexture(r.TEXTURE0);var a=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,t),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),t.width=s,t.height=n,a&&r.bindTexture(r.TEXTURE_2D,a)}return t},createVideoTexture:function(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r=this.gl,s=r.NEAREST,n=r.NEAREST,a=e.videoWidth,h=e.videoHeight,o=r.CLAMP_TO_EDGE,u=Tu(a,h);return!t&&u&&(o=r.REPEAT),this.config.antialias&&(s=u?this.mipmapFilter:r.LINEAR,n=r.LINEAR),this.createTexture2D(0,s,n,o,o,r.RGBA,e,a,h,!0,!0,i)},updateVideoTexture:function(e,t,i){i===void 0&&(i=!1);var r=this.gl,s=e.videoWidth,n=e.videoHeight;if(s>0&&n>0){r.activeTexture(r.TEXTURE0);var a=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,t),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),t.width=s,t.height=n,a&&r.bindTexture(r.TEXTURE_2D,a)}return t},setTextureFilter:function(e,t){var i=this.gl,r=[i.LINEAR,i.NEAREST][t];i.activeTexture(i.TEXTURE0);var s=i.getParameter(i.TEXTURE_BINDING_2D);return i.bindTexture(i.TEXTURE_2D,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r),s&&i.bindTexture(i.TEXTURE_2D,s),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var e=this.gl,t=this.tempTextures,i=0;i<t.length;i++)e.deleteTexture(t[i]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});lF.exports=ige});var Jc=l((kHe,dF)=>{var rge=vc(),fF=Ot(),Sr=Qt(),Zc=iu(),sge=function(e){var t=e.config;if((t.customEnvironment||t.canvas)&&t.renderType===Sr.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!t.customEnvironment&&!t.canvas&&t.renderType!==Sr.HEADLESS)if(t.renderType===Sr.AUTO&&(t.renderType=Zc.webGL?Sr.WEBGL:Sr.CANVAS),t.renderType===Sr.WEBGL){if(!Zc.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(t.renderType===Sr.CANVAS){if(!Zc.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+t.renderType);t.antialias||fF.disableSmoothing();var i=e.scale.baseSize,r=i.width,s=i.height;if(t.canvas?(e.canvas=t.canvas,e.canvas.width=r,e.canvas.height=s):e.canvas=fF.create(e,r,s,t.renderType),t.canvasStyle&&(e.canvas.style=t.canvasStyle),t.antialias||rge.setCrisp(e.canvas),t.renderType!==Sr.HEADLESS){var n,a;typeof WEBGL_RENDERER&&typeof CANVAS_RENDERER&&(n=xc(),a=Kc(),t.renderType===Sr.WEBGL?e.renderer=new a(e):(e.renderer=new n(e),e.context=e.renderer.gameContext))}};dF.exports=sge});var Qc=l((zHe,vF)=>{var Su=Qt(),nge=function(e){var t=e.config;if(!t.hideBanner){var i="WebGL";t.renderType===Su.CANVAS?i="Canvas":t.renderType===Su.HEADLESS&&(i="Headless");var r=t.audio,s=e.device.audio,n;if(s.webAudio&&!r.disableWebAudio?n="Web Audio":r.noAudio||!s.webAudio&&!s.audioData?n="No Audio":n="HTML5 Audio",e.device.browser.ie)window.console&&console.log("Phaser v"+Su.VERSION+" / https://phaser.io");else{var a="",h=[a];if(Array.isArray(t.bannerBackgroundColor)){var o;t.bannerBackgroundColor.forEach(function(f){a=a.concat("%c "),h.push("background: "+f),o=f}),h[h.length-1]="color: "+t.bannerTextColor+"; background: "+o}else a=a.concat("%c "),h.push("color: "+t.bannerTextColor+"; background: "+t.bannerBackgroundColor);h.push("background: transparent"),t.gameTitle&&(a=a.concat(t.gameTitle),t.gameVersion&&(a=a.concat(" v"+t.gameVersion)),t.hidePhaser||(a=a.concat(" / ")));var u="-FB";t.hidePhaser||(a=a.concat("Phaser v"+Su.VERSION+u+" ("+i+" | "+n+")")),a=a.concat(" %c "+t.gameURL),h[0]=a,console.log.apply(console,h)}}};vF.exports=nge});var $c=l((YHe,pF)=>{var age=C(),cF=B(),hge=new age({initialize:function(){this.isRunning=!1,this.callback=cF,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function i(r){t.lastTime=t.tick,t.tick=r,t.callback(r),t.timeOutID=window.requestAnimationFrame(i)},this.stepTimeout=function i(){var r=Date.now(),s=Math.min(Math.max(t.target*2+t.tick-r,0),t.target);t.lastTime=t.tick,t.tick=r,t.callback(r),t.timeOutID=window.setTimeout(i,s)}},start:function(e,t,i){this.isRunning||(this.callback=e,this.isSetTimeOut=t,this.target=i,this.isRunning=!0,this.timeOutID=t?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=cF}});pF.exports=hge});var jc=l((XHe,gF)=>{var oge=C(),kn=he(),mF=B(),uge=$c(),lge=new oge({initialize:function(t,i){this.game=t,this.raf=new uge,this.started=!1,this.running=!1,this.minFps=kn(i,"min",5),this.targetFps=kn(i,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=mF,this.forceSetTimeOut=kn(i,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=kn(i,"deltaHistory",10),this.panicMax=kn(i,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=kn(i,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var e=window.performance.now();this.time=e,this.lastTime=e,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0;for(var t=0;t<this.deltaSmoothingMax;t++)this.deltaHistory[t]=Math.min(this._target,this.deltaHistory[t]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(e){if(this.started)return this;this.started=!0,this.running=!0;for(var t=0;t<this.deltaSmoothingMax;t++)this.deltaHistory[t]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=e,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(e){this.now=e;var t=e-this.lastTime;t<0&&(t=0),this.rawDelta=t;var i=this.deltaIndex,r=this.deltaHistory,s=this.deltaSmoothingMax,n=t,a=t;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,n=Math.min(n,this._target)),n>this._min&&(n=r[i],n=Math.min(n,this._min)),r[i]=n,this.deltaIndex++,this.deltaIndex>s&&(this.deltaIndex=0),a=0;for(var h=0;h<s;h++)a+=r[h];a/=s}this.delta=a,this.time+=this.rawDelta,e>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0),this.framesThisSecond++;var o=a/this._target;this.callback(e,a,o),this.lastTime=e,this.frame++},tick:function(){this.step(window.performance.now())},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(e){this.running||(e&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=mF,this.raf=null,this.game=null}});gF.exports=lge});var ep=l((VHe,xF)=>{var _u=Xe(),fge=function(e){var t,i=e.events;if(document.hidden!==void 0)t="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(n){document[n+"Hidden"]!==void 0&&(document.hidden=function(){return document[n+"Hidden"]},t=n+"visibilitychange")})}var s=function(n){document.hidden||n.type==="pause"?i.emit(_u.HIDDEN):i.emit(_u.VISIBLE)};t&&document.addEventListener(t,s,!1),window.onblur=function(){i.emit(_u.BLUR)},window.onfocus=function(){i.emit(_u.FOCUS)},window.focus&&e.config.autoFocus&&window.focus()};xF.exports=fge});var TF=l((WHe,yF)=>{yF.exports={Config:dc(),CreateRenderer:Jc(),DebugHeader:Qc(),Events:Xe(),TimeStep:jc(),VisibilityHandler:ep()}});var tp=l((HHe,EF)=>{EF.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}});var ip=l((KHe,SF)=>{var dge=tp(),vge=Ot(),_r=he(),cge=function(e){var t=_r(e,"data",[]),i=_r(e,"canvas",null),r=_r(e,"palette",dge),s=_r(e,"pixelWidth",1),n=_r(e,"pixelHeight",s),a=_r(e,"resizeCanvas",!0),h=_r(e,"clearCanvas",!0),o=_r(e,"preRender",null),u=_r(e,"postRender",null),f=Math.floor(Math.abs(t[0].length*s)),d=Math.floor(Math.abs(t.length*n));i||(i=vge.create2D(this,f,d),a=!1,h=!1),a&&(i.width=f,i.height=d);var v=i.getContext("2d");h&&v.clearRect(0,0,f,d),o&&o(i,v);for(var c=0;c<t.length;c++)for(var p=t[c],m=0;m<p.length;m++){var x=p[m];x!=="."&&x!==" "&&(v.fillStyle=r[x],v.fillRect(m*s,c*n,s,n))}return u&&u(i,v),i};SF.exports=cge});var wF=l((ZHe,_F)=>{_F.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}});var RF=l((JHe,CF)=>{CF.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}});var AF=l((QHe,qF)=>{qF.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}});var PF=l(($He,bF)=>{bF.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}});var LF=l((jHe,MF)=>{MF.exports={ARNE16:tp(),C64:wF(),CGA:RF(),JMP:AF(),MSX:PF()}});var FF=l((e6e,OF)=>{OF.exports={GenerateTexture:ip(),Palettes:LF()}});var NF=l((t6e,IF)=>{var pge=C(),rp=Js(),mge=ct(),zn=Ge(),DF=new pge({Extends:rp,initialize:function(t){rp.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(zn.BOOT,this.boot,this),t.sys.events.on(zn.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(zn.DESTROY,this.destroy,this)},start:function(){this.events.once(zn.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(zn.SHUTDOWN,this.shutdown,this)},destroy:function(){rp.prototype.destroy.call(this),this.events.off(zn.START,this.start,this),this.scene=null,this.systems=null}});mge.register("DataManagerPlugin",DF,"data");IF.exports=DF});var BF=l((i6e,GF)=>{GF.exports={DataManager:Js(),DataManagerPlugin:NF(),Events:tv()}});var kF=l((r6e,UF)=>{UF.exports={BottomCenter:_d(),BottomLeft:wd(),BottomRight:Cd(),Center:qd(),LeftCenter:Ad(),QuickSet:Od(),RightCenter:bd(),TopCenter:Pd(),TopLeft:Md(),TopRight:Ld()}});var YF=l((s6e,zF)=>{zF.exports={BottomCenter:ld(),BottomLeft:fd(),BottomRight:dd(),LeftBottom:vd(),LeftCenter:cd(),LeftTop:pd(),QuickSet:Sd(),RightBottom:md(),RightCenter:gd(),RightTop:xd(),TopCenter:yd(),TopLeft:Td(),TopRight:Ed()}});var VF=l((n6e,XF)=>{var gge=Ga(),xge=Ye(),sp={In:kF(),To:YF()};sp=xge(!1,sp,gge);XF.exports=sp});var np=l((a6e,WF)=>{var yge=C(),Tge=new yge({initialize:function(t,i,r,s){(!i||i==="")&&(i=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!r||r==="")&&(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),s===void 0&&(s=null),this.key=t,this.fragmentSrc=i,this.vertexSrc=r,this.uniforms=s}});WF.exports=Tge});var KF=l((h6e,HF)=>{var Ege=wi(),Sge=Ci(),_ge=Ri(),wge=qi(),Cge=function(e,t){t===void 0&&(t={});var i=Sge(e),r=wge(e);return t.x=i,t.y=r,t.width=_ge(e)-i,t.height=Ege(e)-r,t};HF.exports=Cge});var JF=l((o6e,ZF)=>{var Rge=function(e){return e.width*e.originX};ZF.exports=Rge});var $F=l((u6e,QF)=>{var qge=function(e){return e.height*e.originY};QF.exports=qge});var e2=l((l6e,jF)=>{jF.exports={CenterOn:Rd(),GetBottom:wi(),GetBounds:KF(),GetCenterX:Ys(),GetCenterY:Vs(),GetLeft:Ci(),GetOffsetX:JF(),GetOffsetY:$F(),GetRight:Ri(),GetTop:qi(),SetBottom:Hi(),SetCenterX:Xs(),SetCenterY:Ws(),SetLeft:Vi(),SetRight:Wi(),SetTop:Xi()}});var i2=l((f6e,t2)=>{var Age=function(e,t){return t===void 0&&(t="none"),e.style.msTouchAction=t,e.style["ms-touch-action"]=t,e.style["touch-action"]=t,e};t2.exports=Age});var s2=l((d6e,r2)=>{var bge=function(e,t){t===void 0&&(t="none");var i=["-webkit-","-khtml-","-moz-","-ms-",""];return i.forEach(function(r){e.style[r+"user-select"]=t}),e.style["-webkit-touch-callout"]=t,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};r2.exports=bge});var a2=l((v6e,n2)=>{n2.exports={CanvasInterpolation:vc(),CanvasPool:Ot(),Smoothing:eu(),TouchAction:i2(),UserSelect:s2()}});var o2=l((c6e,h2)=>{var wu=An(),Pge=function(e){e===void 0&&(e=1024);var t=[],i=255,r,s=255,n=0,a=0;for(r=0;r<=i;r++)t.push({r:s,g:r,b:a,color:wu(s,r,a)});for(n=255,r=i;r>=0;r--)t.push({r,g:n,b:a,color:wu(r,n,a)});for(s=0,r=0;r<=i;r++,n--)t.push({r:s,g:n,b:r,color:wu(s,n,r)});for(n=0,a=255,r=0;r<=i;r++,a--,s++)t.push({r:s,g:n,b:a,color:wu(s,n,a)});if(e===1024)return t;var h=[],o=0,u=1024/e;for(r=0;r<e;r++)h.push(t[Math.floor(o)]),o+=u;return h};h2.exports=Pge});var l2=l((p6e,u2)=>{var Mge=function(e){var t={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(t.a=e>>>24),t};u2.exports=Mge});var ap=l((m6e,f2)=>{var Lge=function(e){var t=e.toString(16);return t.length===1?"0"+t:t};f2.exports=Lge});var hp=l((g6e,d2)=>{var Oge=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<.16666666666666666?e+(t-e)*6*i:i<.5?t:i<.6666666666666666?e+(t-e)*(.6666666666666666-i)*6:e};d2.exports=Oge});var c2=l((x6e,v2)=>{var Fge=vi(),op=hp(),Dge=function(e,t,i){var r=i,s=i,n=i;if(t!==0){var a=i<.5?i*(1+t):i+t-i*t,h=2*i-a;r=op(h,a,e+1/3),s=op(h,a,e),n=op(h,a,e-1/3)}var o=new Fge;return o.setGLTo(r,s,n,1)};v2.exports=Dge});var m2=l((y6e,p2)=>{var Ige=zo(),Nge=function(e,t){e===void 0&&(e=1),t===void 0&&(t=1);for(var i=[],r=0;r<=359;r++)i.push(Ige(r/359,e,t));return i};p2.exports=Nge});var x2=l((T6e,g2)=>{var up=$a(),lp=function(e,t,i,r,s,n,a,h){a===void 0&&(a=100),h===void 0&&(h=0);var o=h/a;return{r:up(e,r,o),g:up(t,s,o),b:up(i,n,o)}},Gge=function(e,t,i,r){return i===void 0&&(i=100),r===void 0&&(r=0),lp(e.r,e.g,e.b,t.r,t.g,t.b,i,r)},Bge=function(e,t,i,r,s,n){return s===void 0&&(s=100),n===void 0&&(n=0),lp(e.r,e.g,e.b,t,i,r,s,n)};g2.exports={RGBWithRGB:lp,ColorWithRGB:Bge,ColorWithColor:Gge}});var T2=l((E6e,y2)=>{var fp=nu(),Uge=vi(),kge=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=255),new Uge(fp(e,t),fp(e,t),fp(e,t))};y2.exports=kge});var S2=l((S6e,E2)=>{var Cu=ap(),zge=function(e,t,i,r,s){return r===void 0&&(r=255),s===void 0&&(s="#"),s==="#"?"#"+((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1,7):"0x"+Cu(r)+Cu(e)+Cu(t)+Cu(i)};E2.exports=zge});var w2=l((_6e,_2)=>{var Ve=vi();Ve.ColorSpectrum=o2();Ve.ColorToRGBA=l2();Ve.ComponentToHex=ap();Ve.GetColor=An();Ve.GetColor32=fv();Ve.HexStringToColor=cv();Ve.HSLToColor=c2();Ve.HSVColorWheel=m2();Ve.HSVToRGB=zo();Ve.HueToComponent=hp();Ve.IntegerToColor=Xo();Ve.IntegerToRGB=pv();Ve.Interpolate=x2();Ve.ObjectToColor=mv();Ve.RandomRGB=T2();Ve.RGBStringToColor=gv();Ve.RGBToHSV=vv();Ve.RGBToString=S2();Ve.ValueToColor=Vo();_2.exports=Ve});var R2=l((w6e,C2)=>{C2.exports={BitmapMask:Xd(),GeometryMask:Vd()}});var Ru=l((C6e,q2)=>{var Yge=C(),Xge=B(),Vge=new Yge({initialize:function(t,i,r){this._rgb=[0,0,0],this.onChangeCallback=Xge,this.dirty=!1,this.set(t,i,r)},set:function(e,t,i){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),this._rgb=[e,t,i],this.onChange(),this},equals:function(e,t,i){var r=this._rgb;return r.r===e&&r.g===t&&r.b===i},onChange:function(){this.dirty=!0;var e=this._rgb;this.onChangeCallback.call(this,e[0],e[1],e[2])},r:{get:function(){return this._rgb[0]},set:function(e){this._rgb[0]=e,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(e){this._rgb[1]=e,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(e){this._rgb[2]=e,this.onChange()}},destroy:function(){this.onChangeCallback=null}});q2.exports=Vge});var b2=l((R6e,A2)=>{A2.exports={Align:VF(),BaseShader:np(),Bounds:e2(),Canvas:a2(),Color:w2(),ColorMatrix:gu(),Masks:R2(),RGB:Ru()}});var dh=l((q6e,P2)=>{var Wge=function(e,t){var i;if(t)typeof t=="string"?i=document.getElementById(t):typeof t=="object"&&t.nodeType===1&&(i=t);else if(e.parentElement||t===null)return e;return i||(i=document.body),i.appendChild(e),e};P2.exports=Wge});var dp=l((A6e,M2)=>{var Hge=Ln(),Kge=function(e){if(document.readyState==="complete"||document.readyState==="interactive"){e();return}var t=function(){document.removeEventListener("deviceready",t,!0),document.removeEventListener("DOMContentLoaded",t,!0),window.removeEventListener("load",t,!0),e()};document.body?Hge.cordova?document.addEventListener("deviceready",t,!1):(document.addEventListener("DOMContentLoaded",t,!0),window.addEventListener("load",t,!0)):window.setTimeout(t,20)};M2.exports=Kge});var vp=l((b6e,L2)=>{var Zge=function(e){if(!e)return window.innerHeight;var t=Math.abs(window.orientation),i={w:0,h:0},r=document.createElement("div");return r.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(r),i.w=t===90?r.offsetHeight:window.innerWidth,i.h=t===90?window.innerWidth:r.offsetHeight,document.documentElement.removeChild(r),r=null,Math.abs(window.orientation)!==90?i.h:i.w};L2.exports=Zge});var cp=l((P6e,O2)=>{O2.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}});var pp=l((M6e,F2)=>{F2.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}});var mp=l((L6e,D2)=>{D2.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}});var gp=l((O6e,I2)=>{I2.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}});var qu=l((F6e,N2)=>{var Jge={CENTER:cp(),ORIENTATION:pp(),SCALE_MODE:mp(),ZOOM:gp()};N2.exports=Jge});var xp=l((D6e,G2)=>{var Yn=qu(),Qge=function(e,t){var i=window.screen,r=i?i.orientation||i.mozOrientation||i.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?Yn.ORIENTATION.PORTRAIT:Yn.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return Yn.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return Yn.ORIENTATION.LANDSCAPE}else return t>e?Yn.ORIENTATION.PORTRAIT:Yn.ORIENTATION.LANDSCAPE};G2.exports=Qge});var yp=l((I6e,B2)=>{var $ge=function(e){var t;return e!==""&&(typeof e=="string"?t=document.getElementById(e):e&&e.nodeType===1&&(t=e)),t||(t=document.body),t};B2.exports=$ge});var Tp=l((N6e,U2)=>{var jge=function(e){var t="";try{if(window.DOMParser){var i=new DOMParser;t=i.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.loadXML(e)}catch(r){t=null}return!t||!t.documentElement||t.getElementsByTagName("parsererror").length?null:t};U2.exports=jge});var Au=l((G6e,k2)=>{var e0e=function(e){e.parentNode&&e.parentNode.removeChild(e)};k2.exports=e0e});var Y2=l((B6e,z2)=>{var t0e={AddToDOM:dh(),DOMContentLoaded:dp(),GetInnerHeight:vp(),GetScreenOrientation:xp(),GetTarget:yp(),ParseXML:Tp(),RemoveFromDOM:Au(),RequestAnimationFrame:$c()};z2.exports=t0e});var H2=l((U6e,W2)=>{var i0e=C(),X2=ue(),r0e=ct(),V2=new i0e({Extends:X2,initialize:function(){X2.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});r0e.register("EventEmitter",V2,"events");W2.exports=V2});var Z2=l((k6e,K2)=>{K2.exports={EventEmitter:H2()}});var Q2=l((z6e,J2)=>{J2.exports="add"});var j2=l((Y6e,$2)=>{$2.exports="animationcomplete"});var tD=l((X6e,eD)=>{eD.exports="animationcomplete-"});var rD=l((V6e,iD)=>{iD.exports="animationrepeat"});var nD=l((W6e,sD)=>{sD.exports="animationrestart"});var hD=l((H6e,aD)=>{aD.exports="animationstart"});var uD=l((K6e,oD)=>{oD.exports="animationstop"});var fD=l((Z6e,lD)=>{lD.exports="animationupdate"});var vD=l((J6e,dD)=>{dD.exports="pauseall"});var pD=l((Q6e,cD)=>{cD.exports="remove"});var gD=l(($6e,mD)=>{mD.exports="resumeall"});var bu=l((j6e,xD)=>{xD.exports={ADD_ANIMATION:Q2(),ANIMATION_COMPLETE:j2(),ANIMATION_COMPLETE_KEY:tD(),ANIMATION_REPEAT:rD(),ANIMATION_RESTART:nD(),ANIMATION_START:hD(),ANIMATION_STOP:uD(),ANIMATION_UPDATE:fD(),PAUSE_ALL:vD(),REMOVE_ANIMATION:pD(),RESUME_ALL:gD()}});var Ep=l((e9e,yD)=>{var s0e=function(e,t,i){if(t.length){if(t.length===1)return t[0]}else return NaN;var r=1,s,n;if(i){if(e<t[0][i])return t[0];for(;t[r][i]<e;)r++}else for(;t[r]<e;)r++;return r>t.length&&(r=t.length),i?(s=t[r-1][i],n=t[r][i],n-e<=e-s?t[r]:t[r-1]):(s=t[r-1],n=t[r],n-e<=e-s?n:s)};yD.exports=s0e});var ED=l((t9e,TD)=>{var n0e=C(),a0e=new n0e({initialize:function(t,i,r,s,n){n===void 0&&(n=!1),this.textureKey=t,this.textureFrame=i,this.index=r,this.frame=s,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=n},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});TD.exports=a0e});var Sp=l((i9e,SD)=>{var h0e=function(e){var t=/\D/g;return e.sort(function(i,r){return parseInt(i.replace(t,""),10)-parseInt(r.replace(t,""),10)}),e};SD.exports=h0e});var _p=l((r9e,_D)=>{var o0e=Le(),u0e=C(),Pu=bu(),l0e=Ep(),f0e=ED(),Ft=he(),d0e=Sp(),v0e=new u0e({initialize:function(t,i,r){this.manager=t,this.key=i,this.type="frame",this.frames=this.getFrames(t.textureManager,Ft(r,"frames",[]),Ft(r,"defaultTextureKey",null),Ft(r,"sortFrames",!0)),this.frameRate=Ft(r,"frameRate",null),this.duration=Ft(r,"duration",null),this.msPerFrame,this.skipMissedFrames=Ft(r,"skipMissedFrames",!0),this.delay=Ft(r,"delay",0),this.repeat=Ft(r,"repeat",0),this.repeatDelay=Ft(r,"repeatDelay",0),this.yoyo=Ft(r,"yoyo",!1),this.showOnStart=Ft(r,"showOnStart",!1),this.hideOnComplete=Ft(r,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(Pu.PAUSE_ALL,this.pause,this),this.manager.on(Pu.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(e,t,i,r){i===null&&r===null?(e.frameRate=24,e.duration=24/t*1e3):i&&r===null?(e.duration=i,e.frameRate=t/(i/1e3)):(e.frameRate=r,e.duration=t/r*1e3),e.msPerFrame=1e3/e.frameRate},addFrame:function(e){return this.addFrameAt(this.frames.length,e)},addFrameAt:function(e,t){var i=this.getFrames(this.manager.textureManager,t);if(i.length>0){if(e===0)this.frames=i.concat(this.frames);else if(e===this.frames.length)this.frames=this.frames.concat(i);else{var r=this.frames.slice(0,e),s=this.frames.slice(e);this.frames=r.concat(i,s)}this.updateFrameSequence()}return this},checkFrame:function(e){return e>=0&&e<this.frames.length},getFirstTick:function(e){e.accumulator=0,e.nextTick=e.msPerFrame+e.currentFrame.duration},getFrameAt:function(e){return this.frames[e]},getFrames:function(e,t,i,r){r===void 0&&(r=!0);var s=[],n,a,h=1,o,u;if(typeof t=="string"){u=t;var f=e.get(u),d=f.getFrameNames();r&&d0e(d),t=[],d.forEach(function(g){t.push({key:u,frame:g})})}if(!Array.isArray(t)||t.length===0)return s;for(o=0;o<t.length;o++){var v=t[o],c=Ft(v,"key",i);if(!!c){var p=Ft(v,"frame",0),m=e.getFrame(c,p);a=new f0e(c,p,h,m),a.duration=Ft(v,"duration",0),a.isFirst=!n,n&&(n.nextFrame=a,a.prevFrame=n),s.push(a),n=a,h++}}if(s.length>0){a.isLast=!0,a.nextFrame=s[0],s[0].prevFrame=a;var x=1/(s.length-1);for(o=0;o<s.length;o++)s[o].progress=o*x}return s},getNextTick:function(e){e.accumulator-=e.nextTick,e.nextTick=e.msPerFrame+e.currentFrame.duration},getFrameByProgress:function(e){return e=o0e(e,0,1),l0e(e,this.frames,"progress")},nextFrame:function(e){var t=e.currentFrame;t.isLast?e.yoyo?this.handleYoyoFrame(e,!1):e.repeatCounter>0?e.inReverse&&e.forward?e.forward=!1:this.repeatAnimation(e):e.complete():this.updateAndGetNextTick(e,t.nextFrame)},handleYoyoFrame:function(e,t){if(t||(t=!1),e.inReverse===!t&&e.repeatCounter>0){(e.repeatDelay===0||e.pendingRepeat)&&(e.forward=t),this.repeatAnimation(e);return}if(e.inReverse!==t&&e.repeatCounter===0){e.complete();return}e.forward=t;var i=t?e.currentFrame.nextFrame:e.currentFrame.prevFrame;this.updateAndGetNextTick(e,i)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(e){var t=e.currentFrame;t.isFirst?e.yoyo?this.handleYoyoFrame(e,!0):e.repeatCounter>0?e.inReverse&&!e.forward?this.repeatAnimation(e):(e.forward=!0,this.repeatAnimation(e)):e.complete():this.updateAndGetNextTick(e,t.prevFrame)},updateAndGetNextTick:function(e,t){e.setCurrentFrame(t),this.getNextTick(e)},removeFrame:function(e){var t=this.frames.indexOf(e);return t!==-1&&this.removeFrameAt(t),this},removeFrameAt:function(e){return this.frames.splice(e,1),this.updateFrameSequence(),this},repeatAnimation:function(e){if(e._pendingStop===2){if(e._pendingStopValue===0)return e.stop();e._pendingStopValue--}e.repeatDelay>0&&!e.pendingRepeat?(e.pendingRepeat=!0,e.accumulator-=e.nextTick,e.nextTick+=e.repeatDelay):(e.repeatCounter--,e.forward?e.setCurrentFrame(e.currentFrame.nextFrame):e.setCurrentFrame(e.currentFrame.prevFrame),e.isPlaying&&(this.getNextTick(e),e.handleRepeat()))},toJSON:function(){var e={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(t){e.frames.push(t.toJSON())}),e},updateFrameSequence:function(){for(var e=this.frames.length,t=1/(e-1),i,r=0;r<e;r++)i=this.frames[r],i.index=r+1,i.isFirst=!1,i.isLast=!1,i.progress=r*t,r===0?(i.isFirst=!0,e===1?(i.isLast=!0,i.nextFrame=i,i.prevFrame=i):(i.isLast=!1,i.prevFrame=this.frames[e-1],i.nextFrame=this.frames[r+1])):r===e-1&&e>1?(i.isLast=!0,i.prevFrame=this.frames[e-2],i.nextFrame=this.frames[0]):e>1&&(i.prevFrame=this.frames[r-1],i.nextFrame=this.frames[r+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(Pu.PAUSE_ALL,this.pause,this),this.manager.off(Pu.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var e=0;e<this.frames.length;e++)this.frames[e].destroy();this.frames=[],this.manager=null}});_D.exports=v0e});var Mu=l((s9e,wD)=>{var c0e=function(e,t,i,r){t===void 0&&(t=0),i===void 0&&(i=" "),r===void 0&&(r=3),e=e.toString();var s=0;if(t+1>=e.length)switch(r){case 1:e=new Array(t+1-e.length).join(i)+e;break;case 3:var n=Math.ceil((s=t-e.length)/2),a=s-n;e=new Array(a+1).join(i)+e+new Array(n+1).join(i);break;default:e=e+new Array(t+1-e.length).join(i);break}return e};wD.exports=c0e});var wp=l((n9e,CD)=>{var p0e=function(e,t,i,r){var s=[],n,a=!1;if((i||r)&&(a=!0,i||(i=""),r||(r="")),t<e)for(n=e;n>=t;n--)a?s.push(i+n.toString()+r):s.push(n);else for(n=e;n<=t;n++)a?s.push(i+n.toString()+r):s.push(n);return s};CD.exports=p0e});var MD=l((a9e,PD)=>{var m0e=_p(),g0e=C(),RD=qn(),qD=ue(),vh=bu(),AD=Xe(),ch=z(),Dt=he(),x0e=Mu(),bD=wp(),y0e=new g0e({Extends:qD,initialize:function(t){qD.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new RD,this.mixes=new RD,this.paused=!1,this.name="AnimationManager",t.events.once(AD.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(AD.DESTROY,this.destroy,this)},addMix:function(e,t,i){var r=this.anims,s=this.mixes,n=typeof e=="string"?e:e.key,a=typeof t=="string"?t:t.key;if(r.has(n)&&r.has(a)){var h=s.get(n);h||(h={}),h[a]=i,s.set(n,h)}return this},removeMix:function(e,t){var i=this.mixes,r=typeof e=="string"?e:e.key,s=i.get(r);if(s)if(t){var n=typeof t=="string"?t:t.key;s.hasOwnProperty(n)&&delete s[n]}else t||i.delete(r);return this},getMix:function(e,t){var i=this.mixes,r=typeof e=="string"?e:e.key,s=typeof t=="string"?t:t.key,n=i.get(r);return n&&n.hasOwnProperty(s)?n[s]:0},add:function(e,t){return this.anims.has(e)?(console.warn("Animation key exists: "+e),this):(t.key=e,this.anims.set(e,t),this.emit(vh.ADD_ANIMATION,e,t),this)},exists:function(e){return this.anims.has(e)},createFromAseprite:function(e,t){var i=[],r=this.game.cache.json.get(e);if(!r)return i;var s=this,n=Dt(r,"meta",null),a=Dt(r,"frames",null);if(n&&a){var h=Dt(n,"frameTags",[]);h.forEach(function(o){var u=[],f=ch(o,"name",null),d=ch(o,"from",0),v=ch(o,"to",0),c=ch(o,"direction","forward");if(!!f&&(!t||t&&t.indexOf(f)>-1)){for(var p=[],m=Number.MAX_SAFE_INTEGER,x=d;x<=v;x++){var g=x.toString(),y=a[g];if(y){var T=ch(y,"duration",Number.MAX_SAFE_INTEGER);T<m&&(m=T),p.push({frame:g,duration:T})}}p.forEach(function(w){u.push({key:e,frame:w.frame,duration:w.duration-m})});var S=m*u.length;c==="reverse"&&(u=u.reverse());var E={key:f,frames:u,duration:S,yoyo:c==="pingpong"},_=s.create(E);_&&i.push(_)}})}return i},create:function(e){var t=e.key,i=!1;return t&&(i=this.get(t),i||(i=new m0e(this,t,e),this.anims.set(t,i),this.emit(vh.ADD_ANIMATION,t,i))),i},fromJSON:function(e,t){t===void 0&&(t=!1),t&&this.anims.clear(),typeof e=="string"&&(e=JSON.parse(e));var i=[];if(e.hasOwnProperty("anims")&&Array.isArray(e.anims)){for(var r=0;r<e.anims.length;r++)i.push(this.create(e.anims[r]));e.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=e.globalTimeScale)}else e.hasOwnProperty("key")&&e.type==="frame"&&i.push(this.create(e));return i},generateFrameNames:function(e,t){var i=Dt(t,"prefix",""),r=Dt(t,"start",0),s=Dt(t,"end",0),n=Dt(t,"suffix",""),a=Dt(t,"zeroPad",0),h=Dt(t,"outputArray",[]),o=Dt(t,"frames",!1),u=this.textureManager.get(e);if(!u)return h;var f;if(t)for(o||(o=bD(r,s)),f=0;f<o.length;f++){var d=i+x0e(o[f],a,"0",1)+n;u.has(d)?h.push({key:e,frame:d}):console.warn("generateFrameNames: Frame missing: "+d+" from texture: "+e)}else for(o=u.getFrameNames(),f=0;f<o.length;f++)h.push({key:e,frame:o[f]});return h},generateFrameNumbers:function(e,t){var i=Dt(t,"start",0),r=Dt(t,"end",-1),s=Dt(t,"first",!1),n=Dt(t,"outputArray",[]),a=Dt(t,"frames",!1),h=this.textureManager.get(e);if(!h)return n;s&&h.has(s)&&n.push({key:e,frame:s}),a||(r===-1&&(r=h.frameTotal-2),a=bD(i,r));for(var o=0;o<a.length;o++)h.has(a[o])?n.push({key:e,frame:a[o]}):console.warn("generateFrameNumbers: Frame "+o+" missing from texture: "+e);return n},get:function(e){return this.anims.get(e)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(vh.PAUSE_ALL)),this},play:function(e,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)t[i].anims.play(e);return this},staggerPlay:function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=!0),Array.isArray(t)||(t=[t]);var s=t.length;r||s--;for(var n=0;n<t.length;n++){var a=i<0?Math.abs(i)*(s-n):i*n;t[n].anims.playAfterDelay(e,a)}return this},remove:function(e){var t=this.get(e);return t&&(this.emit(vh.REMOVE_ANIMATION,e,t),this.anims.delete(e),this.removeMix(e)),t},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(vh.RESUME_ALL)),this},toJSON:function(e){var t={anims:[],globalTimeScale:this.globalTimeScale};return e!==void 0&&e!==""?t.anims.push(this.anims.get(e).toJSON()):this.anims.each(function(i,r){t.anims.push(r.toJSON())}),t},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});PD.exports=y0e});var OD=l((h9e,LD)=>{var T0e=dh(),E0e=function(e){var t=e.config;if(!(!t.parent||!t.domCreateContainer)){var i=document.createElement("div");i.style.cssText=["display: block;","width: "+e.scale.width+"px;","height: "+e.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+t.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),e.domContainer=i,T0e(i,t.parent)}};LD.exports=E0e});var Lu=l((o9e,FD)=>{var S0e={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};FD.exports=S0e});var ID=l((u9e,DD)=>{DD.exports="boot"});var GD=l((l9e,ND)=>{ND.exports="destroy"});var UD=l((f9e,BD)=>{BD.exports="dragend"});var zD=l((d9e,kD)=>{kD.exports="dragenter"});var XD=l((v9e,YD)=>{YD.exports="drag"});var WD=l((c9e,VD)=>{VD.exports="dragleave"});var KD=l((p9e,HD)=>{HD.exports="dragover"});var JD=l((m9e,ZD)=>{ZD.exports="dragstart"});var $D=l((g9e,QD)=>{QD.exports="drop"});var eI=l((x9e,jD)=>{jD.exports="gameout"});var iI=l((y9e,tI)=>{tI.exports="gameover"});var sI=l((T9e,rI)=>{rI.exports="gameobjectdown"});var aI=l((E9e,nI)=>{nI.exports="dragend"});var oI=l((S9e,hI)=>{hI.exports="dragenter"});var lI=l((_9e,uI)=>{uI.exports="drag"});var dI=l((w9e,fI)=>{fI.exports="dragleave"});var cI=l((C9e,vI)=>{vI.exports="dragover"});var mI=l((R9e,pI)=>{pI.exports="dragstart"});var xI=l((q9e,gI)=>{gI.exports="drop"});var TI=l((A9e,yI)=>{yI.exports="gameobjectmove"});var SI=l((b9e,EI)=>{EI.exports="gameobjectout"});var wI=l((P9e,_I)=>{_I.exports="gameobjectover"});var RI=l((M9e,CI)=>{CI.exports="pointerdown"});var AI=l((L9e,qI)=>{qI.exports="pointermove"});var PI=l((O9e,bI)=>{bI.exports="pointerout"});var LI=l((F9e,MI)=>{MI.exports="pointerover"});var FI=l((D9e,OI)=>{OI.exports="pointerup"});var II=l((I9e,DI)=>{DI.exports="wheel"});var GI=l((N9e,NI)=>{NI.exports="gameobjectup"});var UI=l((G9e,BI)=>{BI.exports="gameobjectwheel"});var zI=l((B9e,kI)=>{kI.exports="boot"});var XI=l((U9e,YI)=>{YI.exports="process"});var WI=l((k9e,VI)=>{VI.exports="update"});var KI=l((z9e,HI)=>{HI.exports="pointerdown"});var JI=l((Y9e,ZI)=>{ZI.exports="pointerdownoutside"});var $I=l((X9e,QI)=>{QI.exports="pointermove"});var eN=l((V9e,jI)=>{jI.exports="pointerout"});var iN=l((W9e,tN)=>{tN.exports="pointerover"});var sN=l((H9e,rN)=>{rN.exports="pointerup"});var aN=l((K9e,nN)=>{nN.exports="pointerupoutside"});var oN=l((Z9e,hN)=>{hN.exports="wheel"});var lN=l((J9e,uN)=>{uN.exports="pointerlockchange"});var dN=l((Q9e,fN)=>{fN.exports="preupdate"});var cN=l(($9e,vN)=>{vN.exports="shutdown"});var mN=l((j9e,pN)=>{pN.exports="start"});var xN=l((e8e,gN)=>{gN.exports="update"});var ji=l((t8e,yN)=>{yN.exports={BOOT:ID(),DESTROY:GD(),DRAG_END:UD(),DRAG_ENTER:zD(),DRAG:XD(),DRAG_LEAVE:WD(),DRAG_OVER:KD(),DRAG_START:JD(),DROP:$D(),GAME_OUT:eI(),GAME_OVER:iI(),GAMEOBJECT_DOWN:sI(),GAMEOBJECT_DRAG_END:aI(),GAMEOBJECT_DRAG_ENTER:oI(),GAMEOBJECT_DRAG:lI(),GAMEOBJECT_DRAG_LEAVE:dI(),GAMEOBJECT_DRAG_OVER:cI(),GAMEOBJECT_DRAG_START:mI(),GAMEOBJECT_DROP:xI(),GAMEOBJECT_MOVE:TI(),GAMEOBJECT_OUT:SI(),GAMEOBJECT_OVER:wI(),GAMEOBJECT_POINTER_DOWN:RI(),GAMEOBJECT_POINTER_MOVE:AI(),GAMEOBJECT_POINTER_OUT:PI(),GAMEOBJECT_POINTER_OVER:LI(),GAMEOBJECT_POINTER_UP:FI(),GAMEOBJECT_POINTER_WHEEL:II(),GAMEOBJECT_UP:GI(),GAMEOBJECT_WHEEL:UI(),MANAGER_BOOT:zI(),MANAGER_PROCESS:XI(),MANAGER_UPDATE:WI(),POINTER_DOWN:KI(),POINTER_DOWN_OUTSIDE:JI(),POINTER_MOVE:$I(),POINTER_OUT:eN(),POINTER_OVER:iN(),POINTER_UP:sN(),POINTER_UP_OUTSIDE:aN(),POINTER_WHEEL:oN(),POINTERLOCK_CHANGE:lN(),PRE_UPDATE:dN(),SHUTDOWN:cN(),START:mN(),UPDATE:xN()}});var ph=l((i8e,TN)=>{var _0e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};TN.exports=_0e});var Rp=l((r8e,wN)=>{var w0e=tn(),C0e=C(),EN=Xe(),Cp=ji(),SN=ph(),_N=B(),R0e=new C0e({initialize:function(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=_N,this.onKeyUp=_N,t.events.once(Cp.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputKeyboard,this.target=e.inputKeyboardEventTarget,this.addCapture(e.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(EN.POST_STEP,this.postUpdate,this)},startListeners:function(){var e=this;this.onKeyDown=function(i){if(!(i.defaultPrevented||!e.enabled||!e.manager)){e.queue.push(i),e.manager.events.emit(Cp.MANAGER_PROCESS);var r=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;e.preventDefault&&!r&&e.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}},this.onKeyUp=function(i){if(!(i.defaultPrevented||!e.enabled||!e.manager)){e.queue.push(i),e.manager.events.emit(Cp.MANAGER_PROCESS);var r=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;e.preventDefault&&!r&&e.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}};var t=this.target;t&&(t.addEventListener("keydown",this.onKeyDown,!1),t.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var e=this.target;e.removeEventListener("keydown",this.onKeyDown,!1),e.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(e){typeof e=="string"&&(e=e.split(",")),Array.isArray(e)||(e=[e]);for(var t=this.captures,i=0;i<e.length;i++){var r=e[i];typeof r=="string"&&(r=SN[r.trim().toUpperCase()]),t.indexOf(r)===-1&&t.push(r)}this.preventDefault=t.length>0},removeCapture:function(e){typeof e=="string"&&(e=e.split(",")),Array.isArray(e)||(e=[e]);for(var t=this.captures,i=0;i<e.length;i++){var r=e[i];typeof r=="string"&&(r=SN[r.toUpperCase()]),w0e(t,r)}this.preventDefault=t.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(EN.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});wN.exports=R0e});var qp=l((s8e,CN)=>{var q0e=C(),Ou=iu(),A0e=ji(),wr=B(),b0e=new q0e({initialize:function(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=wr,this.onMouseDown=wr,this.onMouseUp=wr,this.onMouseDownWindow=wr,this.onMouseUpWindow=wr,this.onMouseOver=wr,this.onMouseOut=wr,this.onMouseWheel=wr,this.pointerLockChange=wr,this.isTop=!0,t.events.once(A0e.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputMouse,this.target=e.inputMouseEventTarget,this.passive=e.inputMousePassive,this.preventDefaultDown=e.inputMousePreventDefaultDown,this.preventDefaultUp=e.inputMousePreventDefaultUp,this.preventDefaultMove=e.inputMousePreventDefaultMove,this.preventDefaultWheel=e.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},requestPointerLock:function(){if(Ou.pointerLock){var e=this.target;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock()}},releasePointerLock:function(){Ou.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var e=this.target;if(!!e){var t=this,i=this.manager,r=i.canvas,s=window&&window.focus&&i.game.config.autoFocus;this.onMouseMove=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onMouseMove(a),t.preventDefaultMove&&a.preventDefault())},this.onMouseDown=function(a){s&&window.focus(),!a.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onMouseDown(a),t.preventDefaultDown&&a.target===r&&a.preventDefault())},this.onMouseDownWindow=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&a.target!==r&&i.onMouseDown(a)},this.onMouseUp=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onMouseUp(a),t.preventDefaultUp&&a.target===r&&a.preventDefault())},this.onMouseUpWindow=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&a.target!==r&&i.onMouseUp(a)},this.onMouseOver=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&i.setCanvasOver(a)},this.onMouseOut=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&i.setCanvasOut(a)},this.onMouseWheel=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&i.onMouseWheel(a),t.preventDefaultWheel&&a.target===r&&a.preventDefault()};var n={passive:!0};if(e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mouseover",this.onMouseOver,n),e.addEventListener("mouseout",this.onMouseOut,n),this.preventDefaultWheel?e.addEventListener("wheel",this.onMouseWheel,{passive:!1}):e.addEventListener("wheel",this.onMouseWheel,n),window&&i.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,n),window.top.addEventListener("mouseup",this.onMouseUpWindow,n)}catch(a){window.addEventListener("mousedown",this.onMouseDownWindow,n),window.addEventListener("mouseup",this.onMouseUpWindow,n),this.isTop=!1}Ou.pointerLock&&(this.pointerLockChange=function(a){var h=t.target;t.locked=document.pointerLockElement===h||document.mozPointerLockElement===h||document.webkitPointerLockElement===h,i.onPointerLockChange(a)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("mouseover",this.onMouseOver),e.removeEventListener("mouseout",this.onMouseOut),window&&(e=this.isTop?window.top:window,e.removeEventListener("mousedown",this.onMouseDownWindow),e.removeEventListener("mouseup",this.onMouseUpWindow)),Ou.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});CN.exports=b0e});var bp=l((n8e,AN)=>{var Ap=Wv(),P0e=C(),RN=Wr(),qN=Ro(),Fu=tc(),Du=xe(),M0e=Ln(),L0e=new P0e({initialize:function(t,i){this.manager=t,this.id=i,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new Du,this.prevPosition=new Du,this.midPoint=new Du(-1,-1),this.velocity=new Du,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=i===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(e){var t=e.getWorldPoint(this.x,this.y);return this.worldX=t.x,this.worldY=t.y,this},positionToCamera:function(e,t){return e.getWorldPoint(this.x,this.y,t)},updateMotion:function(){var e=this.position.x,t=this.position.y,i=this.midPoint.x,r=this.midPoint.y;if(!(e===i&&t===r)){var s=Fu(this.motionFactor,i,e),n=Fu(this.motionFactor,r,t);qN(s,e,.1)&&(s=e),qN(n,t,.1)&&(n=t),this.midPoint.set(s,n);var a=e-s,h=t-n;this.velocity.set(a,h),this.angle=Ap(s,n,e,t),this.distance=Math.sqrt(a*a+h*h)}},up:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.button=e.button,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),e.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=e.timeStamp,this.wasTouch=!1)},down:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.button=e.button,this.downElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),e.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),M0e.macOS&&e.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=e.timeStamp),this.wasTouch=!1},move:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.manager.transformPointer(this,e.pageX,e.pageY,!0),this.locked&&(this.movementX=e.movementX||e.mozMovementX||e.webkitMovementX||0,this.movementY=e.movementY||e.mozMovementY||e.webkitMovementY||0),this.moveTime=e.timeStamp,this.wasTouch=!1},wheel:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.deltaX=e.deltaX,this.deltaY=e.deltaY,this.deltaZ=e.deltaZ,this.wasTouch=!1},touchstart:function(e,t){e.pointerId&&(this.pointerId=e.pointerId),this.identifier=e.identifier,this.target=e.target,this.active=!0,this.buttons=1,this.event=t,this.downElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=t.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(e,t){this.event=t,this.manager.transformPointer(this,e.pageX,e.pageY,!0),this.moveTime=t.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(e,t){this.buttons=0,this.event=t,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=t.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(e,t){this.buttons=0,this.event=t,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=t.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?RN(this.downX,this.downY,this.x,this.y):RN(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?Ap(this.downX,this.downY,this.x,this.y):Ap(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(e,t){e===void 0&&(e=10),t===void 0&&(t=[]);for(var i=this.prevPosition.x,r=this.prevPosition.y,s=this.position.x,n=this.position.y,a=0;a<e;a++){var h=1/e*a;t[a]={x:Fu(h,i,s),y:Fu(h,r,n)}}return t},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},time:{get:function(){return this.event?this.event.timeStamp:0}}});AN.exports=L0e});var Pp=l((a8e,bN)=>{var O0e=C(),F0e=ji(),Cr=B(),D0e=new O0e({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=Cr,this.onTouchStartWindow=Cr,this.onTouchMove=Cr,this.onTouchEnd=Cr,this.onTouchEndWindow=Cr,this.onTouchCancel=Cr,this.onTouchCancelWindow=Cr,this.onTouchOver=Cr,this.onTouchOut=Cr,t.events.once(F0e.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputTouch,this.target=e.inputTouchEventTarget,this.capture=e.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},startListeners:function(){var e=this,t=this.manager.canvas,i=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(a){i&&window.focus(),!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchStart(a),e.capture&&a.cancelable&&a.target===t&&a.preventDefault())},this.onTouchStartWindow=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&a.target!==t&&e.manager.onTouchStart(a)},this.onTouchMove=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchMove(a),e.capture&&a.cancelable&&a.preventDefault())},this.onTouchEnd=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchEnd(a),e.capture&&a.cancelable&&a.target===t&&a.preventDefault())},this.onTouchEndWindow=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&a.target!==t&&e.manager.onTouchEnd(a)},this.onTouchCancel=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchCancel(a),e.capture&&a.preventDefault())},this.onTouchCancelWindow=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.onTouchCancel(a)},this.onTouchOver=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOver(a)},this.onTouchOut=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOut(a)};var r=this.target;if(!!r){var s={passive:!0},n={passive:!1};r.addEventListener("touchstart",this.onTouchStart,this.capture?n:s),r.addEventListener("touchmove",this.onTouchMove,this.capture?n:s),r.addEventListener("touchend",this.onTouchEnd,this.capture?n:s),r.addEventListener("touchcancel",this.onTouchCancel,this.capture?n:s),r.addEventListener("touchover",this.onTouchOver,this.capture?n:s),r.addEventListener("touchout",this.onTouchOut,this.capture?n:s),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,n),window.addEventListener("touchend",this.onTouchEndWindow,n),window.addEventListener("touchcancel",this.onTouchCancelWindow,n)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchmove",this.onTouchMove),e.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("touchcancel",this.onTouchCancel),e.removeEventListener("touchover",this.onTouchOver),e.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});bN.exports=D0e});var Mp=l((h8e,LN)=>{var I0e=C(),rs=Lu(),N0e=ue(),mh=ji(),Iu=Xe(),G0e=Rp(),B0e=qp(),PN=bp(),U0e=Pp(),MN=Tt(),k0e=Lo(),z0e=new I0e({initialize:function(t,i){this.game=t,this.scaleManager,this.canvas,this.config=i,this.enabled=!0,this.events=new N0e,this.isOver=!0,this.defaultCursor="",this.keyboard=i.inputKeyboard?new G0e(this):null,this.mouse=i.inputMouse?new B0e(this):null,this.touch=i.inputTouch?new U0e(this):null,this.pointers=[],this.pointersTotal=i.inputActivePointers,i.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var r=0;r<=this.pointersTotal;r++){var s=new PN(this,r);s.smoothFactor=i.inputSmoothFactor,this.pointers.push(s)}this.mousePointer=i.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new MN,this._tempMatrix2=new MN,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(Iu.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(mh.MANAGER_BOOT),this.game.events.on(Iu.PRE_RENDER,this.preRender,this),this.game.events.once(Iu.DESTROY,this.destroy,this)},setCanvasOver:function(e){this.isOver=!0,this.events.emit(mh.GAME_OVER,e)},setCanvasOut:function(e){this.isOver=!1,this.events.emit(mh.GAME_OUT,e)},preRender:function(){var e=this.game.loop.now,t=this.game.loop.delta,i=this.game.scene.getScenes(!0,!0);this.time=e,this.events.emit(mh.MANAGER_UPDATE);for(var r=0;r<i.length;r++){var s=i[r];if(s.sys.input&&s.sys.input.updatePoll(e,t)&&this.globalTopOnly)return}},setDefaultCursor:function(e){this.defaultCursor=e,this.canvas.style.cursor!==e&&(this.canvas.style.cursor=e)},setCursor:function(e){e.cursor&&(this.canvas.style.cursor=e.cursor)},resetCursor:function(e){e.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(e){e===void 0&&(e=1);var t=[];this.pointersTotal+e>10&&(e=10-this.pointersTotal);for(var i=0;i<e;i++){var r=this.pointers.length,s=new PN(this,r);s.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(s),this.pointersTotal++,t.push(s)}return t},updateInputPlugins:function(e,t){var i=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var r=0;r<i.length;r++){var s=i[r];if(s.sys.input){var n=s.sys.input.update(e,t);if(n&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],n=1;n<this.pointersTotal;n++){var a=t[n];if(!a.active){a.touchstart(s,e),this.activePointer=a,i.push(a);break}}this.updateInputPlugins(rs.TOUCH_START,i)},onTouchMove:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],n=1;n<this.pointersTotal;n++){var a=t[n];if(a.active&&a.identifier===s.identifier){a.touchmove(s,e),this.activePointer=a,i.push(a);break}}this.updateInputPlugins(rs.TOUCH_MOVE,i)},onTouchEnd:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],n=1;n<this.pointersTotal;n++){var a=t[n];if(a.active&&a.identifier===s.identifier){a.touchend(s,e),i.push(a);break}}this.updateInputPlugins(rs.TOUCH_END,i)},onTouchCancel:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],n=1;n<this.pointersTotal;n++){var a=t[n];if(a.active&&a.identifier===s.identifier){a.touchcancel(s,e),i.push(a);break}}this.updateInputPlugins(rs.TOUCH_CANCEL,i)},onMouseDown:function(e){var t=this.mousePointer;t.down(e),t.updateMotion(),this.activePointer=t,this.updateInputPlugins(rs.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(e){var t=this.mousePointer;t.move(e),t.updateMotion(),this.activePointer=t,this.updateInputPlugins(rs.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(e){var t=this.mousePointer;t.up(e),t.updateMotion(),this.activePointer=t,this.updateInputPlugins(rs.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(e){var t=this.mousePointer;t.wheel(e),this.activePointer=t,this.updateInputPlugins(rs.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(e){var t=this.mouse.locked;this.mousePointer.locked=t,this.events.emit(mh.POINTERLOCK_CHANGE,e,t)},inputCandidate:function(e,t){var i=e.input;if(!i||!i.enabled||!i.alwaysEnabled&&!e.willRender(t))return!1;var r=!0,s=e.parentContainer;if(s)do{if(!s.willRender(t)){r=!1;break}s=s.parentContainer}while(s);return r},hitTest:function(e,t,i,r){r===void 0&&(r=this._tempHitTest);var s=this._tempPoint,n=i.scrollX,a=i.scrollY;r.length=0;var h=e.x,o=e.y;i.getWorldPoint(h,o,s),e.worldX=s.x,e.worldY=s.y;for(var u={x:0,y:0},f=this._tempMatrix,d=this._tempMatrix2,v=0;v<t.length;v++){var c=t[v];if(!!this.inputCandidate(c,i)){var p=s.x+n*c.scrollFactorX-n,m=s.y+a*c.scrollFactorY-a;c.parentContainer?(c.getWorldTransformMatrix(f,d),f.applyInverse(p,m,u)):k0e(p,m,c.x,c.y,c.rotation,c.scaleX,c.scaleY,u),this.pointWithinHitArea(c,u.x,u.y)&&r.push(c)}}return r},pointWithinHitArea:function(e,t,i){t+=e.displayOriginX,i+=e.displayOriginY;var r=e.input;return r&&r.hitAreaCallback(r.hitArea,t,i,e)?(r.localX=t,r.localY=i,!0):!1},pointWithinInteractiveObject:function(e,t,i){return e.hitArea?(t+=e.gameObject.displayOriginX,i+=e.gameObject.displayOriginY,e.localX=t,e.localY=i,e.hitAreaCallback(e.hitArea,t,i,e)):!1},transformPointer:function(e,t,i,r){var s=e.position,n=e.prevPosition;n.x=s.x,n.y=s.y;var a=this.scaleManager.transformX(t),h=this.scaleManager.transformY(i),o=e.smoothFactor;!r||o===0?(s.x=a,s.y=h):(s.x=a*o+n.x*(1-o),s.y=h*o+n.y*(1-o))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(Iu.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var e=0;e<this.pointers.length;e++)this.pointers[e].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});LN.exports=z0e});var se=l((o8e,ON)=>{var Nu={},Y0e={install:function(e){for(var t in Nu)e[t]=Nu[t]},register:function(e,t){Nu[e]=t},destroy:function(){Nu={}}};ON.exports=Y0e});var Pe=l((u8e,FN)=>{var X0e=C(),V0e=ct(),Xn=Ge(),ss=new X0e({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(Xn.BOOT,this.boot,this),this.events.on(Xn.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(Xn.DESTROY,this.destroy,this)},start:function(){this.events.once(Xn.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(Xn.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(Xn.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});ss.register=function(e,t){ss.prototype.hasOwnProperty(e)||(ss.prototype[e]=t)};ss.remove=function(e){ss.prototype.hasOwnProperty(e)&&delete ss.prototype[e]};V0e.register("GameObjectCreator",ss,"make");FN.exports=ss});var ie=l((l8e,DN)=>{var W0e=C(),H0e=ct(),Vn=Ge(),ns=new W0e({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(Vn.BOOT,this.boot,this),this.events.on(Vn.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(Vn.DESTROY,this.destroy,this)},start:function(){this.events.once(Vn.SHUTDOWN,this.shutdown,this)},existing:function(e){return(e.renderCanvas||e.renderWebGL)&&this.displayList.add(e),e.preUpdate&&this.updateList.add(e),e},shutdown:function(){this.events.off(Vn.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(Vn.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});ns.register=function(e,t){ns.prototype.hasOwnProperty(e)||(ns.prototype[e]=t)};ns.remove=function(e){ns.prototype.hasOwnProperty(e)&&delete ns.prototype[e]};H0e.register("GameObjectFactory",ns,"add");DN.exports=ns});var Lp=l((f8e,kN)=>{var K0e=C(),IN=Xe(),NN=ue(),Z0e=se(),GN=Pe(),BN=ie(),as=z(),ii=ct(),UN=tn(),J0e=new K0e({Extends:NN,initialize:function(t){NN.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(IN.BOOT,this.boot,this)},boot:function(){var e,t,i,r,s,n,a,h=this.game.config,o=h.installGlobalPlugins;for(o=o.concat(this._pendingGlobal),e=0;e<o.length;e++)t=o[e],i=as(t,"key",null),r=as(t,"plugin",null),s=as(t,"start",!1),n=as(t,"mapping",null),a=as(t,"data",null),i&&(r?this.install(i,r,s,n,a):console.warn("Missing `plugin` for key: "+i));for(o=h.installScenePlugins,o=o.concat(this._pendingScene),e=0;e<o.length;e++)t=o[e],i=as(t,"key",null),r=as(t,"plugin",null),n=as(t,"mapping",null),i&&(r?this.installScenePlugin(i,r,n):console.warn("Missing `plugin` for key: "+i));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(IN.DESTROY,this.destroy,this)},addToScene:function(e,t,i){var r,s,n,a=this.game,h=e.scene,o=e.settings.map,u=e.settings.isBooted;for(r=0;r<t.length;r++)s=t[r],a[s]?(e[s]=a[s],o.hasOwnProperty(s)&&(h[o[s]]=e[s])):s==="game"&&o.hasOwnProperty(s)&&(h[o[s]]=a);for(var f=0;f<i.length;f++)for(n=i[f],r=0;r<n.length;r++)if(s=n[r],!!ii.hasCore(s)){var d=ii.getCore(s),v=d.mapping,c=new d.plugin(h,this,v);e[v]=c,d.custom?h[v]=c:o.hasOwnProperty(v)&&(h[o[v]]=c),u&&c.boot()}for(n=this.plugins,r=0;r<n.length;r++){var p=n[r];p.mapping&&(h[p.mapping]=p.plugin)}},getDefaultScenePlugins:function(){var e=this.game.config.defaultPlugins;return e=e.concat(this.scenePlugins),e},installScenePlugin:function(e,t,i,r,s){if(s===void 0&&(s=!1),typeof t!="function"){console.warn("Invalid Scene Plugin: "+e);return}if(!ii.hasCore(e))ii.register(e,t,i,!0),this.scenePlugins.push(e);else if(!s&&ii.hasCore(e)){console.warn("Scene Plugin key in use: "+e);return}if(r){var n=new t(r,this,e);r.sys[e]=n,i&&i!==""&&(r[i]=n),n.boot()}},install:function(e,t,i,r,s){if(i===void 0&&(i=!1),r===void 0&&(r=null),s===void 0&&(s=null),typeof t!="function")return console.warn("Invalid Plugin: "+e),null;if(ii.hasCustom(e))return console.warn("Plugin key in use: "+e),null;if(r!==null&&(i=!0),!this.game.isBooted)this._pendingGlobal.push({key:e,plugin:t,start:i,mapping:r,data:s});else if(ii.registerCustom(e,t,r,s),i)return this.start(e);return null},getIndex:function(e){for(var t=this.plugins,i=0;i<t.length;i++){var r=t[i];if(r.key===e)return i}return-1},getEntry:function(e){var t=this.getIndex(e);if(t!==-1)return this.plugins[t]},isActive:function(e){var t=this.getEntry(e);return t&&t.active},start:function(e,t){t===void 0&&(t=e);var i=this.getEntry(t);return i&&!i.active?(i.active=!0,i.plugin.start()):i||(i=this.createEntry(e,t)),i?i.plugin:null},createEntry:function(e,t){var i=ii.getCustom(e);if(i){var r=new i.plugin(this);i={key:t,plugin:r,active:!0,mapping:i.mapping,data:i.data},this.plugins.push(i),r.init(i.data),r.start()}return i},stop:function(e){var t=this.getEntry(e);return t&&t.active&&(t.active=!1,t.plugin.stop()),this},get:function(e,t){t===void 0&&(t=!0);var i=this.getEntry(e);if(i)return i.plugin;var r=this.getClass(e);return r&&t?(i=this.createEntry(e,e),i?i.plugin:null):r||null},getClass:function(e){return ii.getCustomClass(e)},removeGlobalPlugin:function(e){var t=this.getEntry(e);t&&UN(this.plugins,t),ii.removeCustom(e)},removeScenePlugin:function(e){UN(this.scenePlugins,e),ii.remove(e)},registerGameObject:function(e,t,i){return t&&BN.register(e,t),i&&GN.register(e,i),this},removeGameObject:function(e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=!0),t&&BN.remove(e),i&&GN.remove(e),this},registerFileType:function(e,t,i){Z0e.register(e,t),i&&i.sys.load&&(i.sys.load[e]=t)},destroy:function(){for(var e=0;e<this.plugins.length;e++)this.plugins[e].plugin.destroy();ii.destroyCustomPlugins(),this.game.noReturn&&ii.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});kN.exports=J0e});var Op=l((d8e,zN)=>{var Wn=Le(),Q0e=C(),er=rh(),$0e=xe(),Oi=new Q0e({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=t),r===void 0&&(r=0),s===void 0&&(s=null),this._width=t,this._height=i,this._parent=s,this.aspectMode=r,this.aspectRatio=i===0?1:t/i,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new $0e},setAspectMode:function(e){return e===void 0&&(e=0),this.aspectMode=e,this.setSize(this._width,this._height)},setSnap:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.snapTo.set(e,t),this.setSize(this._width,this._height)},setParent:function(e){return this._parent=e,this.setSize(this._width,this._height)},setMin:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.minWidth=Wn(e,0,this.maxWidth),this.minHeight=Wn(t,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(e,t){return e===void 0&&(e=Number.MAX_VALUE),t===void 0&&(t=e),this.maxWidth=Wn(e,this.minWidth,Number.MAX_VALUE),this.maxHeight=Wn(t,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(e,t){switch(e===void 0&&(e=0),t===void 0&&(t=e),this.aspectMode){case Oi.NONE:this._width=this.getNewWidth(er(e,this.snapTo.x)),this._height=this.getNewHeight(er(t,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case Oi.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(er(e,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case Oi.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(er(t,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case Oi.FIT:this.constrain(e,t,!0);break;case Oi.ENVELOP:this.constrain(e,t,!1);break}return this},setAspectRatio:function(e){return this.aspectRatio=e,this.setSize(this._width,this._height)},resize:function(e,t){return this._width=this.getNewWidth(er(e,this.snapTo.x)),this._height=this.getNewHeight(er(t,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(e,t){return t===void 0&&(t=!0),e=Wn(e,this.minWidth,this.maxWidth),t&&this._parent&&e>this._parent.width&&(e=Math.max(this.minWidth,this._parent.width)),e},getNewHeight:function(e,t){return t===void 0&&(t=!0),e=Wn(e,this.minHeight,this.maxHeight),t&&this._parent&&e>this._parent.height&&(e=Math.max(this.minHeight,this._parent.height)),e},constrain:function(e,t,i){e===void 0&&(e=0),t===void 0&&(t=e),i===void 0&&(i=!0),e=this.getNewWidth(e),t=this.getNewHeight(t);var r=this.snapTo,s=t===0?1:e/t;return i&&this.aspectRatio>s||!i&&this.aspectRatio<s?(e=er(e,r.x),t=e/this.aspectRatio,r.y>0&&(t=er(t,r.y),e=t*this.aspectRatio)):(i&&this.aspectRatio<s||!i&&this.aspectRatio>s)&&(t=er(t,r.y),e=t*this.aspectRatio,r.x>0&&(e=er(e,r.x),t=e*(1/this.aspectRatio))),this._width=e,this._height=t,this},fitTo:function(e,t){return this.constrain(e,t,!0)},envelop:function(e,t){return this.constrain(e,t,!1)},setWidth:function(e){return this.setSize(e,this._height)},setHeight:function(e){return this.setSize(this._width,e)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(e){e&&e.style&&(e.style.width=this._width+"px",e.style.height=this._height+"px")},copy:function(e){return e.setAspectMode(this.aspectMode),e.aspectRatio=this.aspectRatio,e.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(e){this.setSize(e,this._height)}},height:{get:function(){return this._height},set:function(e){this.setSize(this._width,e)}}});Oi.NONE=0;Oi.WIDTH_CONTROLS_HEIGHT=1;Oi.HEIGHT_CONTROLS_WIDTH=2;Oi.FIT=3;Oi.ENVELOP=4;zN.exports=Oi});var Fp=l((v8e,KN)=>{var Yt=qu(),j0e=C(),YN=ue(),sn=Mn(),Gu=Xe(),exe=vp(),XN=yp(),VN=xp(),Bu=B(),WN=Ae(),Uu=Op(),HN=rh(),txe=xe(),ixe=new j0e({Extends:YN,initialize:function(t){YN.call(this),this.game=t,this.canvas,this.canvasBounds=new WN,this.parent=null,this.parentIsWindow=!1,this.parentSize=new Uu,this.gameSize=new Uu,this.baseSize=new Uu,this.displaySize=new Uu,this.scaleMode=Yt.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new txe(1,1),this.autoRound=!1,this.autoCenter=Yt.CENTER.NO_CENTER,this.orientation=Yt.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:Bu,windowResize:Bu,fullScreenChange:Bu,fullScreenError:Bu}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(Gu.BOOT,this.boot,this)},boot:function(){var e=this.game;this.canvas=e.canvas,this.fullscreen=e.device.fullscreen,this.scaleMode!==Yt.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===Yt.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),e.events.on(Gu.PRE_STEP,this.step,this),e.events.once(Gu.READY,this.refresh,this),e.events.once(Gu.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(e){this.getParent(e),this.getParentBounds();var t=e.width,i=e.height,r=e.scaleMode,s=e.zoom,n=e.autoRound;if(typeof t=="string"){var a=this.parentSize.width;a===0&&(a=window.innerWidth);var h=parseInt(t,10)/100;t=Math.floor(a*h)}if(typeof i=="string"){var o=this.parentSize.height;o===0&&(o=window.innerHeight);var u=parseInt(i,10)/100;i=Math.floor(o*u)}this.scaleMode=r,this.autoRound=n,this.autoCenter=e.autoCenter,this.resizeInterval=e.resizeInterval,n&&(t=Math.floor(t),i=Math.floor(i)),this.gameSize.setSize(t,i),s===Yt.ZOOM.MAX_ZOOM&&(s=this.getMaxZoom()),this.zoom=s,s!==1&&(this._resetZoom=!0),this.baseSize.setSize(t,i),n&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),e.minWidth>0&&this.displaySize.setMin(e.minWidth*s,e.minHeight*s),e.maxWidth>0&&this.displaySize.setMax(e.maxWidth*s,e.maxHeight*s),this.displaySize.setSize(t,i),this.orientation=VN(t,i)},getParent:function(e){var t=e.parent;if(t!==null){if(this.parent=XN(t),this.parentIsWindow=this.parent===document.body,e.expandParent&&e.scaleMode!==Yt.SCALE_MODE.NONE){var i=this.parent.getBoundingClientRect();(this.parentIsWindow||i.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",i=this.parent.getBoundingClientRect(),!this.parentIsWindow&&i.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}e.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=XN(e.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var e=this.parentSize,t=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(t.height=exe(!0));var i=t.width,r=t.height;return e.width!==i||e.height!==r?(e.setSize(i,r),!0):!1},lockOrientation:function(e){var t=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return t?t.call(screen,e):!1},setParentSize:function(e,t){return this.parentSize.setSize(e,t),this.refresh()},setGameSize:function(e,t){var i=this.autoRound;i&&(e=Math.floor(e),t=Math.floor(t));var r=this.width,s=this.height;return this.gameSize.resize(e,t),this.baseSize.resize(e,t),i&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(e/t),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(r,s)},resize:function(e,t){var i=this.zoom,r=this.autoRound;r&&(e=Math.floor(e),t=Math.floor(t));var s=this.width,n=this.height;this.gameSize.resize(e,t),this.baseSize.resize(e,t),r&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(e*i,t*i),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var a=this.canvas.style,h=e*i,o=t*i;return r&&(h=Math.floor(h),o=Math.floor(o)),(h!==e||o!==t)&&(a.width=h+"px",a.height=o+"px"),this.refresh(s,n)},setZoom:function(e){return this.zoom=e,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(e,t){e===void 0&&(e=this.width),t===void 0&&(t=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var i=this.game.domContainer;if(i){this.baseSize.setCSS(i);var r=this.canvas.style,s=i.style;s.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",s.marginLeft=r.marginLeft,s.marginTop=r.marginTop}return this.emit(sn.RESIZE,this.gameSize,this.baseSize,this.displaySize,e,t),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var e=VN(this.width,this.height);e!==this.orientation&&(this.orientation=e,this.emit(sn.ORIENTATION_CHANGE,e))}},updateScale:function(){var e=this.canvas.style,t=this.gameSize.width,i=this.gameSize.height,r,s,n=this.zoom,a=this.autoRound;this.scaleMode===Yt.SCALE_MODE.NONE?(this.displaySize.setSize(t*n,i*n),r=this.displaySize.width,s=this.displaySize.height,a&&(r=Math.floor(r),s=Math.floor(s)),this._resetZoom&&(e.width=r+"px",e.height=s+"px",this._resetZoom=!1)):this.scaleMode===Yt.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),r=this.displaySize.width,s=this.displaySize.height,a&&(r=Math.floor(r),s=Math.floor(s)),this.canvas.width=r,this.canvas.height=s):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),r=this.displaySize.width,s=this.displaySize.height,a&&(r=Math.floor(r),s=Math.floor(s)),e.width=r+"px",e.height=s+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var e=HN(this.parentSize.width,this.gameSize.width,0,!0),t=HN(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(e,t),1)},updateCenter:function(){var e=this.autoCenter;if(e!==Yt.CENTER.NO_CENTER){var t=this.canvas,i=t.style,r=t.getBoundingClientRect(),s=r.width,n=r.height,a=Math.floor((this.parentSize.width-s)/2),h=Math.floor((this.parentSize.height-n)/2);e===Yt.CENTER.CENTER_HORIZONTALLY?h=0:e===Yt.CENTER.CENTER_VERTICALLY&&(a=0),i.marginLeft=a+"px",i.marginTop=h+"px"}},updateBounds:function(){var e=this.canvasBounds,t=this.canvas.getBoundingClientRect();e.x=t.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),e.y=t.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),e.width=t.width,e.height=t.height},transformX:function(e){return(e-this.canvasBounds.left)*this.displayScale.x},transformY:function(e){return(e-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(e){e===void 0&&(e={navigationUI:"hide"});var t=this.fullscreen;if(!t.available){this.emit(sn.FULLSCREEN_UNSUPPORTED);return}if(!t.active){var i=this.getFullscreenTarget();t.keyboard?i[t.request](Element.ALLOW_KEYBOARD_INPUT):i[t.request](e)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(sn.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(e){this.removeFullscreenTarget(),this.emit(sn.FULLSCREEN_FAILED,e)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var e=document.createElement("div");e.style.margin="0",e.style.padding="0",e.style.width="100%",e.style.height="100%",this.fullscreenTarget=e,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var t=this.canvas.parentNode;t.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var e=this.fullscreenTarget;if(e&&e.parentNode){var t=e.parentNode;t.insertBefore(this.canvas,e),t.removeChild(e)}}},stopFullscreen:function(){var e=this.fullscreen;if(!e.available)return this.emit(sn.FULLSCREEN_UNSUPPORTED),!1;e.active&&document[e.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(sn.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(e){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(e)},startListeners:function(){var e=this,t=this.listeners;if(t.orientationChange=function(){e.updateBounds(),e._checkOrientation=!0,e.dirty=!0},t.windowResize=function(){e.updateBounds(),e.dirty=!0},window.addEventListener("orientationchange",t.orientationChange,!1),window.addEventListener("resize",t.windowResize,!1),this.fullscreen.available){t.fullScreenChange=function(r){return e.onFullScreenChange(r)},t.fullScreenError=function(r){return e.onFullScreenError(r)};var i=["webkit","moz",""];i.forEach(function(r){document.addEventListener(r+"fullscreenchange",t.fullScreenChange,!1),document.addEventListener(r+"fullscreenerror",t.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.addEventListener("MSFullscreenError",t.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(e){e===void 0&&(e=new WN);var t=this.baseSize,i=this.parentSize,r=this.canvasBounds,s=this.displayScale,n=r.x>=0?0:-(r.x*s.x),a=r.y>=0?0:-(r.y*s.y),h;i.width>=r.width?h=t.width:h=t.width-(r.width-i.width)*s.x;var o;return i.height>=r.height?o=t.height:o=t.height-(r.height-i.height)*s.y,e.setTo(n,a,h,o),e},step:function(e,t){!this.parent||(this._lastCheck+=t,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var e=this.listeners;window.removeEventListener("orientationchange",e.orientationChange,!1),window.removeEventListener("resize",e.windowResize,!1);var t=["webkit","moz",""];t.forEach(function(i){document.removeEventListener(i+"fullscreenchange",e.fullScreenChange,!1),document.removeEventListener(i+"fullscreenerror",e.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",e.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===Yt.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===Yt.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});KN.exports=ixe});var gh=l((c8e,ZN)=>{var rxe={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};ZN.exports=rxe});var QN=l((p8e,JN)=>{JN.exports="addfile"});var jN=l((m8e,$N)=>{$N.exports="complete"});var tG=l((g8e,eG)=>{eG.exports="filecomplete"});var rG=l((x8e,iG)=>{iG.exports="filecomplete-"});var nG=l((y8e,sG)=>{sG.exports="loaderror"});var hG=l((T8e,aG)=>{aG.exports="load"});var uG=l((E8e,oG)=>{oG.exports="fileprogress"});var fG=l((S8e,lG)=>{lG.exports="postprocess"});var vG=l((_8e,dG)=>{dG.exports="progress"});var pG=l((w8e,cG)=>{cG.exports="start"});var nn=l((C8e,mG)=>{mG.exports={ADD:QN(),COMPLETE:jN(),FILE_COMPLETE:tG(),FILE_KEY_COMPLETE:rG(),FILE_LOAD_ERROR:nG(),FILE_LOAD:hG(),FILE_PROGRESS:uG(),POST_PROCESS:fG(),PROGRESS:vG(),START:pG()}});var ku=l((R8e,gG)=>{var sxe=function(e){return e&&e[0].toUpperCase()+e.slice(1)};gG.exports=sxe});var Dp=l((q8e,yG)=>{var nxe=z(),xG=ku(),axe=function(e){var t=e.game.config.defaultPhysicsSystem,i=nxe(e.settings,"physics",!1);if(!(!t&&!i)){var r=[];if(t&&r.push(xG(t+"Physics")),i)for(var s in i)s=xG(s.concat("Physics")),r.indexOf(s)===-1&&r.push(s);return r}};yG.exports=axe});var Ip=l((A8e,TG)=>{var hxe=z(),oxe=function(e){var t=e.plugins.getDefaultScenePlugins(),i=hxe(e.settings,"plugins",!1);return Array.isArray(i)?i:t||[]};TG.exports=oxe});var hs=l((b8e,EG)=>{var uxe=function(e){var t={};for(var i in e)Array.isArray(e[i])?t[i]=e[i].slice(0):t[i]=e[i];return t};EG.exports=uxe});var Np=l((P8e,SG)=>{var lxe=hs(),fxe=function(e,t){var i=lxe(e);for(var r in t)i.hasOwnProperty(r)||(i[r]=t[r]);return i};SG.exports=fxe});var wG=l((M8e,_G)=>{var Gp={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};Gp.cameras3d="cameras3d";Gp.facebook="facebook";_G.exports=Gp});var Bp=l((L8e,CG)=>{var dxe=gh(),Fi=he(),vxe=Np(),cxe=wG(),pxe={create:function(e){return typeof e=="string"?e={key:e}:e===void 0&&(e={}),{status:dxe.PENDING,key:Fi(e,"key",""),active:Fi(e,"active",!1),visible:Fi(e,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:Fi(e,"pack",!1),cameras:Fi(e,"cameras",null),map:Fi(e,"map",vxe(cxe,Fi(e,"mapAdd",{}))),physics:Fi(e,"physics",{}),loader:Fi(e,"loader",{}),plugins:Fi(e,"plugins",!1),input:Fi(e,"input",{})}}};CG.exports=pxe});var zu=l((O8e,AG)=>{var mxe=C(),Di=gh(),RG=lu(),je=Ge(),gxe=Dp(),xxe=Ip(),yxe=Qt(),qG=B(),Txe=Bp(),Exe=new mxe({initialize:function(t,i){this.scene=t,this.game,this.renderer,this.facebook,this.config=i,this.settings=Txe.create(i),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=qG},init:function(e){this.settings.status=Di.INIT,this.sceneUpdate=qG,this.game=e,this.renderer=e.renderer,this.canvas=e.canvas,this.context=e.context;var t=e.plugins;this.plugins=t,t.addToScene(this,RG.Global,[RG.CoreScene,xxe(this),gxe(this)]),this.events.emit(je.BOOT,this),this.settings.isBooted=!0},step:function(e,t){var i=this.events;i.emit(je.PRE_UPDATE,e,t),i.emit(je.UPDATE,e,t),this.sceneUpdate.call(this.scene,e,t),i.emit(je.POST_UPDATE,e,t)},render:function(e){var t=this.displayList;t.depthSort(),this.events.emit(je.PRE_RENDER,e),this.cameras.render(e,t),this.events.emit(je.RENDER,e)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(e){var t=this.events,i=this.settings;return this.settings.active&&(i.status=Di.PAUSED,i.active=!1,t.emit(je.PAUSE,this,e)),this},resume:function(e){var t=this.events,i=this.settings;return this.settings.active||(i.status=Di.RUNNING,i.active=!0,t.emit(je.RESUME,this,e)),this},sleep:function(e){var t=this.events,i=this.settings;return i.status=Di.SLEEPING,i.active=!1,i.visible=!1,t.emit(je.SLEEP,this,e),this},wake:function(e){var t=this.events,i=this.settings;return i.status=Di.RUNNING,i.active=!0,i.visible=!0,t.emit(je.WAKE,this,e),i.isTransition&&t.emit(je.TRANSITION_WAKE,i.transitionFrom,i.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===Di.SLEEPING},isActive:function(){return this.settings.status===Di.RUNNING},isPaused:function(){return this.settings.status===Di.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(e){return this.settings.visible=e,this},setActive:function(e,t){return e?this.resume(t):this.pause(t)},start:function(e){var t=this.events,i=this.settings;e&&(i.data=e),i.status=Di.START,i.active=!0,i.visible=!0,t.emit(je.START,this),t.emit(je.READY,this,e)},shutdown:function(e){var t=this.events,i=this.settings;t.off(je.TRANSITION_INIT),t.off(je.TRANSITION_START),t.off(je.TRANSITION_COMPLETE),t.off(je.TRANSITION_OUT),i.status=Di.SHUTDOWN,i.active=!1,i.visible=!1,this.renderer===yxe.WEBGL&&this.renderer.resetTextures(!0),t.emit(je.SHUTDOWN,this,e)},destroy:function(){var e=this.events,t=this.settings;t.status=Di.DESTROYED,t.active=!1,t.visible=!1,e.emit(je.DESTROY,this),e.removeAllListeners();for(var i=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],r=0;r<i.length;r++)this[i[r]]=null}});AG.exports=Exe});var Up=l((F8e,bG)=>{var Sxe=C(),_xe=zu(),wxe=new Sxe({initialize:function(t){this.sys=new _xe(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.facebook,this.scale,this.plugins,this.renderer},update:function(){}});bG.exports=wxe});var zp=l((D8e,MG)=>{var Cxe=C(),gi=gh(),kp=Ge(),Rxe=Xe(),qxe=he(),PG=nn(),Yu=B(),xh=Up(),Axe=zu(),bxe=new Cxe({initialize:function(t,i){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)this._pending.push({key:"default",scene:i[r],autoStart:r===0,data:{}})}t.events.once(Rxe.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var e,t,i,r;for(e=0;e<this._pending.length;e++){t=this._pending[e],i=t.key,r=t.scene;var s;r instanceof xh?s=this.createSceneFromInstance(i,r):typeof r=="object"?s=this.createSceneFromObject(i,r):typeof r=="function"&&(s=this.createSceneFromFunction(i,r)),i=s.sys.settings.key,this.keys[i]=s,this.scenes.push(s),this._data[i]&&(s.sys.settings.data=this._data[i].data,this._data[i].autoStart&&(t.autoStart=!0)),(t.autoStart||s.sys.settings.active)&&this._start.push(i)}for(this._pending.length=0,this._data={},this.isBooted=!0,e=0;e<this._start.length;e++)t=this._start[e],this.start(t);this._start.length=0}},processQueue:function(){var e=this._pending.length,t=this._queue.length;if(!(e===0&&t===0)){var i,r;if(e){for(i=0;i<e;i++)r=this._pending[i],this.add(r.key,r.scene,r.autoStart,r.data);for(i=0;i<this._start.length;i++)r=this._start[i],this.start(r);this._start.length=0,this._pending.length=0;return}for(i=0;i<this._queue.length;i++)r=this._queue[i],this[r.op](r.keyA,r.keyB);this._queue.length=0}},add:function(e,t,i,r){if(i===void 0&&(i=!1),r===void 0&&(r={}),this.isProcessing||!this.isBooted)return this._pending.push({key:e,scene:t,autoStart:i,data:r}),this.isBooted||(this._data[e]={data:r}),null;e=this.getKey(e,t);var s;return t instanceof xh?s=this.createSceneFromInstance(e,t):typeof t=="object"?(t.key=e,s=this.createSceneFromObject(e,t)):typeof t=="function"&&(s=this.createSceneFromFunction(e,t)),s.sys.settings.data=r,e=s.sys.settings.key,this.keys[e]=s,this.scenes.push(s),(i||s.sys.settings.active)&&(this._pending.length?this._start.push(e):this.start(e)),s},remove:function(e){if(this.isProcessing)this._queue.push({op:"remove",keyA:e,keyB:null});else{var t=this.getScene(e);if(!t||t.sys.isTransitioning())return this;var i=this.scenes.indexOf(t),r=t.sys.settings.key;i>-1&&(delete this.keys[r],this.scenes.splice(i,1),this._start.indexOf(r)>-1&&(i=this._start.indexOf(r),this._start.splice(i,1)),t.sys.destroy())}return this},bootScene:function(e){var t=e.sys,i=t.settings;t.sceneUpdate=Yu,e.init&&(e.init.call(e,i.data),i.status=gi.INIT,i.isTransition&&t.events.emit(kp.TRANSITION_INIT,i.transitionFrom,i.transitionDuration));var r;t.load&&(r=t.load,r.reset()),r&&e.preload?(e.preload.call(e),r.list.size===0?this.create(e):(i.status=gi.LOADING,r.once(PG.COMPLETE,this.loadComplete,this),r.start())):this.create(e)},loadComplete:function(e){this.create(e.scene)},payloadComplete:function(e){this.bootScene(e.scene)},update:function(e,t){this.processQueue(),this.isProcessing=!0;for(var i=this.scenes.length-1;i>=0;i--){var r=this.scenes[i].sys;r.settings.status>gi.START&&r.settings.status<=gi.RUNNING&&r.step(e,t)}},render:function(e){for(var t=0;t<this.scenes.length;t++){var i=this.scenes[t].sys;i.settings.visible&&i.settings.status>=gi.LOADING&&i.settings.status<gi.SLEEPING&&i.render(e)}this.isProcessing=!1},create:function(e){var t=e.sys,i=t.settings;e.create&&(i.status=gi.CREATING,e.create.call(e,i.data),i.status===gi.DESTROYED)||(i.isTransition&&t.events.emit(kp.TRANSITION_START,i.transitionFrom,i.transitionDuration),e.update&&(t.sceneUpdate=e.update),i.status=gi.RUNNING,t.events.emit(kp.CREATE,e))},createSceneFromFunction:function(e,t){var i=new t;if(i instanceof xh){var r=i.sys.settings.key;if(r!==""&&(e=r),this.keys.hasOwnProperty(e))throw new Error("Cannot add a Scene with duplicate key: "+e);return this.createSceneFromInstance(e,i)}else return i.sys=new Axe(i),i.sys.settings.key=e,i.sys.init(this.game),i},createSceneFromInstance:function(e,t){var i=t.sys.settings.key;return i===""&&(t.sys.settings.key=e),t.sys.init(this.game),t},createSceneFromObject:function(e,t){var i=new xh(t),r=i.sys.settings.key;r!==""?e=r:i.sys.settings.key=e,i.sys.init(this.game);for(var s=["init","preload","create","update","render"],n=0;n<s.length;n++){var a=qxe(t,s[n],null);a&&(i[s[n]]=a)}if(t.hasOwnProperty("extend")){for(var h in t.extend)if(!!t.extend.hasOwnProperty(h)){var o=t.extend[h];h==="data"&&i.hasOwnProperty("data")&&typeof o=="object"?i.data.merge(o):h!=="sys"&&(i[h]=o)}}return i},getKey:function(e,t){if(e||(e="default"),typeof t=="function")return e;if(t instanceof xh?e=t.sys.settings.key:typeof t=="object"&&t.hasOwnProperty("key")&&(e=t.key),this.keys.hasOwnProperty(e))throw new Error("Cannot add a Scene with duplicate key: "+e);return e},getScenes:function(e,t){e===void 0&&(e=!0),t===void 0&&(t=!1);for(var i=[],r=this.scenes,s=0;s<r.length;s++){var n=r[s];n&&(!e||e&&n.sys.isActive())&&i.push(n)}return t?i.reverse():i},getScene:function(e){if(typeof e=="string"){if(this.keys[e])return this.keys[e]}else for(var t=0;t<this.scenes.length;t++)if(e===this.scenes[t])return e;return null},isActive:function(e){var t=this.getScene(e);return t?t.sys.isActive():null},isPaused:function(e){var t=this.getScene(e);return t?t.sys.isPaused():null},isVisible:function(e){var t=this.getScene(e);return t?t.sys.isVisible():null},isSleeping:function(e){var t=this.getScene(e);return t?t.sys.isSleeping():null},pause:function(e,t){var i=this.getScene(e);return i&&i.sys.pause(t),this},resume:function(e,t){var i=this.getScene(e);return i&&i.sys.resume(t),this},sleep:function(e,t){var i=this.getScene(e);return i&&!i.sys.isTransitioning()&&i.sys.sleep(t),this},wake:function(e,t){var i=this.getScene(e);return i&&i.sys.wake(t),this},run:function(e,t){var i=this.getScene(e);if(!i){for(var r=0;r<this._pending.length;r++)if(this._pending[r].key===e){this.queueOp("start",e,t);break}return this}i.sys.isSleeping()?i.sys.wake(t):i.sys.isPaused()?i.sys.resume(t):this.start(e,t)},start:function(e,t){if(!this.isBooted)return this._data[e]={autoStart:!0,data:t},this;var i=this.getScene(e);if(!i)return console.warn("Scene not found for key: "+e),this;var r=i.sys;if(r.isActive()||r.isPaused())r.shutdown(),r.sceneUpdate=Yu,r.start(t);else{r.sceneUpdate=Yu,r.start(t);var s;if(r.load&&(s=r.load),s&&r.settings.hasOwnProperty("pack")&&(s.reset(),s.addPack({payload:r.settings.pack})))return r.settings.status=gi.LOADING,s.once(PG.COMPLETE,this.payloadComplete,this),s.start(),this}return this.bootScene(i),this},stop:function(e,t){var i=this.getScene(e);return i&&!i.sys.isTransitioning()&&i.sys.shutdown(t),this},switch:function(e,t){var i=this.getScene(e),r=this.getScene(t);return i&&r&&i!==r&&(this.sleep(e),this.isSleeping(t)?this.wake(t):this.start(t)),this},getAt:function(e){return this.scenes[e]},getIndex:function(e){var t=this.getScene(e);return this.scenes.indexOf(t)},bringToTop:function(e){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:e,keyB:null});else{var t=this.getIndex(e);if(t!==-1&&t<this.scenes.length){var i=this.getScene(e);this.scenes.splice(t,1),this.scenes.push(i)}}return this},sendToBack:function(e){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:e,keyB:null});else{var t=this.getIndex(e);if(t!==-1&&t>0){var i=this.getScene(e);this.scenes.splice(t,1),this.scenes.unshift(i)}}return this},moveDown:function(e){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:e,keyB:null});else{var t=this.getIndex(e);if(t>0){var i=t-1,r=this.getScene(e),s=this.getAt(i);this.scenes[t]=s,this.scenes[i]=r}}return this},moveUp:function(e){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:e,keyB:null});else{var t=this.getIndex(e);if(t<this.scenes.length-1){var i=t+1,r=this.getScene(e),s=this.getAt(i);this.scenes[t]=s,this.scenes[i]=r}}return this},moveAbove:function(e,t){if(e===t)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:e,keyB:t});else{var i=this.getIndex(e),r=this.getIndex(t);if(i!==-1&&r!==-1){var s=this.getAt(r);this.scenes.splice(r,1),this.scenes.splice(i+1,0,s)}}return this},moveBelow:function(e,t){if(e===t)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:e,keyB:t});else{var i=this.getIndex(e),r=this.getIndex(t);if(i!==-1&&r!==-1){var s=this.getAt(r);this.scenes.splice(r,1),i===0?this.scenes.unshift(s):this.scenes.splice(i,0,s)}}return this},queueOp:function(e,t,i){return this._queue.push({op:e,keyA:t,keyB:i}),this},swapPosition:function(e,t){if(e===t)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:e,keyB:t});else{var i=this.getIndex(e),r=this.getIndex(t);if(i!==r&&i!==-1&&r!==-1){var s=this.getAt(i);this.scenes[i]=this.scenes[r],this.scenes[r]=s}}return this},dump:function(){for(var e=[],t=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],i=0;i<this.scenes.length;i++){var r=this.scenes[i].sys,s=r.settings.visible&&(r.settings.status===gi.RUNNING||r.settings.status===gi.PAUSED)?"[*] ":"[-] ";s+=r.settings.key+" ("+t[r.settings.status]+")",e.push(s)}console.log(e.join(`
`))},destroy:function(){for(var e=0;e<this.scenes.length;e++){var t=this.scenes[e].sys;t.destroy()}this.update=Yu,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});MG.exports=bxe});var Kn=l((I8e,OG)=>{var Pxe=C(),Hn=Le(),Mxe=Ye(),LG=new Pxe({initialize:function(t,i,r,s,n,a,h){this.texture=t,this.name=i,this.source=t.source[r],this.sourceIndex=r,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(a,h,s,n)},setSize:function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=0),this.cutX=i,this.cutY=r,this.cutWidth=e,this.cutHeight=t,this.width=e,this.height=t,this.halfWidth=Math.floor(e*.5),this.halfHeight=Math.floor(t*.5),this.centerX=Math.floor(e/2),this.centerY=Math.floor(t/2);var s=this.data,n=s.cut;n.x=i,n.y=r,n.w=e,n.h=t,n.r=i+e,n.b=r+t,s.sourceSize.w=e,s.sourceSize.h=t,s.spriteSourceSize.w=e,s.spriteSourceSize.h=t,s.radius=.5*Math.sqrt(e*e+t*t);var a=s.drawImage;return a.x=i,a.y=r,a.width=e,a.height=t,this.updateUVs()},setTrim:function(e,t,i,r,s,n){var a=this.data,h=a.spriteSourceSize;return a.trim=!0,a.sourceSize.w=e,a.sourceSize.h=t,h.x=i,h.y=r,h.w=s,h.h=n,h.r=i+s,h.b=r+n,this.x=i,this.y=r,this.width=s,this.height=n,this.halfWidth=s*.5,this.halfHeight=n*.5,this.centerX=Math.floor(s/2),this.centerY=Math.floor(n/2),this.updateUVs()},setCropUVs:function(e,t,i,r,s,n,a){var h=this.cutX,o=this.cutY,u=this.cutWidth,f=this.cutHeight,d=this.realWidth,v=this.realHeight;t=Hn(t,0,d),i=Hn(i,0,v),r=Hn(r,0,d-t),s=Hn(s,0,v-i);var c=h+t,p=o+i,m=r,x=s,g=this.data;if(g.trim){var y=g.spriteSourceSize;r=Hn(r,0,u-t),s=Hn(s,0,f-i);var T=t+r,S=i+s,E=!(y.r<t||y.b<i||y.x>T||y.y>S);if(E){var _=Math.max(y.x,t),w=Math.max(y.y,i),R=Math.min(y.r,T)-_,q=Math.min(y.b,S)-w;m=R,x=q,n?c=h+(u-(_-y.x)-R):c=h+(_-y.x),a?p=o+(f-(w-y.y)-q):p=o+(w-y.y),t=_,i=w,r=R,s=q}else c=0,p=0,m=0,x=0}else n&&(c=h+(u-t-r)),a&&(p=o+(f-i-s));var A=this.source.width,b=this.source.height;return e.u0=Math.max(0,c/A),e.v0=Math.max(0,p/b),e.u1=Math.min(1,(c+m)/A),e.v1=Math.min(1,(p+x)/b),e.x=t,e.y=i,e.cx=c,e.cy=p,e.cw=m,e.ch=x,e.width=r,e.height=s,e.flipX=n,e.flipY=a,e},updateCropUVs:function(e,t,i){return this.setCropUVs(e,e.x,e.y,e.width,e.height,t,i)},setUVs:function(e,t,i,r,s,n){var a=this.data.drawImage;return a.width=e,a.height=t,this.u0=i,this.v0=r,this.u1=s,this.v1=n,this},updateUVs:function(){var e=this.cutX,t=this.cutY,i=this.cutWidth,r=this.cutHeight,s=this.data.drawImage;s.width=i,s.height=r;var n=this.source.width,a=this.source.height;return this.u0=e/n,this.v0=t/a,this.u1=(e+i)/n,this.v1=(t+r)/a,this},updateUVsInverted:function(){var e=this.source.width,t=this.source.height;return this.u0=(this.cutX+this.cutHeight)/e,this.v0=this.cutY/t,this.u1=this.cutX/e,this.v1=(this.cutY+this.cutWidth)/t,this},clone:function(){var e=new LG(this.texture,this.name,this.sourceIndex);return e.cutX=this.cutX,e.cutY=this.cutY,e.cutWidth=this.cutWidth,e.cutHeight=this.cutHeight,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e.halfWidth=this.halfWidth,e.halfHeight=this.halfHeight,e.centerX=this.centerX,e.centerY=this.centerY,e.rotated=this.rotated,e.data=Mxe(!0,e.data,this.data),e.updateUVs(),e},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});OG.exports=LG});var Yp=l((N8e,FG)=>{var Lxe=Ot(),Oxe=C(),Fxe=ih(),Dxe=ud(),Ixe=new Oxe({initialize:function(t,i,r,s,n){n===void 0&&(n=!1);var a=t.manager.game;this.renderer=a.renderer,this.texture=t,this.source=i,this.image=i,this.compressionAlgorithm=null,this.resolution=1,this.width=r||i.naturalWidth||i.videoWidth||i.width||0,this.height=s||i.naturalHeight||i.videoHeight||i.height||0,this.scaleMode=Dxe.DEFAULT,this.isCanvas=i instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&i instanceof HTMLVideoElement,this.isRenderTexture=i.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&i instanceof WebGLTexture,this.isPowerOf2=Fxe(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=n,this.init(a)},init:function(e){var t=this.renderer;t&&(t.gl?this.isCanvas?this.glTexture=t.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=t.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=t.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=t.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),e.config.antialias||this.setFilter(1)},setFilter:function(e){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,e),this.scaleMode=e},setFlipY:function(e){return e===void 0&&(e=!0),this.flipY=e,this},update:function(){var e=this.renderer.gl;e&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):e&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&Lxe.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});FG.exports=Ixe});var Xu=l((G8e,IG)=>{var Nxe=Qt(),Gxe=C(),Bxe=Kn(),DG=Yp(),Xp='Texture "%s" has no frame "%s"',Uxe=new Gxe({initialize:function(t,i,r,s,n){Array.isArray(r)||(r=[r]),this.manager=t,this.key=i,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var a=0;a<r.length;a++)this.source.push(new DG(this,r[a],s,n))},add:function(e,t,i,r,s,n){if(this.has(e))return null;var a=new Bxe(this,e,t,i,r,s,n);return this.frames[e]=a,this.firstFrame==="__BASE"&&(this.firstFrame=e),this.frameTotal++,a},remove:function(e){if(this.has(e)){var t=this.get(e);return t.destroy(),delete this.frames[e],!0}return!1},has:function(e){return this.frames[e]},get:function(e){e||(e=this.firstFrame);var t=this.frames[e];return t||(console.warn(Xp,this.key,e),t=this.frames[this.firstFrame]),t},getTextureSourceIndex:function(e){for(var t=0;t<this.source.length;t++)if(this.source[t]===e)return t;return-1},getFramesFromTextureSource:function(e,t){t===void 0&&(t=!1);var i=[];for(var r in this.frames)if(!(r==="__BASE"&&!t)){var s=this.frames[r];s.sourceIndex===e&&i.push(s)}return i},getFrameNames:function(e){e===void 0&&(e=!1);var t=Object.keys(this.frames);if(!e){var i=t.indexOf("__BASE");i!==-1&&t.splice(i,1)}return t},getSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var t=this.frames[e];return t?t.source.image:(console.warn(Xp,this.key,e),this.frames.__BASE.source.image)},getDataSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var t=this.frames[e],i;return t?i=t.sourceIndex:(console.warn(Xp,this.key,e),i=this.frames.__BASE.sourceIndex),this.dataSource[i].image},setDataSource:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=this.source[t];this.dataSource.push(new DG(this,e[t],i.width,i.height))}},setFilter:function(e){var t;for(t=0;t<this.source.length;t++)this.source[t].setFilter(e);for(t=0;t<this.dataSource.length;t++)this.dataSource[t].setFilter(e)},destroy:function(){var e;for(e=0;e<this.source.length;e++)this.source[e].destroy();for(e=0;e<this.dataSource.length;e++)this.dataSource[e].destroy();for(var t in this.frames){var i=this.frames[t];i.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var r=this.manager.game.renderer;r&&r.type===Nxe.WEBGL&&r.resetTextures(!0),this.manager=null}});IG.exports=Uxe});var Wp=l((B8e,GG)=>{var kxe=C(),os=Le(),NG=vi(),zxe=Qt(),Yxe=ih(),Vp=Xu(),Xxe=new kxe({Extends:Vp,initialize:function(t,i,r,s,n){Vp.call(this,t,i,r,s,n),this.add("__BASE",0,0,0,s,n),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=s,this.height=n,this.imageData=this.context.getImageData(0,0,s,n),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===zxe.WEBGL&&this.refresh(),this},draw:function(e,t,i){return this.context.drawImage(i,e,t),this.update()},drawFrame:function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=0);var s=this.manager.getFrame(e,t);if(s){var n=s.canvasData,a=s.cutWidth,h=s.cutHeight,o=s.source.resolution;return this.context.drawImage(s.source.image,n.x,n.y,a,h,i,r,a/o,h/o),this.update()}else return this},setPixel:function(e,t,i,r,s,n){n===void 0&&(n=255),e=Math.abs(Math.floor(e)),t=Math.abs(Math.floor(t));var a=this.getIndex(e,t);if(a>-1){var h=this.context.getImageData(e,t,1,1);h.data[0]=i,h.data[1]=r,h.data[2]=s,h.data[3]=n,this.context.putImageData(h,e,t)}return this},putData:function(e,t,i,r,s,n,a){return r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=e.width),a===void 0&&(a=e.height),this.context.putImageData(e,t,i,r,s,n,a),this},getData:function(e,t,i,r){e=os(Math.floor(e),0,this.width-1),t=os(Math.floor(t),0,this.height-1),i=os(i,1,this.width-e),r=os(r,1,this.height-t);var s=this.context.getImageData(e,t,i,r);return s},getPixel:function(e,t,i){i||(i=new NG);var r=this.getIndex(e,t);if(r>-1){var s=this.data,n=s[r+0],a=s[r+1],h=s[r+2],o=s[r+3];i.setTo(n,a,h,o)}return i},getPixels:function(e,t,i,r){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.width),r===void 0&&(r=i),e=Math.abs(Math.round(e)),t=Math.abs(Math.round(t));for(var s=os(e,0,this.width),n=os(e+i,0,this.width),a=os(t,0,this.height),h=os(t+r,0,this.height),o=new NG,u=[],f=a;f<h;f++){for(var d=[],v=s;v<n;v++)o=this.getPixel(v,f,o),d.push({x:v,y:f,color:o.color,alpha:o.alphaGL});u.push(d)}return u},getIndex:function(e,t){return e=Math.abs(Math.round(e)),t=Math.abs(Math.round(t)),e<this.width&&t<this.height?(e+t*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.width),r===void 0&&(r=this.height),this.context.clearRect(e,t,i,r),this.update()},setSize:function(e,t){return t===void 0&&(t=e),(e!==this.width||t!==this.height)&&(this.canvas.width=e,this.canvas.height=t,this._source.width=e,this._source.height=t,this._source.isPowerOf2=Yxe(e,t),this.frames.__BASE.setSize(e,t,0,0),this.width=e,this.height=t,this.refresh()),this},destroy:function(){Vp.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});GG.exports=Xxe});var UG=l((U8e,BG)=>{var Vxe=function(e,t,i){if(!i.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);for(var s=i.getElementsByTagName("SubTexture"),n,a=0;a<s.length;a++){var h=s[a].attributes,o=h.name.value,u=parseInt(h.x.value,10),f=parseInt(h.y.value,10),d=parseInt(h.width.value,10),v=parseInt(h.height.value,10);if(n=e.add(o,t,u,f,d,v),h.frameX){var c=Math.abs(parseInt(h.frameX.value,10)),p=Math.abs(parseInt(h.frameY.value,10)),m=parseInt(h.frameWidth.value,10),x=parseInt(h.frameHeight.value,10);n.setTrim(d,v,c,p,m,x)}}return e};BG.exports=Vxe});var zG=l((k8e,kG)=>{var Wxe=function(e,t){var i=e.source[t];return e.add("__BASE",t,0,0,i.width,i.height),e};kG.exports=Wxe});var XG=l((z8e,YG)=>{var Hxe=function(e,t){var i=e.source[t];return e.add("__BASE",t,0,0,i.width,i.height),e};YG.exports=Hxe});var WG=l((Y8e,VG)=>{var Kxe=hs(),Zxe=function(e,t,i){if(!i.frames&&!i.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);for(var s=Array.isArray(i.textures)?i.textures[t].frames:i.frames,n,a=0;a<s.length;a++){var h=s[a];n=e.add(h.filename,t,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&n.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(n.rotated=!0,n.updateUVsInverted());var o=h.anchor||h.pivot;o&&(n.customPivot=!0,n.pivotX=o.x,n.pivotY=o.y),n.customData=Kxe(h)}for(var u in i)u!=="frames"&&(Array.isArray(i[u])?e.customData[u]=i[u].slice(0):e.customData[u]=i[u]);return e};VG.exports=Zxe});var KG=l((X8e,HG)=>{var Jxe=hs(),Qxe=function(e,t,i){if(!i.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);var s=i.frames,n;for(var a in s)if(!!s.hasOwnProperty(a)){var h=s[a];n=e.add(a,t,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&n.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(n.rotated=!0,n.updateUVsInverted());var o=h.anchor||h.pivot;o&&(n.customPivot=!0,n.pivotX=o.x,n.pivotY=o.y),n.customData=Jxe(h)}for(var u in i)u!=="frames"&&(Array.isArray(i[u])?e.customData[u]=i[u].slice(0):e.customData[u]=i[u]);return e};HG.exports=Qxe});var JG=l((V8e,ZG)=>{var Zn=z(),$xe=function(e,t,i,r,s,n,a){var h=Zn(a,"frameWidth",null),o=Zn(a,"frameHeight",h);if(h===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var u=e.source[t];e.add("__BASE",t,0,0,u.width,u.height);var f=Zn(a,"startFrame",0),d=Zn(a,"endFrame",-1),v=Zn(a,"margin",0),c=Zn(a,"spacing",0),p=Math.floor((s-v+c)/(h+c)),m=Math.floor((n-v+c)/(o+c)),x=p*m;x===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",e.key),(f>x||f<-x)&&(f=0),f<0&&(f=x+f),d!==-1&&(x=f+(d+1));for(var g=v,y=v,T=0,S=0,E=0;E<x;E++){T=0,S=0;var _=g+h,w=y+o;_>s&&(T=_-s),w>n&&(S=w-n),e.add(E,t,i+g,r+y,h-T,o-S),g+=h+c,g+h>s&&(g=v,y+=o+c)}return e};ZG.exports=$xe});var $G=l((W8e,QG)=>{var Jn=z(),jxe=function(e,t,i){var r=Jn(i,"frameWidth",null),s=Jn(i,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var n=e.source[0];e.add("__BASE",0,0,0,n.width,n.height);var a=Jn(i,"startFrame",0),h=Jn(i,"endFrame",-1),o=Jn(i,"margin",0),u=Jn(i,"spacing",0),f=t.cutX,d=t.cutY,v=t.cutWidth,c=t.cutHeight,p=t.realWidth,m=t.realHeight,x=Math.floor((p-o+u)/(r+u)),g=Math.floor((m-o+u)/(s+u)),y=x*g,T=t.x,S=r-T,E=r-(p-v-T),_=t.y,w=s-_,R=s-(m-c-_);(a>y||a<-y)&&(a=0),a<0&&(a=y+a),h!==-1&&(y=a+(h+1));for(var q,A=o,b=o,L=0,M=t.sourceIndex,G=0;G<g;G++){for(var P=G===0,D=G===g-1,I=0;I<x;I++){var F=I===0,O=I===x-1;if(q=e.add(L,M,f+A,d+b,r,s),F||P||O||D){var K=F?T:0,H=P?_:0,Y=0,ee=0;F&&(Y+=r-S),O&&(Y+=r-E),P&&(ee+=s-w),D&&(ee+=s-R);var U=r-Y,J=s-ee;q.cutWidth=U,q.cutHeight=J,q.setTrim(r,s,K,H,U,J)}A+=u,F?A+=S:O?A+=E:A+=r,L++}A=o,b+=u,P?b+=w:D?b+=R:b+=s}return e};QG.exports=jxe});var iB=l((H8e,tB)=>{var eB=0,jG=function(e,t,i,r){var s=eB-r.y-r.height;e.add(i,t,r.x,s,r.width,r.height)},eye=function(e,t,i){var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height),eB=r.height;for(var s=i.split(`
`),n=/^[ ]*(- )*(\w+)+[: ]+(.*)/,a="",h="",o={x:0,y:0,width:0,height:0},u=0;u<s.length;u++){var f=s[u].match(n);if(!!f){var d=f[1]==="- ",v=f[2],c=f[3];if(d&&(h!==a&&(jG(e,t,h,o),a=h),o={x:0,y:0,width:0,height:0}),v==="name"){h=c;continue}switch(v){case"x":case"y":case"width":case"height":o[v]=parseInt(c,10);break}}}return h!==a&&jG(e,t,h,o),e};tB.exports=eye});var Hp=l((K8e,rB)=>{rB.exports={AtlasXML:UG(),Canvas:zG(),Image:XG(),JSONArray:WG(),JSONHash:KG(),SpriteSheet:JG(),SpriteSheetFromAtlas:$G(),UnityYAML:iB()}});var Kp=l((Z8e,uB)=>{var Qn=Ot(),sB=Wp(),tye=C(),iye=vi(),rye=Qt(),nB=ue(),et=In(),aB=Xe(),sye=ip(),hB=he(),Ii=Hp(),oB=Xu(),nye=new tye({Extends:nB,initialize:function(t){nB.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=Qn.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(aB.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(et.LOAD,this.updatePending,this),this.on(et.ERROR,this.updatePending,this);var e=this.game.config;this.addBase64("__DEFAULT",e.defaultImage),this.addBase64("__MISSING",e.missingImage),this.addBase64("__WHITE",e.whiteImage),this.game.events.once(aB.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(et.LOAD),this.off(et.ERROR),this.emit(et.READY))},checkKey:function(e){return this.exists(e)?(console.error("Texture key already in use: "+e),!1):!0},remove:function(e){if(typeof e=="string")if(this.exists(e))e=this.get(e);else return console.warn("No texture found matching key: "+e),this;return this.list.hasOwnProperty(e.key)&&(e.destroy(),this.emit(et.REMOVE,e.key)),this},removeKey:function(e){return this.list.hasOwnProperty(e)&&delete this.list[e],this},addBase64:function(e,t){if(this.checkKey(e)){var i=this,r=new Image;r.onerror=function(){i.emit(et.ERROR,e)},r.onload=function(){var s=i.create(e,r);Ii.Image(s,0),i.emit(et.ADD,e,s),i.emit(et.LOAD,e,s)},r.src=t}return this},getBase64:function(e,t,i,r){i===void 0&&(i="image/png"),r===void 0&&(r=.92);var s="",n=this.getFrame(e,t);if(n&&(n.source.isRenderTexture||n.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(n){var a=n.canvasData,h=Qn.create2D(this,a.width,a.height),o=h.getContext("2d");o.drawImage(n.source.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),s=h.toDataURL(i,r),Qn.remove(h)}return s},addImage:function(e,t,i){var r=null;return this.checkKey(e)&&(r=this.create(e,t),Ii.Image(r,0),i&&r.setDataSource(i),this.emit(et.ADD,e,r)),r},addGLTexture:function(e,t,i,r){var s=null;return this.checkKey(e)&&(i===void 0&&(i=t.width),r===void 0&&(r=t.height),s=this.create(e,t,i,r),s.add("__BASE",0,0,0,i,r),this.emit(et.ADD,e,s)),s},addRenderTexture:function(e,t){var i=null;return this.checkKey(e)&&(i=this.create(e,t),i.add("__BASE",0,0,0,t.width,t.height),this.emit(et.ADD,e,i)),i},generate:function(e,t){if(this.checkKey(e)){var i=Qn.create(this,1,1);return t.canvas=i,sye(t),this.addCanvas(e,i)}else return null},createCanvas:function(e,t,i){if(t===void 0&&(t=256),i===void 0&&(i=256),this.checkKey(e)){var r=Qn.create(this,t,i,rye.CANVAS,!0);return this.addCanvas(e,r)}return null},addCanvas:function(e,t,i){i===void 0&&(i=!1);var r=null;return i?r=new sB(this,e,t,t.width,t.height):this.checkKey(e)&&(r=new sB(this,e,t,t.width,t.height),this.list[e]=r,this.emit(et.ADD,e,r)),r},addAtlas:function(e,t,i,r){return Array.isArray(i.textures)||Array.isArray(i.frames)?this.addAtlasJSONArray(e,t,i,r):this.addAtlasJSONHash(e,t,i,r)},addAtlasJSONArray:function(e,t,i,r){var s=null;if(this.checkKey(e)){if(s=this.create(e,t),Array.isArray(i))for(var n=i.length===1,a=0;a<s.source.length;a++){var h=n?i[0]:i[a];Ii.JSONArray(s,a,h)}else Ii.JSONArray(s,0,i);r&&s.setDataSource(r),this.emit(et.ADD,e,s)}return s},addAtlasJSONHash:function(e,t,i,r){var s=null;if(this.checkKey(e)){if(s=this.create(e,t),Array.isArray(i))for(var n=0;n<i.length;n++)Ii.JSONHash(s,n,i[n]);else Ii.JSONHash(s,0,i);r&&s.setDataSource(r),this.emit(et.ADD,e,s)}return s},addAtlasXML:function(e,t,i,r){var s=null;return this.checkKey(e)&&(s=this.create(e,t),Ii.AtlasXML(s,0,i),r&&s.setDataSource(r),this.emit(et.ADD,e,s)),s},addUnityAtlas:function(e,t,i,r){var s=null;return this.checkKey(e)&&(s=this.create(e,t),Ii.UnityYAML(s,0,i),r&&s.setDataSource(r),this.emit(et.ADD,e,s)),s},addSpriteSheet:function(e,t,i){var r=null;if(this.checkKey(e)){r=this.create(e,t);var s=r.source[0].width,n=r.source[0].height;Ii.SpriteSheet(r,0,0,0,s,n,i),this.emit(et.ADD,e,r)}return r},addSpriteSheetFromAtlas:function(e,t){if(!this.checkKey(e))return null;var i=hB(t,"atlas",null),r=hB(t,"frame",null);if(!(!i||!r)){var s=this.get(i),n=s.get(r);if(n){var a=this.create(e,n.source.image);return n.trimmed?Ii.SpriteSheetFromAtlas(a,n,t):Ii.SpriteSheet(a,0,n.cutX,n.cutY,n.cutWidth,n.cutHeight,t),this.emit(et.ADD,e,a),a}}},create:function(e,t,i,r){var s=null;return this.checkKey(e)&&(s=new oB(this,e,t,i,r),this.list[e]=s),s},exists:function(e){return this.list.hasOwnProperty(e)},get:function(e){return e===void 0&&(e="__DEFAULT"),this.list[e]?this.list[e]:e instanceof oB?e:this.list.__MISSING},cloneFrame:function(e,t){if(this.list[e])return this.list[e].get(t).clone()},getFrame:function(e,t){if(this.list[e])return this.list[e].get(t)},getTextureKeys:function(){var e=[];for(var t in this.list)t!=="__DEFAULT"&&t!=="__MISSING"&&e.push(t);return e},getPixel:function(e,t,i,r){var s=this.getFrame(i,r);if(s){e-=s.x,t-=s.y;var n=s.data.cut;if(e+=n.x,t+=n.y,e>=n.x&&e<n.r&&t>=n.y&&t<n.b){var a=this._tempContext;a.clearRect(0,0,1,1),a.drawImage(s.source.image,e,t,1,1,0,0,1,1);var h=a.getImageData(0,0,1,1);return new iye(h.data[0],h.data[1],h.data[2],h.data[3])}}return null},getPixelAlpha:function(e,t,i,r){var s=this.getFrame(i,r);if(s){e-=s.x,t-=s.y;var n=s.data.cut;if(e+=n.x,t+=n.y,e>=n.x&&e<n.r&&t>=n.y&&t<n.b){var a=this._tempContext;a.clearRect(0,0,1,1),a.drawImage(s.source.image,e,t,1,1,0,0,1,1);var h=a.getImageData(0,0,1,1);return h.data[3]}}return null},setTexture:function(e,t,i){return this.list[t]&&(e.texture=this.list[t],e.frame=e.texture.get(i)),e},renameTexture:function(e,t){var i=this.get(e);return i&&e!==t?(i.key=t,this.list[t]=i,delete this.list[e],!0):!1},each:function(e,t){for(var i=[null],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var s in this.list)i[0]=this.list[s],e.apply(t,i)},destroy:function(){for(var e in this.list)this.list[e].destroy();this.list={},this.game=null,Qn.remove(this._tempCanvas)}});uB.exports=nye});var fB=l((J8e,lB)=>{lB.exports="complete"});var vB=l((Q8e,dB)=>{dB.exports="decoded"});var pB=l(($8e,cB)=>{cB.exports="decodedall"});var gB=l((j8e,mB)=>{mB.exports="destroy"});var yB=l((e7e,xB)=>{xB.exports="detune"});var EB=l((t7e,TB)=>{TB.exports="detune"});var _B=l((i7e,SB)=>{SB.exports="mute"});var CB=l((r7e,wB)=>{wB.exports="rate"});var qB=l((s7e,RB)=>{RB.exports="volume"});var bB=l((n7e,AB)=>{AB.exports="loop"});var MB=l((a7e,PB)=>{PB.exports="looped"});var OB=l((h7e,LB)=>{LB.exports="mute"});var DB=l((o7e,FB)=>{FB.exports="pan"});var NB=l((u7e,IB)=>{IB.exports="pauseall"});var BB=l((l7e,GB)=>{GB.exports="pause"});var kB=l((f7e,UB)=>{UB.exports="play"});var YB=l((d7e,zB)=>{zB.exports="rate"});var VB=l((v7e,XB)=>{XB.exports="resumeall"});var HB=l((c7e,WB)=>{WB.exports="resume"});var ZB=l((p7e,KB)=>{KB.exports="seek"});var QB=l((m7e,JB)=>{JB.exports="stopall"});var jB=l((g7e,$B)=>{$B.exports="stop"});var tU=l((x7e,eU)=>{eU.exports="unlocked"});var rU=l((y7e,iU)=>{iU.exports="volume"});var us=l((T7e,sU)=>{sU.exports={COMPLETE:fB(),DECODED:vB(),DECODED_ALL:pB(),DESTROY:gB(),DETUNE:yB(),GLOBAL_DETUNE:EB(),GLOBAL_MUTE:_B(),GLOBAL_RATE:CB(),GLOBAL_VOLUME:qB(),LOOP:bB(),LOOPED:MB(),MUTE:OB(),PAN:DB(),PAUSE_ALL:NB(),PAUSE:BB(),PLAY:kB(),RATE:YB(),RESUME_ALL:VB(),RESUME:HB(),SEEK:ZB(),STOP_ALL:QB(),STOP:jB(),UNLOCKED:tU(),VOLUME:rU()}});var ls=l((E7e,nU)=>{var aye=function(e,t,i,r){var s=e.length;if(t<0||t>s||t>=i||i>s||t+i>s){if(r)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};nU.exports=aye});var Vu=l((S7e,aU)=>{var hye=ls(),oye=function(e,t,i,r,s){r===void 0&&(r=0),s===void 0&&(s=e.length);var n=[];if(hye(e,r,s))for(var a=r;a<s;a++){var h=e[a];(!t||t&&i===void 0&&h.hasOwnProperty(t)||t&&i!==void 0&&h[t]===i)&&n.push(h)}return n};aU.exports=oye});var Zp=l((_7e,hU)=>{var uye=ls(),lye=function(e,t,i,r,s){if(r===void 0&&(r=0),s===void 0&&(s=e.length),uye(e,r,s))for(var n=r;n<s;n++){var a=e[n];if(!t||t&&i===void 0&&a.hasOwnProperty(t)||t&&i!==void 0&&a[t]===i)return a}return null};hU.exports=lye});var Hu=l((w7e,uU)=>{var fye=C(),dye=hs(),oU=ue(),fs=us(),an=Xe(),Wu=B(),vye=Vu(),cye=Zp(),pye=new fye({Extends:oU,initialize:function(t){oU.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(an.BLUR,this.onGameBlur,this),t.events.on(an.FOCUS,this.onGameFocus,this),t.events.on(an.PRE_STEP,this.update,this),t.events.once(an.DESTROY,this.destroy,this)},add:Wu,addAudioSprite:function(e,t){t===void 0&&(t={});var i=this.add(e,t);i.spritemap=this.jsonCache.get(e).spritemap;for(var r in i.spritemap)if(!!i.spritemap.hasOwnProperty(r)){var s=dye(t),n=i.spritemap[r];s.loop=n.hasOwnProperty("loop")?n.loop:!1,i.addMarker({name:r,start:n.start,duration:n.end-n.start,config:s})}return i},get:function(e){return cye(this.sounds,"key",e)},getAll:function(e){return vye(this.sounds,"key",e)},play:function(e,t){var i=this.add(e);return i.once(fs.COMPLETE,i.destroy,i),t?t.name?(i.addMarker(t),i.play(t.name)):i.play(t):i.play()},playAudioSprite:function(e,t,i){var r=this.addAudioSprite(e);return r.once(fs.COMPLETE,r.destroy,r),r.play(t,i)},remove:function(e){var t=this.sounds.indexOf(e);return t!==-1?(e.destroy(),this.sounds.splice(t,1),!0):!1},removeAll:function(){this.sounds.forEach(function(e){e.destroy()}),this.sounds.length=0},removeByKey:function(e){for(var t=0,i=this.sounds.length-1;i>=0;i--){var r=this.sounds[i];r.key===e&&(r.destroy(),this.sounds.splice(i,1),t++)}return t},pauseAll:function(){this.forEachActiveSound(function(e){e.pause()}),this.emit(fs.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(e){e.resume()}),this.emit(fs.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(e){e.stop()}),this.emit(fs.STOP_ALL,this)},stopByKey:function(e){var t=0;return this.getAll(e).forEach(function(i){i.stop()&&t++}),t},unlock:Wu,onBlur:Wu,onFocus:Wu,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(e,t){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(fs.UNLOCKED,this));for(var i=this.sounds.length-1;i>=0;i--)this.sounds[i].pendingRemove&&this.sounds.splice(i,1);this.sounds.forEach(function(r){r.update(e,t)})},destroy:function(){this.game.events.off(an.BLUR,this.onGameBlur,this),this.game.events.off(an.FOCUS,this.onGameFocus,this),this.game.events.off(an.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(e,t){var i=this;this.sounds.forEach(function(r,s){r&&!r.pendingRemove&&e.call(t||i,r,s,i.sounds)})},setRate:function(e){return this.rate=e,this},rate:{get:function(){return this._rate},set:function(e){this._rate=e,this.forEachActiveSound(function(t){t.calculateRate()}),this.emit(fs.GLOBAL_RATE,this,e)}},setDetune:function(e){return this.detune=e,this},detune:{get:function(){return this._detune},set:function(e){this._detune=e,this.forEachActiveSound(function(t){t.calculateRate()}),this.emit(fs.GLOBAL_DETUNE,this,e)}}});uU.exports=pye});var Zu=l((C7e,fU)=>{var mye=C(),lU=ue(),gye=us(),Ku=Ye(),xye=B(),yye=new mye({Extends:lU,initialize:function(t,i,r){lU.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=Ku(this.config,r),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(e){return!e||!e.name||typeof e.name!="string"?!1:this.markers[e.name]?(console.error("addMarker "+e.name+" already exists in Sound"),!1):(e=Ku(!0,{name:"",start:0,duration:this.totalDuration-(e.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},e),this.markers[e.name]=e,!0)},updateMarker:function(e){return!e||!e.name||typeof e.name!="string"?!1:this.markers[e.name]?(this.markers[e.name]=Ku(!0,this.markers[e.name],e),!0):(console.warn("Audio Marker: "+e.name+" missing in Sound: "+this.key),!1)},removeMarker:function(e){var t=this.markers[e];return t?(this.markers[e]=null,t):null},play:function(e,t){if(e===void 0&&(e=""),typeof e=="object"&&(t=e,e=""),typeof e!="string")return!1;if(!e)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[e])return console.warn("Marker: "+e+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[e],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=Ku(this.currentConfig,t),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:xye,calculateRate:function(){var e=1.0005777895065548,t=this.currentConfig.detune+this.manager.detune,i=Math.pow(e,t);this.totalRate=this.currentConfig.rate*this.manager.rate*i},destroy:function(){this.pendingRemove||(this.emit(gye.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});fU.exports=yye});var vU=l((R7e,dU)=>{var Rr=Zu(),Tye=C(),It=us(),Eye=Le(),Sye=new Tye({Extends:Rr,initialize:function(t,i,r){if(r===void 0&&(r={}),this.tags=t.game.cache.audio.get(i),!this.tags)throw new Error('There is no audio asset with key "'+i+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,Rr.call(this,t,i,r)},play:function(e,t){return this.manager.isLocked(this,"play",[e,t])||!Rr.prototype.play.call(this,e,t)||!this.pickAndPlayAudioTag()?!1:(this.emit(It.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!Rr.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(It.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!Rr.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(It.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!Rr.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(It.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var e=this.currentConfig.seek,t=this.currentConfig.delay,i=(this.currentMarker?this.currentMarker.start:0)+e;return this.previousTime=i,this.audio.currentTime=i,this.applyConfig(),t===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+t*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var e=0;e<this.tags.length;e++){var t=this.tags[e];if(t.dataset.used==="false")return t.dataset.used="true",this.audio=t,!0}if(!this.manager.override)return!1;var i=[];this.manager.forEachActiveSound(function(s){s.key===this.key&&s.audio&&i.push(s)},this),i.sort(function(s,n){return s.loop===n.loop?n.seek/n.duration-s.seek/s.duration:s.loop?1:-1});var r=i[0];return this.audio=r.audio,r.reset(),r.audio=null,r.startTime=0,r.previousTime=0,!0},playCatchPromise:function(){var e=this.audio.play();e&&e.catch(function(t){console.warn(t)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){Rr.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(e){if(!!this.isPlaying){if(this.startTime>0){this.startTime<e-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,e-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var t=this.currentMarker?this.currentMarker.start:0,i=t+this.duration,r=this.audio.currentTime;if(this.currentConfig.loop)r>=i-this.manager.loopEndOffset?(this.audio.currentTime=t+Math.max(0,r-i),r=this.audio.currentTime):r<t&&(this.audio.currentTime+=t,r=this.audio.currentTime),r<this.previousTime&&this.emit(It.LOOPED,this);else if(r>=i){this.reset(),this.stopAndReleaseAudioTag(),this.emit(It.COMPLETE,this);return}this.previousTime=r}},destroy:function(){Rr.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=Eye(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){Rr.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(e){this.currentConfig.mute=e,!this.manager.isLocked(this,"mute",e)&&(this.updateMute(),this.emit(It.MUTE,this,e))}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.currentConfig.volume},set:function(e){this.currentConfig.volume=e,!this.manager.isLocked(this,"volume",e)&&(this.updateVolume(),this.emit(It.VOLUME,this,e))}},setVolume:function(e){return this.volume=e,this},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,!this.manager.isLocked(this,It.RATE,e)&&(this.calculateRate(),this.emit(It.RATE,this,e))}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,!this.manager.isLocked(this,It.DETUNE,e)&&(this.calculateRate(),this.emit(It.DETUNE,this,e))}},setDetune:function(e){return this.detune=e,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.isLocked(this,"seek",e)||this.startTime>0||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.isPlaying?(this.previousTime=e,this.audio.currentTime=e):this.isPaused&&(this.currentConfig.seek=e),this.emit(It.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,!this.manager.isLocked(this,"loop",e)&&(this.audio&&(this.audio.loop=e),this.emit(It.LOOP,this,e))}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.currentConfig.pan},set:function(e){this.currentConfig.pan=e,this.emit(It.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});dU.exports=Sye});var pU=l((q7e,cU)=>{var Jp=Hu(),_ye=C(),Qp=us(),wye=vU(),Cye=new _ye({Extends:Jp,initialize:function(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,Jp.call(this,t)},add:function(e,t){var i=new wye(this,e,t);return this.sounds.push(i),i},unlock:function(){this.locked=!1;var e=this;if(this.game.cache.audio.entries.each(function(s,n){for(var a=0;a<n.length;a++)if(n[a].dataset.locked==="true")return e.locked=!0,!1;return!0}),!!this.locked){var t=!1,i=function(){t=!0},r=function(){if(t){t=!1;return}document.body.removeEventListener("touchmove",i),document.body.removeEventListener("touchend",r);var s=[];if(e.game.cache.audio.entries.each(function(a,h){for(var o=0;o<h.length;o++){var u=h[o];u.dataset.locked==="true"&&s.push(u)}return!0}),s.length!==0){var n=s[s.length-1];n.oncanplaythrough=function(){n.oncanplaythrough=null,s.forEach(function(a){a.dataset.locked="false"}),e.unlocked=!0},s.forEach(function(a){a.load()})}};this.once(Qp.UNLOCKED,function(){for(this.forEachActiveSound(function(n){n.currentMarker===null&&n.duration===0&&(n.duration=n.tags[0].duration),n.totalDuration=n.tags[0].duration});this.lockedActionsQueue.length;){var s=this.lockedActionsQueue.shift();s.sound[s.prop].apply?s.sound[s.prop].apply(s.sound,s.value||[]):s.sound[s.prop]=s.value}},this),document.body.addEventListener("touchmove",i,!1),document.body.addEventListener("touchend",r,!1)}},onBlur:function(){this.forEachActiveSound(function(e){e.isPlaying&&(this.onBlurPausedSounds.push(e),e.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(e){e.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){Jp.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(e,t,i){return e.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:e,prop:t,value:i}),!0):!1},setMute:function(e){return this.mute=e,this},mute:{get:function(){return this._mute},set:function(e){this._mute=e,this.forEachActiveSound(function(t){t.updateMute()}),this.emit(Qp.GLOBAL_MUTE,this,e)}},setVolume:function(e){return this.volume=e,this},volume:{get:function(){return this._volume},set:function(e){this._volume=e,this.forEachActiveSound(function(t){t.updateVolume()}),this.emit(Qp.GLOBAL_VOLUME,this,e)}}});cU.exports=Cye});var xU=l((A7e,gU)=>{var Rye=Zu(),qye=C(),mU=ue(),Aye=Ye(),$n=function(){return!1},bye=function(){return null},hn=function(){return this},Pye=new qye({Extends:mU,initialize:function(t,i,r){r===void 0&&(r={}),mU.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=Aye({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},r),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:$n,updateMarker:$n,removeMarker:bye,play:$n,pause:$n,resume:$n,stop:$n,destroy:function(){Rye.prototype.destroy.call(this)},setMute:hn,setVolume:hn,setRate:hn,setDetune:hn,setSeek:hn,setLoop:hn,setPan:hn});gU.exports=Pye});var EU=l((b7e,TU)=>{var Ju=Hu(),Mye=C(),yU=ue(),Lye=xU(),ds=B(),Oye=new Mye({Extends:yU,initialize:function(t){yU.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(e,t){var i=new Lye(this,e,t);return this.sounds.push(i),i},addAudioSprite:function(e,t){var i=this.add(e,t);return i.spritemap={},i},play:function(e,t){return!1},playAudioSprite:function(e,t,i){return!1},remove:function(e){return Ju.prototype.remove.call(this,e)},removeByKey:function(e){return Ju.prototype.removeByKey.call(this,e)},pauseAll:ds,resumeAll:ds,stopAll:ds,update:ds,setRate:ds,setDetune:ds,setMute:ds,setVolume:ds,forEachActiveSound:function(e,t){Ju.prototype.forEachActiveSound.call(this,e,t)},destroy:function(){Ju.prototype.destroy.call(this)}});TU.exports=Oye});var $p=l((P7e,_U)=>{var SU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Th=new Uint8Array(256);for(yh=0;yh<SU.length;yh++)Th[SU.charCodeAt(yh)]=yh;var yh,Fye=function(e){e=e.substr(e.indexOf(",")+1);var t=e.length,i=t*.75,r=0,s,n,a,h;e[t-1]==="="&&(i--,e[t-2]==="="&&i--);for(var o=new ArrayBuffer(i),u=new Uint8Array(o),f=0;f<t;f+=4)s=Th[e.charCodeAt(f)],n=Th[e.charCodeAt(f+1)],a=Th[e.charCodeAt(f+2)],h=Th[e.charCodeAt(f+3)],u[r++]=s<<2|n>>4,u[r++]=(n&15)<<4|a>>2,u[r++]=(a&3)<<6|h&63;return o};_U.exports=Fye});var CU=l((M7e,wU)=>{var tr=Zu(),Dye=C(),ri=us(),Iye=new Dye({Extends:tr,initialize:function(t,i,r){if(r===void 0&&(r={}),this.audioBuffer=t.game.cache.audio.get(i),!this.audioBuffer)throw new Error('Audio key "'+i+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,tr.call(this,t,i,r)},play:function(e,t){return tr.prototype.play.call(this,e,t)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(ri.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!tr.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(ri.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!tr.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(ri.RESUME,this),!0)},stop:function(){return tr.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(ri.STOP,this),!0):!1},createAndStartBufferSource:function(){var e=this.currentConfig.seek,t=this.currentConfig.delay,i=this.manager.context.currentTime+t,r=(this.currentMarker?this.currentMarker.start:0)+e,s=this.duration-e;this.playTime=i-e,this.startTime=i,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,i),Math.max(0,r),Math.max(0,s)),this.resetConfig()},createAndStartLoopBufferSource:function(){var e=this.getLoopTime(),t=this.currentMarker?this.currentMarker.start:0,i=this.duration;this.loopTime=e,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,e),Math.max(0,t),Math.max(0,i))},createBufferSource:function(){var e=this,t=this.manager.context.createBufferSource();return t.buffer=this.audioBuffer,t.connect(this.muteNode),t.onended=function(i){i.target===e.source&&(e.currentConfig.loop?e.hasLooped=!0:e.hasEnded=!0)},t},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),tr.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,tr.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(ri.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(ri.LOOPED,this))},destroy:function(){tr.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){tr.prototype.calculateRate.call(this);var e=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,e),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,e)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var e=0,t=0;t<this.rateUpdates.length;t++){var i=0;t<this.rateUpdates.length-1?i=this.rateUpdates[t+1].time:i=this.manager.context.currentTime-this.playTime,e+=(i-this.rateUpdates[t].time)*this.rateUpdates[t].rate}return e},getLoopTime:function(){for(var e=0,t=0;t<this.rateUpdates.length-1;t++)e+=(this.rateUpdates[t+1].time-this.rateUpdates[t].time)*this.rateUpdates[t].rate;var i=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+i.time+(this.duration-e)/i.rate},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,this.calculateRate(),this.emit(ri.RATE,this,e)}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,this.calculateRate(),this.emit(ri.DETUNE,this,e)}},setDetune:function(e){return this.detune=e,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(e){this.currentConfig.mute=e,this.muteNode.gain.setValueAtTime(e?0:1,0),this.emit(ri.MUTE,this,e)}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(e){this.currentConfig.volume=e,this.volumeNode.gain.setValueAtTime(e,0),this.emit(ri.VOLUME,this,e)}},setVolume:function(e){return this.volume=e,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.currentConfig.seek=e,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(ri.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),e&&this.createAndStartLoopBufferSource()),this.emit(ri.LOOP,this,e)}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(e){this.currentConfig.pan=e,this.pannerNode&&this.pannerNode.pan.setValueAtTime(e,this.manager.context.currentTime),this.emit(ri.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});wU.exports=Iye});var qU=l((L7e,RU)=>{var Nye=$p(),Qu=Hu(),Gye=C(),Eh=us(),Bye=Xe(),Uye=CU(),kye=new Gye({Extends:Qu,initialize:function(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),Qu.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(Bye.BOOT,this.unlock,this)},createAudioContext:function(e){var t=e.config.audio;if(t.context)return t.context.resume(),t.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(e){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=e,this.masterMuteNode=e.createGain(),this.masterVolumeNode=e.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(e.destination),this.destination=this.masterMuteNode,this},add:function(e,t){var i=new Uye(this,e,t);return this.sounds.push(i),i},decodeAudio:function(e,t){var i;Array.isArray(e)?i=e:i=[{key:e,data:t}];for(var r=this.game.cache.audio,s=i.length,n=0;n<i.length;n++){var a=i[n],h=a.key,o=a.data;typeof o=="string"&&(o=Nye(o));var u=function(d,v){r.add(d,v),this.emit(Eh.DECODED,d),s--,s===0&&this.emit(Eh.DECODED_ALL)}.bind(this,h),f=function(d,v){console.error("Error decoding audio: "+d+" - ",v?v.message:""),s--,s===0&&this.emit(Eh.DECODED_ALL)}.bind(this,h);this.context.decodeAudioData(o,u,f)}},unlock:function(){var e=this,t=document.body,i=function r(){if(e.context&&t){var s=t.removeEventListener;e.context.resume().then(function(){s("touchstart",r),s("touchend",r),s("click",r),s("keydown",r),e.unlocked=!0},function(){s("touchstart",r),s("touchend",r),s("click",r),s("keydown",r)})}};t&&(t.addEventListener("touchstart",i,!1),t.addEventListener("touchend",i,!1),t.addEventListener("click",i,!1),t.addEventListener("keydown",i,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var e=this.context;(e.state==="suspended"||e.state==="interrupted")&&!this.locked&&e.resume()},update:function(e,t){Qu.prototype.update.call(this,e,t);var i=this.context;i&&i.state==="interrupted"&&i.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var e=this;this.context.close().then(function(){e.context=null})}Qu.prototype.destroy.call(this)},setMute:function(e){return this.mute=e,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(e){this.masterMuteNode.gain.setValueAtTime(e?0:1,0),this.emit(Eh.GLOBAL_MUTE,this,e)}},setVolume:function(e){return this.volume=e,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(e){this.masterVolumeNode.gain.setValueAtTime(e,0),this.emit(Eh.GLOBAL_VOLUME,this,e)}}});RU.exports=kye});var bU=l((O7e,AU)=>{var zye=pU(),Yye=EU(),Xye=qU(),Vye={create:function(e){var t=e.config.audio,i=e.device.audio;return t.noAudio||!i.webAudio&&!i.audioData?new Yye(e):i.webAudio&&!t.disableWebAudio?new Xye(e):new zye(e)}};AU.exports=Vye});var MU=l((F7e,PU)=>{var Wye=function(e,t,i){return{instance:t,placementID:e,shown:!1,video:i}};PU.exports=Wye});var OU=l((D7e,LU)=>{var Hye=function(e){return{score:e.getScore(),scoreFormatted:e.getFormattedScore(),timestamp:e.getTimestamp(),rank:e.getRank(),data:e.getExtraData(),playerName:e.getPlayer().getName(),playerPhotoURL:e.getPlayer().getPhoto(),playerID:e.getPlayer().getID()}};LU.exports=Hye});var IU=l((I7e,DU)=>{var Kye=C(),FU=ue(),$u=OU(),Zye=new Kye({Extends:FU,initialize:function(t,i){FU.call(this),this.plugin=t,this.ref=i,this.name=i.getName(),this.contextID=i.getContextID(),this.entryCount=0,this.playerScore=null,this.scores=[],this.getEntryCount()},getEntryCount:function(){var e=this;return this.ref.getEntryCountAsync().then(function(t){e.entryCount=t,e.emit("getentrycount",t,e.name)}).catch(function(t){console.warn(t)}),this},setScore:function(e,t){t===void 0&&(t=""),typeof t=="object"&&(t=JSON.stringify(t));var i=this;return this.ref.setScoreAsync(e,t).then(function(r){if(r){var s=$u(r);i.playerScore=s,i.emit("setscore",s,i.name)}else i.emit("setscore",null,i.name)}).catch(function(r){console.warn(r)}),this},getPlayerScore:function(){var e=this;return this.ref.getPlayerEntryAsync().then(function(t){if(t){var i=$u(t);e.playerScore=i,e.emit("getplayerscore",i,e.name)}else e.emit("getplayerscore",null,e.name)}).catch(function(t){console.warn(t)}),this},getScores:function(e,t){e===void 0&&(e=10),t===void 0&&(t=0);var i=this;return this.ref.getEntriesAsync(e,t).then(function(r){i.scores=[],r.forEach(function(s){i.scores.push($u(s))}),i.emit("getscores",i.scores,i.name)}).catch(function(r){console.warn(r)}),this},getConnectedScores:function(){var e=this;return this.ref.getConnectedPlayerEntriesAsync().then(function(t){e.scores=[],t.forEach(function(i){e.scores.push($u(i))}),e.emit("getconnectedscores",e.scores,e.name)}).catch(function(t){console.warn(t)}),this}});DU.exports=Zye});var GU=l((N7e,NU)=>{var jn=z(),Jye=function(e){return{title:jn(e,"title",""),productID:jn(e,"productID",""),description:jn(e,"description",""),imageURI:jn(e,"imageURI",""),price:jn(e,"price",""),priceCurrencyCode:jn(e,"priceCurrencyCode","")}};NU.exports=Jye});var UU=l((G7e,BU)=>{var ea=z(),Qye=function(e){return{developerPayload:ea(e,"developerPayload",""),paymentID:ea(e,"paymentID",""),productID:ea(e,"productID",""),purchaseTime:ea(e,"purchaseTime",""),purchaseToken:ea(e,"purchaseToken",""),signedRequest:ea(e,"signedRequest","")}};BU.exports=Qye});var VU=l((B7e,XU)=>{var kU=MU(),$ye=C(),jye=Js(),zU=ue(),eTe=IU(),tTe=GU(),YU=UU(),iTe=new $ye({Extends:zU,initialize:function(t){zU.call(this),this.game=t,this.data=new jye(this),this.on("setdata",this.setDataHandler,this),this.on("changedata",this.changeDataHandler,this),this.hasLoaded=!1,this.dataLocked=!1,this.supportedAPIs=[],this.entryPoint="",this.entryPointData=null,this.contextID=null,this.contextType=null,this.locale=null,this.platform=null,this.version=null,this.playerID=null,this.playerName=null,this.playerPhotoURL=null,this.playerCanSubscribeBot=!1,this.paymentsReady=!1,this.catalog=[],this.purchases=[],this.leaderboards={},this.ads=[]},setDataHandler:function(e,t,i){if(!this.dataLocked){var r={};r[t]=i;var s=this;FBInstant.player.setDataAsync(r).then(function(){s.emit("savedata",r)})}},changeDataHandler:function(e,t,i){if(!this.dataLocked){var r={};r[t]=i;var s=this;FBInstant.player.setDataAsync(r).then(function(){s.emit("savedata",r)})}},showLoadProgress:function(e){return e.load.on("progress",function(t){this.hasLoaded||FBInstant.setLoadingProgress(t*100)},this),e.load.on("complete",function(){this.hasLoaded||(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStartedHandler.bind(this)))},this),this},gameStarted:function(){this.hasLoaded?this.gameStartedHandler():(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStartedHandler.bind(this)))},gameStartedHandler:function(){var e=FBInstant.getSupportedAPIs(),t={},i=function(s){return s[1].toUpperCase()};e.forEach(function(s){s=s.replace(/\../g,i),t[s]=!0}),this.supportedAPIs=t,this.getID(),this.getType(),this.getLocale(),this.getPlatform(),this.getSDKVersion(),this.getPlayerID(),this.getPlayerName(),this.getPlayerPhotoURL();var r=this;FBInstant.onPause(function(){r.emit("pause")}),FBInstant.getEntryPointAsync().then(function(s){r.entryPoint=s,r.entryPointData=FBInstant.getEntryPointData(),r.emit("startgame")}).catch(function(s){console.warn(s)}),this.supportedAPIs.paymentsPurchaseAsync&&FBInstant.payments.onReady(function(){r.paymentsReady=!0}).catch(function(s){console.warn(s)})},checkAPI:function(e){return!!this.supportedAPIs[e]},getID:function(){return!this.contextID&&this.supportedAPIs.contextGetID&&(this.contextID=FBInstant.context.getID()),this.contextID},getType:function(){return!this.contextType&&this.supportedAPIs.contextGetType&&(this.contextType=FBInstant.context.getType()),this.contextType},getLocale:function(){return!this.locale&&this.supportedAPIs.getLocale&&(this.locale=FBInstant.getLocale()),this.locale},getPlatform:function(){return!this.platform&&this.supportedAPIs.getPlatform&&(this.platform=FBInstant.getPlatform()),this.platform},getSDKVersion:function(){return!this.version&&this.supportedAPIs.getSDKVersion&&(this.version=FBInstant.getSDKVersion()),this.version},getPlayerID:function(){return!this.playerID&&this.supportedAPIs.playerGetID&&(this.playerID=FBInstant.player.getID()),this.playerID},getPlayerName:function(){return!this.playerName&&this.supportedAPIs.playerGetName&&(this.playerName=FBInstant.player.getName()),this.playerName},getPlayerPhotoURL:function(){return!this.playerPhotoURL&&this.supportedAPIs.playerGetPhoto&&(this.playerPhotoURL=FBInstant.player.getPhoto()),this.playerPhotoURL},loadPlayerPhoto:function(e,t){return this.playerPhotoURL&&(e.load.setCORS("anonymous"),e.load.image(t,this.playerPhotoURL),e.load.once("filecomplete-image-"+t,function(){this.emit("photocomplete",t)},this),e.load.start()),this},canSubscribeBot:function(){if(this.supportedAPIs.playerCanSubscribeBotAsync){var e=this;FBInstant.player.canSubscribeBotAsync().then(function(){e.playerCanSubscribeBot=!0,e.emit("cansubscribebot")}).catch(function(t){e.emit("cansubscribebotfail",t)})}else this.emit("cansubscribebotfail");return this},subscribeBot:function(){if(this.playerCanSubscribeBot){var e=this;FBInstant.player.subscribeBotAsync().then(function(){e.emit("subscribebot")}).catch(function(t){e.emit("subscribebotfail",t)})}else this.emit("subscribebotfail");return this},getData:function(e){if(!this.checkAPI("playerGetDataAsync"))return this;Array.isArray(e)||(e=[e]);var t=this;return FBInstant.player.getDataAsync(e).then(function(i){t.dataLocked=!0;for(var r in i)t.data.set(r,i[r]);t.dataLocked=!1,t.emit("getdata",i)}),this},saveData:function(e){if(!this.checkAPI("playerSetDataAsync"))return this;var t=this;return FBInstant.player.setDataAsync(e).then(function(){t.emit("savedata",e)}).catch(function(i){t.emit("savedatafail",i)}),this},flushData:function(){if(!this.checkAPI("playerFlushDataAsync"))return this;var e=this;return FBInstant.player.flushDataAsync().then(function(){e.emit("flushdata")}).catch(function(t){e.emit("flushdatafail",t)}),this},getStats:function(e){if(!this.checkAPI("playerGetStatsAsync"))return this;var t=this;return FBInstant.player.getStatsAsync(e).then(function(i){t.emit("getstats",i)}).catch(function(i){t.emit("getstatsfail",i)}),this},saveStats:function(e){if(!this.checkAPI("playerSetStatsAsync"))return this;var t={};for(var i in e)typeof e[i]=="number"&&(t[i]=e[i]);var r=this;return FBInstant.player.setStatsAsync(t).then(function(){r.emit("savestats",t)}).catch(function(s){r.emit("savestatsfail",s)}),this},incStats:function(e){if(!this.checkAPI("playerIncrementStatsAsync"))return this;var t={};for(var i in e)typeof e[i]=="number"&&(t[i]=e[i]);var r=this;return FBInstant.player.incrementStatsAsync(t).then(function(s){r.emit("incstats",s)}).catch(function(s){r.emit("incstatsfail",s)}),this},saveSession:function(e){if(!this.checkAPI("setSessionData"))return this;var t=JSON.stringify(e);return t.length<=1e3?FBInstant.setSessionData(e):console.warn("Session data too long. Max 1000 chars."),this},openShare:function(e,t,i,r){return this._share("SHARE",e,t,i,r)},openInvite:function(e,t,i,r){return this._share("INVITE",e,t,i,r)},openRequest:function(e,t,i,r){return this._share("REQUEST",e,t,i,r)},openChallenge:function(e,t,i,r){return this._share("CHALLENGE",e,t,i,r)},_share:function(e,t,i,r,s){if(!this.checkAPI("shareAsync"))return this;if(s===void 0&&(s={}),i)var n=this.game.textures.getBase64(i,r);var a={intent:e,image:n,text:t,data:s},h=this;return FBInstant.shareAsync(a).then(function(){h.emit("resume")}),this},isSizeBetween:function(e,t){return this.checkAPI("contextIsSizeBetween")?FBInstant.context.isSizeBetween(e,t):this},switchContext:function(e){if(!this.checkAPI("contextSwitchAsync"))return this;if(e!==this.contextID){var t=this;FBInstant.context.switchAsync(e).then(function(){t.contextID=FBInstant.context.getID(),t.emit("switch",t.contextID)}).catch(function(i){t.emit("switchfail",i)})}return this},chooseContext:function(e){if(!this.checkAPI("contextChooseAsync"))return this;var t=this;return FBInstant.context.chooseAsync(e).then(function(){t.contextID=FBInstant.context.getID(),t.emit("choose",t.contextID)}).catch(function(i){t.emit("choosefail",i)}),this},createContext:function(e){if(!this.checkAPI("contextCreateAsync"))return this;var t=this;return FBInstant.context.createAsync(e).then(function(){t.contextID=FBInstant.context.getID(),t.emit("create",t.contextID)}).catch(function(i){t.emit("createfail",i)}),this},getPlayers:function(){if(!this.checkAPI("playerGetConnectedPlayersAsync"))return this;var e=this;return FBInstant.player.getConnectedPlayersAsync().then(function(t){e.emit("players",t)}).catch(function(t){e.emit("playersfail",t)}),this},getCatalog:function(){if(!this.paymentsReady)return this;var e=this,t=this.catalog;return FBInstant.payments.getCatalogAsync().then(function(i){t=[],i.forEach(function(r){t.push(tTe(r))}),e.emit("getcatalog",t)}).catch(function(i){e.emit("getcatalogfail",i)}),this},getProduct:function(e){for(var t=0;t<this.catalog.length;t++)if(this.catalog[t].productID===e)return this.catalog[t];return null},purchase:function(e,t){if(!this.paymentsReady)return this;var i={productID:e};t&&(i.developerPayload=t);var r=this;return FBInstant.payments.purchaseAsync(i).then(function(s){var n=YU(s);r.emit("purchase",n)}).catch(function(s){r.emit("purchasefail",s)}),this},getPurchases:function(){if(!this.paymentsReady)return this;var e=this,t=this.purchases;return FBInstant.payments.getPurchasesAsync().then(function(i){t=[],i.forEach(function(r){t.push(YU(r))}),e.emit("getpurchases",t)}).catch(function(i){e.emit("getpurchasesfail",i)}),this},consumePurchase:function(e){if(!this.paymentsReady)return this;var t=this;return FBInstant.payments.consumePurchaseAsync(e).then(function(){t.emit("consumepurchase",e)}).catch(function(i){t.emit("consumepurchasefail",i)}),this},update:function(e,t,i,r,s,n){return this._update("CUSTOM",e,t,i,r,s,n)},updateLeaderboard:function(e,t,i,r,s,n){return this._update("LEADERBOARD",e,t,i,r,s,n)},_update:function(e,t,i,r,s,n,a){if(!this.checkAPI("shareAsync"))return this;if(t===void 0&&(t=""),typeof i=="string"&&(i={default:i}),a===void 0&&(a={}),r)var h=this.game.textures.getBase64(r,s);var o={action:e,cta:t,image:h,text:i,template:n,data:a,strategy:"IMMEDIATE",notification:"NO_PUSH"},u=this;return FBInstant.updateAsync(o).then(function(){u.emit("update")}).catch(function(f){u.emit("updatefail",f)}),this},switchGame:function(e,t){if(!this.checkAPI("switchGameAsync"))return this;if(t){var i=JSON.stringify(t);if(i.length>1e3)return console.warn("Switch Game data too long. Max 1000 chars."),this}var r=this;return FBInstant.switchGameAsync(e,t).then(function(){r.emit("switchgame",e)}).catch(function(s){r.emit("switchgamefail",s)}),this},createShortcut:function(){var e=this;return FBInstant.canCreateShortcutAsync().then(function(t){t&&FBInstant.createShortcutAsync().then(function(){e.emit("shortcutcreated")}).catch(function(i){e.emit("shortcutfailed",i)})}),this},quit:function(){FBInstant.quit()},log:function(e,t,i){return this.checkAPI("logEvent")?(i===void 0&&(i={}),e.length>=2&&e.length<=40&&FBInstant.logEvent(e,parseFloat(t),i),this):this},preloadAds:function(e){if(!this.checkAPI("getInterstitialAdAsync"))return this;Array.isArray(e)||(e=[e]);var t,i=this,r=0;for(t=0;t<this.ads.length;t++)this.ads[t].shown||r++;if(r+e.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(t=0;t<e.length;t++){var s=e[t],n;FBInstant.getInterstitialAdAsync(s).then(function(a){return n=a,a.loadAsync()}).then(function(){var a=kU(s,n,!1);i.ads.push(a),i.emit("adloaded",a)}).catch(function(a){a.code==="ADS_NO_FILL"?i.emit("adsnofill",s):a.code==="ADS_FREQUENT_LOAD"?i.emit("adsfrequentload",s):console.warn(a)})}return this},preloadVideoAds:function(e){if(!this.checkAPI("getRewardedVideoAsync"))return this;Array.isArray(e)||(e=[e]);var t,i=this,r=0;for(t=0;t<this.ads.length;t++)this.ads[t].shown||r++;if(r+e.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(t=0;t<e.length;t++){var s=e[t],n;FBInstant.getRewardedVideoAsync(s).then(function(a){return n=a,a.loadAsync()}).then(function(){var a=kU(s,n,!0);i.ads.push(a),i.emit("adloaded",a)}).catch(function(a){a.code==="ADS_NO_FILL"?i.emit("adsnofill",s):a.code==="ADS_FREQUENT_LOAD"?i.emit("adsfrequentload",s):console.warn(a)})}return this},showAd:function(e){for(var t=this,i=0;i<this.ads.length;i++){var r=this.ads[i];if(r.placementID===e&&!r.shown){r.instance.showAsync().then(function(){r.shown=!0,t.emit("adfinished",r)}).catch(function(s){s.code==="ADS_NOT_LOADED"?t.emit("adsnotloaded",r):s.code==="RATE_LIMITED"&&t.emit("adratelimited",r),t.emit("adshowerror",s,r)});break}}return this},showVideo:function(e){for(var t=this,i=0;i<this.ads.length;i++){var r=this.ads[i];if(r.placementID===e&&r.video&&!r.shown){r.instance.showAsync().then(function(){r.shown=!0,t.emit("adfinished",r)}).catch(function(s){s.code==="ADS_NOT_LOADED"?t.emit("adsnotloaded",r):s.code==="RATE_LIMITED"&&t.emit("adratelimited",r),t.emit("adshowerror",s,r)});break}}return this},matchPlayer:function(e,t){if(e===void 0&&(e=null),t===void 0&&(t=!1),!this.checkAPI("matchPlayerAsync"))return this;var i=this;return FBInstant.matchPlayerAsync(e,t).then(function(){i.getID(),i.getType(),i.emit("matchplayer",i.contextID,i.contextType)}),this},getLeaderboard:function(e){if(!this.checkAPI("getLeaderboardAsync"))return this;var t=this;return FBInstant.getLeaderboardAsync(e).then(function(i){var r=new eTe(t,i);t.leaderboards[e]=r,t.emit("getleaderboard",r)}).catch(function(i){console.warn(i)}),this},destroy:function(){FBInstant.quit(),this.data.destroy(),this.removeAllListeners(),this.catalog=[],this.purchases=[],this.leaderboards=[],this.ads=[],this.game=null}});XU.exports=iTe});var ZU=l((U7e,KU)=>{var rTe=dh(),sTe=MD(),nTe=lv(),aTe=Ot(),hTe=C(),oTe=dc(),uTe=OD(),lTe=Jc(),fTe=Js(),dTe=Qc(),vTe=Vv(),cTe=dp(),pTe=ue(),tt=Xe(),mTe=Mp(),gTe=ct(),xTe=Lp(),yTe=Fp(),TTe=zp(),ETe=In(),STe=Kp(),_Te=jc(),wTe=ep();WU=bU();var WU;HU=VU();var HU,CTe=new hTe({initialize:function(t){this.config=new oTe(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new pTe,this.anims=new sTe(this),this.textures=new STe(this),this.cache=new nTe(this),this.registry=new fTe(this),this.input=new mTe(this,this.config),this.scene=new TTe(this,this.config.sceneConfig),this.device=vTe,this.scale=new yTe(this,this.config),this.sound=null,this.sound=WU.create(this),this.loop=new _Te(this,this.config.fps),this.plugins=new xTe(this,this.config),this.facebook=new HU(this),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,cTe(this.boot.bind(this))},boot:function(){if(!gTe.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),lTe(this),uTe(this),dTe(this),rTe(this.canvas,this.config.parent),this.textures.once(ETe.READY,this.texturesReady,this),this.events.emit(tt.BOOT)},texturesReady:function(){this.events.emit(tt.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),wTe(this);var e=this.events;e.on(tt.HIDDEN,this.onHidden,this),e.on(tt.VISIBLE,this.onVisible,this),e.on(tt.BLUR,this.onBlur,this),e.on(tt.FOCUS,this.onFocus,this)},step:function(e,t){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(tt.PRE_STEP,e,t),i.emit(tt.STEP,e,t),this.scene.update(e,t),i.emit(tt.POST_STEP,e,t);var r=this.renderer;r.preRender(),i.emit(tt.PRE_RENDER,r,e,t),this.scene.render(r),r.postRender(),i.emit(tt.POST_RENDER,r,e,t)},headlessStep:function(e,t){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(tt.PRE_STEP,e,t),i.emit(tt.STEP,e,t),this.scene.update(e,t),i.emit(tt.POST_STEP,e,t),i.emit(tt.PRE_RENDER),i.emit(tt.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(tt.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(tt.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(e,t){t===void 0&&(t=!1),this.pendingDestroy=!0,this.removeCanvas=e,this.noReturn=t},runDestroy:function(){this.scene.destroy(),this.events.emit(tt.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(aTe.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});KU.exports=CTe});var ju=l((k7e,JU)=>{var RTe=function(e){if(!Array.isArray(e)||e.length<2||!Array.isArray(e[0]))return!1;for(var t=e[0].length,i=1;i<e.length;i++)if(e[i].length!==t)return!1;return!0};JU.exports=RTe});var $U=l((z7e,QU)=>{var qTe=Mu(),ATe=ju(),bTe=function(e){var t="";if(!ATe(e))return t;for(var i=0;i<e.length;i++){for(var r=0;r<e[i].length;r++){var s=e[i][r].toString();s!=="undefined"?t+=qTe(s,2):t+="?",r<e[i].length-1&&(t+=" |")}if(i<e.length-1){t+=`
`;for(var n=0;n<e[i].length;n++)t+="---",n<e[i].length-1&&(t+="+");t+=`
`}}return t};QU.exports=bTe});var ek=l((Y7e,jU)=>{var PTe=function(e){return e.reverse()};jU.exports=PTe});var ik=l((X7e,tk)=>{var MTe=function(e){for(var t=0;t<e.length;t++)e[t].reverse();return e};tk.exports=MTe});var jp=l((V7e,rk)=>{var LTe=function(e){for(var t=e.length,i=e[0].length,r=new Array(i),s=0;s<i;s++){r[s]=new Array(t);for(var n=t-1;n>-1;n--)r[s][n]=e[n][s]}return r};rk.exports=LTe});var Sh=l((W7e,nk)=>{var OTe=ju(),sk=jp(),FTe=function(e,t){if(t===void 0&&(t=90),!OTe(e))return null;if(typeof t!="string"&&(t=(t%360+360)%360),t===90||t===-270||t==="rotateLeft")e=sk(e),e.reverse();else if(t===-90||t===270||t==="rotateRight")e.reverse(),e=sk(e);else if(Math.abs(t)===180||t==="rotate180"){for(var i=0;i<e.length;i++)e[i].reverse();e.reverse()}return e};nk.exports=FTe});var hk=l((H7e,ak)=>{var DTe=Sh(),ITe=function(e){return DTe(e,180)};ak.exports=ITe});var uk=l((K7e,ok)=>{var NTe=Sh(),GTe=function(e){return NTe(e,90)};ok.exports=GTe});var fk=l((Z7e,lk)=>{var BTe=Sh(),UTe=function(e){return BTe(e,-90)};lk.exports=UTe});var pk=l((J7e,ck)=>{var dk=Fo(),vk=Do(),kTe=function(e,t,i){if(t===void 0&&(t=0),i===void 0&&(i=0),i!==0&&(i<0?dk(e,Math.abs(i)):vk(e,i)),t!==0)for(var r=0;r<e.length;r++){var s=e[r];t<0?dk(s,Math.abs(t)):vk(s,t)}return e};ck.exports=kTe});var gk=l((Q7e,mk)=>{mk.exports={CheckMatrix:ju(),MatrixToString:$U(),ReverseColumns:ek(),ReverseRows:ik(),Rotate180:hk(),RotateLeft:uk(),RotateMatrix:Sh(),RotateRight:fk(),Translate:pk(),TransposeMatrix:jp()}});var yk=l(($7e,xk)=>{var zTe=function(e,t,i,r,s){if(s===void 0&&(s=e),i>0){var n=i-e.length;if(n<=0)return null}if(!Array.isArray(t))return e.indexOf(t)===-1?(e.push(t),r&&r.call(s,t),t):null;for(var a=t.length-1;a>=0;)e.indexOf(t[a])!==-1&&t.splice(a,1),a--;if(a=t.length,a===0)return null;i>0&&a>n&&(t.splice(n),a=n);for(var h=0;h<a;h++){var o=t[h];e.push(o),r&&r.call(s,o)}return t};xk.exports=zTe});var Ek=l((j7e,Tk)=>{var YTe=function(e,t,i,r,s,n){if(i===void 0&&(i=0),n===void 0&&(n=e),r>0){var a=r-e.length;if(a<=0)return null}if(!Array.isArray(t))return e.indexOf(t)===-1?(e.splice(i,0,t),s&&s.call(n,t),t):null;for(var h=t.length-1;h>=0;)e.indexOf(t[h])!==-1&&t.pop(),h--;if(h=t.length,h===0)return null;r>0&&h>a&&(t.splice(a),h=a);for(var o=h-1;o>=0;o--){var u=t[o];e.splice(i,0,u),s&&s.call(n,u)}return t};Tk.exports=YTe});var _k=l((eKe,Sk)=>{var XTe=function(e,t){var i=e.indexOf(t);return i!==-1&&i<e.length&&(e.splice(i,1),e.push(t)),t};Sk.exports=XTe});var Ck=l((tKe,wk)=>{var VTe=ls(),WTe=function(e,t,i,r,s){r===void 0&&(r=0),s===void 0&&(s=e.length);var n=0;if(VTe(e,r,s))for(var a=r;a<s;a++){var h=e[a];h[t]===i&&n++}return n};wk.exports=WTe});var qk=l((iKe,Rk)=>{var HTe=function(e,t,i){var r,s=[null];for(r=3;r<arguments.length;r++)s.push(arguments[r]);for(r=0;r<e.length;r++)s[0]=e[r],t.apply(i,s);return e};Rk.exports=HTe});var bk=l((rKe,Ak)=>{var KTe=ls(),ZTe=function(e,t,i,r,s){if(r===void 0&&(r=0),s===void 0&&(s=e.length),KTe(e,r,s)){var n,a=[null];for(n=5;n<arguments.length;n++)a.push(arguments[n]);for(n=r;n<s;n++)a[0]=e[n],t.apply(i,a)}return e};Ak.exports=ZTe});var em=l((sKe,Pk)=>{var JTe=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=e.length);var r=t+Math.floor(Math.random()*i);return e[r]===void 0?null:e[r]};Pk.exports=JTe});var Lk=l((nKe,Mk)=>{var QTe=function(e,t){var i=e.indexOf(t);if(i>0){var r=e[i-1],s=e.indexOf(r);e[i]=r,e[s]=t}return e};Mk.exports=QTe});var Fk=l((aKe,Ok)=>{var $Te=function(e,t,i){var r=e.indexOf(t);if(r===-1||i<0||i>=e.length)throw new Error("Supplied index out of bounds");return r!==i&&(e.splice(r,1),e.splice(i,0,t)),t};Ok.exports=$Te});var Ik=l((hKe,Dk)=>{var jTe=function(e,t){var i=e.indexOf(t);if(i!==-1&&i<e.length-1){var r=e[i+1],s=e.indexOf(r);e[i]=r,e[s]=t}return e};Dk.exports=jTe});var Gk=l((oKe,Nk)=>{var eEe=function(e,t,i){if(t===i)return e;var r=e.indexOf(t),s=e.indexOf(i);if(r<0||s<0)throw new Error("Supplied items must be elements of the same array");return r>s||(e.splice(r,1),s===e.length-1?e.push(t):e.splice(s,0,t)),e};Nk.exports=eEe});var Uk=l((uKe,Bk)=>{var tEe=function(e,t,i){if(t===i)return e;var r=e.indexOf(t),s=e.indexOf(i);if(r<0||s<0)throw new Error("Supplied items must be elements of the same array");return r<s||(e.splice(r,1),s===0?e.unshift(t):e.splice(s,0,t)),e};Bk.exports=tEe});var zk=l((lKe,kk)=>{var iEe=nc(),rEe=function(e,t,i){e===void 0&&(e=0),t===void 0&&(t=null),i===void 0&&(i=1),t===null&&(t=e,e=0);for(var r=[],s=Math.max(iEe((t-e)/(i||1)),0),n=0;n<s;n++)r.push(e),e+=i;return r};kk.exports=rEe});var tm=l((fKe,Xk)=>{function _h(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function sEe(e,t){return e<t?-1:e>t?1:0}var Yk=function(e,t,i,r,s){for(i===void 0&&(i=0),r===void 0&&(r=e.length-1),s===void 0&&(s=sEe);r>i;){if(r-i>600){var n=r-i+1,a=t-i+1,h=Math.log(n),o=.5*Math.exp(2*h/3),u=.5*Math.sqrt(h*o*(n-o)/n)*(a-n/2<0?-1:1),f=Math.max(i,Math.floor(t-a*o/n+u)),d=Math.min(r,Math.floor(t+(n-a)*o/n+u));Yk(e,t,f,d,s)}var v=e[t],c=i,p=r;for(_h(e,i,t),s(e[r],v)>0&&_h(e,i,r);c<p;){for(_h(e,c,p),c++,p--;s(e[c],v)<0;)c++;for(;s(e[p],v)>0;)p--}s(e[i],v)===0?_h(e,i,p):(p++,_h(e,p,r)),p<=t&&(i=p+1),t<=p&&(r=p-1)}};Xk.exports=Yk});var im=l((dKe,Wk)=>{var ta=he(),Vk=Bo(),nEe=function(e,t,i){for(var r=[],s=0;s<e.length;s++)for(var n=0;n<t.length;n++)for(var a=0;a<i;a++)r.push({a:e[s],b:t[n]});return r},aEe=function(e,t,i){var r=ta(i,"max",0),s=ta(i,"qty",1),n=ta(i,"random",!1),a=ta(i,"randomB",!1),h=ta(i,"repeat",0),o=ta(i,"yoyo",!1),u=[];if(a&&Vk(t),h===-1)if(r===0)h=0;else{var f=e.length*t.length*s;o&&(f*=2),h=Math.ceil(r/f)}for(var d=0;d<=h;d++){var v=nEe(e,t,s);n&&Vk(v),u=u.concat(v),o&&(v.reverse(),u=u.concat(v))}return r&&u.splice(r),u};Wk.exports=aEe});var Kk=l((vKe,Hk)=>{var hEe=Zs(),oEe=function(e,t,i,r){if(r===void 0&&(r=e),t<0||t>e.length-1)throw new Error("Index out of bounds");var s=hEe(e,t);return i&&i.call(r,s),s};Hk.exports=oEe});var Jk=l((cKe,Zk)=>{var uEe=ls(),lEe=function(e,t,i,r,s){if(t===void 0&&(t=0),i===void 0&&(i=e.length),s===void 0&&(s=e),uEe(e,t,i)){var n=i-t,a=e.splice(t,n);if(r)for(var h=0;h<a.length;h++){var o=a[h];r.call(s,o)}return a}else return[]};Zk.exports=lEe});var $k=l((pKe,Qk)=>{var fEe=Zs(),dEe=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=e.length);var r=t+Math.floor(Math.random()*i);return fEe(e,r)};Qk.exports=dEe});var ez=l((mKe,jk)=>{var vEe=function(e,t,i){var r=e.indexOf(t),s=e.indexOf(i);return r!==-1&&s===-1?(e[r]=i,!0):!1};jk.exports=vEe});var iz=l((gKe,tz)=>{var cEe=function(e,t){var i=e.indexOf(t);return i!==-1&&i>0&&(e.splice(i,1),e.unshift(t)),t};tz.exports=cEe});var sz=l((xKe,rz)=>{var pEe=ls(),mEe=function(e,t,i,r,s){if(r===void 0&&(r=0),s===void 0&&(s=e.length),pEe(e,r,s))for(var n=r;n<s;n++){var a=e[n];a.hasOwnProperty(t)&&(a[t]=i)}return e};rz.exports=mEe});var vs=l((yKe,az)=>{function gEe(e,t){return String(e).localeCompare(t)}function xEe(e,t){var i=e.length;if(i<=1)return e;for(var r=new Array(i),s=1;s<i;s*=2){nz(e,t,s,r);var n=e;e=r,r=n}return e}function nz(e,t,i,r){var s=e.length,n=0,a=i*2,h,o,u,f,d;for(h=0;h<s;h+=a)for(o=h+i,u=o+i,o>s&&(o=s),u>s&&(u=s),f=h,d=o;;)if(f<o&&d<u)t(e[f],e[d])<=0?r[n++]=e[f++]:r[n++]=e[d++];else if(f<o)r[n++]=e[f++];else if(d<u)r[n++]=e[d++];else break}var yEe=function(e,t){t===void 0&&(t=gEe);var i=xEe(e,t);return i!==e&&nz(i,null,e.length,e),e};az.exports=yEe});var oz=l((TKe,hz)=>{var TEe=function(e,t,i){if(t===i)return e;var r=e.indexOf(t),s=e.indexOf(i);if(r<0||s<0)throw new Error("Supplied items must be elements of the same array");return e[r]=i,e[s]=t,e};hz.exports=TEe});var el=l((EKe,uz)=>{uz.exports={Matrix:gk(),Add:yk(),AddAt:Ek(),BringToTop:_k(),CountAllMatching:Ck(),Each:qk(),EachInRange:bk(),FindClosestInSorted:Ep(),GetAll:Vu(),GetFirst:Zp(),GetRandom:em(),MoveDown:Lk(),MoveTo:Fk(),MoveUp:Ik(),MoveAbove:Gk(),MoveBelow:Uk(),NumberArray:wp(),NumberArrayStep:zk(),QuickSelect:tm(),Range:im(),Remove:tn(),RemoveAt:Kk(),RemoveBetween:Jk(),RemoveRandomElement:$k(),Replace:ez(),RotateLeft:Fo(),RotateRight:Do(),SafeRange:ls(),SendToBack:iz(),SetAll:sz(),Shuffle:Bo(),SortByDigits:Sp(),SpliceOne:Zs(),StableSort:vs(),Swap:oz()}});var ia=l((SKe,fz)=>{var Ee=el(),EEe=C(),lz=B(),SEe=vs(),_Ee=new EEe({initialize:function(t){this.parent=t,this.list=[],this.position=0,this.addCallback=lz,this.removeCallback=lz,this._sortKey=""},add:function(e,t){return t?Ee.Add(this.list,e):Ee.Add(this.list,e,0,this.addCallback,this)},addAt:function(e,t,i){return i?Ee.AddAt(this.list,e,t):Ee.AddAt(this.list,e,t,0,this.addCallback,this)},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,t){return e?(t===void 0&&(t=function(i,r){return i[e]-r[e]}),SEe(this.list,t),this):this},getByName:function(e){return Ee.GetFirst(this.list,"name",e)},getRandom:function(e,t){return Ee.GetRandom(this.list,e,t)},getFirst:function(e,t,i,r){return Ee.GetFirst(this.list,e,t,i,r)},getAll:function(e,t,i,r){return Ee.GetAll(this.list,e,t,i,r)},count:function(e,t){return Ee.CountAllMatching(this.list,e,t)},swap:function(e,t){Ee.Swap(this.list,e,t)},moveTo:function(e,t){return Ee.MoveTo(this.list,e,t)},moveAbove:function(e,t){return Ee.MoveAbove(this.list,e,t)},moveBelow:function(e,t){return Ee.MoveBelow(this.list,e,t)},remove:function(e,t){return t?Ee.Remove(this.list,e):Ee.Remove(this.list,e,this.removeCallback,this)},removeAt:function(e,t){return t?Ee.RemoveAt(this.list,e):Ee.RemoveAt(this.list,e,this.removeCallback,this)},removeBetween:function(e,t,i){return i?Ee.RemoveBetween(this.list,e,t):Ee.RemoveBetween(this.list,e,t,this.removeCallback,this)},removeAll:function(e){for(var t=this.list.length;t--;)this.remove(this.list[t],e);return this},bringToTop:function(e){return Ee.BringToTop(this.list,e)},sendToBack:function(e){return Ee.SendToBack(this.list,e)},moveUp:function(e){return Ee.MoveUp(this.list,e),e},moveDown:function(e){return Ee.MoveDown(this.list,e),e},reverse:function(){return this.list.reverse(),this},shuffle:function(){return Ee.Shuffle(this.list),this},replace:function(e,t){return Ee.Replace(this.list,e,t)},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,t,i,r){return Ee.SetAll(this.list,e,t,i,r),this},each:function(e,t){for(var i=[null],r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<this.list.length;r++)i[0]=this.list[r],e.apply(t,i)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});fz.exports=_Ee});var mz=l((_Ke,pz)=>{var wEe=C(),dz=ia(),CEe=ct(),vz=Vr(),cs=Ge(),REe=vs(),cz=new wEe({Extends:dz,initialize:function(t){dz.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(cs.BOOT,this.boot,this),this.events.on(cs.START,this.start,this)},boot:function(){this.events.once(cs.DESTROY,this.destroy,this)},addChildCallback:function(e){e.displayList&&e.displayList!==this&&e.removeFromDisplayList(),e.displayList||(this.queueDepthSort(),e.displayList=this,e.emit(vz.ADDED_TO_SCENE,e,this.scene),this.events.emit(cs.ADDED_TO_SCENE,e,this.scene))},removeChildCallback:function(e){this.queueDepthSort(),e.displayList=null,e.emit(vz.REMOVED_FROM_SCENE,e,this.scene),this.events.emit(cs.REMOVED_FROM_SCENE,e,this.scene)},start:function(){this.events.once(cs.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(REe(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(e,t){return e._depth-t._depth},getChildren:function(){return this.list},shutdown:function(){for(var e=this.list,t=e.length;t--;)e[t].destroy(!0);e.length=0,this.events.off(cs.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(cs.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});CEe.register("DisplayList",cz,"displayList");pz.exports=cz});var xz=l((wKe,gz)=>{gz.exports="add"});var Tz=l((CKe,yz)=>{yz.exports="remove"});var rm=l((RKe,Ez)=>{Ez.exports={PROCESS_QUEUE_ADD:xz(),PROCESS_QUEUE_REMOVE:Tz()}});var sm=l((qKe,wz)=>{var qEe=C(),Sz=ue(),_z=rm(),AEe=new qEe({Extends:Sz,initialize:function(){Sz.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(e){return this._pending.push(e),this._toProcess++,e},remove:function(e){return this._destroy.push(e),this._toProcess++,e},removeAll:function(){for(var e=this._active,t=this._destroy,i=e.length;i--;)t.push(e[i]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var e=this._destroy,t=this._active,i,r;for(i=0;i<e.length;i++){r=e[i];var s=t.indexOf(r);s!==-1&&(t.splice(s,1),this.emit(_z.PROCESS_QUEUE_REMOVE,r))}for(e.length=0,e=this._pending,i=0;i<e.length;i++)r=e[i],(!this.checkQueue||this.checkQueue&&t.indexOf(r)===-1)&&(t.push(r),this.emit(_z.PROCESS_QUEUE_ADD,r));return e.length=0,this._toProcess=0,t},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});wz.exports=AEe});var Az=l((AKe,qz)=>{var bEe=C(),Cz=sm(),PEe=ct(),ir=Ge(),Rz=new bEe({Extends:Cz,initialize:function(t){Cz.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(ir.BOOT,this.boot,this),t.sys.events.on(ir.START,this.start,this)},boot:function(){this.systems.events.once(ir.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(ir.PRE_UPDATE,this.update,this),e.on(ir.UPDATE,this.sceneUpdate,this),e.once(ir.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(e,t){for(var i=this._active,r=i.length,s=0;s<r;s++){var n=i[s];n.active&&n.preUpdate.call(n,e,t)}},shutdown:function(){for(var e=this._active.length;e--;)this._active[e].destroy(!0);for(e=this._pending.length;e--;)this._pending[e].destroy(!0);for(e=this._destroy.length;e--;)this._destroy[e].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var t=this.systems.events;t.off(ir.PRE_UPDATE,this.update,this),t.off(ir.UPDATE,this.sceneUpdate,this),t.off(ir.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(ir.START,this.start,this),this.scene=null,this.systems=null}});PEe.register("UpdateList",Rz,"updateList");qz.exports=Rz});var Me=l((bKe,Lz)=>{var nm=Tt(),bz=new nm,Pz=new nm,Mz=new nm,MEe={camera:bz,sprite:Pz,calc:Mz},LEe=function(e,t,i){var r=bz,s=Pz,n=Mz;return s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),r.copyFrom(t.matrix),i?(r.multiplyWithOffset(i,-t.scrollX*e.scrollFactorX,-t.scrollY*e.scrollFactorY),s.e=e.x,s.f=e.y):(s.e-=t.scrollX*e.scrollFactorX,s.f-=t.scrollY*e.scrollFactorY),r.multiply(s,n),MEe};Lz.exports=LEe});var we=l((PKe,Oz)=>{var am=uu(),OEe=he(),FEe=function(e,t,i){var r=OEe(e,t,null);if(r===null)return i;if(Array.isArray(r))return am.RND.pick(r);if(typeof r=="object"){if(r.hasOwnProperty("randInt"))return am.RND.integerInRange(r.randInt[0],r.randInt[1]);if(r.hasOwnProperty("randFloat"))return am.RND.realInRange(r.randFloat[0],r.randFloat[1])}else if(typeof r=="function")return r(t);return r};Oz.exports=FEe});var gt=l((MKe,Fz)=>{var DEe=_i(),We=we(),IEe=function(e,t,i){t.x=We(i,"x",0),t.y=We(i,"y",0),t.depth=We(i,"depth",0),t.flipX=We(i,"flipX",!1),t.flipY=We(i,"flipY",!1);var r=We(i,"scale",null);typeof r=="number"?t.setScale(r):r!==null&&(t.scaleX=We(r,"x",1),t.scaleY=We(r,"y",1));var s=We(i,"scrollFactor",null);typeof s=="number"?t.setScrollFactor(s):s!==null&&(t.scrollFactorX=We(s,"x",1),t.scrollFactorY=We(s,"y",1)),t.rotation=We(i,"rotation",0);var n=We(i,"angle",null);n!==null&&(t.angle=n),t.alpha=We(i,"alpha",1);var a=We(i,"origin",null);if(typeof a=="number")t.setOrigin(a);else if(a!==null){var h=We(a,"x",.5),o=We(a,"y",.5);t.setOrigin(h,o)}t.blendMode=We(i,"blendMode",DEe.NORMAL),t.visible=We(i,"visible",!0);var u=We(i,"add",!0);return u&&e.sys.displayList.add(t),t.preUpdate&&e.sys.updateList.add(t),t};Fz.exports=IEe});var hm=l((LKe,Dz)=>{var qr=we(),NEe=function(e,t){var i=qr(t,"anims",null);if(i===null)return e;if(typeof i=="string")e.anims.play(i);else if(typeof i=="object"){var r=e.anims,s=qr(i,"key",void 0);if(s){var n=qr(i,"startFrame",void 0),a=qr(i,"delay",0),h=qr(i,"repeat",0),o=qr(i,"repeatDelay",0),u=qr(i,"yoyo",!1),f=qr(i,"play",!1),d=qr(i,"delayedPlay",0),v={key:s,delay:a,repeat:h,repeatDelay:o,yoyo:u,startFrame:n};f?r.play(v):d>0?r.playAfterDelay(v,d):r.load(v)}}return e};Dz.exports=NEe});var Nz=l((OKe,Iz)=>{var GEe=function(e,t,i,r){if(i===void 0&&(i=!1),r===void 0)return r={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},r;var s=e.text,n=s.length,a=e.maxWidth,h=e.wordWrapCharCode,o=Number.MAX_VALUE,u=Number.MAX_VALUE,f=0,d=0,v=e.fontData.chars,c=e.fontData.lineHeight,p=e.letterSpacing,m=0,x=0,g=0,y=null,T=e._align,S=0,E=0,_=e.fontSize/e.fontData.size,w=_*e.scaleX,R=_*e.scaleY,q=null,A=0,b=[],L=Number.MAX_VALUE,M=0,G=0,P=0,D,I=[],F=[],O=null;if(a>0){for(D=0;D<n;D++){if(g=s.charCodeAt(D),g===10){O!==null&&(I.push({word:O.word,i:O.i,x:O.x*w,y:O.y*R,w:O.w*w,h:O.h*R,cr:!0}),O=null),m=0,x+=c,q=null;continue}if(y=v[g],!!y){if(q!==null)var K=y.kerning[A];g===h?O!==null&&(I.push({word:O.word,i:O.i,x:O.x*w,y:O.y*R,w:O.w*w,h:O.h*R,cr:!1}),O=null):(O===null&&(O={word:"",i:D,x:m,y:x,w:0,h:c,cr:!1}),O.word=O.word.concat(s[D]),O.w+=y.xOffset+y.xAdvance+(K!==void 0?K:0)),m+=y.xAdvance+p,q=y,A=g}}O!==null&&I.push({word:O.word,i:O.i,x:O.x*w,y:O.y*R,w:O.w*w,h:O.h*R,cr:!1}),m=0,x=0,q=null,A=0;var H,Y=0,ee=[];for(D=0;D<I.length;D++){var U=I[D],J=U.x,nt=U.x+U.w;if(H){var ve=J-(H.x+H.w);Y=J-(ve+H.w),H=null}var yt=J-Y,_e=nt-Y;yt>a||_e>a?(ee.push(U.i-1),U.cr?(ee.push(U.i+U.word.length),Y=0,H=null):H=U):U.cr&&(ee.push(U.i+U.word.length),Y=0,H=null)}var at=function(pe,Q,zi){return pe.substr(0,Q)+zi+pe.substr(Q+1)};for(D=ee.length-1;D>=0;D--)s=at(s,ee[D],`
`);r.wrappedText=s,n=s.length,I=[],O=null}var Je=0;for(D=0;D<n;D++){if(g=s.charCodeAt(D),g===10){O!==null&&(I.push({word:O.word,i:O.i,x:O.x*w,y:O.y*R,w:O.w*w,h:O.h*R}),O=null),m=0,x+=c,q=null,b[G]=P,P>M&&(M=P),P<L&&(L=P),G++,P=0;continue}if(y=v[g],!!y){if(S=m,E=x,q!==null){var te=y.kerning[A];S+=te!==void 0?te:0}o>S&&(o=S),u>E&&(u=E);var ke=S+y.xAdvance,qe=E+c;f<ke&&(f=ke),d<qe&&(d=qe);var Mt=y.xOffset+y.xAdvance+(te!==void 0?te:0);g===h?O!==null&&(I.push({word:O.word,i:O.i,x:O.x*w,y:O.y*R,w:O.w*w,h:O.h*R}),O=null):(O===null&&(O={word:"",i:Je,x:m,y:x,w:0,h:c}),O.word=O.word.concat(s[D]),O.w+=Mt),F.push({i:Je,char:s[D],code:g,x:(y.xOffset+m)*_,y:(y.yOffset+x)*_,w:y.width*_,h:y.height*_,t:x*_,r:ke*_,b:c*_,line:G,glyph:y}),m+=y.xAdvance+p,q=y,A=g,P=ke*_,Je++}}if(O!==null&&I.push({word:O.word,i:O.i,x:O.x*w,y:O.y*R,w:O.w*w,h:O.h*R}),b[G]=P,P>M&&(M=P),P<L&&(L=P),T>0)for(var lt=0;lt<F.length;lt++){var oe=F[lt];if(T===1){var ze=(M-b[oe.line])/2;oe.x+=ze,oe.r+=ze}else if(T===2){var ft=M-b[oe.line];oe.x+=ft,oe.r+=ft}}var X=r.local,V=r.global,Z=r.lines;return X.x=o*_,X.y=u*_,X.width=f*_,X.height=d*_,V.x=e.x-e._displayOriginX+o*w,V.y=e.y-e._displayOriginY+u*R,V.width=f*w,V.height=d*R,Z.shortest=L,Z.longest=M,Z.lengths=b,t&&(X.x=Math.ceil(X.x),X.y=Math.ceil(X.y),X.width=Math.ceil(X.width),X.height=Math.ceil(X.height),V.x=Math.ceil(V.x),V.y=Math.ceil(V.y),V.width=Math.ceil(V.width),V.height=Math.ceil(V.height),Z.shortest=Math.ceil(L),Z.longest=Math.ceil(M)),i&&(e._displayOriginX=e.originX*X.width,e._displayOriginY=e.originY*X.height,V.x=e.x-e._displayOriginX*e.scaleX,V.y=e.y-e._displayOriginY*e.scaleY,t&&(V.x=Math.ceil(V.x),V.y=Math.ceil(V.y))),r.words=I,r.characters=F,r.lines.height=c,r.scale=_,r.scaleX=e.scaleX,r.scaleY=e.scaleY,r};Iz.exports=GEe});var tl=l((FKe,Gz)=>{function si(e,t){return parseInt(e.getAttribute(t),10)}var BEe=function(e,t,i,r,s){i===void 0&&(i=0),r===void 0&&(r=0);var n=t.cutX,a=t.cutY,h=t.source.width,o=t.source.height,u=t.sourceIndex,f={},d=e.getElementsByTagName("info")[0],v=e.getElementsByTagName("common")[0];f.font=d.getAttribute("face"),f.size=si(d,"size"),f.lineHeight=si(v,"lineHeight")+r,f.chars={};var c=e.getElementsByTagName("char"),p=t!==void 0&&t.trimmed;if(p)var m=t.height,x=t.width;for(var g=0;g<c.length;g++){var y=c[g],T=si(y,"id"),S=String.fromCharCode(T),E=si(y,"x"),_=si(y,"y"),w=si(y,"width"),R=si(y,"height");p&&(E<x&&(x=E),_<m&&(m=_)),p&&m!==0&&x!==0&&(E-=t.x,_-=t.y);var q=(n+E)/h,A=(a+_)/o,b=(n+E+w)/h,L=(a+_+R)/o;if(f.chars[T]={x:E,y:_,width:w,height:R,centerX:Math.floor(w/2),centerY:Math.floor(R/2),xOffset:si(y,"xoffset"),yOffset:si(y,"yoffset"),xAdvance:si(y,"xadvance")+i,data:{},kerning:{},u0:q,v0:A,u1:b,v1:L},s&&w!==0&&R!==0){var M=s.add(S,u,E,_,w,R);M&&M.setUVs(w,R,q,A,b,L)}}var G=e.getElementsByTagName("kerning");for(g=0;g<G.length;g++){var P=G[g],D=si(P,"first"),I=si(P,"second"),F=si(P,"amount");f.chars[I].kerning[D]=F}return f};Gz.exports=BEe});var Uz=l((DKe,Bz)=>{var UEe=tl(),kEe=function(e,t,i,r,s,n,a){var h=e.sys.textures.get(i),o=h.get(r),u=e.sys.cache.xml.get(s);if(o&&u){var f=UEe(u,o,n,a,h);return e.sys.cache.bitmapFont.add(t,{data:f,texture:i,frame:r,fromAtlas:!0}),!0}else return!1};Bz.exports=kEe});var zz=l((IKe,kz)=>{var zEe=function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p){var m=i.x-t.displayOriginX+s,x=i.y-t.displayOriginY+n,g=m+i.w,y=x+i.h,T=a.getXRound(m,x,h),S=a.getYRound(m,x,h),E=a.getXRound(m,y,h),_=a.getYRound(m,y,h),w=a.getXRound(g,y,h),R=a.getYRound(g,y,h),q=a.getXRound(g,x,h),A=a.getYRound(g,x,h);e.batchQuad(t,T,S,E,_,w,R,q,A,r.u0,r.v0,r.u1,r.v1,o,u,f,d,v,c,p)};kz.exports=zEe});var Xz=l((NKe,Yz)=>{var om=zz(),YEe=Me(),XEe=Te(),VEe=function(e,t,i,r){var s=t._text,n=s.length;if(n!==0){i.addToRenderList(t);var a=e.pipelines.set(t.pipeline,t),h=YEe(t,i,r).calc,o=i.roundPixels,u=i.alpha,f=t.charColors,d=t.tintFill,v=XEe.getTintAppendFloatAlpha,c=v(t.tintTopLeft,u*t._alphaTL),p=v(t.tintTopRight,u*t._alphaTR),m=v(t.tintBottomLeft,u*t._alphaBL),x=v(t.tintBottomRight,u*t._alphaBR),g=t.frame.glTexture,y=a.setGameObject(t),T=t.getTextBounds(!1),S,E,_,w=T.characters,R=t.dropShadowX,q=t.dropShadowY,A=R!==0||q!==0;if(e.pipelines.preBatch(t),A){var b=t.dropShadowColor,L=t.dropShadowAlpha,M=v(b,u*L*t._alphaTL),G=v(b,u*L*t._alphaTR),P=v(b,u*L*t._alphaBL),D=v(b,u*L*t._alphaBR);for(S=0;S<w.length;S++)E=w[S],_=E.glyph,!(E.code===32||_.width===0||_.height===0)&&om(a,t,E,_,R,q,h,o,M,G,P,D,1,g,y)}for(S=0;S<w.length;S++)if(E=w[S],_=E.glyph,!(E.code===32||_.width===0||_.height===0))if(f[E.i]){var I=f[E.i],F=I.tintEffect,O=v(I.tintTL,u*t._alphaTL),K=v(I.tintTR,u*t._alphaTR),H=v(I.tintBL,u*t._alphaBL),Y=v(I.tintBR,u*t._alphaBR);om(a,t,E,_,0,0,h,o,O,K,H,Y,F,g,y)}else om(a,t,E,_,0,0,h,o,c,p,m,x,d,g,y);e.pipelines.postBatch(t)}};Yz.exports=VEe});var wt=l((GKe,Vz)=>{var WEe=Me(),HEe=function(e,t,i,r,s){var n=r.alpha*i.alpha;if(n<=0)return!1;var a=WEe(i,r,s).calc;return t.globalCompositeOperation=e.blendModes[i.blendMode],t.globalAlpha=n,t.save(),a.setToContext(t),t.imageSmoothingEnabled=!(!e.antialias||i.frame&&i.frame.source.scaleMode),!0};Vz.exports=HEe});var Hz=l((BKe,Wz)=>{var KEe=wt(),ZEe=function(e,t,i,r){var s=t._text,n=s.length,a=e.currentContext;if(!(n===0||!KEe(e,a,t,i,r))){i.addToRenderList(t);var h=t.fromAtlas?t.frame:t.texture.frames.__BASE,o=t.fontData.chars,u=t.fontData.lineHeight,f=t._letterSpacing,d=0,v=0,c=0,p=null,m=0,x=0,g=0,y=0,T=0,S=0,E=null,_=0,w=h.source.image,R=h.cutX,q=h.cutY,A=t._fontSize/t.fontData.size,b=t._align,L=0,M=0,G=t.getTextBounds(!1);t.maxWidth>0&&(s=G.wrappedText,n=s.length);var P=t._bounds.lines;b===1?M=(P.longest-P.lengths[0])/2:b===2&&(M=P.longest-P.lengths[0]),a.translate(-t.displayOriginX,-t.displayOriginY);for(var D=i.roundPixels,I=0;I<n;I++){if(c=s.charCodeAt(I),c===10){L++,b===1?M=(P.longest-P.lengths[L])/2:b===2&&(M=P.longest-P.lengths[L]),d=0,v+=u,E=null;continue}if(p=o[c],!!p){if(m=R+p.x,x=q+p.y,g=p.width,y=p.height,T=p.xOffset+d,S=p.yOffset+v,E!==null){var F=p.kerning[_];T+=F!==void 0?F:0}T*=A,S*=A,T+=M,d+=p.xAdvance+f,E=p,_=c,!(g===0||y===0||c===32)&&(D&&(T=Math.round(T),S=Math.round(S)),a.save(),a.translate(T,S),a.scale(A,A),a.drawImage(w,m,x,g,y,0,0,g,y),a.restore())}}a.restore()}};Wz.exports=ZEe});var Qz=l((UKe,Jz)=>{var Kz=B(),Zz=B();Kz=Xz();Zz=Hz();Jz.exports={renderWebGL:Kz,renderCanvas:Zz}});var wh=l((kKe,e3)=>{var JEe=C(),$z=Le(),xi=ye(),jz=Fe(),um=Nz(),QEe=Uz(),$Ee=tl(),jEe=Ae(),eSe=Qz(),Ar=new JEe({Extends:jz,Mixins:[xi.Alpha,xi.BlendMode,xi.Depth,xi.Mask,xi.Origin,xi.Pipeline,xi.ScrollFactor,xi.Texture,xi.Tint,xi.Transform,xi.Visible,eSe],initialize:function(t,i,r,s,n,a,h){n===void 0&&(n=""),h===void 0&&(h=0),jz.call(this,t,"BitmapText"),this.font=s;var o=this.scene.sys.cache.bitmapFont.get(s);o||console.warn("Invalid BitmapText key: "+s),this.fontData=o.data,this._text="",this._fontSize=a||this.fontData.size,this._letterSpacing=0,this._align=h,this._bounds=um(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=o.fromAtlas,this.setTexture(o.texture,o.frame),this.setPosition(i,r),this.setOrigin(0,0),this.initPipeline(),this.setText(n)},setLeftAlign:function(){return this._align=Ar.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=Ar.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=Ar.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(e){return this._fontSize=e,this._dirty=!0,this},setLetterSpacing:function(e){return e===void 0&&(e=0),this._letterSpacing=e,this._dirty=!0,this},setText:function(e){return!e&&e!==0&&(e=""),Array.isArray(e)&&(e=e.join(`
`)),e!==this.text&&(this._text=e.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=.5),this.dropShadowX=e,this.dropShadowY=t,this.dropShadowColor=i,this.dropShadowAlpha=r,this},setCharacterTint:function(e,t,i,r,s,n,a){e===void 0&&(e=0),t===void 0&&(t=1),i===void 0&&(i=!1),r===void 0&&(r=-1),s===void 0&&(s=r,n=r,a=r);var h=this.text.length;t===-1&&(t=h),e<0&&(e=h+e),e=$z(e,0,h-1);for(var o=$z(e+t,e,h),u=this.charColors,f=e;f<o;f++){var d=u[f];if(r===-1)u[f]=null;else{var v=i?1:0;d?(d.tintEffect=v,d.tintTL=r,d.tintTR=s,d.tintBL=n,d.tintBR=a):u[f]={tintEffect:v,tintTL:r,tintTR:s,tintBL:n,tintBR:a}}}return this},setWordTint:function(e,t,i,r,s,n,a){t===void 0&&(t=1);for(var h=this.getTextBounds(),o=h.words,u=typeof e=="number",f=0,d=0;d<o.length;d++){var v=o[d];if((u&&d===e||!u&&v.word===e)&&(this.setCharacterTint(v.i,v.word.length,i,r,s,n,a),f++,f===t))return this}return this},getTextBounds:function(e){var t=this._bounds;return(this._dirty||e||this.scaleX!==t.scaleX||this.scaleY!==t.scaleY)&&(um(this,e,!0,t),this._dirty=!1),t},getCharacterAt:function(e,t,i){for(var r=this.getLocalPoint(e,t,null,i),s=this.getTextBounds(),n=s.characters,a=new jEe,h=0;h<n.length;h++){var o=n[h];if(a.setTo(o.x,o.t,o.r-o.x,o.b),a.contains(r.x,r.y))return o}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(e,t,i){if(t===void 0&&(t=this._fontSize),i===void 0&&(i=this._align),e!==this.font){var r=this.scene.sys.cache.bitmapFont.get(e);r&&(this.font=e,this.fontData=r.data,this._fontSize=t,this._align=i,this.fromAtlas=r.fromAtlas===!0,this.setTexture(r.texture,r.frame),um(this,!1,!0,this._bounds))}return this},setMaxWidth:function(e,t){return this._maxWidth=e,this._dirty=!0,t!==void 0&&(this.wordWrapCharCode=t),this},align:{set:function(e){this._align=e,this._dirty=!0},get:function(){return this._align}},text:{set:function(e){this.setText(e)},get:function(){return this._text}},fontSize:{set:function(e){this._fontSize=e,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(e){this._letterSpacing=e,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(e){this._maxWidth=e,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var e=xi.ToJSON(this),t={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return e.data=t,e},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});Ar.ALIGN_LEFT=0;Ar.ALIGN_CENTER=1;Ar.ALIGN_RIGHT=2;Ar.ParseFromAtlas=QEe;Ar.ParseXMLBitmapFont=$Ee;e3.exports=Ar});var i3=l((zKe,t3)=>{var tSe=Tt(),iSe=Te(),rSe=new tSe,sSe=function(e,t,i,r){var s=t.getRenderList();if(s.length!==0){var n=i.alpha*t.alpha;if(n!==0){i.addToRenderList(t);var a=e.pipelines.set(this.pipeline,t),h=i.scrollX*t.scrollFactorX,o=i.scrollY*t.scrollFactorY,u=rSe.copyFrom(i.matrix);r&&(u.multiplyWithOffset(r,-h,-o),h=0,o=0);var f=t.x-h,d=t.y-o,v=-1,c=!1,p=i.roundPixels;e.pipelines.preBatch(t);for(var m=0;m<s.length;m++){var x=s[m],g=x.frame,y=x.alpha*n;if(y!==0){var T=g.width,S=g.height,E=f+x.x+g.x,_=d+x.y+g.y;x.flipX&&(T*=-1,E+=g.width),x.flipY&&(S*=-1,_+=g.height);var w=E+T,R=_+S,q=u.getX(E,_),A=u.getY(E,_),b=u.getX(w,R),L=u.getY(w,R),M=iSe.getTintAppendFloatAlpha(x.tint,y);if(g.sourceIndex!==v){var G=a.setGameObject(t,g);v=g.sourceIndex}p&&(q=Math.round(q),A=Math.round(A),b=Math.round(b),L=Math.round(L)),a.batchQuad(t,q,A,q,L,b,L,b,A,g.u0,g.v0,g.u1,g.v1,M,M,M,M,c,g.glTexture,G)&&(v=-1)}}e.pipelines.postBatch(t)}}};t3.exports=sSe});var s3=l((YKe,r3)=>{var nSe=function(e,t,i,r){var s=t.getRenderList();if(s.length!==0){var n=e.currentContext,a=i.alpha*t.alpha;if(a!==0){i.addToRenderList(t),n.globalCompositeOperation=e.blendModes[t.blendMode],n.imageSmoothingEnabled=!(!e.antialias||t.frame.source.scaleMode);var h=t.x-i.scrollX*t.scrollFactorX,o=t.y-i.scrollY*t.scrollFactorY;n.save(),r&&r.copyToContext(n);for(var u=i.roundPixels,f=0;f<s.length;f++){var d=s[f],v=d.flipX||d.flipY,c=d.frame,p=c.canvasData,m=c.x,x=c.y,g=1,y=1,T=d.alpha*a;T!==0&&(n.globalAlpha=T,v?(d.flipX&&(g=-1,m-=p.width),d.flipY&&(y=-1,x-=p.height),n.save(),n.translate(d.x+h,d.y+o),n.scale(g,y),n.drawImage(c.source.image,p.x,p.y,p.width,p.height,m,x,p.width,p.height),n.restore()):(u&&(m=Math.round(m),x=Math.round(x)),n.drawImage(c.source.image,p.x,p.y,p.width,p.height,m+d.x+h,x+d.y+o,p.width,p.height)))}n.restore()}}};r3.exports=nSe});var o3=l((XKe,h3)=>{var n3=B(),a3=B();n3=i3();a3=s3();h3.exports={renderWebGL:n3,renderCanvas:a3}});var lm=l((VKe,u3)=>{var aSe=C(),hSe=Kn(),oSe=new aSe({initialize:function(t,i,r,s,n){this.parent=t,this.x=i,this.y=r,this.frame=s,this.data={},this.tint=16777215,this._visible=n,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(e){return e===void 0?this.frame=this.parent.frame:e instanceof hSe&&e.texture===this.parent.texture?this.frame=e:this.frame=this.parent.texture.get(e),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(e,t,i){return this.x=e,this.y=t,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(e,t){return this.x=e,this.y=t,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,t){return this.flipX=e,this.flipY=t,this},setVisible:function(e){return this.visible=e,this},setAlpha:function(e){return this.alpha=e,this},setTint:function(e){return this.tint=e,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(e){this.parent.dirty|=this._visible!==e,this._visible=e}},alpha:{get:function(){return this._alpha},set:function(e){this.parent.dirty|=this._alpha>0!=e>0,this._alpha=e}}});u3.exports=oSe});var il=l((WKe,f3)=>{var uSe=o3(),lSe=lm(),fSe=C(),rr=ye(),dSe=Kn(),l3=Fe(),vSe=ia(),cSe=new fSe({Extends:l3,Mixins:[rr.Alpha,rr.BlendMode,rr.Depth,rr.Mask,rr.Pipeline,rr.ScrollFactor,rr.Size,rr.Texture,rr.Transform,rr.Visible,uSe],initialize:function(t,i,r,s,n){l3.call(this,t,"Blitter"),this.setTexture(s,n),this.setPosition(i,r),this.initPipeline(),this.children=new vSe,this.renderList=[],this.dirty=!1},create:function(e,t,i,r,s){r===void 0&&(r=!0),s===void 0&&(s=this.children.length),i===void 0?i=this.frame:i instanceof dSe||(i=this.texture.get(i));var n=new lSe(this,e,t,i,r);return this.children.addAt(n,s,!1),this.dirty=!0,n},createFromCallback:function(e,t,i,r){for(var s=this.createMultiple(t,i,r),n=0;n<s.length;n++){var a=s[n];e.call(this,a,n)}return s},createMultiple:function(e,t,i){t===void 0&&(t=this.frame.name),i===void 0&&(i=!0),Array.isArray(t)||(t=[t]);var r=[],s=this;return t.forEach(function(n){for(var a=0;a<e;a++)r.push(s.create(0,0,n,i))}),r},childCanRender:function(e){return e.visible&&e.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});f3.exports=cSe});var v3=l((HKe,d3)=>{var pSe=function(e,t,i,r){i.addToRenderList(t);var s=t.list,n=s.length;if(n!==0){var a=t.localTransform;r?(a.loadIdentity(),a.multiply(r),a.translate(t.x,t.y),a.rotate(t.rotation),a.scale(t.scaleX,t.scaleY)):a.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),e.pipelines.preBatch(t);var h=t.blendMode!==-1;h||e.setBlendMode(0);for(var o=t.alpha,u=t.scrollFactorX,f=t.scrollFactorY,d=0;d<n;d++){var v=s[d];if(!!v.willRender(i)){var c,p,m,x;if(v.alphaTopLeft!==void 0)c=v.alphaTopLeft,p=v.alphaTopRight,m=v.alphaBottomLeft,x=v.alphaBottomRight;else{var g=v.alpha;c=g,p=g,m=g,x=g}var y=v.scrollFactorX,T=v.scrollFactorY;!h&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode);var S=v.mask;S&&S.preRenderWebGL(e,v,i);var E=v.type;E!==e.currentType&&(e.newType=!0,e.currentType=E),e.nextTypeMatch=d<n-1?s[d+1].type===e.currentType:!1,v.setScrollFactor(y*u,T*f),v.setAlpha(c*o,p*o,m*o,x*o),v.renderWebGL(e,v,i,a),v.setAlpha(c,p,m,x),v.setScrollFactor(y,T),S&&S.postRenderWebGL(e,i),e.newType=!1}}e.pipelines.postBatch(t)}};d3.exports=pSe});var p3=l((KKe,c3)=>{var mSe=function(e,t,i,r){i.addToRenderList(t);var s=t.list;if(s.length!==0){var n=t.localTransform;r?(n.loadIdentity(),n.multiply(r),n.translate(t.x,t.y),n.rotate(t.rotation),n.scale(t.scaleX,t.scaleY)):n.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);var a=t.blendMode!==-1;a||e.setBlendMode(0);var h=t._alpha,o=t.scrollFactorX,u=t.scrollFactorY;t.mask&&t.mask.preRenderCanvas(e,null,i);for(var f=0;f<s.length;f++){var d=s[f];if(!!d.willRender(i)){var v=d.alpha,c=d.scrollFactorX,p=d.scrollFactorY;!a&&d.blendMode!==e.currentBlendMode&&e.setBlendMode(d.blendMode),d.setScrollFactor(c*o,p*u),d.setAlpha(v*h),d.renderCanvas(e,d,i,n),d.setAlpha(v),d.setScrollFactor(c,p)}}t.mask&&t.mask.postRenderCanvas(e)}};c3.exports=mSe});var y3=l((ZKe,x3)=>{var m3=B(),g3=B();m3=v3();g3=p3();x3.exports={renderWebGL:m3,renderCanvas:g3}});var fm=l((JKe,T3)=>{var gSe=Ae(),xSe=function(e,t,i){i===void 0&&(i=new gSe);var r=Math.min(e.x,t.x),s=Math.min(e.y,t.y),n=Math.max(e.right,t.right)-r,a=Math.max(e.bottom,t.bottom)-s;return i.setTo(r,s,n,a)};T3.exports=xSe});var rl=l((QKe,C3)=>{var Ce=el(),ySe=_i(),TSe=C(),sr=ye(),E3=Vr(),S3=Fe(),_3=Ae(),ESe=y3(),SSe=fm(),w3=xe(),_Se=new TSe({Extends:S3,Mixins:[sr.AlphaSingle,sr.BlendMode,sr.ComputedSize,sr.Depth,sr.Mask,sr.Pipeline,sr.Transform,sr.Visible,ESe],initialize:function(t,i,r,s){S3.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new sr.TransformMatrix,this.tempTransformMatrix=new sr.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(i,r),this.clearAlpha(),this.setBlendMode(ySe.SKIP_CHECK),s&&this.add(s)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(e){return e===void 0&&(e=!0),this.exclusive=e,this},getBounds:function(e){if(e===void 0&&(e=new _3),e.setTo(this.x,this.y,0,0),this.parentContainer){var t=this.parentContainer.getBoundsTransformMatrix(),i=t.transformPoint(this.x,this.y);e.setTo(i.x,i.y,0,0)}if(this.list.length>0){var r=this.list,s=new _3,n=!1;e.setEmpty();for(var a=0;a<r.length;a++){var h=r[a];h.getBounds&&(h.getBounds(s),n?SSe(s,e,e):(e.setTo(s.x,s.y,s.width,s.height),n=!0))}}return e},addHandler:function(e){e.once(E3.DESTROY,this.remove,this),this.exclusive&&(e.parentContainer&&e.parentContainer.remove(e),e.removeFromDisplayList(),e.parentContainer=this)},removeHandler:function(e){e.off(E3.DESTROY,this.remove),this.exclusive&&(e.parentContainer=null,e.addToDisplayList())},pointToContainer:function(e,t){t===void 0&&(t=new w3),this.parentContainer?this.parentContainer.pointToContainer(e,t):t=new w3(e.x,e.y);var i=this.tempTransformMatrix;return i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),i.invert(),i.transformPoint(e.x,e.y,t),t},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(e){return Ce.Add(this.list,e,this.maxSize,this.addHandler,this),this},addAt:function(e,t){return Ce.AddAt(this.list,e,t,this.maxSize,this.addHandler,this),this},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,t){return e?(t===void 0&&(t=function(i,r){return i[e]-r[e]}),Ce.StableSort(this.list,t),this):this},getByName:function(e){return Ce.GetFirst(this.list,"name",e)},getRandom:function(e,t){return Ce.GetRandom(this.list,e,t)},getFirst:function(e,t,i,r){return Ce.GetFirst(this.list,e,t,i,r)},getAll:function(e,t,i,r){return Ce.GetAll(this.list,e,t,i,r)},count:function(e,t,i,r){return Ce.CountAllMatching(this.list,e,t,i,r)},swap:function(e,t){return Ce.Swap(this.list,e,t),this},moveTo:function(e,t){return Ce.MoveTo(this.list,e,t),this},moveAbove:function(e,t){return Ce.MoveAbove(this.list,e,t),this},moveBelow:function(e,t){return Ce.MoveBelow(this.list,e,t),this},remove:function(e,t){var i=Ce.Remove(this.list,e,this.removeHandler,this);if(t&&i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)i[r].destroy()}return this},removeAt:function(e,t){var i=Ce.RemoveAt(this.list,e,this.removeHandler,this);return t&&i&&i.destroy(),this},removeBetween:function(e,t,i){var r=Ce.RemoveBetween(this.list,e,t,this.removeHandler,this);if(i)for(var s=0;s<r.length;s++)r[s].destroy();return this},removeAll:function(e){var t=Ce.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(e)for(var i=0;i<t.length;i++)t[i].destroy();return this},bringToTop:function(e){return Ce.BringToTop(this.list,e),this},sendToBack:function(e){return Ce.SendToBack(this.list,e),this},moveUp:function(e){return Ce.MoveUp(this.list,e),this},moveDown:function(e){return Ce.MoveDown(this.list,e),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return Ce.Shuffle(this.list),this},replace:function(e,t,i){var r=Ce.Replace(this.list,e,t);return r&&(this.addHandler(t),this.removeHandler(e),i&&e.destroy()),this},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,t,i,r){return Ce.SetAll(this.list,e,t,i,r),this},each:function(e,t){var i=[null],r,s=this.list.slice(),n=s.length;for(r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<n;r++)i[0]=s[r],e.apply(t,i);return this},iterate:function(e,t){var i=[null],r;for(r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<this.list.length;r++)i[0]=this.list[r],e.apply(t,i);return this},setScrollFactor:function(e,t,i){return t===void 0&&(t=e),i===void 0&&(i=!1),this.scrollFactorX=e,this.scrollFactorY=t,i&&(Ce.SetAll(this.list,"scrollFactorX",e),Ce.SetAll(this.list,"scrollFactorY",t)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});C3.exports=_Se});var q3=l(($Ke,R3)=>{R3.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]});var vm=l((jKe,A3)=>{var wSe=q3(),CSe=Fe(),dm=Tt(),RSe=new dm,qSe=new dm,ASe=new dm,bSe=function(e,t,i,r){if(!!t.node){var s=t.node.style,n=t.scene.sys.settings;if(!s||!n.visible||CSe.RENDER_MASK!==t.renderFlags||t.cameraFilter!==0&&t.cameraFilter&i.id||t.parentContainer&&!t.parentContainer.willRender()){s.display="none";return}var a=t.parentContainer,h=i.alpha*t.alpha;a&&(h*=a.alpha);var o=RSe,u=qSe,f=ASe,d=0,v=0,c="0%",p="0%";r?(d=t.width*t.scaleX*t.originX,v=t.height*t.scaleY*t.originY,u.applyITRS(t.x-d,t.y-v,t.rotation,t.scaleX,t.scaleY),o.copyFrom(i.matrix),o.multiplyWithOffset(r,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),u.e=t.x-d,u.f=t.y-v,o.multiply(u,f)):(d=t.width*t.originX,v=t.height*t.originY,u.applyITRS(t.x-d,t.y-v,t.rotation,t.scaleX,t.scaleY),o.copyFrom(i.matrix),c=100*t.originX+"%",p=100*t.originY+"%",u.e-=i.scrollX*t.scrollFactorX,u.f-=i.scrollY*t.scrollFactorY,o.multiply(u,f)),t.transformOnly||(s.display="block",s.opacity=h,s.zIndex=t._depth,s.pointerEvents=t.pointerEvents,s.mixBlendMode=wSe[t._blendMode]),s.transform=f.getCSSMatrix()+" skew("+t.skewX+"rad, "+t.skewY+"rad) rotate3d("+t.rotate3d.x+","+t.rotate3d.y+","+t.rotate3d.z+","+t.rotate3d.w+t.rotate3dAngle+")",s.transformOrigin=c+" "+p}};A3.exports=bSe});var L3=l((eZe,M3)=>{var b3=B(),P3=B();b3=vm();P3=vm();M3.exports={renderWebGL:b3,renderCanvas:P3}});var cm=l((tZe,F3)=>{var PSe=C(),on=ye(),MSe=L3(),O3=Fe(),LSe=ae(),OSe=Au(),ra=Ge(),FSe=nh(),DSe=new PSe({Extends:O3,Mixins:[on.AlphaSingle,on.BlendMode,on.Depth,on.Origin,on.ScrollFactor,on.Transform,on.Visible,MSe],initialize:function(t,i,r,s,n,a){O3.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new FSe,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(i,r),typeof s=="string"?s[0]==="#"?this.setElement(s.substr(1),n,a):this.createElement(s,n,a):s&&this.setElement(s,n,a),t.sys.events.on(ra.SLEEP,this.handleSceneEvent,this),t.sys.events.on(ra.WAKE,this.handleSceneEvent,this),t.sys.events.on(ra.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(e){var t=this.node,i=t.style;t&&(i.display=e.settings.visible?"block":"none")},setSkew:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.skewX=e,this.skewY=t,this},setPerspective:function(e){return this.parent.style.perspective=e+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(e){this.parent.style.perspective=e+"px"}},addListener:function(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++)this.node.addEventListener(e[t],this.handler,!1)}return this},removeListener:function(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++)this.node.removeEventListener(e[t],this.handler)}return this},dispatchNativeEvent:function(e){this.emit(e.type,e)},createElement:function(e,t,i){return this.setElement(document.createElement(e),t,i)},setElement:function(e,t,i){this.removeElement();var r;if(typeof e=="string"?(e[0]==="#"&&(e=e.substr(1)),r=document.getElementById(e)):typeof e=="object"&&e.nodeType===1&&(r=e),!r)return this;if(this.node=r,t&&LSe(t))for(var s in t)r.style[s]=t[s];else typeof t=="string"&&(r.style=t);return r.style.zIndex="0",r.style.display="inline",r.style.position="absolute",r.phaser=this,this.parent&&this.parent.appendChild(r),i&&(r.innerText=i),this.updateSize()},createFromCache:function(e,t){var i=this.cache.get(e);return i&&this.createFromHTML(i,t),this},createFromHTML:function(e,t){t===void 0&&(t="div"),this.removeElement();var i=document.createElement(t);return this.node=i,i.style.zIndex="0",i.style.display="inline",i.style.position="absolute",i.phaser=this,this.parent&&this.parent.appendChild(i),i.innerHTML=e,this.updateSize()},removeElement:function(){return this.node&&(OSe(this.node),this.node=null),this},updateSize:function(){var e=this.node,t=e.getBoundingClientRect();return this.width=e.clientWidth,this.height=e.clientHeight,this.displayWidth=t.width||0,this.displayHeight=t.height||0,this},getChildByProperty:function(e,t){if(this.node){for(var i=this.node.querySelectorAll("*"),r=0;r<i.length;r++)if(i[r][e]===t)return i[r]}return null},getChildByID:function(e){return this.getChildByProperty("id",e)},getChildByName:function(e){return this.getChildByProperty("name",e)},setClassName:function(e){return this.node&&(this.node.className=e,this.updateSize()),this},setText:function(e){return this.node&&(this.node.innerText=e,this.updateSize()),this},setHTML:function(e){return this.node&&(this.node.innerHTML=e,this.updateSize()),this},preRender:function(){var e=this.parentContainer,t=this.node;t&&e&&!e.willRender()&&(t.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(ra.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(ra.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(ra.PRE_RENDER,this.preRender,this)}});F3.exports=DSe});var I3=l((iZe,D3)=>{var ISe=Me(),NSe=Tt(),ps=Te(),GSe=new NSe,BSe=function(e,t,i,r){var s=t.text,n=s.length;if(n!==0){i.addToRenderList(t);var a=e.pipelines.set(t.pipeline,t),h=ISe(t,i,r),o=h.sprite,u=h.calc,f=GSe,d=t.cropWidth>0||t.cropHeight>0;d&&(a.flush(),e.pushScissor(u.tx,u.ty,t.cropWidth*u.scaleX,t.cropHeight*u.scaleY));var v=t.frame,c=v.glTexture,p=t.tintFill,m=ps.getTintAppendFloatAlpha(t.tintTopLeft,i.alpha*t._alphaTL),x=ps.getTintAppendFloatAlpha(t.tintTopRight,i.alpha*t._alphaTR),g=ps.getTintAppendFloatAlpha(t.tintBottomLeft,i.alpha*t._alphaBL),y=ps.getTintAppendFloatAlpha(t.tintBottomRight,i.alpha*t._alphaBR),T=a.setGameObject(t),S=0,E=0,_=0,w=0,R=t.letterSpacing,q,A=0,b=0,L,M=t.scrollX,G=t.scrollY,P=t.fontData,D=P.chars,I=P.lineHeight,F=t.fontSize/P.size,O=0,K=t._align,H=0,Y=0,ee=t.getTextBounds(!1);t.maxWidth>0&&(s=ee.wrappedText,n=s.length);var U=t._bounds.lines;K===1?Y=(U.longest-U.lengths[0])/2:K===2&&(Y=U.longest-U.lengths[0]);var J=i.roundPixels,nt=t.displayCallback,ve=t.callbackData;e.pipelines.preBatch(t);for(var yt=0;yt<n;yt++){if(_=s.charCodeAt(yt),_===10){H++,K===1?Y=(U.longest-U.lengths[H])/2:K===2&&(Y=U.longest-U.lengths[H]),S=0,E+=I,L=null;continue}if(q=D[_],!!q){A=q.width,b=q.height;var _e=q.xOffset+S-M,at=q.yOffset+E-G;if(L!==null){var Je=q.kerning[w];_e+=Je!==void 0?Je:0}if(S+=q.xAdvance+R,L=q,w=_,!(A===0||b===0||_===32)){if(F=t.fontSize/t.fontData.size,O=0,nt){ve.color=0,ve.tint.topLeft=m,ve.tint.topRight=x,ve.tint.bottomLeft=g,ve.tint.bottomRight=y,ve.index=yt,ve.charCode=_,ve.x=_e,ve.y=at,ve.scale=F,ve.rotation=O,ve.data=q.data;var te=nt(ve);_e=te.x,at=te.y,F=te.scale,O=te.rotation,te.color?(m=te.color,x=te.color,g=te.color,y=te.color):(m=te.tint.topLeft,x=te.tint.topRight,g=te.tint.bottomLeft,y=te.tint.bottomRight),m=ps.getTintAppendFloatAlpha(m,i.alpha*t._alphaTL),x=ps.getTintAppendFloatAlpha(x,i.alpha*t._alphaTR),g=ps.getTintAppendFloatAlpha(g,i.alpha*t._alphaBL),y=ps.getTintAppendFloatAlpha(y,i.alpha*t._alphaBR)}_e*=F,at*=F,_e-=t.displayOriginX,at-=t.displayOriginY,_e+=Y,f.applyITRS(_e,at,O,F,F),u.multiply(f,o);var ke=q.u0,qe=q.v0,Mt=q.u1,lt=q.v1,oe=A,ze=b,ft=o.e,X=o.f,V=ze*o.c+o.e,Z=ze*o.d+o.f,pe=oe*o.a+ze*o.c+o.e,Q=oe*o.b+ze*o.d+o.f,zi=oe*o.a+o.e,ce=oe*o.b+o.f;J&&(ft=Math.round(ft),X=Math.round(X),V=Math.round(V),Z=Math.round(Z),pe=Math.round(pe),Q=Math.round(Q),zi=Math.round(zi),ce=Math.round(ce)),a.batchQuad(t,ft,X,V,Z,pe,Q,zi,ce,ke,qe,Mt,lt,m,x,g,y,p,c,T)}}}d&&(a.flush(),e.popScissor()),e.pipelines.postBatch(t)}};D3.exports=BSe});var G3=l((rZe,N3)=>{var USe=wt(),kSe=function(e,t,i,r){var s=t._text,n=s.length,a=e.currentContext;if(!(n===0||!USe(e,a,t,i,r))){i.addToRenderList(t);var h=t.fromAtlas?t.frame:t.texture.frames.__BASE,o=t.displayCallback,u=t.callbackData,f=t.fontData.chars,d=t.fontData.lineHeight,v=t._letterSpacing,c=0,p=0,m=0,x=null,g=0,y=0,T=0,S=0,E=0,_=0,w=null,R=0,q=t.frame.source.image,A=h.cutX,b=h.cutY,L=0,M=0,G=t._fontSize/t.fontData.size,P=t._align,D=0,I=0;t.getTextBounds(!1);var F=t._bounds.lines;P===1?I=(F.longest-F.lengths[0])/2:P===2&&(I=F.longest-F.lengths[0]),a.translate(-t.displayOriginX,-t.displayOriginY);var O=i.roundPixels;t.cropWidth>0&&t.cropHeight>0&&(a.beginPath(),a.rect(0,0,t.cropWidth,t.cropHeight),a.clip());for(var K=0;K<n;K++){if(M=G,L=0,m=s.charCodeAt(K),m===10){D++,P===1?I=(F.longest-F.lengths[D])/2:P===2&&(I=F.longest-F.lengths[D]),c=0,p+=d,w=null;continue}if(x=f[m],!!x){if(g=A+x.x,y=b+x.y,T=x.width,S=x.height,E=x.xOffset+c-t.scrollX,_=x.yOffset+p-t.scrollY,w!==null){var H=x.kerning[R];E+=H!==void 0?H:0}if(o){u.index=K,u.charCode=m,u.x=E,u.y=_,u.scale=M,u.rotation=L,u.data=x.data;var Y=o(u);E=Y.x,_=Y.y,M=Y.scale,L=Y.rotation}E*=M,_*=M,E+=I,c+=x.xAdvance+v,w=x,R=m,!(T===0||S===0||m===32)&&(O&&(E=Math.round(E),_=Math.round(_)),a.save(),a.translate(E,_),a.rotate(L),a.scale(M,M),a.drawImage(q,g,y,T,S,0,0,T,S),a.restore())}}a.restore()}};N3.exports=kSe});var z3=l((sZe,k3)=>{var B3=B(),U3=B();B3=I3();U3=G3();k3.exports={renderWebGL:B3,renderCanvas:U3}});var sl=l((nZe,X3)=>{var Y3=wh(),zSe=C(),YSe=z3(),XSe=new zSe({Extends:Y3,Mixins:[YSe],initialize:function(t,i,r,s,n,a,h){Y3.call(this,t,i,r,s,n,a,h),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(e,t){return this.cropWidth=e,this.cropHeight=t,this},setDisplayCallback:function(e){return this.displayCallback=e,this},setScrollX:function(e){return this.scrollX=e,this},setScrollY:function(e){return this.scrollY=e,this}});X3.exports=XSe});var W3=l((aZe,V3)=>{var VSe=Me(),WSe=function(e,t,i,r){e.pipelines.clear();var s=VSe(t,i,r).calc;t.render.call(t,e,i,s),e.pipelines.rebind()};V3.exports=WSe});var H3=l(()=>{});var Q3=l((uZe,J3)=>{var K3=B(),Z3=B();K3=W3();Z3=H3();J3.exports={renderWebGL:K3,renderCanvas:Z3}});var pm=l((lZe,j3)=>{var HSe=C(),Ni=ye(),$3=Fe(),KSe=Q3(),ZSe=new HSe({Extends:$3,Mixins:[Ni.Alpha,Ni.BlendMode,Ni.Depth,Ni.Flip,Ni.Origin,Ni.ScrollFactor,Ni.Size,Ni.Texture,Ni.Tint,Ni.Transform,Ni.Visible,KSe],initialize:function(t){$3.call(this,t,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});j3.exports=ZSe});var nl=l((fZe,eY)=>{eY.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}});var sa=l((dZe,tY)=>{var JSe=function(e,t,i){if(e.width<=0||e.height<=0)return!1;var r=(t-e.x)/e.width,s=(i-e.y)/e.height;return r*=r,s*=s,r+s<.25};tY.exports=JSe});var al=l((vZe,iY)=>{var QSe=$(),$Se=function(e,t,i){i===void 0&&(i=new QSe);var r=e.width/2,s=e.height/2;return i.x=e.x+r*Math.cos(t),i.y=e.y+s*Math.sin(t),i};iY.exports=$Se});var mm=l((cZe,rY)=>{var jSe=al(),e_e=En(),t_e=Oe(),i_e=$(),r_e=function(e,t,i){i===void 0&&(i=new i_e);var r=e_e(t,0,t_e.PI2);return jSe(e,r,i)};rY.exports=r_e});var gm=l((pZe,sY)=>{var s_e=function(e){var t=e.width/2,i=e.height/2,r=Math.pow(t-i,2)/Math.pow(t+i,2);return Math.PI*(t+i)*(1+3*r/(10+Math.sqrt(4-3*r)))};sY.exports=s_e});var xm=l((mZe,nY)=>{var n_e=gm(),a_e=al(),h_e=En(),o_e=Oe(),u_e=function(e,t,i,r){r===void 0&&(r=[]),!t&&i>0&&(t=n_e(e)/i);for(var s=0;s<t;s++){var n=h_e(s/t,0,o_e.PI2);r.push(a_e(e,n))}return r};nY.exports=u_e});var na=l((gZe,aY)=>{var l_e=C(),f_e=sa(),d_e=mm(),v_e=xm(),c_e=Ki(),p_e=Io(),m_e=new l_e({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),this.type=c_e.ELLIPSE,this.x=t,this.y=i,this.width=r,this.height=s},contains:function(e,t){return f_e(this,e,t)},getPoint:function(e,t){return d_e(this,e,t)},getPoints:function(e,t,i){return v_e(this,e,t,i)},getRandomPoint:function(e){return p_e(this,e)},setTo:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},setSize:function(e,t){return t===void 0&&(t=e),this.width=e,this.height=t,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(e){this.x=e+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(e){this.x=e-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(e){this.y=e+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(e){this.y=e-this.height/2}}});aY.exports=m_e});var uY=l((xZe,oY)=>{var it=nl(),g_e=Me(),x_e=Tt(),y_e=Te(),hl=function(e,t,i){this.x=e,this.y=t,this.width=i},ym=function(e,t,i){this.points=[],this.pointsLength=1,this.points[0]=new hl(e,t,i)},hY=[],T_e=new x_e,E_e=function(e,t,i,r){if(t.commandBuffer.length!==0){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline,t);e.pipelines.preBatch(t);for(var n=g_e(t,i,r).calc,a=T_e.loadIdentity(),h=t.commandBuffer,o=i.alpha*t.alpha,u=1,f=s.fillTint,d=s.strokeTint,v=0,c=0,p=0,m=.01,x=Math.PI*2,g,y=[],T=0,S=!0,E=null,_=y_e.getTintAppendFloatAlpha,w=0;w<h.length;w++)switch(g=h[w],g){case it.BEGIN_PATH:{y.length=0,E=null,S=!0;break}case it.CLOSE_PATH:{S=!1,E&&E.points.length&&E.points.push(E.points[0]);break}case it.FILL_PATH:{for(T=0;T<y.length;T++)s.batchFillPath(y[T].points,a,n);break}case it.STROKE_PATH:{for(T=0;T<y.length;T++)s.batchStrokePath(y[T].points,u,S,a,n);break}case it.LINE_STYLE:{u=h[++w];var R=h[++w],q=h[++w]*o,A=_(R,q);d.TL=A,d.TR=A,d.BL=A,d.BR=A;break}case it.FILL_STYLE:{var b=h[++w],L=h[++w]*o,M=_(b,L);f.TL=M,f.TR=M,f.BL=M,f.BR=M;break}case it.GRADIENT_FILL_STYLE:{var G=h[++w]*o,P=h[++w]*o,D=h[++w]*o,I=h[++w]*o;f.TL=_(h[++w],G),f.TR=_(h[++w],P),f.BL=_(h[++w],D),f.BR=_(h[++w],I);break}case it.GRADIENT_LINE_STYLE:{u=h[++w];var F=h[++w]*o;d.TL=_(h[++w],F),d.TR=_(h[++w],F),d.BL=_(h[++w],F),d.BR=_(h[++w],F);break}case it.ARC:{var O=0,K=h[++w],H=h[++w],Y=h[++w],ee=h[++w],U=h[++w],J=h[++w],nt=h[++w];for(U-=ee,J?U<-x?U=-x:U>0&&(U=-x+U%x):U>x?U=x:U<0&&(U=x+U%x),E===null&&(E=new ym(K+Math.cos(ee)*Y,H+Math.sin(ee)*Y,u),y.push(E),O+=m);O<1+nt;)p=U*O+ee,v=K+Math.cos(p)*Y,c=H+Math.sin(p)*Y,E.points.push(new hl(v,c,u)),O+=m;p=U+ee,v=K+Math.cos(p)*Y,c=H+Math.sin(p)*Y,E.points.push(new hl(v,c,u));break}case it.FILL_RECT:{s.batchFillRect(h[++w],h[++w],h[++w],h[++w],a,n);break}case it.FILL_TRIANGLE:{s.batchFillTriangle(h[++w],h[++w],h[++w],h[++w],h[++w],h[++w],a,n);break}case it.STROKE_TRIANGLE:{s.batchStrokeTriangle(h[++w],h[++w],h[++w],h[++w],h[++w],h[++w],u,a,n);break}case it.LINE_TO:{E!==null?E.points.push(new hl(h[++w],h[++w],u)):(E=new ym(h[++w],h[++w],u),y.push(E));break}case it.MOVE_TO:{E=new ym(h[++w],h[++w],u),y.push(E);break}case it.SAVE:{hY.push(a.copyToArray());break}case it.RESTORE:{a.copyFromArray(hY.pop());break}case it.TRANSLATE:{K=h[++w],H=h[++w],a.translate(K,H);break}case it.SCALE:{K=h[++w],H=h[++w],a.scale(K,H);break}case it.ROTATE:{a.rotate(h[++w]);break}}e.pipelines.postBatch(t)}};oY.exports=E_e});var Tm=l((yZe,lY)=>{var Be=nl(),S_e=wt(),__e=function(e,t,i,r,s,n){var a=t.commandBuffer,h=a.length,o=s||e.currentContext;if(!(h===0||!S_e(e,o,t,i,r))){i.addToRenderList(t);var u=1,f=1,d=0,v=0,c=1,p=0,m=0,x=0;o.beginPath();for(var g=0;g<h;++g){var y=a[g];switch(y){case Be.ARC:o.arc(a[g+1],a[g+2],a[g+3],a[g+4],a[g+5],a[g+6]),g+=7;break;case Be.LINE_STYLE:c=a[g+1],d=a[g+2],u=a[g+3],p=(d&16711680)>>>16,m=(d&65280)>>>8,x=d&255,o.strokeStyle="rgba("+p+","+m+","+x+","+u+")",o.lineWidth=c,g+=3;break;case Be.FILL_STYLE:v=a[g+1],f=a[g+2],p=(v&16711680)>>>16,m=(v&65280)>>>8,x=v&255,o.fillStyle="rgba("+p+","+m+","+x+","+f+")",g+=2;break;case Be.BEGIN_PATH:o.beginPath();break;case Be.CLOSE_PATH:o.closePath();break;case Be.FILL_PATH:n||o.fill();break;case Be.STROKE_PATH:n||o.stroke();break;case Be.FILL_RECT:n?o.rect(a[g+1],a[g+2],a[g+3],a[g+4]):o.fillRect(a[g+1],a[g+2],a[g+3],a[g+4]),g+=4;break;case Be.FILL_TRIANGLE:o.beginPath(),o.moveTo(a[g+1],a[g+2]),o.lineTo(a[g+3],a[g+4]),o.lineTo(a[g+5],a[g+6]),o.closePath(),n||o.fill(),g+=6;break;case Be.STROKE_TRIANGLE:o.beginPath(),o.moveTo(a[g+1],a[g+2]),o.lineTo(a[g+3],a[g+4]),o.lineTo(a[g+5],a[g+6]),o.closePath(),n||o.stroke(),g+=6;break;case Be.LINE_TO:o.lineTo(a[g+1],a[g+2]),g+=2;break;case Be.MOVE_TO:o.moveTo(a[g+1],a[g+2]),g+=2;break;case Be.LINE_FX_TO:o.lineTo(a[g+1],a[g+2]),g+=5;break;case Be.MOVE_FX_TO:o.moveTo(a[g+1],a[g+2]),g+=5;break;case Be.SAVE:o.save();break;case Be.RESTORE:o.restore();break;case Be.TRANSLATE:o.translate(a[g+1],a[g+2]),g+=2;break;case Be.SCALE:o.scale(a[g+1],a[g+2]),g+=2;break;case Be.ROTATE:o.rotate(a[g+1]),g+=1;break;case Be.GRADIENT_FILL_STYLE:g+=5;break;case Be.GRADIENT_LINE_STYLE:g+=6;break}}o.restore()}};lY.exports=__e});var vY=l((TZe,dY)=>{var fY=B(),Em=B();fY=uY(),Em=Tm();Em=Tm();dY.exports={renderWebGL:fY,renderCanvas:Em}});var ol=l((EZe,mY)=>{var w_e=Wa(),C_e=C(),Se=nl(),R_e=Gd(),q_e=Bd(),A_e=Ud(),b_e=Wd(),P_e=Kd(),M_e=Zd(),L_e=jd(),O_e=ev(),cY=na(),pY=Fe(),ms=z(),br=he(),nr=Oe(),F_e=vY(),un=new C_e({Extends:pY,Mixins:[R_e,q_e,A_e,b_e,P_e,L_e,O_e,M_e,F_e],initialize:function(t,i){var r=br(i,"x",0),s=br(i,"y",0);pY.call(this,t,"Graphics"),this.setPosition(r,s),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(i)},setDefaultStyles:function(e){return br(e,"lineStyle",null)&&(this.defaultStrokeWidth=br(e,"lineStyle.width",1),this.defaultStrokeColor=br(e,"lineStyle.color",16777215),this.defaultStrokeAlpha=br(e,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),br(e,"fillStyle",null)&&(this.defaultFillColor=br(e,"fillStyle.color",16777215),this.defaultFillAlpha=br(e,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(e,t,i){return i===void 0&&(i=1),this.commandBuffer.push(Se.LINE_STYLE,e,t,i),this._lineWidth=e,this},fillStyle:function(e,t){return t===void 0&&(t=1),this.commandBuffer.push(Se.FILL_STYLE,e,t),this},fillGradientStyle:function(e,t,i,r,s,n,a,h){return s===void 0&&(s=1),n===void 0&&(n=s),a===void 0&&(a=s),h===void 0&&(h=s),this.commandBuffer.push(Se.GRADIENT_FILL_STYLE,s,n,a,h,e,t,i,r),this},lineGradientStyle:function(e,t,i,r,s,n){return n===void 0&&(n=1),this.commandBuffer.push(Se.GRADIENT_LINE_STYLE,e,n,t,i,r,s),this},beginPath:function(){return this.commandBuffer.push(Se.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(Se.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(Se.FILL_PATH),this},fill:function(){return this.commandBuffer.push(Se.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(Se.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(Se.STROKE_PATH),this},fillCircleShape:function(e){return this.fillCircle(e.x,e.y,e.radius)},strokeCircleShape:function(e){return this.strokeCircle(e.x,e.y,e.radius)},fillCircle:function(e,t,i){return this.beginPath(),this.arc(e,t,i,0,nr.PI2),this.fillPath(),this},strokeCircle:function(e,t,i){return this.beginPath(),this.arc(e,t,i,0,nr.PI2),this.strokePath(),this},fillRectShape:function(e){return this.fillRect(e.x,e.y,e.width,e.height)},strokeRectShape:function(e){return this.strokeRect(e.x,e.y,e.width,e.height)},fillRect:function(e,t,i,r){return this.commandBuffer.push(Se.FILL_RECT,e,t,i,r),this},strokeRect:function(e,t,i,r){var s=this._lineWidth/2,n=e-s,a=e+s;return this.beginPath(),this.moveTo(e,t),this.lineTo(e,t+r),this.strokePath(),this.beginPath(),this.moveTo(e+i,t),this.lineTo(e+i,t+r),this.strokePath(),this.beginPath(),this.moveTo(n,t),this.lineTo(a+i,t),this.strokePath(),this.beginPath(),this.moveTo(n,t+r),this.lineTo(a+i,t+r),this.strokePath(),this},fillRoundedRect:function(e,t,i,r,s){s===void 0&&(s=20);var n=s,a=s,h=s,o=s;return typeof s!="number"&&(n=ms(s,"tl",20),a=ms(s,"tr",20),h=ms(s,"bl",20),o=ms(s,"br",20)),this.beginPath(),this.moveTo(e+n,t),this.lineTo(e+i-a,t),this.arc(e+i-a,t+a,a,-nr.TAU,0),this.lineTo(e+i,t+r-o),this.arc(e+i-o,t+r-o,o,0,nr.TAU),this.lineTo(e+h,t+r),this.arc(e+h,t+r-h,h,nr.TAU,Math.PI),this.lineTo(e,t+n),this.arc(e+n,t+n,n,-Math.PI,-nr.TAU),this.fillPath(),this},strokeRoundedRect:function(e,t,i,r,s){s===void 0&&(s=20);var n=s,a=s,h=s,o=s;return typeof s!="number"&&(n=ms(s,"tl",20),a=ms(s,"tr",20),h=ms(s,"bl",20),o=ms(s,"br",20)),this.beginPath(),this.moveTo(e+n,t),this.lineTo(e+i-a,t),this.moveTo(e+i-a,t),this.arc(e+i-a,t+a,a,-nr.TAU,0),this.lineTo(e+i,t+r-o),this.moveTo(e+i,t+r-o),this.arc(e+i-o,t+r-o,o,0,nr.TAU),this.lineTo(e+h,t+r),this.moveTo(e+h,t+r),this.arc(e+h,t+r-h,h,nr.TAU,Math.PI),this.lineTo(e,t+n),this.moveTo(e,t+n),this.arc(e+n,t+n,n,-Math.PI,-nr.TAU),this.strokePath(),this},fillPointShape:function(e,t){return this.fillPoint(e.x,e.y,t)},fillPoint:function(e,t,i){return!i||i<1?i=1:(e-=i/2,t-=i/2),this.commandBuffer.push(Se.FILL_RECT,e,t,i,i),this},fillTriangleShape:function(e){return this.fillTriangle(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)},strokeTriangleShape:function(e){return this.strokeTriangle(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)},fillTriangle:function(e,t,i,r,s,n){return this.commandBuffer.push(Se.FILL_TRIANGLE,e,t,i,r,s,n),this},strokeTriangle:function(e,t,i,r,s,n){return this.commandBuffer.push(Se.STROKE_TRIANGLE,e,t,i,r,s,n),this},strokeLineShape:function(e){return this.lineBetween(e.x1,e.y1,e.x2,e.y2)},lineBetween:function(e,t,i,r){return this.beginPath(),this.moveTo(e,t),this.lineTo(i,r),this.strokePath(),this},lineTo:function(e,t){return this.commandBuffer.push(Se.LINE_TO,e,t),this},moveTo:function(e,t){return this.commandBuffer.push(Se.MOVE_TO,e,t),this},strokePoints:function(e,t,i,r){t===void 0&&(t=!1),i===void 0&&(i=!1),r===void 0&&(r=e.length),this.beginPath(),this.moveTo(e[0].x,e[0].y);for(var s=1;s<r;s++)this.lineTo(e[s].x,e[s].y);return t&&this.lineTo(e[0].x,e[0].y),i&&this.closePath(),this.strokePath(),this},fillPoints:function(e,t,i,r){t===void 0&&(t=!1),i===void 0&&(i=!1),r===void 0&&(r=e.length),this.beginPath(),this.moveTo(e[0].x,e[0].y);for(var s=1;s<r;s++)this.lineTo(e[s].x,e[s].y);return t&&this.lineTo(e[0].x,e[0].y),i&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(e,t){t===void 0&&(t=32);var i=e.getPoints(t);return this.strokePoints(i,!0)},strokeEllipse:function(e,t,i,r,s){s===void 0&&(s=32);var n=new cY(e,t,i,r),a=n.getPoints(s);return this.strokePoints(a,!0)},fillEllipseShape:function(e,t){t===void 0&&(t=32);var i=e.getPoints(t);return this.fillPoints(i,!0)},fillEllipse:function(e,t,i,r,s){s===void 0&&(s=32);var n=new cY(e,t,i,r),a=n.getPoints(s);return this.fillPoints(a,!0)},arc:function(e,t,i,r,s,n,a){return n===void 0&&(n=!1),a===void 0&&(a=0),this.commandBuffer.push(Se.ARC,e,t,i,r,s,n,a),this},slice:function(e,t,i,r,s,n,a){return n===void 0&&(n=!1),a===void 0&&(a=0),this.commandBuffer.push(Se.BEGIN_PATH),this.commandBuffer.push(Se.MOVE_TO,e,t),this.commandBuffer.push(Se.ARC,e,t,i,r,s,n,a),this.commandBuffer.push(Se.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(Se.SAVE),this},restore:function(){return this.commandBuffer.push(Se.RESTORE),this},translateCanvas:function(e,t){return this.commandBuffer.push(Se.TRANSLATE,e,t),this},scaleCanvas:function(e,t){return this.commandBuffer.push(Se.SCALE,e,t),this},rotateCanvas:function(e){return this.commandBuffer.push(Se.ROTATE,e),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(e,t,i){var r=this.scene.sys,s=r.game.renderer;t===void 0&&(t=r.scale.width),i===void 0&&(i=r.scale.height),un.TargetCamera.setScene(this.scene),un.TargetCamera.setViewport(0,0,t,i),un.TargetCamera.scrollX=this.x,un.TargetCamera.scrollY=this.y;var n,a;if(typeof e=="string")if(r.textures.exists(e)){n=r.textures.get(e);var h=n.getSourceImage();h instanceof HTMLCanvasElement&&(a=h.getContext("2d"))}else n=r.textures.createCanvas(e,t,i),a=n.getSourceImage().getContext("2d");else e instanceof HTMLCanvasElement&&(a=e.getContext("2d"));return a&&(this.renderCanvas(s,this,un.TargetCamera,null,a,!1),n&&n.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});un.TargetCamera=new w_e;mY.exports=un});var ll=l((SZe,gY)=>{var D_e=C(),ul=new D_e({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i])},set:function(e){return this.entries.indexOf(e)===-1&&this.entries.push(e),this},get:function(e,t){for(var i=0;i<this.entries.length;i++){var r=this.entries[i];if(r[e]===t)return r}},getArray:function(){return this.entries.slice(0)},delete:function(e){var t=this.entries.indexOf(e);return t>-1&&this.entries.splice(t,1),this},dump:function(){console.group("Set");for(var e=0;e<this.entries.length;e++){var t=this.entries[e];console.log(t)}console.groupEnd()},each:function(e,t){var i,r=this.entries.slice(),s=r.length;if(t)for(i=0;i<s&&e.call(t,r[i],i)!==!1;i++);else for(i=0;i<s&&e(r[i],i)!==!1;i++);return this},iterate:function(e,t){var i,r=this.entries.length;if(t)for(i=0;i<r&&e.call(t,this.entries[i],i)!==!1;i++);else for(i=0;i<r&&e(this.entries[i],i)!==!1;i++);return this},iterateLocal:function(e){var t,i=[];for(t=1;t<arguments.length;t++)i.push(arguments[t]);var r=this.entries.length;for(t=0;t<r;t++){var s=this.entries[t];s[e].apply(s,i)}return this},clear:function(){return this.entries.length=0,this},contains:function(e){return this.entries.indexOf(e)>-1},union:function(e){var t=new ul;return e.entries.forEach(function(i){t.set(i)}),this.entries.forEach(function(i){t.set(i)}),t},intersect:function(e){var t=new ul;return this.entries.forEach(function(i){e.contains(i)&&t.set(i)}),t},difference:function(e){var t=new ul;return this.entries.forEach(function(i){e.contains(i)||t.set(i)}),t},size:{get:function(){return this.entries.length},set:function(e){return e<this.entries.length?this.entries.length=e:this.entries.length}}});gY.exports=ul});var Sm=l((_Ze,xY)=>{var I_e=C(),N_e=qn(),yi=z(),Pr=bu(),G_e=_p(),B_e=new I_e({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(Pr.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(e){var t=this.parent;if(e===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,t;Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i];this.nextAnim===null?this.nextAnim=r:this.nextAnimsQueue.push(r)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(e){this.isPlaying&&this.stop();var t=this.animationManager,i=typeof e=="string"?e:yi(e,"key",null),r=this.exists(i)?this.get(i):t.get(i);if(!r)console.warn("Missing animation: "+i);else{this.currentAnim=r;var s=r.getTotalFrames(),n=yi(e,"frameRate",r.frameRate),a=yi(e,"duration",r.duration);r.calculateDuration(this,s,a,n),this.delay=yi(e,"delay",r.delay),this.repeat=yi(e,"repeat",r.repeat),this.repeatDelay=yi(e,"repeatDelay",r.repeatDelay),this.yoyo=yi(e,"yoyo",r.yoyo),this.showOnStart=yi(e,"showOnStart",r.showOnStart),this.hideOnComplete=yi(e,"hideOnComplete",r.hideOnComplete),this.skipMissedFrames=yi(e,"skipMissedFrames",r.skipMissedFrames),this.timeScale=yi(e,"timeScale",this.timeScale);var h=yi(e,"startFrame",0);h>r.getTotalFrames()&&(h=0);var o=r.frames[h];h===0&&!this.forward&&(o=r.getLastFrame()),this.currentFrame=o}return this.parent},pause:function(e){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),e!==void 0&&this.setCurrentFrame(e),this.parent},resume:function(e){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),e!==void 0&&this.setCurrentFrame(e),this.parent},playAfterDelay:function(e,t){if(!this.isPlaying)this.delayCounter=t,this.play(e,!0);else{var i=this.nextAnim,r=this.nextAnimsQueue;i&&r.unshift(i),this.nextAnim=e,this._pendingStop=1,this._pendingStopValue=t}return this.parent},playAfterRepeat:function(e,t){if(t===void 0&&(t=1),!this.isPlaying)this.play(e);else{var i=this.nextAnim,r=this.nextAnimsQueue;i&&r.unshift(i),this.repeatCounter!==-1&&t>this.repeatCounter&&(t=this.repeatCounter),this.nextAnim=e,this._pendingStop=2,this._pendingStopValue=t}return this.parent},play:function(e,t){t===void 0&&(t=!1);var i=this.currentAnim,r=this.parent,s=typeof e=="string"?e:e.key;if(t&&this.isPlaying&&i.key===s)return r;if(i&&this.isPlaying){var n=this.animationManager.getMix(i.key,e);if(n>0)return this.playAfterDelay(e,n)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(e)},playReverse:function(e,t){t===void 0&&(t=!1);var i=typeof e=="string"?e:e.key;return t&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(e))},startAnimation:function(e){this.load(e);var t=this.currentAnim,i=this.parent;return t&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,t.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),i},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(Pr.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(Pr.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(Pr.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(Pr.ANIMATION_COMPLETE,Pr.ANIMATION_COMPLETE_KEY)},emitEvents:function(e,t){var i=this.currentAnim,r=this.currentFrame,s=this.parent,n=r.textureFrame;s.emit(e,i,r,s,n),t&&s.emit(t+i.key,i,r,s,n)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var e=this.currentFrame;if(!e)return 0;var t=e.progress;return this.inReverse&&(t*=-1),t},setProgress:function(e){return this.forward||(e=1-e),this.setCurrentFrame(this.currentAnim.getFrameByProgress(e)),this.parent},setRepeat:function(e){return this.repeatCounter=e===-1?Number.MAX_VALUE:e,this.parent},globalRemove:function(e,t){t===void 0&&(t=this.currentAnim),this.isPlaying&&t.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=this.currentAnim,r=this.parent;return i?(t&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),i.getFirstTick(this),this.emitEvents(Pr.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!e,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(i.frames[0]),this.parent):r},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var e=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(e)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var e=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(e)}return this.parent},stopAfterDelay:function(e){return this._pendingStop=1,this._pendingStopValue=e,this.parent},stopAfterRepeat:function(e){return e===void 0&&(e=1),this.repeatCounter!==-1&&e>this.repeatCounter&&(e=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=e,this.parent},stopOnFrame:function(e){return this._pendingStop=3,this._pendingStopValue=e,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(e,t){var i=this.currentAnim;if(!(!this.isPlaying||!i||i.paused)){if(this.accumulator+=t*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=t,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?i.nextFrame(this):i.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var r=0;do this.forward?i.nextFrame(this):i.previousFrame(this),r++;while(this.isPlaying&&this.accumulator>this.nextTick&&r<60)}}},setCurrentFrame:function(e){var t=this.parent;return this.currentFrame=e,t.texture=e.frame.texture,t.frame=e.frame,t.isCropped&&t.frame.updateCropUVs(t._crop,t.flipX,t.flipY),e.setAlpha&&(t.alpha=e.alpha),t.setSizeToFrame(),t._originComponent&&(e.frame.customPivot?t.setOrigin(e.frame.pivotX,e.frame.pivotY):t.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(Pr.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===e&&this.stop()),t},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(e){return this.anims?this.anims.get(e):null},exists:function(e){return this.anims?this.anims.has(e):!1},create:function(e){var t=e.key,i=!1;return t&&(i=this.get(t),i||(i=new G_e(this,t,e),this.anims||(this.anims=new N_e),this.anims.set(t,i))),i},generateFrameNames:function(e,t){return this.animationManager.generateFrameNames(e,t)},generateFrameNumbers:function(e,t){return this.animationManager.generateFrameNumbers(e,t)},remove:function(e){var t=this.get(e);return t&&(this.currentAnim===t&&this.stop(),this.anims.delete(e)),t},destroy:function(){this.animationManager.off(Pr.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});xY.exports=B_e});var TY=l((wZe,yY)=>{var U_e=function(e,t,i,r){i.addToRenderList(t),t.pipeline.batchSprite(t,i,r)};yY.exports=U_e});var SY=l((CZe,EY)=>{var k_e=function(e,t,i,r){i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)};EY.exports=k_e});var RY=l((RZe,CY)=>{var _Y=B(),wY=B();_Y=TY();wY=SY();CY.exports={renderWebGL:_Y,renderCanvas:wY}});var aa=l((qZe,AY)=>{var z_e=Sm(),Y_e=C(),Nt=ye(),qY=Fe(),X_e=RY(),V_e=new Y_e({Extends:qY,Mixins:[Nt.Alpha,Nt.BlendMode,Nt.Depth,Nt.Flip,Nt.GetBounds,Nt.Mask,Nt.Origin,Nt.Pipeline,Nt.ScrollFactor,Nt.Size,Nt.TextureCrop,Nt.Tint,Nt.Transform,Nt.Visible,X_e],initialize:function(t,i,r,s,n){qY.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new z_e(this),this.setTexture(s,n),this.setPosition(i,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(e,t){this.anims.update(e,t)},play:function(e,t){return this.anims.play(e,t)},playReverse:function(e,t){return this.anims.playReverse(e,t)},playAfterDelay:function(e,t){return this.anims.playAfterDelay(e,t)},playAfterRepeat:function(e,t){return this.anims.playAfterRepeat(e,t)},chain:function(e){return this.anims.chain(e)},stop:function(){return this.anims.stop()},stopAfterDelay:function(e){return this.anims.stopAfterDelay(e)},stopAfterRepeat:function(e){return this.anims.stopAfterRepeat(e)},stopOnFrame:function(e){return this.anims.stopOnFrame(e)},toJSON:function(){return Nt.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});AY.exports=V_e});var fl=l((AZe,MY)=>{var ne=hv(),W_e=C(),ha=Vr(),bY=ue(),H_e=Vu(),ge=z(),De=he(),PY=ae(),K_e=im(),Z_e=ll(),J_e=aa(),Q_e=new W_e({Extends:bY,initialize:function(t,i,r){bY.call(this),r?i&&!Array.isArray(i)&&(i=[i]):Array.isArray(i)?PY(i[0])&&(r=i,i=null):PY(i)&&(r=i,i=null),this.scene=t,this.children=new Z_e,this.isParent=!0,this.type="Group",this.classType=ge(r,"classType",J_e),this.name=ge(r,"name",""),this.active=ge(r,"active",!0),this.maxSize=ge(r,"maxSize",-1),this.defaultKey=ge(r,"defaultKey",null),this.defaultFrame=ge(r,"defaultFrame",null),this.runChildUpdate=ge(r,"runChildUpdate",!1),this.createCallback=ge(r,"createCallback",null),this.removeCallback=ge(r,"removeCallback",null),this.createMultipleCallback=ge(r,"createMultipleCallback",null),this.internalCreateCallback=ge(r,"internalCreateCallback",null),this.internalRemoveCallback=ge(r,"internalRemoveCallback",null),i&&this.addMultiple(i),r&&this.createMultiple(r),this.on(ha.ADDED_TO_SCENE,this.addedToScene,this),this.on(ha.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(e,t,i,r,s,n){if(e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.defaultKey),r===void 0&&(r=this.defaultFrame),s===void 0&&(s=!0),n===void 0&&(n=!0),this.isFull())return null;var a=new this.classType(this.scene,e,t,i,r);return a.addToDisplayList(this.scene.sys.displayList),a.addToUpdateList(),a.visible=s,a.setActive(n),this.add(a),a},createMultiple:function(e){if(this.isFull())return[];Array.isArray(e)||(e=[e]);var t=[];if(e[0].key)for(var i=0;i<e.length;i++){var r=this.createFromConfig(e[i]);t=t.concat(r)}return t},createFromConfig:function(e){if(this.isFull())return[];this.classType=ge(e,"classType",this.classType);var t=ge(e,"key",void 0),i=ge(e,"frame",null),r=ge(e,"visible",!0),s=ge(e,"active",!0),n=[];if(t===void 0)return n;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);var a=ge(e,"repeat",0),h=ge(e,"randomKey",!1),o=ge(e,"randomFrame",!1),u=ge(e,"yoyo",!1),f=ge(e,"quantity",!1),d=ge(e,"frameQuantity",1),v=ge(e,"max",0),c=K_e(t,i,{max:v,qty:f||d,random:h,randomB:o,repeat:a,yoyo:u});e.createCallback&&(this.createCallback=e.createCallback),e.removeCallback&&(this.removeCallback=e.removeCallback);for(var p=0;p<c.length;p++){var m=this.create(0,0,c[p].a,c[p].b,r,s);if(!m)break;n.push(m)}var x=De(e,"setXY.x",0),g=De(e,"setXY.y",0),y=De(e,"setXY.stepX",0),T=De(e,"setXY.stepY",0);ne.SetXY(n,x,g,y,T);var S=De(e,"setRotation.value",0),E=De(e,"setRotation.step",0);ne.SetRotation(n,S,E);var _=De(e,"setScale.x",1),w=De(e,"setScale.y",_),R=De(e,"setScale.stepX",0),q=De(e,"setScale.stepY",0);ne.SetScale(n,_,w,R,q);var A=De(e,"setOrigin.x",.5),b=De(e,"setOrigin.y",A),L=De(e,"setOrigin.stepX",0),M=De(e,"setOrigin.stepY",0);ne.SetOrigin(n,A,b,L,M);var G=De(e,"setAlpha.value",1),P=De(e,"setAlpha.step",0);ne.SetAlpha(n,G,P);var D=De(e,"setDepth.value",0),I=De(e,"setDepth.step",0);ne.SetDepth(n,D,I);var F=De(e,"setScrollFactor.x",1),O=De(e,"setScrollFactor.y",F),K=De(e,"setScrollFactor.stepX",0),H=De(e,"setScrollFactor.stepY",0);ne.SetScrollFactor(n,F,O,K,H);var Y=ge(e,"hitArea",null),ee=ge(e,"hitAreaCallback",null);Y&&ne.SetHitArea(n,Y,ee);var U=ge(e,"gridAlign",!1);return U&&ne.GridAlign(n,U),this.createMultipleCallback&&this.createMultipleCallback.call(this,n),n},preUpdate:function(e,t){if(!(!this.runChildUpdate||this.children.size===0))for(var i=this.children.entries.slice(),r=0;r<i.length;r++){var s=i[r];s.active&&s.update(e,t)}},add:function(e,t){return t===void 0&&(t=!1),this.isFull()?this:(this.children.set(e),this.internalCreateCallback&&this.internalCreateCallback.call(this,e),this.createCallback&&this.createCallback.call(this,e),t&&(e.addToDisplayList(this.scene.sys.displayList),e.addToUpdateList()),e.on(ha.DESTROY,this.remove,this),this)},addMultiple:function(e,t){if(t===void 0&&(t=!1),Array.isArray(e))for(var i=0;i<e.length;i++)this.add(e[i],t);return this},remove:function(e,t,i){return t===void 0&&(t=!1),i===void 0&&(i=!1),this.children.contains(e)?(this.children.delete(e),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,e),this.removeCallback&&this.removeCallback.call(this,e),e.off(ha.DESTROY,this.remove,this),i?e.destroy():t&&(e.removeFromDisplayList(),e.removeFromUpdateList()),this):this},clear:function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);for(var i=this.children,r=0;r<i.size;r++){var s=i.entries[r];s.off(ha.DESTROY,this.remove,this),t?s.destroy():e&&(s.removeFromDisplayList(),s.removeFromUpdateList())}return this.children.clear(),this},contains:function(e){return this.children.contains(e)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(e,t,i,r){return H_e(this.children.entries,e,t,i,r)},getFirst:function(e,t,i,r,s,n,a){return this.getHandler(!0,1,e,t,i,r,s,n,a)},getFirstNth:function(e,t,i,r,s,n,a,h){return this.getHandler(!0,e,t,i,r,s,n,a,h)},getLast:function(e,t,i,r,s,n,a){return this.getHandler(!1,1,e,t,i,r,s,n,a)},getLastNth:function(e,t,i,r,s,n,a,h){return this.getHandler(!1,e,t,i,r,s,n,a,h)},getHandler:function(e,t,i,r,s,n,a,h,o){i===void 0&&(i=!1),r===void 0&&(r=!1);var u,f,d=0,v=this.children.entries;if(e)for(f=0;f<v.length;f++)if(u=v[f],u.active===i){if(d++,d===t)break}else u=null;else for(f=v.length-1;f>=0;f--)if(u=v[f],u.active===i){if(d++,d===t)break}else u=null;return u?(typeof s=="number"&&(u.x=s),typeof n=="number"&&(u.y=n),u):r?this.create(s,n,a,h,o):null},get:function(e,t,i,r,s){return this.getFirst(!1,!0,e,t,i,r,s)},getFirstAlive:function(e,t,i,r,s,n){return this.getFirst(!0,e,t,i,r,s,n)},getFirstDead:function(e,t,i,r,s,n){return this.getFirst(!1,e,t,i,r,s,n)},playAnimation:function(e,t){return ne.PlayAnimation(this.children.entries,e,t),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(e){e===void 0&&(e=!0);for(var t=0,i=0;i<this.children.size;i++)this.children.entries[i].active===e&&t++;return t},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var e=this.getTotalUsed(),t=this.maxSize===-1?999999999999:this.maxSize;return t-e},setActive:function(e){return this.active=e,this},setName:function(e){return this.name=e,this},propertyValueSet:function(e,t,i,r,s){return ne.PropertyValueSet(this.children.entries,e,t,i,r,s),this},propertyValueInc:function(e,t,i,r,s){return ne.PropertyValueInc(this.children.entries,e,t,i,r,s),this},setX:function(e,t){return ne.SetX(this.children.entries,e,t),this},setY:function(e,t){return ne.SetY(this.children.entries,e,t),this},setXY:function(e,t,i,r){return ne.SetXY(this.children.entries,e,t,i,r),this},incX:function(e,t){return ne.IncX(this.children.entries,e,t),this},incY:function(e,t){return ne.IncY(this.children.entries,e,t),this},incXY:function(e,t,i,r){return ne.IncXY(this.children.entries,e,t,i,r),this},shiftPosition:function(e,t,i){return ne.ShiftPosition(this.children.entries,e,t,i),this},angle:function(e,t){return ne.Angle(this.children.entries,e,t),this},rotate:function(e,t){return ne.Rotate(this.children.entries,e,t),this},rotateAround:function(e,t){return ne.RotateAround(this.children.entries,e,t),this},rotateAroundDistance:function(e,t,i){return ne.RotateAroundDistance(this.children.entries,e,t,i),this},setAlpha:function(e,t){return ne.SetAlpha(this.children.entries,e,t),this},setTint:function(e,t,i,r){return ne.SetTint(this.children.entries,e,t,i,r),this},setOrigin:function(e,t,i,r){return ne.SetOrigin(this.children.entries,e,t,i,r),this},scaleX:function(e,t){return ne.ScaleX(this.children.entries,e,t),this},scaleY:function(e,t){return ne.ScaleY(this.children.entries,e,t),this},scaleXY:function(e,t,i,r){return ne.ScaleXY(this.children.entries,e,t,i,r),this},setDepth:function(e,t){return ne.SetDepth(this.children.entries,e,t),this},setBlendMode:function(e){return ne.SetBlendMode(this.children.entries,e),this},setHitArea:function(e,t){return ne.SetHitArea(this.children.entries,e,t),this},shuffle:function(){return ne.Shuffle(this.children.entries),this},kill:function(e){this.children.contains(e)&&e.setActive(!1)},killAndHide:function(e){this.children.contains(e)&&(e.setActive(!1),e.setVisible(!1))},setVisible:function(e,t,i){return ne.SetVisible(this.children.entries,e,t,i),this},toggleVisible:function(){return ne.ToggleVisible(this.children.entries),this},destroy:function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(ha.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(t,e),this.scene=void 0,this.children=void 0)}});MY.exports=Q_e});var OY=l((bZe,LY)=>{var $_e=function(e,t,i,r){i.addToRenderList(t),this.pipeline.batchSprite(t,i,r)};LY.exports=$_e});var DY=l((PZe,FY)=>{var j_e=function(e,t,i,r){i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)};FY.exports=j_e});var BY=l((MZe,GY)=>{var IY=B(),NY=B();IY=OY();NY=DY();GY.exports={renderWebGL:IY,renderCanvas:NY}});var dl=l((LZe,kY)=>{var ewe=C(),Xt=ye(),UY=Fe(),twe=BY(),iwe=new ewe({Extends:UY,Mixins:[Xt.Alpha,Xt.BlendMode,Xt.Depth,Xt.Flip,Xt.GetBounds,Xt.Mask,Xt.Origin,Xt.Pipeline,Xt.ScrollFactor,Xt.Size,Xt.TextureCrop,Xt.Tint,Xt.Transform,Xt.Visible,twe],initialize:function(t,i,r,s,n){UY.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(s,n),this.setPosition(i,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});kY.exports=iwe});var YY=l((OZe,zY)=>{var rwe=function(e,t,i){var r=t.list,s=r.length;if(s!==0){t.depthSort(),e.pipelines.preBatch(t);var n=t.blendMode!==-1;n||e.setBlendMode(0);for(var a=t.alpha,h=0;h<s;h++){var o=r[h];if(!!o.willRender(i)){var u,f,d,v;if(o.alphaTopLeft!==void 0)u=o.alphaTopLeft,f=o.alphaTopRight,d=o.alphaBottomLeft,v=o.alphaBottomRight;else{var c=o.alpha;u=c,f=c,d=c,v=c}!n&&o.blendMode!==e.currentBlendMode&&e.setBlendMode(o.blendMode);var p=o.mask;p&&p.preRenderWebGL(e,o,i);var m=o.type;m!==e.currentType&&(e.newType=!0,e.currentType=m),e.nextTypeMatch=h<s-1?r[h+1].type===e.currentType:!1,o.setAlpha(u*a,f*a,d*a,v*a),o.renderWebGL(e,o,i),o.setAlpha(u,f,d,v),p&&p.postRenderWebGL(e,i),e.newType=!1}}e.pipelines.postBatch(t)}};zY.exports=rwe});var VY=l((FZe,XY)=>{var swe=function(e,t,i){var r=t.list;if(r.length!==0){t.depthSort();var s=t.blendMode!==-1;s||e.setBlendMode(0);var n=t._alpha;t.mask&&t.mask.preRenderCanvas(e,null,i);for(var a=0;a<r.length;a++){var h=r[a];if(!!h.willRender(i)){var o=h.alpha;!s&&h.blendMode!==e.currentBlendMode&&e.setBlendMode(h.blendMode),h.setAlpha(o*n),h.renderCanvas(e,h,i),h.setAlpha(o)}}t.mask&&t.mask.postRenderCanvas(e)}};XY.exports=swe});var ZY=l((DZe,KY)=>{var WY=B(),HY=B();WY=YY();HY=VY();KY.exports={renderWebGL:WY,renderCanvas:HY}});var cl=l((IZe,$Y)=>{var nwe=_i(),awe=C(),oa=ye(),hwe=Mo(),Ch=Js(),JY=ue(),Rh=Vr(),QY=ia(),owe=ZY(),vl=Ge(),uwe=vs(),lwe=new awe({Extends:QY,Mixins:[oa.AlphaSingle,oa.BlendMode,oa.Depth,oa.Mask,oa.Pipeline,oa.Visible,JY,owe],initialize:function(t,i){QY.call(this,t),JY.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(nwe.SKIP_CHECK),i&&this.add(i),t.sys.queueDepthSort()},setActive:function(e){return this.active=e,this},setName:function(e){return this.name=e,this},setState:function(e){return this.state=e,this},setDataEnabled:function(){return this.data||(this.data=new Ch(this)),this},setData:function(e,t){return this.data||(this.data=new Ch(this)),this.data.set(e,t),this},incData:function(e,t){return this.data||(this.data=new Ch(this)),this.data.inc(e,t),this},toggleData:function(e){return this.data||(this.data=new Ch(this)),this.data.toggle(e),this},getData:function(e){return this.data||(this.data=new Ch(this)),this.data.get(e)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return hwe(this)},willRender:function(e){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&e.id)},getIndexList:function(){for(var e=this,t=this.parentContainer,i=[];t&&(i.unshift(t.getIndex(e)),e=t,t.parentContainer);)t=t.parentContainer;return i.unshift(this.displayList.getIndex(e)),i},addChildCallback:function(e){e.displayList&&e.displayList!==this&&e.removeFromDisplayList(),e.displayList||(this.queueDepthSort(),e.displayList=this,e.emit(Rh.ADDED_TO_SCENE,e,this.scene),this.events.emit(vl.ADDED_TO_SCENE,e,this.scene))},removeChildCallback:function(e){this.queueDepthSort(),e.displayList=null,e.emit(Rh.REMOVED_FROM_SCENE,e,this.scene),this.events.emit(vl.REMOVED_FROM_SCENE,e,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(uwe(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(e,t){return e._depth-t._depth},getChildren:function(){return this.list},addToDisplayList:function(e){return e===void 0&&(e=this.scene.sys.displayList),this.displayList&&this.displayList!==e&&this.removeFromDisplayList(),e.exists(this)||(this.displayList=e,e.add(this,!0),e.queueDepthSort(),this.emit(Rh.ADDED_TO_SCENE,this,this.scene),e.events.emit(vl.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var e=this.displayList||this.scene.sys.displayList;return e.exists(this)&&(e.remove(this,!0),e.queueDepthSort(),this.displayList=null,this.emit(Rh.REMOVED_FROM_SCENE,this,this.scene),e.events.emit(vl.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(Rh.DESTROY,this);for(var e=this.list.length;e--;)this.list[e].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});$Y.exports=lwe});var gs=l((NZe,jY)=>{var qh=Qa(),fwe=ku(),dwe=function(e,t){var i=qh.Power0;if(typeof e=="string")if(qh.hasOwnProperty(e))i=qh[e];else{var r="";e.indexOf(".")&&(r=e.substr(e.indexOf(".")+1),r.toLowerCase()==="in"?r="easeIn":r.toLowerCase()==="out"?r="easeOut":r.toLowerCase()==="inout"&&(r="easeInOut")),e=fwe(e.substr(0,e.indexOf(".")+1)+r),qh.hasOwnProperty(e)&&(i=qh[e])}else typeof e=="function"?i=e:Array.isArray(e)&&e.length;if(!t)return i;var s=t.slice(0);return s.unshift(0),function(n){return s[0]=n,i.apply(this,s)}};jY.exports=dwe});var _m=l((GZe,eX)=>{var vwe=C(),cwe=th(),pwe=gs(),mwe=z(),gwe=Xr(),xwe=new vwe({initialize:function(t,i,r,s){s===void 0&&(s=!1),this.propertyKey=i,this.propertyValue=r,this.defaultValue=r,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=s,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(e,t){e===void 0&&(e={}),t&&(this.propertyKey=t),this.propertyValue=mwe(e,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(e){return this.propertyValue=e,this.setMethods()},setMethods:function(){var e=this.propertyValue,t=typeof e;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,t==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(e))this.onEmit=this.randomStaticValueEmit;else if(t==="function")this.emitOnly?this.onEmit=e:this.onUpdate=e;else if(t==="object"&&this.hasBoth(e,"start","end")){this.start=e.start,this.end=e.end;var i=this.has(e,"random");if(i&&(this.onEmit=this.randomRangedValueEmit),this.has(e,"steps"))this.steps=e.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var r=this.has(e,"ease")?e.ease:"Linear";this.ease=pwe(r,e.easeParams),i||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(t==="object"&&this.hasBoth(e,"min","max"))this.start=e.min,this.end=e.max,this.onEmit=this.randomRangedValueEmit;else if(t==="object"&&this.has(e,"random")){var s=e.random;Array.isArray(s)&&(this.start=s[0],this.end=s[1]),this.onEmit=this.randomRangedValueEmit}else t==="object"&&this.hasEither(e,"onEmit","onUpdate")&&(this.has(e,"onEmit")&&(this.onEmit=e.onEmit),this.has(e,"onUpdate")&&(this.onUpdate=e.onUpdate));return this},has:function(e,t){return e.hasOwnProperty(t)},hasBoth:function(e,t,i){return e.hasOwnProperty(t)&&e.hasOwnProperty(i)},hasEither:function(e,t,i){return e.hasOwnProperty(t)||e.hasOwnProperty(i)},defaultEmit:function(e,t,i){return i},defaultUpdate:function(e,t,i,r){return r},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var e=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[e]},randomRangedValueEmit:function(e,t){var i=cwe(this.start,this.end);return e&&e.data[t]&&(e.data[t].min=i),i},steppedEmit:function(){var e=this.counter,t=this.counter+(this.end-this.start)/this.steps;return this.counter=gwe(t,this.start,this.end),e},easedValueEmit:function(e,t){if(e&&e.data[t]){var i=e.data[t];i.min=this.start,i.max=this.end}return this.start},easeValueUpdate:function(e,t,i){var r=e.data[t];return(r.max-r.min)*this.ease(i)+r.min}});eX.exports=xwe});var wm=l((BZe,tX)=>{var ywe=C(),Ah=z(),Twe=new ywe({initialize:function(t,i,r,s,n){if(typeof t=="object"){var a=t;t=Ah(a,"x",0),i=Ah(a,"y",0),r=Ah(a,"power",0),s=Ah(a,"epsilon",100),n=Ah(a,"gravity",50)}else t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=100),n===void 0&&(n=50);this.x=t,this.y=i,this.active=!0,this._gravity=n,this._power=0,this._epsilon=0,this.power=r,this.epsilon=s},update:function(e,t){var i=this.x-e.x,r=this.y-e.y,s=i*i+r*r;if(s!==0){var n=Math.sqrt(s);s<this._epsilon&&(s=this._epsilon);var a=this._power*t/(s*n)*100;e.velocityX+=i*a,e.velocityY+=r*a}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(e){this._epsilon=e*e}},power:{get:function(){return this._power/this._gravity},set:function(e){this._power=e*this._gravity}},gravity:{get:function(){return this._gravity},set:function(e){var t=this.power;this._gravity=e,this.power=t}}});tX.exports=Twe});var Rm=l((UZe,iX)=>{var Ewe=C(),Cm=yr(),Swe=Wr(),_we=new Ewe({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(e,t){var i=this.emitter;this.frame=i.getFrame(),i.emitZone&&i.emitZone.getPoint(this),e===void 0?this.x+=i.x.onEmit(this,"x"):this.x+=e,t===void 0?this.y+=i.y.onEmit(this,"y"):this.y+=t,this.life=i.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var r=i.speedX.onEmit(this,"speedX"),s=i.speedY?i.speedY.onEmit(this,"speedY"):r;if(i.radial){var n=Cm(i.angle.onEmit(this,"angle"));this.velocityX=Math.cos(n)*Math.abs(r),this.velocityY=Math.sin(n)*Math.abs(s)}else if(i.moveTo){var a=i.moveToX.onEmit(this,"moveToX"),h=i.moveToY?i.moveToY.onEmit(this,"moveToY"):a,o=Math.atan2(h-this.y,a-this.x),u=Swe(this.x,this.y,a,h)/(this.life/1e3);this.velocityX=Math.cos(o)*u,this.velocityY=Math.sin(o)*u}else this.velocityX=r,this.velocityY=s;i.acceleration&&(this.accelerationX=i.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=i.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=i.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=i.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=i.delay.onEmit(this,"delay"),this.scaleX=i.scaleX.onEmit(this,"scaleX"),this.scaleY=i.scaleY?i.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=i.rotate.onEmit(this,"rotate"),this.rotation=Cm(this.angle),this.bounce=i.bounce.onEmit(this,"bounce"),this.alpha=i.alpha.onEmit(this,"alpha"),this.tint=i.tint.onEmit(this,"tint")},computeVelocity:function(e,t,i,r){var s=this.velocityX,n=this.velocityY,a=this.accelerationX,h=this.accelerationY,o=this.maxVelocityX,u=this.maxVelocityY;s+=e.gravityX*i,n+=e.gravityY*i,a&&(s+=a*i),h&&(n+=h*i),s>o?s=o:s<-o&&(s=-o),n>u?n=u:n<-u&&(n=-u),this.velocityX=s,this.velocityY=n;for(var f=0;f<r.length;f++)r[f].update(this,t,i)},checkBounds:function(e){var t=e.bounds,i=-this.bounce;this.x<t.x&&e.collideLeft?(this.x=t.x,this.velocityX*=i):this.x>t.right&&e.collideRight&&(this.x=t.right,this.velocityX*=i),this.y<t.y&&e.collideTop?(this.y=t.y,this.velocityY*=i):this.y>t.bottom&&e.collideBottom&&(this.y=t.bottom,this.velocityY*=i)},update:function(e,t,i){if(this.delayCurrent>0)return this.delayCurrent-=e,!1;var r=this.emitter,s=1-this.lifeCurrent/this.life;return this.lifeT=s,this.computeVelocity(r,e,t,i),this.x+=this.velocityX*t,this.y+=this.velocityY*t,r.bounds&&this.checkBounds(r),r.deathZone&&r.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=r.scaleX.onUpdate(this,"scaleX",s,this.scaleX),r.scaleY?this.scaleY=r.scaleY.onUpdate(this,"scaleY",s,this.scaleY):this.scaleY=this.scaleX,this.angle=r.rotate.onUpdate(this,"rotate",s,this.angle),this.rotation=Cm(this.angle),this.alpha=r.alpha.onUpdate(this,"alpha",s,this.alpha),this.tint=r.tint.onUpdate(this,"tint",s,this.tint),this.lifeCurrent-=e,this.lifeCurrent<=0)}});iX.exports=_we});var qm=l((kZe,rX)=>{var wwe=C(),Cwe=new wwe({initialize:function(t,i){this.source=t,this.killOnEnter=i},willKill:function(e){var t=this.source.contains(e.x,e.y);return t&&this.killOnEnter||!t&&!this.killOnEnter}});rX.exports=Cwe});var Am=l((zZe,sX)=>{var Rwe=C(),qwe=new Rwe({initialize:function(t,i,r,s,n){s===void 0&&(s=!1),n===void 0&&(n=!0),this.source=t,this.points=[],this.quantity=i,this.stepRate=r,this.yoyo=s,this.counter=-1,this.seamless=n,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var e=this.points[0],t=this.points[this.points.length-1];e.x===t.x&&e.y===t.y&&this.points.pop()}var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(e){return this.source=e,this.updateSource()},getPoint:function(e){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var t=this.points[this.counter];t&&(e.x=t.x,e.y=t.y)}});sX.exports=qwe});var bm=l((YZe,nX)=>{var Awe=function(e,t){for(var i=0;i<t.length;i++)if(e.hasOwnProperty(t[i]))return!0;return!1};nX.exports=Awe});var pl=l((XZe,aX)=>{var bwe=function(e,t){return e.hasOwnProperty(t)};aX.exports=bwe});var Pm=l((VZe,hX)=>{var Pwe=C(),Mwe=xe(),Lwe=new Pwe({initialize:function(t){this.source=t,this._tempVec=new Mwe},getPoint:function(e){var t=this._tempVec;this.source.getRandomPoint(t),e.x=t.x,e.y=t.y}});hX.exports=Lwe});var Mm=l((WZe,oX)=>{var Owe=_i(),Fwe=C(),ml=ye(),Dwe=qm(),Iwe=Am(),He=_m(),Vt=z(),Nwe=em(),Gwe=bm(),ni=pl(),Bwe=Rm(),Uwe=Pm(),kwe=Ae(),zwe=vs(),Ywe=xe(),Xwe=Xr(),Vwe=new Fwe({Mixins:[ml.BlendMode,ml.Mask,ml.ScrollFactor,ml.Visible],initialize:function(t,i){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=Bwe,this.x=new He(i,"x",0,!0),this.y=new He(i,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new He(i,"accelerationX",0,!0),this.accelerationY=new He(i,"accelerationY",0,!0),this.maxVelocityX=new He(i,"maxVelocityX",1e4,!0),this.maxVelocityY=new He(i,"maxVelocityY",1e4,!0),this.speedX=new He(i,"speedX",0,!0),this.speedY=new He(i,"speedY",0,!0),this.moveTo=!1,this.moveToX=new He(i,"moveToX",0,!0),this.moveToY=new He(i,"moveToY",0,!0),this.bounce=new He(i,"bounce",0,!0),this.scaleX=new He(i,"scaleX",1),this.scaleY=new He(i,"scaleY",1),this.tint=new He(i,"tint",16777215),this.alpha=new He(i,"alpha",1),this.lifespan=new He(i,"lifespan",1e3,!0),this.angle=new He(i,"angle",{min:0,max:360},!0),this.rotate=new He(i,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new He(i,"quantity",1,!0),this.delay=new He(i,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=Owe.NORMAL,this.follow=null,this.followOffset=new Ywe,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,i&&this.fromJSON(i)},fromJSON:function(e){if(!e)return this;var t=0,i="";for(t=0;t<this.configFastMap.length;t++)i=this.configFastMap[t],ni(e,i)&&(this[i]=Vt(e,i));for(t=0;t<this.configOpMap.length;t++)i=this.configOpMap[t],ni(e,i)&&this[i].loadConfig(e);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,ni(e,"speed")&&(this.speedX.loadConfig(e,"speed"),this.speedY=null),(Gwe(e,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),ni(e,"scale")&&(this.scaleX.loadConfig(e,"scale"),this.scaleY=null),ni(e,"callbackScope")){var r=Vt(e,"callbackScope",null);this.emitCallbackScope=r,this.deathCallbackScope=r}return ni(e,"emitZone")&&this.setEmitZone(e.emitZone),ni(e,"deathZone")&&this.setDeathZone(e.deathZone),ni(e,"bounds")&&this.setBounds(e.bounds),ni(e,"followOffset")&&this.followOffset.setFromObject(Vt(e,"followOffset",0)),ni(e,"frame")&&this.setFrame(e.frame),ni(e,"reserve")&&this.reserve(e.reserve),this},toJSON:function(e){e===void 0&&(e={});var t=0,i="";for(t=0;t<this.configFastMap.length;t++)i=this.configFastMap[t],e[i]=this[i];for(t=0;t<this.configOpMap.length;t++)i=this.configOpMap[t],this[i]&&(e[i]=this[i].toJSON());return this.speedY||(delete e.speedX,e.speed=this.speedX.toJSON()),this.scaleY||(delete e.scaleX,e.scale=this.scaleX.toJSON()),e},startFollow:function(e,t,i,r){return t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=!1),this.follow=e,this.followOffset.set(t,i),this.trackVisible=r,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return Nwe(this.frames);var e=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=Xwe(this.currentFrame+1,0,this._frameLength)),e},setFrame:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=1),this.randomFrame=t,this.frameQuantity=i,this.currentFrame=0,this._frameCounter=0;var r=typeof e;if(Array.isArray(e)||r==="string"||r==="number")this.manager.setEmitterFrames(e,this);else if(r==="object"){var s=e;e=Vt(s,"frames",null),e&&this.manager.setEmitterFrames(e,this);var n=Vt(s,"cycle",!1);this.randomFrame=!n,this.frameQuantity=Vt(s,"quantity",i)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(e){return e===void 0&&(e=!0),this.radial=e,this},setPosition:function(e,t){return this.x.onChange(e),this.y.onChange(t),this},setBounds:function(e,t,i,r){if(typeof e=="object"){var s=e;e=s.x,t=s.y,i=ni(s,"w")?s.w:s.width,r=ni(s,"h")?s.h:s.height}return this.bounds?this.bounds.setTo(e,t,i,r):this.bounds=new kwe(e,t,i,r),this},setSpeedX:function(e){return this.speedX.onChange(e),this.radial=!1,this},setSpeedY:function(e){return this.speedY&&(this.speedY.onChange(e),this.radial=!1),this},setSpeed:function(e){return this.speedX.onChange(e),this.speedY=null,this.radial=!0,this},setScaleX:function(e){return this.scaleX.onChange(e),this},setScaleY:function(e){return this.scaleY.onChange(e),this},setScale:function(e){return this.scaleX.onChange(e),this.scaleY=null,this},setGravityX:function(e){return this.gravityX=e,this},setGravityY:function(e){return this.gravityY=e,this},setGravity:function(e,t){return this.gravityX=e,this.gravityY=t,this},setAlpha:function(e){return this.alpha.onChange(e),this},setTint:function(e){return this.tint.onChange(e),this},setEmitterAngle:function(e){return this.angle.onChange(e),this},setAngle:function(e){return this.angle.onChange(e),this},setLifespan:function(e){return this.lifespan.onChange(e),this},setQuantity:function(e){return this.quantity.onChange(e),this},setFrequency:function(e,t){return this.frequency=e,this._counter=0,t&&this.quantity.onChange(t),this},setEmitZone:function(e){if(e===void 0)this.emitZone=null;else{var t=Vt(e,"type","random"),i=Vt(e,"source",null);switch(t){case"random":this.emitZone=new Uwe(i);break;case"edge":var r=Vt(e,"quantity",1),s=Vt(e,"stepRate",0),n=Vt(e,"yoyo",!1),a=Vt(e,"seamless",!0);this.emitZone=new Iwe(i,r,s,n,a);break}}return this},setDeathZone:function(e){if(e===void 0)this.deathZone=null;else{var t=Vt(e,"type","onEnter"),i=Vt(e,"source",null);if(i&&typeof i.contains=="function"){var r=t==="onEnter";this.deathZone=new Dwe(i,r)}}return this},reserve:function(e){for(var t=this.dead,i=0;i<e;i++)t.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(e,t){return e===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof e=="function"&&(this.emitCallback=e,t&&(this.emitCallbackScope=t)),this},onParticleDeath:function(e,t){return e===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof e=="function"&&(this.deathCallback=e,t&&(this.deathCallbackScope=t)),this},killAll:function(){for(var e=this.dead,t=this.alive;t.length>0;)e.push(t.pop());return this},forEachAlive:function(e,t){for(var i=this.alive,r=i.length,s=0;s<r;++s)e.call(t,i[s],this);return this},forEachDead:function(e,t){for(var i=this.dead,r=i.length,s=0;s<r;++s)e.call(t,i[s],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return zwe(this.alive,this.depthSortCallback),this},flow:function(e,t){return t===void 0&&(t=1),this.frequency=e,this.quantity.onChange(t),this.start()},explode:function(e,t,i){return this.frequency=-1,this.emitParticle(e,t,i)},emitParticleAt:function(e,t,i){return this.emitParticle(i,e,t)},emitParticle:function(e,t,i){if(!this.atLimit()){e===void 0&&(e=this.quantity.onEmit());for(var r=this.dead,s=this.follow?this.follow.x+this.followOffset.x:t,n=this.follow?this.follow.y+this.followOffset.y:i,a=0;a<e;a++){var h=r.pop();if(h||(h=new this.particleClass(this)),h.fire(s,n),this.particleBringToTop?this.alive.push(h):this.alive.unshift(h),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,h,this),this.atLimit())break}return h}},preUpdate:function(e,t){t*=this.timeScale;var i=t/1e3;this.trackVisible&&(this.visible=this.follow.visible);var r=this.manager.getProcessors(),s=this.alive,n=this.dead,a=0,h=[],o=s.length;for(a=0;a<o;a++){var u=s[a];u.update(t,i,r)&&h.push({index:a,particle:u})}if(o=h.length,o>0){var f=this.deathCallback,d=this.deathCallbackScope;for(a=o-1;a>=0;a--){var v=h[a];s.splice(v.index,1),n.push(v.particle),f&&f.call(d,v.particle),v.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=t,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(e,t){return e.y-t.y}});oX.exports=Vwe});var lX=l((HZe,uX)=>{var gl=Tt(),Wwe=Te(),Hwe=new gl,Kwe=new gl,Zwe=new gl,Jwe=new gl,Qwe=function(e,t,i,r){var s=t.emitters.list,n=s.length;if(n!==0){var a=e.pipelines.set(t.pipeline),h=Hwe,o=Kwe,u=Zwe,f=Jwe;r?(f.loadIdentity(),f.multiply(r),f.translate(t.x,t.y),f.rotate(t.rotation),f.scale(t.scaleX,t.scaleY)):f.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);var d=i.roundPixels,v=t.defaultFrame.glTexture,c=Wwe.getTintAppendFloatAlpha,p=a.setGameObject(t,t.defaultFrame);e.pipelines.preBatch(t);for(var m=0;m<n;m++){var x=s[m],g=x.alive,y=g.length;if(!(!x.visible||y===0)){i.addToRenderList(x);var T=x.scrollFactorX,S=x.scrollFactorY;e.setBlendMode(x.blendMode),x.mask&&(x.mask.preRenderWebGL(e,x,i),e.pipelines.set(t.pipeline));for(var E=0,_=0;_<y;_++){var w=g[_],R=w.alpha*i.alpha;if(!(R<=0)){u.applyITRS(w.x,w.y,w.rotation,w.scaleX,w.scaleY),h.copyFrom(i.matrix),h.multiplyWithOffset(f,-i.scrollX*T,-i.scrollY*S),u.e=w.x,u.f=w.y,h.multiply(u,o);var q=w.frame,A=-q.halfWidth,b=-q.halfHeight,L=A+q.width,M=b+q.height,G=o.getXRound(A,b,d),P=o.getYRound(A,b,d),D=o.getXRound(A,M,d),I=o.getYRound(A,M,d),F=o.getXRound(L,M,d),O=o.getYRound(L,M,d),K=o.getXRound(L,b,d),H=o.getYRound(L,b,d),Y=c(w.tint,R);a.batchQuad(x,G,P,D,I,F,O,K,H,q.u0,q.v0,q.u1,q.v1,Y,Y,Y,Y,E,v,p)}}x.mask&&x.mask.postRenderWebGL(e,i)}}e.pipelines.postBatch(t)}};uX.exports=Qwe});var dX=l((KZe,fX)=>{var xl=Tt(),$we=new xl,jwe=new xl,e1e=new xl,t1e=new xl,i1e=function(e,t,i,r){var s=t.emitters.list,n=s.length;if(n!==0){var a=$we.copyFrom(i.matrix),h=jwe,o=e1e,u=t1e;r?(u.loadIdentity(),u.multiply(r),u.translate(t.x,t.y),u.rotate(t.rotation),u.scale(t.scaleX,t.scaleY)):u.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);for(var f=e.currentContext,d=i.roundPixels,v=0;v<n;v++){var c=s[v],p=c.alive,m=p.length;if(!(!c.visible||m===0)){i.addToRenderList(c);var x=c.scrollFactorX,g=c.scrollFactorY;f.save(),f.globalCompositeOperation=e.blendModes[c.blendMode];for(var y=0;y<m;y++){var T=p[y],S=T.alpha*i.alpha;if(!(S<=0)){o.applyITRS(T.x,T.y,T.rotation,T.scaleX,T.scaleY),a.copyFrom(i.matrix),a.multiplyWithOffset(u,-i.scrollX*x,-i.scrollY*g),o.e=T.x,o.f=T.y,a.multiply(o,h);var E=T.frame,_=E.canvasData,w=-E.halfWidth,R=-E.halfHeight;f.globalAlpha=S,f.save(),h.setToContext(f),d&&(w=Math.round(w),R=Math.round(R)),f.imageSmoothingEnabled=!(!e.antialias||E.source.scaleMode),f.drawImage(E.source.image,_.x,_.y,_.width,_.height,w,R,_.width,_.height),f.restore()}}f.restore()}}}};fX.exports=i1e});var mX=l((ZZe,pX)=>{var vX=B(),cX=B();vX=lX();cX=dX();pX.exports={renderWebGL:vX,renderCanvas:cX}});var yl=l((JZe,yX)=>{var r1e=C(),bh=ye(),gX=Fe(),s1e=wm(),xX=ia(),n1e=Mm(),a1e=mX(),h1e=new r1e({Extends:gX,Mixins:[bh.Depth,bh.Mask,bh.Pipeline,bh.Transform,bh.Visible,a1e],initialize:function(t,i,r,s){if(gX.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],r!==null&&(typeof r=="object"||Array.isArray(r))&&(s=r,r=null),this.setTexture(i,r),this.initPipeline(),this.emitters=new xX(this),this.wells=new xX(this),s){Array.isArray(s)||(s=[s]);for(var n=0;n<s.length;n++)this.createEmitter(s[n])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(e,t){return this.texture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e){this.frame=this.texture.get(e);var t=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),i=[];return t.forEach(function(r){i.push(r.name)}),this.frameNames=i,this.defaultFrame=this.frame,this},setEmitterFrames:function(e,t){Array.isArray(e)||(e=[e]);var i=t.frames;i.length=0;for(var r=0;r<e.length;r++){var s=e[r];this.frameNames.indexOf(s)!==-1&&i.push(this.texture.get(s))}return i.length>0?t.defaultFrame=i[0]:t.defaultFrame=this.defaultFrame,this},addEmitter:function(e){return this.emitters.add(e)},createEmitter:function(e){return this.addEmitter(new n1e(this,e))},removeEmitter:function(e){return this.emitters.remove(e,!0)},addGravityWell:function(e){return this.wells.add(e)},createGravityWell:function(e){return this.addGravityWell(new s1e(e))},emitParticle:function(e,t,i){for(var r=this.emitters.list,s=0;s<r.length;s++){var n=r[s];n.active&&n.emitParticle(e,t,i)}return this},emitParticleAt:function(e,t,i){return this.emitParticle(i,e,t)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(e,t){t*=this.timeScale;for(var i=this.emitters.list,r=0;r<i.length;r++){var s=i[r];s.active&&s.preUpdate(e,t)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});yX.exports=h1e});var EX=l((QZe,TX)=>{TX.exports={DeathZone:qm(),EdgeZone:Am(),RandomZone:Pm()}});var _X=l(($Ze,SX)=>{SX.exports={EmitterOp:_m(),GravityWell:wm(),Particle:Rm(),ParticleEmitter:Mm(),ParticleEmitterManager:yl(),Zones:EX()}});var Lm=l((jZe,CX)=>{var o1e=C(),u1e=ye(),wX=aa(),l1e=new o1e({Extends:wX,Mixins:[u1e.PathFollower],initialize:function(t,i,r,s,n,a){wX.call(this,t,r,s,n,a),this.path=i},preUpdate:function(e,t){this.anims.update(e,t),this.pathUpdate(e)}});CX.exports=l1e});var qX=l((eJe,RX)=>{var f1e=Te(),d1e=function(e,t,i,r){i.addToRenderList(t);var s=i.alpha,n=t.renderTarget,a=n.width,h=n.height,o=f1e.getTintAppendFloatAlpha,u=e.pipelines.set(t.pipeline),f=u.setTexture2D(n.texture);e.pipelines.preBatch(t),u.batchTexture(t,n.texture,a,h,t.x,t.y,a,h,t.scaleX,t.scaleY,t.rotation,t.flipX,!t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,a,h,o(t.tintTopLeft,s*t._alphaTL),o(t.tintTopRight,s*t._alphaTR),o(t.tintBottomLeft,s*t._alphaBL),o(t.tintBottomRight,s*t._alphaBR),t.tintFill,0,0,i,r,!0,f),e.resetTextures(),e.pipelines.postBatch(t)};RX.exports=d1e});var bX=l((tJe,AX)=>{var v1e=function(e,t,i,r){i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)};AX.exports=v1e});var OX=l((iJe,LX)=>{var PX=B(),MX=B();PX=qX();MX=bX();LX.exports={renderWebGL:PX,renderCanvas:MX}});var Tl=l((rJe,FX)=>{var c1e=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,i=e==="x"?t:t&3|8;return i.toString(16)})};FX.exports=c1e});var El=l((sJe,GX)=>{var p1e=_i(),m1e=Wa(),DX=Ot(),g1e=C(),Wt=ye(),IX=Qt(),x1e=Kn(),NX=Fe(),y1e=B(),T1e=Ks(),E1e=OX(),S1e=ah(),_1e=Te(),w1e=Tl(),C1e=new g1e({Extends:NX,Mixins:[Wt.Alpha,Wt.BlendMode,Wt.ComputedSize,Wt.Crop,Wt.Depth,Wt.Flip,Wt.GetBounds,Wt.Mask,Wt.Origin,Wt.Pipeline,Wt.ScrollFactor,Wt.Tint,Wt.Transform,Wt.Visible,E1e],initialize:function(t,i,r,s,n,a,h){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=32),n===void 0&&(n=32),NX.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,a===void 0?(this.canvas=DX.create2D(this,s,n),this.texture=t.sys.textures.addCanvas(w1e(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(a),this.frame=this.texture.get(h),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new m1e(0,0,s,n),this.renderTarget=null;var o=this.renderer;o?o.type===IX.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new S1e(o,s,n,1,0,!1)):o.type===IX.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=y1e,this.camera.setScene(t),this.setPosition(i,r),a===void 0&&this.setSize(s,n),this.setOrigin(0,0),this.initPipeline(T1e.SINGLE_PIPELINE)},setSize:function(e,t){return this.resize(e,t)},resize:function(e,t){t===void 0&&(t=e);var i=this.frame;if(e!==this.width||t!==this.height){if(i.name==="__BASE"){this.canvas.width=e,this.canvas.height=t,this.texture.width=e,this.texture.height=t;var r=this.renderTarget;r&&(r.resize(e,t),i.glTexture=r.texture,i.source.isRenderTexture=!0,i.source.isGLTexture=!0,i.source.glTexture=r.texture),this.camera.setSize(e,t),i.source.width=e,i.source.height=t,i.setSize(e,t),this.width=e,this.height=t}}else{var s=this.texture.getSourceImage();i.cutX+e>s.width&&(e=s.width-i.cutX),i.cutY+t>s.height&&(t=s.height-i.cutY),i.setSize(e,t,i.cutX,i.cutY)}this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=e,n.hitArea.height=t),this},setGlobalTint:function(e){return this.globalTint=e,this},setGlobalAlpha:function(e){return this.globalAlpha=e,this},saveTexture:function(e){return this.textureManager.renameTexture(this.texture.key,e),this._saved=!0,this.texture},fill:function(e,t,i,r,s,n){var a=this.frame,h=this.camera,o=this.renderer;t===void 0&&(t=1),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=a.cutWidth),n===void 0&&(n=a.cutHeight);var u=(e>>16&255)/255,f=(e>>8&255)/255,d=(e&255)/255,v=this.renderTarget;if(h.preRender(),v){v.bind(!0);var c=this.pipeline;c.manager.set(c);var p=v.width,m=v.height,x=o.width,g=o.height,y=x/p,T=g/m;c.drawFillRect(i*y,r*T,s*y,n*T,_1e.getTintFromFloats(d,f,u,1),t),v.unbind(!0)}else{var S=this.context;o.setContext(S),S.fillStyle="rgba("+u+","+f+","+d+","+t+")",S.fillRect(i+a.cutX,r+a.cutY,s,n),o.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var e=this.renderTarget;if(e)e.clear();else{var t=this.context;t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),t.restore()}this.dirty=!1}return this},erase:function(e,t,i){return this._eraseMode=!0,this.draw(e,t,i,1,16777215),this._eraseMode=!1,this},draw:function(e,t,i,r,s){return this.beginDraw(),this.batchDraw(e,t,i,r,s),this.endDraw(),this},drawFrame:function(e,t,i,r,s,n){return this.beginDraw(),this.batchDrawFrame(e,t,i,r,s,n),this.endDraw(),this},beginDraw:function(){var e=this.camera,t=this.renderer,i=this.renderTarget;return e.preRender(),i?t.beginCapture(i.width,i.height):t.setContext(this.context),this},batchDraw:function(e,t,i,r,s){return r===void 0&&(r=this.globalAlpha),s===void 0?s=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):s=(s>>16)+(s&65280)+((s&255)<<16),Array.isArray(e)||(e=[e]),this.batchList(e,t,i,r,s),this},batchDrawFrame:function(e,t,i,r,s,n){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=this.globalAlpha),n===void 0?n=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):n=(n>>16)+(n&65280)+((n&255)<<16);var a=this.textureManager.getFrame(e,t);return a&&(this.renderTarget?this.pipeline.batchTextureFrame(a,i,r,n,s,this.camera.matrix,null):this.batchTextureFrame(a,i+this.frame.cutX,r+this.frame.cutY,s,n)),this},endDraw:function(e){e===void 0&&(e=this._eraseMode);var t=this.renderer,i=this.renderTarget;if(i){var r=t.endCapture(),s=t.pipelines.setUtility();s.blitFrame(r,i,1,!1,!1,e),t.resetScissor(),t.resetViewport()}else t.setContext();return this.dirty=!0,this},batchList:function(e,t,i,r,s){for(var n=0;n<e.length;n++){var a=e[n];!a||a===this||(a.renderWebGL||a.renderCanvas?this.drawGameObject(a,t,i):a.isParent||a.list?this.batchGroup(a.getChildren(),t,i):typeof a=="string"?this.batchTextureFrameKey(a,null,t,i,r,s):a instanceof x1e?this.batchTextureFrame(a,t,i,r,s):Array.isArray(a)&&this.batchList(a,t,i,r,s))}},batchGroup:function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=0),t+=this.frame.cutX,i+=this.frame.cutY;for(var r=0;r<e.length;r++){var s=e[r];if(s.willRender(this.camera)){var n=s.x+t,a=s.y+i;this.drawGameObject(s,n,a)}}},batchGameObjectWebGL:function(e,t,i){t===void 0&&(t=e.x),i===void 0&&(i=e.y);var r=e.x,s=e.y;e.setPosition(t+this.frame.cutX,i+this.frame.cutY),e.renderDirect?e.renderDirect(this.renderer,e,this.camera):e.renderWebGL(this.renderer,e,this.camera),e.setPosition(r,s)},batchGameObjectCanvas:function(e,t,i){t===void 0&&(t=e.x),i===void 0&&(i=e.y);var r=e.x,s=e.y;if(this._eraseMode){var n=e.blendMode;e.blendMode=p1e.ERASE}e.setPosition(t+this.frame.cutX,i+this.frame.cutY),e.renderCanvas(this.renderer,e,this.camera,null),e.setPosition(r,s),this._eraseMode&&(e.blendMode=n)},batchTextureFrameKey:function(e,t,i,r,s,n){var a=this.textureManager.getFrame(e,t);a&&this.batchTextureFrame(a,i,r,s,n)},batchTextureFrame:function(e,t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),t+=this.frame.cutX,i+=this.frame.cutY;var n=this.renderTarget;if(n)this.pipeline.batchTextureFrame(e,t,i,s,r,this.camera.matrix,null);else{var a=this.context,h=e.canvasData,o=e.source.image,u=this.camera.matrix;a.save(),a.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",a.globalAlpha=r,u.setToContext(a),a.drawImage(o,h.x,h.y,h.width,h.height,t,i,h.width,h.height),a.restore()}},snapshotArea:function(e,t,i,r,s,n,a){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,s,!1,e,t,i,r,n,a):this.renderer.snapshotCanvas(this.canvas,s,!1,e,t,i,r,n,a),this},snapshot:function(e,t,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,e,!1,0,0,this.width,this.height,t,i):this.renderer.snapshotCanvas(this.canvas,e,!1,0,0,this.width,this.height,t,i),this},snapshotPixel:function(e,t,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,i,!0,e,t):this.renderer.snapshotCanvas(this.canvas,i,!0,e,t),this},preDestroy:function(){this._saved||(DX.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});GX.exports=C1e});var UX=l((nJe,BX)=>{var R1e={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};BX.exports=R1e});var zX=l((aJe,kX)=>{var xs=he(),q1e=function(e,t){var i=t.width,r=t.height,s=Math.floor(i/2),n=Math.floor(r/2),a=xs(t,"chars","");if(a!==""){var h=xs(t,"image",""),o=e.sys.textures.getFrame(h),u=o.cutX,f=o.cutY,d=o.source.width,v=o.source.height,c=xs(t,"offset.x",0),p=xs(t,"offset.y",0),m=xs(t,"spacing.x",0),x=xs(t,"spacing.y",0),g=xs(t,"lineSpacing",0),y=xs(t,"charsPerRow",null);y===null&&(y=d/i,y>a.length&&(y=a.length));for(var T=c,S=p,E={retroFont:!0,font:h,size:i,lineHeight:r+g,chars:{}},_=0,w=0;w<a.length;w++){var R=a.charCodeAt(w),q=(u+T)/d,A=(f+S)/v,b=(u+T+i)/d,L=(f+S+r)/v;E.chars[R]={x:T,y:S,width:i,height:r,centerX:s,centerY:n,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{},u0:q,v0:A,u1:b,v1:L},_++,_===y?(_=0,T=c,S+=r+x):T+=i+m}var M={data:E,frame:null,texture:h};return M}};kX.exports=q1e});var XX=l((hJe,YX)=>{var A1e=UX(),b1e=Ye(),Om={Parse:zX()};Om=b1e(!1,Om,A1e);YX.exports=Om});var WX=l((oJe,VX)=>{var P1e=Me(),M1e=Te(),L1e=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline,t),n=P1e(t,i,r).calc,a=t.vertices,h=t.uv,o=t.colors,u=t.alphas,f=t.alpha,d=M1e.getTintAppendFloatAlpha,v=i.roundPixels,c=a.length,p=Math.floor(c*.5);s.flush(),e.pipelines.preBatch(t);var m=s.setGameObject(t),x=s.vertexViewF32,g=s.vertexViewU32,y=s.vertexCount*s.currentShader.vertexComponentCount-1,T=0,S=t.tintFill;t.dirty&&t.updateVertices();for(var E=t.debugCallback,_=[],w=0;w<c;w+=2){var R=a[w+0],q=a[w+1],A=R*n.a+q*n.c+n.e,b=R*n.b+q*n.d+n.f;v&&(A=Math.round(A),b=Math.round(b)),x[++y]=A,x[++y]=b,x[++y]=h[w+0],x[++y]=h[w+1],x[++y]=m,x[++y]=S,g[++y]=d(o[T],i.alpha*(u[T]*f)),T++,E&&(_[w+0]=A,_[w+1]=b)}E&&E.call(t,t,c,_),s.vertexCount+=p,e.pipelines.postBatch(t)};VX.exports=L1e});var KX=l((uJe,HX)=>{var O1e=function(){};HX.exports=O1e});var $X=l((lJe,QX)=>{var ZX=B(),JX=B();ZX=WX();JX=KX();QX.exports={renderWebGL:ZX,renderCanvas:JX}});var Sl=l((fJe,eV)=>{var F1e=Sm(),D1e=C(),Gi=ye(),jX=Fe(),I1e=Ks(),N1e=$X(),G1e=xe(),B1e=new D1e({Extends:jX,Mixins:[Gi.AlphaSingle,Gi.BlendMode,Gi.Depth,Gi.Flip,Gi.Mask,Gi.Pipeline,Gi.Size,Gi.Texture,Gi.Transform,Gi.Visible,Gi.ScrollFactor,N1e],initialize:function(t,i,r,s,n,a,h,o,u){s===void 0&&(s="__DEFAULT"),a===void 0&&(a=2),h===void 0&&(h=!0),jX.call(this,t,"Rope"),this.anims=new F1e(this),this.points=a,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=s==="__DEFAULT",this.dirty=!1,this.horizontal=h,this._flipX=!1,this._flipY=!1,this._perp=new G1e,this.debugCallback=null,this.debugGraphic=null,this.setTexture(s,n),this.setPosition(i,r),this.setSizeToFrame(),this.initPipeline(I1e.ROPE_PIPELINE),Array.isArray(a)&&this.resizeArrays(a.length),this.setPoints(a,o,u),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(e,t){var i=this.anims.currentFrame;this.anims.update(e,t),this.anims.currentFrame!==i&&(this.updateUVs(),this.updateVertices())},play:function(e,t,i){return this.anims.play(e,t,i),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(e,t,i){return e===void 0&&(e=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(e,t,i))},setVertical:function(e,t,i){return e===void 0&&(e=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(e,t,i)):this},setTintFill:function(e){return e===void 0&&(e=!1),this.tintFill=e,this},setAlphas:function(e,t){var i=this.points.length;if(i<1)return this;var r=this.alphas;e===void 0?e=[1]:!Array.isArray(e)&&t===void 0&&(e=[e]);var s,n=0;if(t!==void 0)for(s=0;s<i;s++)n=s*2,r[n]=e,r[n+1]=t;else if(e.length===i)for(s=0;s<i;s++)n=s*2,r[n]=e[s],r[n+1]=e[s];else{var a=e[0];for(s=0;s<i;s++)n=s*2,e.length>n&&(a=e[n]),r[n]=a,e.length>n+1&&(a=e[n+1]),r[n+1]=a}return this},setColors:function(e){var t=this.points.length;if(t<1)return this;var i=this.colors;e===void 0?e=[16777215]:Array.isArray(e)||(e=[e]);var r,s=0;if(e.length===t)for(r=0;r<t;r++)s=r*2,i[s]=e[r],i[s+1]=e[r];else{var n=e[0];for(r=0;r<t;r++)s=r*2,e.length>s&&(n=e[s]),i[s]=n,e.length>s+1&&(n=e[s+1]),i[s+1]=n}return this},setPoints:function(e,t,i){if(e===void 0&&(e=2),typeof e=="number"){var r=e;r<2&&(r=2),e=[];var s,n,a;if(this.horizontal)for(a=-this.frame.halfWidth,n=this.frame.width/(r-1),s=0;s<r;s++)e.push({x:a+s*n,y:0});else for(a=-this.frame.halfHeight,n=this.frame.height/(r-1),s=0;s<r;s++)e.push({x:0,y:a+s*n})}var h=e.length,o=this.points.length;return h<1?(console.warn("Rope: Not enough points given"),this):(h===1&&(e.unshift({x:0,y:0}),h++),o!==h&&this.resizeArrays(h),this.points=e,this.updateUVs(),t!=null&&this.setColors(t),i!=null&&this.setAlphas(i),this)},updateUVs:function(){for(var e=this.uv,t=this.points.length,i=this.frame.u0,r=this.frame.v0,s=this.frame.u1,n=this.frame.v1,a=(s-i)/(t-1),h=(n-r)/(t-1),o=0;o<t;o++){var u=o*4,f,d,v,c;this.horizontal?(this._flipX?(f=s-o*a,v=s-o*a):(f=i+o*a,v=i+o*a),this._flipY?(d=n,c=r):(d=r,c=n)):(this._flipX?(f=i,v=s):(f=s,v=i),this._flipY?(d=n-o*h,c=n-o*h):(d=r+o*h,c=r+o*h)),e[u+0]=f,e[u+1]=d,e[u+2]=v,e[u+3]=c}return this},resizeArrays:function(e){var t=this.colors,i=this.alphas;this.vertices=new Float32Array(e*4),this.uv=new Float32Array(e*4),t=new Uint32Array(e*2),i=new Float32Array(e*2);for(var r=0;r<e*2;r++)t[r]=16777215,i[r]=1;return this.colors=t,this.alphas=i,this.dirty=!0,this},updateVertices:function(){var e=this._perp,t=this.points,i=this.vertices,r=t.length;if(this.dirty=!1,!(r<1)){for(var s,n=t[0],a=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,h=0;h<r;h++){var o=t[h],u=h*4;h<r-1?s=t[h+1]:s=o,e.x=s.y-n.y,e.y=-(s.x-n.x);var f=e.length();e.x/=f,e.y/=f,e.x*=a,e.y*=a,i[u]=o.x+e.x,i[u+1]=o.y+e.y,i[u+2]=o.x-e.x,i[u+3]=o.y-e.y,n=o}return this}},setDebug:function(e,t){return this.debugGraphic=e,!e&&!t?this.debugCallback=null:t?this.debugCallback=t:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(e,t,i){var r=e.debugGraphic,s=i[0],n=i[1],a=i[2],h=i[3];r.lineBetween(s,n,a,h);for(var o=4;o<t;o+=4){var u=i[o+0],f=i[o+1],d=i[o+2],v=i[o+3];r.lineBetween(s,n,u,f),r.lineBetween(a,h,d,v),r.lineBetween(a,h,u,f),r.lineBetween(u,f,d,v),s=u,n=f,a=d,h=v}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(e){return this._flipX=e,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(e){return this._flipY=e,this.updateUVs()}}});eV.exports=B1e});var Fm=l((dJe,tV)=>{var U1e=function(e,t,i){var r=e.canvas,s=e.context,n=e.style,a=[],h=0,o=i.length;n.maxLines>0&&n.maxLines<i.length&&(o=n.maxLines),n.syncFont(r,s);for(var u=0;u<o;u++){var f=n.strokeThickness;f+=s.measureText(i[u]).width,n.wordWrap&&(f-=s.measureText(" ").width),a[u]=Math.ceil(f),h=Math.max(h,a[u])}var d=t.fontSize+n.strokeThickness,v=d*o,c=e.lineSpacing;return o>1&&(v+=c*(o-1)),{width:h,height:v,lines:o,lineWidths:a,lineSpacing:c,lineHeight:d}};tV.exports=U1e});var rV=l((vJe,iV)=>{var k1e=Te(),z1e=function(e,t,i,r){if(!(t.width===0||t.height===0)){i.addToRenderList(t);var s=t.frame,n=s.width,a=s.height,h=k1e.getTintAppendFloatAlpha,o=e.pipelines.set(t.pipeline,t),u=o.setTexture2D(s.glTexture,t);e.pipelines.preBatch(t),o.batchTexture(t,s.glTexture,n,a,t.x,t.y,n/t.style.resolution,a/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,a,h(t.tintTopLeft,i.alpha*t._alphaTL),h(t.tintTopRight,i.alpha*t._alphaTR),h(t.tintBottomLeft,i.alpha*t._alphaBL),h(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,r,!1,u),e.pipelines.postBatch(t)}};iV.exports=z1e});var nV=l((cJe,sV)=>{var Y1e=function(e,t,i,r){t.width===0||t.height===0||(i.addToRenderList(t),e.batchSprite(t,t.frame,i,r))};sV.exports=Y1e});var uV=l((pJe,oV)=>{var aV=B(),hV=B();aV=rV();hV=nV();oV.exports={renderWebGL:aV,renderCanvas:hV}});var Dm=l((mJe,lV)=>{var _l=Ot(),X1e=function(e){var t=_l.create(this),i=t.getContext("2d");e.syncFont(t,i);var r=i.measureText(e.testString);if("actualBoundingBoxAscent"in r){var s=r.actualBoundingBoxAscent,n=r.actualBoundingBoxDescent;return _l.remove(t),{ascent:s,descent:n,fontSize:s+n}}var a=Math.ceil(r.width*e.baselineX),h=a,o=2*h;h=h*e.baselineY|0,t.width=a,t.height=o,i.fillStyle="#f00",i.fillRect(0,0,a,o),i.font=e._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(e.testString,0,h);var u={ascent:0,descent:0,fontSize:0},f=i.getImageData(0,0,a,o);if(!f)return u.ascent=h,u.descent=h+6,u.fontSize=u.ascent+u.descent,_l.remove(t),u;var d=f.data,v=d.length,c=a*4,p,m,x=0,g=!1;for(p=0;p<h;p++){for(m=0;m<c;m+=4)if(d[x+m]!==255){g=!0;break}if(!g)x+=c;else break}for(u.ascent=h-p,x=v-c,g=!1,p=o;p>h;p--){for(m=0;m<c;m+=4)if(d[x+m]!==255){g=!0;break}if(!g)x-=c;else break}return u.descent=p-h,u.fontSize=u.ascent+u.descent,_l.remove(t),u};lV.exports=X1e});var Im=l((gJe,dV)=>{var V1e=C(),W1e=we(),ar=he(),fV=Dm(),Ph={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},H1e=new V1e({initialize:function(t,i){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(i,!1,!0);var r=ar(i,"metrics",!1);r?this.metrics={ascent:ar(r,"ascent",0),descent:ar(r,"descent",0),fontSize:ar(r,"fontSize",0)}:this.metrics=fV(this)},setStyle:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!1),e&&e.hasOwnProperty("fontSize")&&typeof e.fontSize=="number"&&(e.fontSize=e.fontSize.toString()+"px");for(var r in Ph){var s=i?Ph[r][1]:this[r];r==="wordWrapCallback"||r==="wordWrapCallbackScope"?this[r]=ar(e,Ph[r][0],s):this[r]=W1e(e,Ph[r][0],s)}var n=ar(e,"font",null);n!==null&&this.setFont(n,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var a=ar(e,"fill",null);return a!==null&&(this.color=a),t?this.update(!0):this.parent},syncFont:function(e,t){t.font=this._font},syncStyle:function(e,t){t.textBaseline="alphabetic",t.fillStyle=this.color,t.strokeStyle=this.stroke,t.lineWidth=this.strokeThickness,t.lineCap="round",t.lineJoin="round"},syncShadow:function(e,t){t?(e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY,e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur):(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor=0,e.shadowBlur=0)},update:function(e){return e&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=fV(this)),this.parent.updateText()},setFont:function(e,t){t===void 0&&(t=!0);var i=e,r="",s="";if(typeof e!="string")i=ar(e,"fontFamily","Courier"),r=ar(e,"fontSize","16px"),s=ar(e,"fontStyle","");else{var n=e.split(" "),a=0;s=n.length>2?n[a++]:"",r=n[a++]||"16px",i=n[a++]||"Courier"}return(i!==this.fontFamily||r!==this.fontSize||s!==this.fontStyle)&&(this.fontFamily=i,this.fontSize=r,this.fontStyle=s,t&&this.update(!0)),this.parent},setFontFamily:function(e){return this.fontFamily!==e&&(this.fontFamily=e,this.update(!0)),this.parent},setFontStyle:function(e){return this.fontStyle!==e&&(this.fontStyle=e,this.update(!0)),this.parent},setFontSize:function(e){return typeof e=="number"&&(e=e.toString()+"px"),this.fontSize!==e&&(this.fontSize=e,this.update(!0)),this.parent},setTestString:function(e){return this.testString=e,this.update(!0)},setFixedSize:function(e,t){return this.fixedWidth=e,this.fixedHeight=t,e&&(this.parent.width=e),t&&(this.parent.height=t),this.update(!1)},setBackgroundColor:function(e){return this.backgroundColor=e,this.update(!1)},setFill:function(e){return this.color=e,this.update(!1)},setColor:function(e){return this.color=e,this.update(!1)},setResolution:function(e){return this.resolution=e,this.update(!1)},setStroke:function(e,t){return t===void 0&&(t=this.strokeThickness),e===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==e||this.strokeThickness!==t)&&(this.stroke=e,this.strokeThickness=t,this.update(!0)),this.parent},setShadow:function(e,t,i,r,s,n){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i="#000"),r===void 0&&(r=0),s===void 0&&(s=!1),n===void 0&&(n=!0),this.shadowOffsetX=e,this.shadowOffsetY=t,this.shadowColor=i,this.shadowBlur=r,this.shadowStroke=s,this.shadowFill=n,this.update(!1)},setShadowOffset:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.shadowOffsetX=e,this.shadowOffsetY=t,this.update(!1)},setShadowColor:function(e){return e===void 0&&(e="#000"),this.shadowColor=e,this.update(!1)},setShadowBlur:function(e){return e===void 0&&(e=0),this.shadowBlur=e,this.update(!1)},setShadowStroke:function(e){return this.shadowStroke=e,this.update(!1)},setShadowFill:function(e){return this.shadowFill=e,this.update(!1)},setWordWrapWidth:function(e,t){return t===void 0&&(t=!1),this.wordWrapWidth=e,this.wordWrapUseAdvanced=t,this.update(!1)},setWordWrapCallback:function(e,t){return t===void 0&&(t=null),this.wordWrapCallback=e,this.wordWrapCallbackScope=t,this.update(!1)},setAlign:function(e){return e===void 0&&(e="left"),this.align=e,this.update(!1)},setMaxLines:function(e){return e===void 0&&(e=0),this.maxLines=e,this.update(!1)},getTextMetrics:function(){var e=this.metrics;return{ascent:e.ascent,descent:e.descent,fontSize:e.fontSize}},toJSON:function(){var e={};for(var t in Ph)e[t]=this[t];return e.metrics=this.getTextMetrics(),e},destroy:function(){this.parent=void 0}});dV.exports=H1e});var wl=l((xJe,mV)=>{var K1e=dh(),vV=Ot(),Z1e=C(),Gt=ye(),cV=Xe(),pV=Fe(),J1e=Fm(),ua=he(),Q1e=Au(),$1e=uV(),j1e=Im(),eCe=new Z1e({Extends:pV,Mixins:[Gt.Alpha,Gt.BlendMode,Gt.ComputedSize,Gt.Crop,Gt.Depth,Gt.Flip,Gt.GetBounds,Gt.Mask,Gt.Origin,Gt.Pipeline,Gt.ScrollFactor,Gt.Tint,Gt.Transform,Gt.Visible,$1e],initialize:function(t,i,r,s,n){i===void 0&&(i=0),r===void 0&&(r=0),pV.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(i,r),this.setOrigin(0,0),this.initPipeline(),this.canvas=vV.create(this),this.context=this.canvas.getContext("2d"),this.style=new j1e(this,n),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(s),n&&n.padding&&this.setPadding(n.padding),n&&n.lineSpacing&&this.setLineSpacing(n.lineSpacing),t.sys.game.events.on(cV.CONTEXT_RESTORED,this.onContextRestored,this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",K1e(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(e){var t=this.style;if(t.wordWrapCallback){var i=t.wordWrapCallback.call(t.wordWrapCallbackScope,e,this);return Array.isArray(i)&&(i=i.join(`
`)),i}else return t.wordWrapWidth?t.wordWrapUseAdvanced?this.advancedWordWrap(e,this.context,this.style.wordWrapWidth):this.basicWordWrap(e,this.context,this.style.wordWrapWidth):e},advancedWordWrap:function(e,t,i){for(var r="",s=e.replace(/ +/gi," ").split(this.splitRegExp),n=s.length,a=0;a<n;a++){var h=s[a],o="";h=h.replace(/^ *|\s*$/gi,"");var u=t.measureText(h).width;if(u<i){r+=h+`
`;continue}for(var f=i,d=h.split(" "),v=0;v<d.length;v++){var c=d[v],p=c+" ",m=t.measureText(p).width;if(m>f){if(v===0){for(var x=p;x.length&&(x=x.slice(0,-1),m=t.measureText(x).width,!(m<=f)););if(!x.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var g=c.substr(x.length);d[v]=g,o+=x}var y=d[v].length?v:v+1,T=d.slice(y).join(" ").replace(/[ \n]*$/gi,"");s[a+1]=T+" "+(s[a+1]||""),n=s.length;break}else o+=p,f-=m}r+=o.replace(/[ \n]*$/gi,"")+`
`}return r=r.replace(/[\s|\n]*$/gi,""),r},basicWordWrap:function(e,t,i){for(var r="",s=e.split(this.splitRegExp),n=s.length-1,a=t.measureText(" ").width,h=0;h<=n;h++){for(var o=i,u=s[h].split(" "),f=u.length-1,d=0;d<=f;d++){var v=u[d],c=t.measureText(v).width,p=c;d<f&&(p+=a),p>o&&d>0&&(r+=`
`,o=i),r+=v,d<f?(r+=" ",o-=p):o-=c}h<n&&(r+=`
`)}return r},getWrappedText:function(e){e===void 0&&(e=this._text),this.style.syncFont(this.canvas,this.context);var t=this.runWordWrap(e);return t.split(this.splitRegExp)},setText:function(e){return!e&&e!==0&&(e=""),Array.isArray(e)&&(e=e.join(`
`)),e!==this._text&&(this._text=e.toString(),this.updateText()),this},setStyle:function(e){return this.style.setStyle(e)},setFont:function(e){return this.style.setFont(e)},setFontFamily:function(e){return this.style.setFontFamily(e)},setFontSize:function(e){return this.style.setFontSize(e)},setFontStyle:function(e){return this.style.setFontStyle(e)},setFixedSize:function(e,t){return this.style.setFixedSize(e,t)},setBackgroundColor:function(e){return this.style.setBackgroundColor(e)},setFill:function(e){return this.style.setFill(e)},setColor:function(e){return this.style.setColor(e)},setStroke:function(e,t){return this.style.setStroke(e,t)},setShadow:function(e,t,i,r,s,n){return this.style.setShadow(e,t,i,r,s,n)},setShadowOffset:function(e,t){return this.style.setShadowOffset(e,t)},setShadowColor:function(e){return this.style.setShadowColor(e)},setShadowBlur:function(e){return this.style.setShadowBlur(e)},setShadowStroke:function(e){return this.style.setShadowStroke(e)},setShadowFill:function(e){return this.style.setShadowFill(e)},setWordWrapWidth:function(e,t){return this.style.setWordWrapWidth(e,t)},setWordWrapCallback:function(e,t){return this.style.setWordWrapCallback(e,t)},setAlign:function(e){return this.style.setAlign(e)},setResolution:function(e){return this.style.setResolution(e)},setLineSpacing:function(e){return this.lineSpacing=e,this.updateText()},setPadding:function(e,t,i,r){if(typeof e=="object"){var s=e,n=ua(s,"x",null);n!==null?(e=n,i=n):(e=ua(s,"left",0),i=ua(s,"right",e));var a=ua(s,"y",null);a!==null?(t=a,r=a):(t=ua(s,"top",0),r=ua(s,"bottom",t))}else e===void 0&&(e=0),t===void 0&&(t=e),i===void 0&&(i=e),r===void 0&&(r=t);return this.padding.left=e,this.padding.top=t,this.padding.right=i,this.padding.bottom=r,this.updateText()},setMaxLines:function(e){return this.style.setMaxLines(e)},updateText:function(){var e=this.canvas,t=this.context,i=this.style,r=i.resolution,s=i.metrics;i.syncFont(e,t);var n=this._text;(i.wordWrapWidth||i.wordWrapCallback)&&(n=this.runWordWrap(this._text));var a=n.split(this.splitRegExp),h=J1e(this,s,a),o=this.padding,u;i.fixedWidth===0?(this.width=h.width+o.left+o.right,u=h.width):(this.width=i.fixedWidth,u=this.width-o.left-o.right,u<h.width&&(u=h.width)),i.fixedHeight===0?this.height=h.height+o.top+o.bottom:this.height=i.fixedHeight;var f=this.width,d=this.height;this.updateDisplayOrigin(),f*=r,d*=r,f=Math.max(f,1),d=Math.max(d,1),e.width!==f||e.height!==d?(e.width=f,e.height=d,this.frame.setSize(f,d),i.syncFont(e,t)):t.clearRect(0,0,f,d),t.save(),t.scale(r,r),i.backgroundColor&&(t.fillStyle=i.backgroundColor,t.fillRect(0,0,f,d)),i.syncStyle(e,t),t.textBaseline="alphabetic",t.translate(o.left,o.top);for(var v,c,p=0;p<h.lines;p++){if(v=i.strokeThickness/2,c=i.strokeThickness/2+p*h.lineHeight+s.ascent,p>0&&(c+=h.lineSpacing*p),i.rtl)v=f-v;else if(i.align==="right")v+=u-h.lineWidths[p];else if(i.align==="center")v+=(u-h.lineWidths[p])/2;else if(i.align==="justify"){var m=.85;if(h.lineWidths[p]/h.width>=m){var x=h.width-h.lineWidths[p],g=t.measureText(" ").width,y=a[p].trim(),T=y.split(" ");x+=(a[p].length-y.length)*g;for(var S=Math.floor(x/g),E=0;S>0;)T[E]+=" ",E=(E+1)%(T.length-1||1),--S;a[p]=T.join(" ")}}this.autoRound&&(v=Math.round(v),c=Math.round(c)),i.strokeThickness&&(this.style.syncShadow(t,i.shadowStroke),t.strokeText(a[p],v,c)),i.color&&(this.style.syncShadow(t,i.shadowFill),t.fillText(a[p],v,c))}t.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(e,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var _=this.input;return _&&!_.customHitArea&&(_.hitArea.width=this.width,_.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(e){this.setText(e)}},toJSON:function(){var e=Gt.ToJSON(this),t={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return e.data=t,e},onContextRestored:function(){this.dirty=!0},preDestroy:function(){this.style.rtl&&Q1e(this.canvas),vV.remove(this.canvas),this.texture.destroy(),this.scene.sys.game.events.off(cV.CONTEXT_RESTORED,this.onContextRestored,this)}});mV.exports=eCe});var xV=l((yJe,gV)=>{var tCe=Te(),iCe=function(e,t,i,r){t.updateCanvas();var s=t.width,n=t.height;if(!(s===0||n===0)){i.addToRenderList(t),e.pipelines.preBatch(t);var a=tCe.getTintAppendFloatAlpha,h=e.pipelines.set(t.pipeline,t),o=h.setTexture2D(t.fillPattern,t);h.batchTexture(t,t.fillPattern,t.displayFrame.width*t.tileScaleX,t.displayFrame.height*t.tileScaleY,t.x,t.y,s,n,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.originX*s,t.originY*n,0,0,s,n,a(t.tintTopLeft,i.alpha*t._alphaTL),a(t.tintTopRight,i.alpha*t._alphaTR),a(t.tintBottomLeft,i.alpha*t._alphaBL),a(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,t.tilePositionX%t.displayFrame.width/t.displayFrame.width,t.tilePositionY%t.displayFrame.height/t.displayFrame.height,i,r,!1,o),e.pipelines.postBatch(t)}};gV.exports=iCe});var TV=l((TJe,yV)=>{var rCe=function(e,t,i,r){t.updateCanvas(),i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)};yV.exports=rCe});var wV=l((EJe,_V)=>{var EV=B(),SV=B();EV=xV();SV=TV();_V.exports={renderWebGL:EV,renderCanvas:SV}});var ql=l((SJe,bV)=>{var Cl=Ot(),sCe=C(),Ht=ye(),CV=Xe(),RV=Fe(),Rl=ic(),nCe=eu(),aCe=wV(),qV=xe(),AV=8,hCe=new sCe({Extends:RV,Mixins:[Ht.Alpha,Ht.BlendMode,Ht.ComputedSize,Ht.Crop,Ht.Depth,Ht.Flip,Ht.GetBounds,Ht.Mask,Ht.Origin,Ht.Pipeline,Ht.ScrollFactor,Ht.Tint,Ht.Transform,Ht.Visible,aCe],initialize:function(t,i,r,s,n,a,h){var o=t.sys.renderer;RV.call(this,t,"TileSprite");var u=t.sys.textures.get(a),f=u.get(h);!s||!n?(s=f.width,n=f.height):(s=Math.floor(s),n=Math.floor(n)),this._tilePosition=new qV,this._tileScale=new qV(1,1),this.dirty=!1,this.renderer=o,this.canvas=Cl.create(this,s,n),this.context=this.canvas.getContext("2d"),this.displayTexture=u,this.displayFrame=f,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=Rl(f.width),this.potHeight=Rl(f.height),this.fillCanvas=Cl.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(i,r),this.setSize(s,n),this.setFrame(h),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(CV.CONTEXT_RESTORED,this.onContextRestored,this)},setTexture:function(e,t){return this.displayTexture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e){var t=this.displayTexture.get(e);return this.potWidth=Rl(t.width),this.potHeight=Rl(t.height),this.canvas.width=0,!t.cutWidth||!t.cutHeight?this.renderFlags&=~AV:this.renderFlags|=AV,this.displayFrame=t,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(e,t){return e!==void 0&&(this.tilePositionX=e),t!==void 0&&(this.tilePositionY=t),this},setTileScale:function(e,t){return e===void 0&&(e=this.tileScaleX),t===void 0&&(t=e),this.tileScaleX=e,this.tileScaleY=t,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var e=this.displayFrame;if(e.source.isRenderTexture||e.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var t=this.fillContext,i=this.fillCanvas,r=this.potWidth,s=this.potHeight;(!this.renderer||!this.renderer.gl)&&(r=e.cutWidth,s=e.cutHeight),t.clearRect(0,0,r,s),i.width=r,i.height=s,t.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,r,s),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern):this.fillPattern=t.createPattern(i,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var e=this.canvas;if((e.width!==this.width||e.height!==this.height)&&(e.width=this.width,e.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var t=this.context;this.scene.sys.game.config.antialias||nCe.disable(t);var i=this._tileScale.x,r=this._tileScale.y,s=this._tilePosition.x,n=this._tilePosition.y;t.clearRect(0,0,this.width,this.height),t.save(),t.scale(i,r),t.translate(-s,-n),t.fillStyle=this.fillPattern,t.fillRect(s,n,this.width/i,this.height/r),t.restore(),this.dirty=!1},onContextRestored:function(e){if(!!e){var t=e.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=e.createTexture2D(0,t.LINEAR,t.LINEAR,t.REPEAT,t.REPEAT,t.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),Cl.remove(this.canvas),Cl.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null,this.scene.sys.game.events.off(CV.CONTEXT_RESTORED,this.onContextRestored,this)},tilePositionX:{get:function(){return this._tilePosition.x},set:function(e){this._tilePosition.x=e,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(e){this._tilePosition.y=e,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(e){this._tileScale.x=e,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(e){this._tileScale.y=e,this.dirty=!0}}});bV.exports=hCe});var MV=l((_Je,PV)=>{var oCe=function(e,t,i,r){t.videoTexture&&(i.addToRenderList(t),t.pipeline.batchSprite(t,i,r))};PV.exports=oCe});var OV=l((wJe,LV)=>{var uCe=function(e,t,i,r){t.videoTexture&&(i.addToRenderList(t),e.batchSprite(t,t.frame,i,r))};LV.exports=uCe});var NV=l((CJe,IV)=>{var FV=B(),DV=B();FV=MV();DV=OV();IV.exports={renderWebGL:FV,renderCanvas:DV}});var bl=l((RJe,kV)=>{var lCe=C(),fCe=Le(),Kt=ye(),Ct=Vr(),Al=Xe(),dCe=ji(),GV=Fe(),BV=us(),UV=Tl(),vCe=NV(),cCe=Oe(),pCe=new lCe({Extends:GV,Mixins:[Kt.Alpha,Kt.BlendMode,Kt.Depth,Kt.Flip,Kt.GetBounds,Kt.Mask,Kt.Origin,Kt.Pipeline,Kt.ScrollFactor,Kt.Size,Kt.TextureCrop,Kt.Tint,Kt.Transform,Kt.Visible,vCe],initialize:function(t,i,r,s){GV.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=UV(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=cCe.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(i,r),this.initPipeline(),s&&this.changeSource(s,!1);var n=t.sys.game.events;n.on(Al.PAUSE,this.globalPause,this),n.on(Al.RESUME,this.globalResume,this);var a=t.sys.sound;a&&a.on(BV.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(e,t,i){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var r=this.video;if(!r)return console.warn("Video not loaded"),this;e===void 0&&(e=r.loop);var s=this.scene.sys.sound;s&&s.mute&&this.setMute(!0),isNaN(t)||(this._markerIn=t),!isNaN(i)&&i>t&&(this._markerOut=i),r.loop=e;var n=this._callbacks,a=r.play();return a!==void 0?a.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(r.addEventListener("playing",n.play,!0),r.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),r.addEventListener("ended",n.end,!0),r.addEventListener("timeupdate",n.time,!0),r.addEventListener("seeking",n.seeking,!0),r.addEventListener("seeked",n.seeked,!0),this},changeSource:function(e,t,i,r,s){t===void 0&&(t=!0);var n=this.video;n&&this.stop();var a=this.scene.sys.cache.video.get(e);return a?(this.video=a,this._cacheKey=e,this._codePaused=a.paused,this._codeMuted=a.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,a,a.videoWidth,a.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,a.videoWidth,a.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(Ct.VIDEO_CREATED,this,a.videoWidth,a.videoHeight)):this.updateTexture(),a.currentTime=0,this._lastUpdate=0,t&&this.play(i,r,s)):this.video=null,this},addMarker:function(e,t,i){return!isNaN(t)&&t>=0&&!isNaN(i)&&(this.markers[e]=[t,i]),this},playMarker:function(e,t){var i=this.markers[e];return i&&this.play(t,i[0],i[1]),this},removeMarker:function(e){return delete this.markers[e],this},snapshot:function(e,t){return e===void 0&&(e=this.width),t===void 0&&(t=this.height),this.snapshotArea(0,0,this.width,this.height,e,t)},snapshotArea:function(e,t,i,r,s,n){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.width),r===void 0&&(r=this.height),s===void 0&&(s=i),n===void 0&&(n=r);var a=this.video,h=this.snapshotTexture;return h?(h.setSize(s,n),a&&h.context.drawImage(a,e,t,i,r,0,0,s,n)):(h=this.scene.sys.textures.createCanvas(UV(),s,n),this.snapshotTexture=h,a&&h.context.drawImage(a,e,t,i,r,0,0,s,n)),h.update()},saveSnapshotTexture:function(e){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,e):this.snapshotTexture=this.scene.sys.textures.createCanvas(e,this.width,this.height),this.snapshotTexture},loadURL:function(e,t,i,r){t===void 0&&(t="loadeddata"),i===void 0&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var s=document.createElement("video");return s.controls=!1,i&&(s.muted=!0,s.defaultMuted=!0,s.setAttribute("autoplay","autoplay")),s.setAttribute("playsinline","playsinline"),s.setAttribute("preload","auto"),r!==void 0&&s.setAttribute("crossorigin",r),s.addEventListener("error",this._callbacks.error,!0),s.src=e,s.load(),this.video=s,this},loadMediaStream:function(e,t,i){t===void 0&&(t="loadeddata"),i===void 0&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var r=document.createElement("video");r.controls=!1,i&&(r.muted=!0,r.defaultMuted=!0,r.setAttribute("autoplay","autoplay")),r.setAttribute("playsinline","playsinline"),r.setAttribute("preload","auto"),r.addEventListener("error",this._callbacks.error,!0);try{r.srcObject=e}catch(s){r.src=window.URL.createObjectURL(e)}return r.load(),this.video=r,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(Ct.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(e){this.scene.sys.input.once(dCe.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(Ct.VIDEO_ERROR,this,e)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(Ct.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(e){this.stop(),this.emit(Ct.VIDEO_ERROR,this,e)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(Ct.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(Ct.VIDEO_PLAY,this)},completeHandler:function(){this.emit(Ct.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(Ct.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var e=this.video;if(e){var t=e.currentTime;t!==this._lastUpdate&&(this._lastUpdate=t,this.updateTexture(),t>=this._markerOut&&(e.loop?(e.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=t,this.emit(Ct.VIDEO_LOOP,this)):(this.emit(Ct.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(Ct.VIDEO_TIMEOUT,this))},updateTexture:function(){var e=this.video,t=e.videoWidth,i=e.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,e,t,i),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,t,i),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(Ct.VIDEO_CREATED,this,t,i);else{var r=this.videoTextureSource;r.source!==e&&(r.source=e,r.width=t,r.height=i),r.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(e){var t=this.video;if(t){var i=t.duration;if(i!==1/0&&!isNaN(i)){var r=i*e;this.setCurrentTime(r)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(e){var t=this.video;if(t){if(typeof e=="string"){var i=e[0],r=parseFloat(e.substr(1));i==="+"?e=t.currentTime+r:i==="-"&&(e=t.currentTime-r)}t.currentTime=e,this._lastUpdate=e}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(Ct.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(Ct.VIDEO_SEEKED,this);var e=this.video;e&&this.updateTexture()},getProgress:function(){var e=this.video;if(e){var t=e.currentTime,i=e.duration;if(i!==1/0&&!isNaN(i))return t/i}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(e){e===void 0&&(e=!0),this._codeMuted=e;var t=this.video;return t&&(t.muted=this._systemMuted?!0:e),this},isMuted:function(){return this._codeMuted},globalMute:function(e,t){this._systemMuted=t;var i=this.video;i&&(i.muted=this._codeMuted?!0:t)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(e){e===void 0&&(e=!0);var t=this.video;return this._codePaused=e,t&&(e?t.paused||t.pause():e||t.paused&&!this._systemPaused&&t.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(e){return e===void 0&&(e=1),this.video&&(this.video.volume=fCe(e,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(e){return this.video&&(this.video.playbackRate=e),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(e){return e===void 0&&(e=!0),this.video&&(this.video.loop=e),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(e,t){return t===void 0&&(t=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,e),this._key=e,this.flipY=t,this.videoTextureSource&&this.videoTextureSource.setFlipY(t),this.videoTexture},stop:function(){var e=this.video;if(e){var t=this._callbacks;for(var i in t)e.removeEventListener(i,t[i],!0);e.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(Ct.VIDEO_STOP,this),this},removeVideoElement:function(){var e=this.video;if(!!e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("autoplay"),e.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var e=this.scene.sys.game.events;e.off(Al.PAUSE,this.globalPause,this),e.off(Al.RESUME,this.globalResume,this);var t=this.scene.sys.sound;t&&t.off(BV.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});kV.exports=pCe});var ai=l((qJe,YV)=>{var mCe=C(),hr=ye(),zV=Fe(),gCe=bi(),xCe=new mCe({Extends:zV,Mixins:[hr.AlphaSingle,hr.BlendMode,hr.Depth,hr.GetBounds,hr.Mask,hr.Origin,hr.Pipeline,hr.ScrollFactor,hr.Transform,hr.Visible],initialize:function(t,i,r){i===void 0&&(i="Shape"),zV.call(this,t,i),this.geom=r,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new gCe,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(e,t){return t===void 0&&(t=1),e===void 0?this.isFilled=!1:(this.fillColor=e,this.fillAlpha=t,this.isFilled=!0),this},setStrokeStyle:function(e,t,i){return i===void 0&&(i=1),e===void 0?this.isStroked=!1:(this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=i,this.isStroked=!0),this},setClosePath:function(e){return this.closePath=e,this},setSize:function(e,t){return this.width=e,this.height=t,this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}}});YV.exports=xCe});var la=l((AJe,XV)=>{var yCe=Te(),TCe=function(e,t,i,r,s,n){for(var a=yCe.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*r),h=i.pathData,o=i.pathIndexes,u=0;u<o.length;u+=3){var f=o[u]*2,d=o[u+1]*2,v=o[u+2]*2,c=h[f+0]-s,p=h[f+1]-n,m=h[d+0]-s,x=h[d+1]-n,g=h[v+0]-s,y=h[v+1]-n,T=t.getX(c,p),S=t.getY(c,p),E=t.getX(m,x),_=t.getY(m,x),w=t.getX(g,y),R=t.getY(g,y);e.batchTri(i,T,S,E,_,w,R,0,0,1,1,a,a,a,2)}};XV.exports=TCe});var ys=l((bJe,VV)=>{var ECe=Te(),SCe=function(e,t,i,r,s){var n=e.strokeTint,a=ECe.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*i);n.TL=a,n.TR=a,n.BL=a,n.BR=a;var h=t.pathData,o=h.length-1,u=t.lineWidth,f=u/2,d=h[0]-r,v=h[1]-s;t.closePath||(o-=2);for(var c=2;c<o;c+=2){var p=h[c]-r,m=h[c+1]-s;e.batchLine(d,v,p,m,f,f,u,c-2,t.closePath?c===o-1:!1),d=p,v=m}};VV.exports=SCe});var HV=l((PJe,WV)=>{var _Ce=Me(),wCe=la(),CCe=ys(),RCe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=_Ce(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t._displayOriginX,o=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&wCe(s,a,t,u,h,o),t.isStroked&&CCe(s,t,u,h,o),e.pipelines.postBatch(t)};WV.exports=RCe});var Bi=l((MJe,KV)=>{var qCe=function(e,t,i,r){var s=i||t.fillColor,n=r||t.fillAlpha,a=(s&16711680)>>>16,h=(s&65280)>>>8,o=s&255;e.fillStyle="rgba("+a+","+h+","+o+","+n+")"};KV.exports=qCe});var or=l((LJe,ZV)=>{var ACe=function(e,t,i,r){var s=i||t.strokeColor,n=r||t.strokeAlpha,a=(s&16711680)>>>16,h=(s&65280)>>>8,o=s&255;e.strokeStyle="rgba("+a+","+h+","+o+","+n+")",e.lineWidth=t.lineWidth};ZV.exports=ACe});var $V=l((OJe,QV)=>{var JV=yr(),bCe=Bi(),PCe=or(),MCe=wt(),LCe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(MCe(e,s,t,i,r)){var n=t.radius;s.beginPath(),s.arc(n-t.originX*(n*2),n-t.originY*(n*2),n,JV(t._startAngle),JV(t._endAngle),t.anticlockwise),t.closePath&&s.closePath(),t.isFilled&&(bCe(s,t),s.fill()),t.isStroked&&(PCe(s,t),s.stroke()),s.restore()}};QV.exports=LCe});var i5=l((FJe,t5)=>{var jV=B(),e5=B();jV=HV();e5=$V();t5.exports={renderWebGL:jV,renderCanvas:e5}});var Nm=l((DJe,n5)=>{var OCe=i5(),FCe=C(),r5=yr(),DCe=$i(),ICe=zr(),Ts=Oe(),s5=ai(),NCe=new FCe({Extends:s5,Mixins:[OCe],initialize:function(t,i,r,s,n,a,h,o,u){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=128),n===void 0&&(n=0),a===void 0&&(a=360),h===void 0&&(h=!1),s5.call(this,t,"Arc",new ICe(0,0,s)),this._startAngle=n,this._endAngle=a,this._anticlockwise=h,this._iterations=.01,this.setPosition(i,r);var f=this.geom.radius*2;this.setSize(f,f),o!==void 0&&this.setFillStyle(o,u),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(e){this._iterations=e,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(e){this.geom.radius=e;var t=e*2;this.setSize(t,t),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(e){this._startAngle=e,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(e){this._endAngle=e,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(e){this._anticlockwise=e,this.updateData()}},setRadius:function(e){return this.radius=e,this},setIterations:function(e){return e===void 0&&(e=.01),this.iterations=e,this},setStartAngle:function(e,t){return this._startAngle=e,t!==void 0&&(this._anticlockwise=t),this.updateData()},setEndAngle:function(e,t){return this._endAngle=e,t!==void 0&&(this._anticlockwise=t),this.updateData()},updateData:function(){var e=this._iterations,t=e,i=this.geom.radius,r=r5(this._startAngle),s=r5(this._endAngle),n=this._anticlockwise,a=i,h=i;s-=r,n?s<-Ts.PI2?s=-Ts.PI2:s>0&&(s=-Ts.PI2+s%Ts.PI2):s>Ts.PI2?s=Ts.PI2:s<0&&(s=Ts.PI2+s%Ts.PI2);for(var o=[a+Math.cos(r)*i,h+Math.sin(r)*i],u;t<1;)u=s*t+r,o.push(a+Math.cos(u)*i,h+Math.sin(u)*i),t+=e;return u=s+r,o.push(a+Math.cos(u)*i,h+Math.sin(u)*i),o.push(a+Math.cos(r)*i,h+Math.sin(r)*i),this.pathIndexes=DCe(o),this.pathData=o,this}});n5.exports=NCe});var h5=l((IJe,a5)=>{var GCe=la(),BCe=Me(),UCe=ys(),kCe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=BCe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t._displayOriginX+t._curveBounds.x,o=t._displayOriginY+t._curveBounds.y,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&GCe(s,a,t,u,h,o),t.isStroked&&UCe(s,t,u,h,o),e.pipelines.postBatch(t)};a5.exports=kCe});var u5=l((NJe,o5)=>{var zCe=Bi(),YCe=or(),XCe=wt(),VCe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(XCe(e,s,t,i,r)){var n=t._displayOriginX+t._curveBounds.x,a=t._displayOriginY+t._curveBounds.y,h=t.pathData,o=h.length-1,u=h[0]-n,f=h[1]-a;s.beginPath(),s.moveTo(u,f),t.closePath||(o-=2);for(var d=2;d<o;d+=2){var v=h[d]-n,c=h[d+1]-a;s.lineTo(v,c)}t.closePath&&s.closePath(),t.isFilled&&(zCe(s,t),s.fill()),t.isStroked&&(YCe(s,t),s.stroke()),s.restore()}};o5.exports=VCe});var v5=l((GJe,d5)=>{var l5=B(),f5=B();l5=h5();f5=u5();d5.exports={renderWebGL:l5,renderCanvas:f5}});var Gm=l((BJe,p5)=>{var WCe=C(),HCe=v5(),KCe=$i(),ZCe=Ae(),c5=ai(),JCe=new WCe({Extends:c5,Mixins:[HCe],initialize:function(t,i,r,s,n,a){i===void 0&&(i=0),r===void 0&&(r=0),c5.call(this,t,"Curve",s),this._smoothness=32,this._curveBounds=new ZCe,this.closePath=!1,this.setPosition(i,r),n!==void 0&&this.setFillStyle(n,a),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(e){this._smoothness=e,this.updateData()}},setSmoothness:function(e){return this._smoothness=e,this.updateData()},updateData:function(){var e=this._curveBounds,t=this._smoothness;this.geom.getBounds(e,t),this.setSize(e.width,e.height),this.updateDisplayOrigin();for(var i=[],r=this.geom.getPoints(t),s=0;s<r.length;s++)i.push(r[s].x,r[s].y);return i.push(r[0].x,r[0].y),this.pathIndexes=KCe(i),this.pathData=i,this}});p5.exports=JCe});var g5=l((UJe,m5)=>{var QCe=la(),$Ce=Me(),jCe=ys(),eRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=$Ce(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t._displayOriginX,o=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&QCe(s,a,t,u,h,o),t.isStroked&&jCe(s,t,u,h,o),e.pipelines.postBatch(t)};m5.exports=eRe});var y5=l((kJe,x5)=>{var tRe=Bi(),iRe=or(),rRe=wt(),sRe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(rRe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY,h=t.pathData,o=h.length-1,u=h[0]-n,f=h[1]-a;s.beginPath(),s.moveTo(u,f),t.closePath||(o-=2);for(var d=2;d<o;d+=2){var v=h[d]-n,c=h[d+1]-a;s.lineTo(v,c)}s.closePath(),t.isFilled&&(tRe(s,t),s.fill()),t.isStroked&&(iRe(s,t),s.stroke()),s.restore()}};x5.exports=sRe});var _5=l((zJe,S5)=>{var T5=B(),E5=B();T5=g5();E5=y5();S5.exports={renderWebGL:T5,renderCanvas:E5}});var Bm=l((YJe,C5)=>{var nRe=C(),aRe=$i(),hRe=_5(),oRe=na(),w5=ai(),uRe=new nRe({Extends:w5,Mixins:[hRe],initialize:function(t,i,r,s,n,a,h){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=128),n===void 0&&(n=128),w5.call(this,t,"Ellipse",new oRe(s/2,n/2,s,n)),this._smoothness=64,this.setPosition(i,r),this.width=s,this.height=n,a!==void 0&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(e){this._smoothness=e,this.updateData()}},setSize:function(e,t){return this.width=e,this.height=t,this.geom.setPosition(e/2,t/2),this.geom.setSize(e,t),this.updateData()},setSmoothness:function(e){return this._smoothness=e,this.updateData()},updateData:function(){for(var e=[],t=this.geom.getPoints(this._smoothness),i=0;i<t.length;i++)e.push(t[i].x,t[i].y);return e.push(t[0].x,t[0].y),this.pathIndexes=aRe(e),this.pathData=e,this}});C5.exports=uRe});var q5=l((XJe,R5)=>{var lRe=Me(),Um=Te(),fRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=lRe(t,i,r),a=s.calcMatrix.copyFrom(n.calc);a.translate(-t._displayOriginX,-t._displayOriginY);var h=i.alpha*t.alpha,o=t.width,u=t.height,f=t.cellWidth,d=t.cellHeight,v=Math.ceil(o/f),c=Math.ceil(u/d),p=f,m=d,x=f-(v*f-o),g=d-(c*d-u),y,T,S=t.showCells,E=t.showAltCells,_=t.showOutline,w=0,R=0,q=0,A=0,b=0;if(_&&(p--,m--,x===f&&x--,g===d&&g--),e.pipelines.preBatch(t),S&&t.fillAlpha>0)for(y=s.fillTint,T=Um.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*h),y.TL=T,y.TR=T,y.BL=T,y.BR=T,R=0;R<c;R++)for(E&&(q=R%2),w=0;w<v;w++){if(E&&q){q=0;continue}q++,A=w<v-1?p:x,b=R<c-1?m:g,s.batchFillRect(w*f,R*d,A,b)}if(E&&t.altFillAlpha>0)for(y=s.fillTint,T=Um.getTintAppendFloatAlpha(t.altFillColor,t.altFillAlpha*h),y.TL=T,y.TR=T,y.BL=T,y.BR=T,R=0;R<c;R++)for(E&&(q=R%2),w=0;w<v;w++){if(E&&!q){q=1;continue}q=0,A=w<v-1?p:x,b=R<c-1?m:g,s.batchFillRect(w*f,R*d,A,b)}if(_&&t.outlineFillAlpha>0){var L=s.strokeTint,M=Um.getTintAppendFloatAlpha(t.outlineFillColor,t.outlineFillAlpha*h);for(L.TL=M,L.TR=M,L.BL=M,L.BR=M,w=1;w<v;w++){var G=w*f;s.batchLine(G,0,G,u,1,1,1,0,!1)}for(R=1;R<c;R++){var P=R*d;s.batchLine(0,P,o,P,1,1,1,0,!1)}}e.pipelines.postBatch(t)};R5.exports=fRe});var P5=l((VJe,b5)=>{var A5=Bi(),dRe=or(),vRe=wt(),cRe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(vRe(e,s,t,i,r)){var n=-t._displayOriginX,a=-t._displayOriginY,h=i.alpha*t.alpha,o=t.width,u=t.height,f=t.cellWidth,d=t.cellHeight,v=Math.ceil(o/f),c=Math.ceil(u/d),p=f,m=d,x=f-(v*f-o),g=d-(c*d-u),y=t.showCells,T=t.showAltCells,S=t.showOutline,E=0,_=0,w=0,R=0,q=0;if(S&&(p--,m--,x===f&&x--,g===d&&g--),y&&t.fillAlpha>0)for(A5(s,t),_=0;_<c;_++)for(T&&(w=_%2),E=0;E<v;E++){if(T&&w){w=0;continue}w++,R=E<v-1?p:x,q=_<c-1?m:g,s.fillRect(n+E*f,a+_*d,R,q)}if(T&&t.altFillAlpha>0)for(A5(s,t,t.altFillColor,t.altFillAlpha*h),_=0;_<c;_++)for(T&&(w=_%2),E=0;E<v;E++){if(T&&!w){w=1;continue}w=0,R=E<v-1?p:x,q=_<c-1?m:g,s.fillRect(n+E*f,a+_*d,R,q)}if(S&&t.outlineFillAlpha>0){for(dRe(s,t,t.outlineFillColor,t.outlineFillAlpha*h),E=1;E<v;E++){var A=E*f;s.beginPath(),s.moveTo(A+n,a),s.lineTo(A+n,u+a),s.stroke()}for(_=1;_<c;_++){var b=_*d;s.beginPath(),s.moveTo(n,b+a),s.lineTo(n+o,b+a),s.stroke()}}s.restore()}};b5.exports=cRe});var F5=l((WJe,O5)=>{var M5=B(),L5=B();M5=q5();L5=P5();O5.exports={renderWebGL:M5,renderCanvas:L5}});var km=l((HJe,I5)=>{var pRe=C(),D5=ai(),mRe=F5(),gRe=new pRe({Extends:D5,Mixins:[mRe],initialize:function(t,i,r,s,n,a,h,o,u,f,d){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=128),n===void 0&&(n=128),a===void 0&&(a=32),h===void 0&&(h=32),D5.call(this,t,"Grid",null),this.cellWidth=a,this.cellHeight=h,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(i,r),this.setSize(s,n),this.setFillStyle(o,u),f!==void 0&&this.setOutlineStyle(f,d),this.updateDisplayOrigin()},setFillStyle:function(e,t){return t===void 0&&(t=1),e===void 0?this.showCells=!1:(this.fillColor=e,this.fillAlpha=t,this.showCells=!0),this},setAltFillStyle:function(e,t){return t===void 0&&(t=1),e===void 0?this.showAltCells=!1:(this.altFillColor=e,this.altFillAlpha=t,this.showAltCells=!0),this},setOutlineStyle:function(e,t){return t===void 0&&(t=1),e===void 0?this.showOutline=!1:(this.outlineFillColor=e,this.outlineFillAlpha=t,this.showOutline=!0),this}});I5.exports=gRe});var G5=l((KJe,N5)=>{var xRe=Me(),zm=Te(),yRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=xRe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t.width,o=t.height,u=h/2,f=h/t.projection,d=i.alpha*t.alpha;if(!!t.isFilled){var v,c,p,m,x,g,y,T,S;e.pipelines.preBatch(t),t.showTop&&(v=zm.getTintAppendFloatAlpha(t.fillTop,d),c=a.getX(-u,-o),p=a.getY(-u,-o),m=a.getX(0,-f-o),x=a.getY(0,-f-o),g=a.getX(u,-o),y=a.getY(u,-o),T=a.getX(0,f-o),S=a.getY(0,f-o),s.batchQuad(t,c,p,m,x,g,y,T,S,0,0,1,1,v,v,v,v,2)),t.showLeft&&(v=zm.getTintAppendFloatAlpha(t.fillLeft,d),c=a.getX(-u,0),p=a.getY(-u,0),m=a.getX(0,f),x=a.getY(0,f),g=a.getX(0,f-o),y=a.getY(0,f-o),T=a.getX(-u,-o),S=a.getY(-u,-o),s.batchQuad(t,c,p,m,x,g,y,T,S,0,0,1,1,v,v,v,v,2)),t.showRight&&(v=zm.getTintAppendFloatAlpha(t.fillRight,d),c=a.getX(u,0),p=a.getY(u,0),m=a.getX(0,f),x=a.getY(0,f),g=a.getX(0,f-o),y=a.getY(0,f-o),T=a.getX(u,-o),S=a.getY(u,-o),s.batchQuad(t,c,p,m,x,g,y,T,S,0,0,1,1,v,v,v,v,2)),e.pipelines.postBatch(t)}};N5.exports=yRe});var U5=l((ZJe,B5)=>{var Ym=Bi(),TRe=wt(),ERe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(TRe(e,s,t,i,r)&&t.isFilled){var n=t.width,a=t.height,h=n/2,o=n/t.projection;t.showTop&&(Ym(s,t,t.fillTop),s.beginPath(),s.moveTo(-h,-a),s.lineTo(0,-o-a),s.lineTo(h,-a),s.lineTo(h,-1),s.lineTo(0,o-1),s.lineTo(-h,-1),s.lineTo(-h,-a),s.fill()),t.showLeft&&(Ym(s,t,t.fillLeft),s.beginPath(),s.moveTo(-h,0),s.lineTo(0,o),s.lineTo(0,o-a),s.lineTo(-h,-a),s.lineTo(-h,0),s.fill()),t.showRight&&(Ym(s,t,t.fillRight),s.beginPath(),s.moveTo(h,0),s.lineTo(0,o),s.lineTo(0,o-a),s.lineTo(h,-a),s.lineTo(h,0),s.fill()),s.restore()}};B5.exports=ERe});var X5=l((JJe,Y5)=>{var k5=B(),z5=B();k5=G5();z5=U5();Y5.exports={renderWebGL:k5,renderCanvas:z5}});var Xm=l((QJe,W5)=>{var SRe=X5(),_Re=C(),V5=ai(),wRe=new _Re({Extends:V5,Mixins:[SRe],initialize:function(t,i,r,s,n,a,h,o){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=48),n===void 0&&(n=32),a===void 0&&(a=15658734),h===void 0&&(h=10066329),o===void 0&&(o=13421772),V5.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=a,this.fillLeft=h,this.fillRight=o,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(i,r),this.setSize(s,n),this.updateDisplayOrigin()},setProjection:function(e){return this.projection=e,this},setFaces:function(e,t,i){return e===void 0&&(e=!0),t===void 0&&(t=!0),i===void 0&&(i=!0),this.showTop=e,this.showLeft=t,this.showRight=i,this},setFillStyle:function(e,t,i){return this.fillTop=e,this.fillLeft=t,this.fillRight=i,this.isFilled=!0,this}});W5.exports=wRe});var K5=l(($Je,H5)=>{var CRe=Me(),Vm=Te(),RRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=CRe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t.width,o=t.height,u=h/2,f=h/t.projection,d=t.isReversed,v=i.alpha*t.alpha;if(!!t.isFilled){e.pipelines.preBatch(t);var c,p,m,x,g,y,T;if(t.showTop&&d){c=Vm.getTintAppendFloatAlpha(t.fillTop,v),p=a.getX(-u,-o),m=a.getY(-u,-o),x=a.getX(0,-f-o),g=a.getY(0,-f-o),y=a.getX(u,-o),T=a.getY(u,-o);var S=a.getX(0,f-o),E=a.getY(0,f-o);s.batchQuad(t,p,m,x,g,y,T,S,E,0,0,1,1,c,c,c,c,2)}t.showLeft&&(c=Vm.getTintAppendFloatAlpha(t.fillLeft,v),d?(p=a.getX(-u,-o),m=a.getY(-u,-o),x=a.getX(0,f),g=a.getY(0,f),y=a.getX(0,f-o),T=a.getY(0,f-o)):(p=a.getX(-u,0),m=a.getY(-u,0),x=a.getX(0,f),g=a.getY(0,f),y=a.getX(0,f-o),T=a.getY(0,f-o)),s.batchTri(t,p,m,x,g,y,T,0,0,1,1,c,c,c,2)),t.showRight&&(c=Vm.getTintAppendFloatAlpha(t.fillRight,v),d?(p=a.getX(u,-o),m=a.getY(u,-o),x=a.getX(0,f),g=a.getY(0,f),y=a.getX(0,f-o),T=a.getY(0,f-o)):(p=a.getX(u,0),m=a.getY(u,0),x=a.getX(0,f),g=a.getY(0,f),y=a.getX(0,f-o),T=a.getY(0,f-o)),s.batchTri(t,p,m,x,g,y,T,0,0,1,1,c,c,c,2)),e.pipelines.postBatch(t)}};H5.exports=RRe});var J5=l((jJe,Z5)=>{var Wm=Bi(),qRe=wt(),ARe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(qRe(e,s,t,i,r)&&t.isFilled){var n=t.width,a=t.height,h=n/2,o=n/t.projection,u=t.isReversed;t.showTop&&u&&(Wm(s,t,t.fillTop),s.beginPath(),s.moveTo(-h,-a),s.lineTo(0,-o-a),s.lineTo(h,-a),s.lineTo(0,o-a),s.fill()),t.showLeft&&(Wm(s,t,t.fillLeft),s.beginPath(),u?(s.moveTo(-h,-a),s.lineTo(0,o),s.lineTo(0,o-a)):(s.moveTo(-h,0),s.lineTo(0,o),s.lineTo(0,o-a)),s.fill()),t.showRight&&(Wm(s,t,t.fillRight),s.beginPath(),u?(s.moveTo(h,-a),s.lineTo(0,o),s.lineTo(0,o-a)):(s.moveTo(h,0),s.lineTo(0,o),s.lineTo(0,o-a)),s.fill()),s.restore()}};Z5.exports=ARe});var eW=l((eQe,j5)=>{var Q5=B(),$5=B();Q5=K5();$5=J5();j5.exports={renderWebGL:Q5,renderCanvas:$5}});var Hm=l((tQe,iW)=>{var bRe=C(),PRe=eW(),tW=ai(),MRe=new bRe({Extends:tW,Mixins:[PRe],initialize:function(t,i,r,s,n,a,h,o,u){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=48),n===void 0&&(n=32),a===void 0&&(a=!1),h===void 0&&(h=15658734),o===void 0&&(o=10066329),u===void 0&&(u=13421772),tW.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=h,this.fillLeft=o,this.fillRight=u,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=a,this.isFilled=!0,this.setPosition(i,r),this.setSize(s,n),this.updateDisplayOrigin()},setProjection:function(e){return this.projection=e,this},setReversed:function(e){return this.isReversed=e,this},setFaces:function(e,t,i){return e===void 0&&(e=!0),t===void 0&&(t=!0),i===void 0&&(i=!0),this.showTop=e,this.showLeft=t,this.showRight=i,this},setFillStyle:function(e,t,i){return this.fillTop=e,this.fillLeft=t,this.fillRight=i,this.isFilled=!0,this}});iW.exports=MRe});var sW=l((iQe,rW)=>{var LRe=Me(),ORe=Te(),FRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=LRe(t,i,r);s.calcMatrix.copyFrom(n.calc);var a=t._displayOriginX,h=t._displayOriginY,o=i.alpha*t.alpha;if(e.pipelines.preBatch(t),t.isStroked){var u=s.strokeTint,f=ORe.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*o);u.TL=f,u.TR=f,u.BL=f,u.BR=f;var d=t._startWidth,v=t._endWidth;s.batchLine(t.geom.x1-a,t.geom.y1-h,t.geom.x2-a,t.geom.y2-h,d,v,1,0,!1,n.sprite,n.camera)}e.pipelines.postBatch(t)};rW.exports=FRe});var aW=l((rQe,nW)=>{var DRe=or(),IRe=wt(),NRe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(IRe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY;t.isStroked&&(DRe(s,t),s.beginPath(),s.moveTo(t.geom.x1-n,t.geom.y1-a),s.lineTo(t.geom.x2-n,t.geom.y2-a),s.stroke()),s.restore()}};nW.exports=NRe});var lW=l((sQe,uW)=>{var hW=B(),oW=B();hW=sW();oW=aW();uW.exports={renderWebGL:hW,renderCanvas:oW}});var Km=l((nQe,dW)=>{var GRe=C(),fW=ai(),BRe=bi(),URe=lW(),kRe=new GRe({Extends:fW,Mixins:[URe],initialize:function(t,i,r,s,n,a,h,o,u){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=0),a===void 0&&(a=128),h===void 0&&(h=0),fW.call(this,t,"Line",new BRe(s,n,a,h));var f=Math.max(1,this.geom.right-this.geom.left),d=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(i,r),this.setSize(f,d),o!==void 0&&this.setStrokeStyle(1,o,u),this.updateDisplayOrigin()},setLineWidth:function(e,t){return t===void 0&&(t=e),this._startWidth=e,this._endWidth=t,this.lineWidth=e,this},setTo:function(e,t,i,r){return this.geom.setTo(e,t,i,r),this}});dW.exports=kRe});var cW=l((aQe,vW)=>{var zRe=la(),YRe=Me(),XRe=ys(),VRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=YRe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t._displayOriginX,o=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&zRe(s,a,t,u,h,o),t.isStroked&&XRe(s,t,u,h,o),e.pipelines.postBatch(t)};vW.exports=VRe});var mW=l((hQe,pW)=>{var WRe=Bi(),HRe=or(),KRe=wt(),ZRe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(KRe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY,h=t.pathData,o=h.length-1,u=h[0]-n,f=h[1]-a;s.beginPath(),s.moveTo(u,f),t.closePath||(o-=2);for(var d=2;d<o;d+=2){var v=h[d]-n,c=h[d+1]-a;s.lineTo(v,c)}s.closePath(),t.isFilled&&(WRe(s,t),s.fill()),t.isStroked&&(HRe(s,t),s.stroke()),s.restore()}};pW.exports=ZRe});var TW=l((oQe,yW)=>{var gW=B(),xW=B();gW=cW();xW=mW();yW.exports={renderWebGL:gW,renderCanvas:xW}});var Zm=l((uQe,EW)=>{var JRe=Ae(),QRe=function(e,t){t===void 0&&(t=new JRe);for(var i=1/0,r=1/0,s=-i,n=-r,a,h=0;h<e.points.length;h++)a=e.points[h],i=Math.min(i,a.x),r=Math.min(r,a.y),s=Math.max(s,a.x),n=Math.max(n,a.y);return t.x=i,t.y=r,t.width=s-i,t.height=n-r,t};EW.exports=QRe});var Pl=l((lQe,SW)=>{var $Re=function(e,t,i){for(var r=!1,s=-1,n=e.points.length-1;++s<e.points.length;n=s){var a=e.points[s].x,h=e.points[s].y,o=e.points[n].x,u=e.points[n].y;(h<=i&&i<u||u<=i&&i<h)&&t<(o-a)*(i-h)/(u-h)+a&&(r=!r)}return r};SW.exports=$Re});var Jm=l((fQe,_W)=>{var jRe=gr(),eqe=bi(),tqe=function(e){for(var t=e.points,i=0,r=0;r<t.length;r++){var s=t[r],n=t[(r+1)%t.length],a=new eqe(s.x,s.y,n.x,n.y);i+=jRe(a)}return i};_W.exports=tqe});var Qm=l((dQe,wW)=>{var iqe=gr(),rqe=bi(),sqe=Jm(),nqe=function(e,t,i,r){r===void 0&&(r=[]);var s=e.points,n=sqe(e);!t&&i>0&&(t=n/i);for(var a=0;a<t;a++)for(var h=n*(a/t),o=0,u=0;u<s.length;u++){var f=s[u],d=s[(u+1)%s.length],v=new rqe(f.x,f.y,d.x,d.y),c=iqe(v);if(h<o||h>o+c){o+=c;continue}var p=v.getPoint((h-o)/c);r.push(p);break}return r};wW.exports=nqe});var Ml=l((vQe,CW)=>{var aqe=C(),hqe=Pl(),oqe=Qm(),uqe=Ki(),lqe=new aqe({initialize:function(t){this.type=uqe.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(e,t){return hqe(this,e,t)},setTo:function(e){if(this.area=0,this.points=[],typeof e=="string"&&(e=e.split(" ")),!Array.isArray(e))return this;for(var t,i=Number.MAX_VALUE,r=0;r<e.length;r++)t={x:0,y:0},typeof e[r]=="number"||typeof e[r]=="string"?(t.x=parseFloat(e[r]),t.y=parseFloat(e[r+1]),r++):Array.isArray(e[r])?(t.x=e[r][0],t.y=e[r][1]):(t.x=e[r].x,t.y=e[r].y),this.points.push(t),t.y<i&&(i=t.y);return this.calculateArea(i),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var e=0,t,i,r=0;r<this.points.length-1;r++)t=this.points[r],i=this.points[r+1],e+=(i.x-t.x)*(t.y+i.y);return t=this.points[0],i=this.points[this.points.length-1],e+=(t.x-i.x)*(i.y+t.y),this.area=-e*.5,this.area},getPoints:function(e,t,i){return oqe(this,e,t,i)}});CW.exports=lqe});var $m=l((cQe,qW)=>{var RW=function(e,t){return e[0]=t[0],e[1]=t[1],e},fqe=function(e){var t,i=[],r=e.points;for(t=0;t<r.length;t++)i.push([r[t].x,r[t].y]);var s=[];for(i.length>0&&s.push(RW([0,0],i[0])),t=0;t<i.length-1;t++){var n=i[t],a=i[t+1],h=n[0],o=n[1],u=a[0],f=a[1];s.push([.85*h+.15*u,.85*o+.15*f]),s.push([.15*h+.85*u,.15*o+.85*f])}return i.length>1&&s.push(RW([0,0],i[i.length-1])),e.setTo(s)};qW.exports=fqe});var jm=l((pQe,bW)=>{var dqe=TW(),vqe=C(),cqe=$i(),pqe=Zm(),mqe=Ml(),AW=ai(),gqe=$m(),xqe=new vqe({Extends:AW,Mixins:[dqe],initialize:function(t,i,r,s,n,a){i===void 0&&(i=0),r===void 0&&(r=0),AW.call(this,t,"Polygon",new mqe(s));var h=pqe(this.geom);this.setPosition(i,r),this.setSize(h.width,h.height),n!==void 0&&this.setFillStyle(n,a),this.updateDisplayOrigin(),this.updateData()},smooth:function(e){e===void 0&&(e=1);for(var t=0;t<e;t++)gqe(this.geom);return this.updateData()},updateData:function(){for(var e=[],t=this.geom.points,i=0;i<t.length;i++)e.push(t[i].x,t[i].y);return e.push(t[0].x,t[0].y),this.pathIndexes=cqe(e),this.pathData=e,this}});bW.exports=xqe});var MW=l((mQe,PW)=>{var yqe=Me(),Tqe=ys(),Eqe=Te(),Sqe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=yqe(t,i,r);s.calcMatrix.copyFrom(n.calc);var a=t._displayOriginX,h=t._displayOriginY,o=i.alpha*t.alpha;if(e.pipelines.preBatch(t),t.isFilled){var u=s.fillTint,f=Eqe.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*o);u.TL=f,u.TR=f,u.BL=f,u.BR=f,s.batchFillRect(-a,-h,t.width,t.height)}t.isStroked&&Tqe(s,t,o,a,h),e.pipelines.postBatch(t)};PW.exports=Sqe});var OW=l((gQe,LW)=>{var _qe=Bi(),wqe=or(),Cqe=wt(),Rqe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(Cqe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY;t.isFilled&&(_qe(s,t),s.fillRect(-n,-a,t.width,t.height)),t.isStroked&&(wqe(s,t),s.beginPath(),s.rect(-n,-a,t.width,t.height),s.stroke()),s.restore()}};LW.exports=Rqe});var NW=l((xQe,IW)=>{var FW=B(),DW=B();FW=MW();DW=OW();IW.exports={renderWebGL:FW,renderCanvas:DW}});var eg=l((yQe,BW)=>{var qqe=C(),Aqe=Ae(),GW=ai(),bqe=NW(),Pqe=new qqe({Extends:GW,Mixins:[bqe],initialize:function(t,i,r,s,n,a,h){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=128),n===void 0&&(n=128),GW.call(this,t,"Rectangle",new Aqe(0,0,s,n)),this.setPosition(i,r),this.setSize(s,n),a!==void 0&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},setSize:function(e,t){return this.width=e,this.height=t,this.geom.setSize(e,t),this.updateData(),this},updateData:function(){var e=[],t=this.geom,i=this._tempLine;return t.getLineA(i),e.push(i.x1,i.y1,i.x2,i.y2),t.getLineB(i),e.push(i.x2,i.y2),t.getLineC(i),e.push(i.x2,i.y2),t.getLineD(i),e.push(i.x2,i.y2),this.pathData=e,this}});BW.exports=Pqe});var kW=l((TQe,UW)=>{var Mqe=la(),Lqe=Me(),Oqe=ys(),Fqe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=Lqe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t._displayOriginX,o=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&Mqe(s,a,t,u,h,o),t.isStroked&&Oqe(s,t,u,h,o),e.pipelines.postBatch(t)};UW.exports=Fqe});var YW=l((EQe,zW)=>{var Dqe=Bi(),Iqe=or(),Nqe=wt(),Gqe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(Nqe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY,h=t.pathData,o=h.length-1,u=h[0]-n,f=h[1]-a;s.beginPath(),s.moveTo(u,f),t.closePath||(o-=2);for(var d=2;d<o;d+=2){var v=h[d]-n,c=h[d+1]-a;s.lineTo(v,c)}s.closePath(),t.isFilled&&(Dqe(s,t),s.fill()),t.isStroked&&(Iqe(s,t),s.stroke()),s.restore()}};zW.exports=Gqe});var HW=l((SQe,WW)=>{var XW=B(),VW=B();XW=kW();VW=YW();WW.exports={renderWebGL:XW,renderCanvas:VW}});var tg=l((_Qe,ZW)=>{var Bqe=HW(),Uqe=C(),kqe=$i(),KW=ai(),zqe=new Uqe({Extends:KW,Mixins:[Bqe],initialize:function(t,i,r,s,n,a,h,o){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=5),n===void 0&&(n=32),a===void 0&&(a=64),KW.call(this,t,"Star",null),this._points=s,this._innerRadius=n,this._outerRadius=a,this.setPosition(i,r),this.setSize(a*2,a*2),h!==void 0&&this.setFillStyle(h,o),this.updateDisplayOrigin(),this.updateData()},setPoints:function(e){return this._points=e,this.updateData()},setInnerRadius:function(e){return this._innerRadius=e,this.updateData()},setOuterRadius:function(e){return this._outerRadius=e,this.updateData()},points:{get:function(){return this._points},set:function(e){this._points=e,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(e){this._innerRadius=e,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(e){this._outerRadius=e,this.updateData()}},updateData:function(){var e=[],t=this._points,i=this._innerRadius,r=this._outerRadius,s=Math.PI/2*3,n=Math.PI/t,a=r,h=r;e.push(a,h+-r);for(var o=0;o<t;o++)e.push(a+Math.cos(s)*r,h+Math.sin(s)*r),s+=n,e.push(a+Math.cos(s)*i,h+Math.sin(s)*i),s+=n;return e.push(a,h+-r),this.pathIndexes=kqe(e),this.pathData=e,this}});ZW.exports=zqe});var fa=l((wQe,JW)=>{var Yqe=function(e,t,i){var r=e.x3-e.x1,s=e.y3-e.y1,n=e.x2-e.x1,a=e.y2-e.y1,h=t-e.x1,o=i-e.y1,u=r*r+s*s,f=r*n+s*a,d=r*h+s*o,v=n*n+a*a,c=n*h+a*o,p=u*v-f*f,m=p===0?0:1/p,x=(v*d-f*c)*m,g=(u*c-f*d)*m;return x>=0&&g>=0&&x+g<1};JW.exports=Yqe});var rg=l((CQe,QW)=>{var Xqe=$(),ig=gr(),Vqe=function(e,t,i){i===void 0&&(i=new Xqe);var r=e.getLineA(),s=e.getLineB(),n=e.getLineC();if(t<=0||t>=1)return i.x=r.x1,i.y=r.y1,i;var a=ig(r),h=ig(s),o=ig(n),u=a+h+o,f=u*t,d=0;return f<a?(d=f/a,i.x=r.x1+(r.x2-r.x1)*d,i.y=r.y1+(r.y2-r.y1)*d):f>a+h?(f-=a+h,d=f/o,i.x=n.x1+(n.x2-n.x1)*d,i.y=n.y1+(n.y2-n.y1)*d):(f-=a,d=f/h,i.x=s.x1+(s.x2-s.x1)*d,i.y=s.y1+(s.y2-s.y1)*d),i};QW.exports=Vqe});var ng=l((RQe,$W)=>{var sg=gr(),Wqe=$(),Hqe=function(e,t,i,r){r===void 0&&(r=[]);var s=e.getLineA(),n=e.getLineB(),a=e.getLineC(),h=sg(s),o=sg(n),u=sg(a),f=h+o+u;!t&&i>0&&(t=f/i);for(var d=0;d<t;d++){var v=f*(d/t),c=0,p=new Wqe;v<h?(c=v/h,p.x=s.x1+(s.x2-s.x1)*c,p.y=s.y1+(s.y2-s.y1)*c):v>h+o?(v-=h+o,c=v/u,p.x=a.x1+(a.x2-a.x1)*c,p.y=a.y1+(a.y2-a.y1)*c):(v-=h,c=v/o,p.x=n.x1+(n.x2-n.x1)*c,p.y=n.y1+(n.y2-n.y1)*c),r.push(p)}return r};$W.exports=Hqe});var Es=l((qQe,jW)=>{var Kqe=C(),Zqe=fa(),Jqe=rg(),Qqe=ng(),$qe=Ki(),ag=bi(),jqe=No(),eAe=new Kqe({initialize:function(t,i,r,s,n,a){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=0),a===void 0&&(a=0),this.type=$qe.TRIANGLE,this.x1=t,this.y1=i,this.x2=r,this.y2=s,this.x3=n,this.y3=a},contains:function(e,t){return Zqe(this,e,t)},getPoint:function(e,t){return Jqe(this,e,t)},getPoints:function(e,t,i){return Qqe(this,e,t,i)},getRandomPoint:function(e){return jqe(this,e)},setTo:function(e,t,i,r,s,n){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=0),this.x1=e,this.y1=t,this.x2=i,this.y2=r,this.x3=s,this.y3=n,this},getLineA:function(e){return e===void 0&&(e=new ag),e.setTo(this.x1,this.y1,this.x2,this.y2),e},getLineB:function(e){return e===void 0&&(e=new ag),e.setTo(this.x2,this.y2,this.x3,this.y3),e},getLineC:function(e){return e===void 0&&(e=new ag),e.setTo(this.x3,this.y3,this.x1,this.y1),e},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(e){var t=0;this.x1<=this.x2&&this.x1<=this.x3?t=this.x1-e:this.x2<=this.x1&&this.x2<=this.x3?t=this.x2-e:t=this.x3-e,this.x1-=t,this.x2-=t,this.x3-=t}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(e){var t=0;this.x1>=this.x2&&this.x1>=this.x3?t=this.x1-e:this.x2>=this.x1&&this.x2>=this.x3?t=this.x2-e:t=this.x3-e,this.x1-=t,this.x2-=t,this.x3-=t}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(e){var t=0;this.y1<=this.y2&&this.y1<=this.y3?t=this.y1-e:this.y2<=this.y1&&this.y2<=this.y3?t=this.y2-e:t=this.y3-e,this.y1-=t,this.y2-=t,this.y3-=t}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(e){var t=0;this.y1>=this.y2&&this.y1>=this.y3?t=this.y1-e:this.y2>=this.y1&&this.y2>=this.y3?t=this.y2-e:t=this.y3-e,this.y1-=t,this.y2-=t,this.y3-=t}}});jW.exports=eAe});var t4=l((AQe,e4)=>{var tAe=Me(),iAe=ys(),rAe=Te(),sAe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=tAe(t,i,r);s.calcMatrix.copyFrom(n.calc);var a=t._displayOriginX,h=t._displayOriginY,o=i.alpha*t.alpha;if(e.pipelines.preBatch(t),t.isFilled){var u=s.fillTint,f=rAe.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*o);u.TL=f,u.TR=f,u.BL=f,u.BR=f;var d=t.geom.x1-a,v=t.geom.y1-h,c=t.geom.x2-a,p=t.geom.y2-h,m=t.geom.x3-a,x=t.geom.y3-h;s.batchFillTriangle(d,v,c,p,m,x,n.sprite,n.camera)}t.isStroked&&iAe(s,t,o,a,h),e.pipelines.postBatch(t)};e4.exports=sAe});var r4=l((bQe,i4)=>{var nAe=Bi(),aAe=or(),hAe=wt(),oAe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(hAe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY,h=t.geom.x1-n,o=t.geom.y1-a,u=t.geom.x2-n,f=t.geom.y2-a,d=t.geom.x3-n,v=t.geom.y3-a;s.beginPath(),s.moveTo(h,o),s.lineTo(u,f),s.lineTo(d,v),s.closePath(),t.isFilled&&(nAe(s,t),s.fill()),t.isStroked&&(aAe(s,t),s.stroke()),s.restore()}};i4.exports=oAe});var h4=l((PQe,a4)=>{var s4=B(),n4=B();s4=t4();n4=r4();a4.exports={renderWebGL:s4,renderCanvas:n4}});var hg=l((MQe,u4)=>{var uAe=C(),o4=ai(),lAe=Es(),fAe=h4(),dAe=new uAe({Extends:o4,Mixins:[fAe],initialize:function(t,i,r,s,n,a,h,o,u,f,d){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=128),a===void 0&&(a=64),h===void 0&&(h=0),o===void 0&&(o=128),u===void 0&&(u=128),o4.call(this,t,"Triangle",new lAe(s,n,a,h,o,u));var v=this.geom.right-this.geom.left,c=this.geom.bottom-this.geom.top;this.setPosition(i,r),this.setSize(v,c),f!==void 0&&this.setFillStyle(f,d),this.updateDisplayOrigin(),this.updateData()},setTo:function(e,t,i,r,s,n){return this.geom.setTo(e,t,i,r,s,n),this.updateData()},updateData:function(){var e=[],t=this.geom,i=this._tempLine;return t.getLineA(i),e.push(i.x1,i.y1,i.x2,i.y2),t.getLineB(i),e.push(i.x2,i.y2),t.getLineC(i),e.push(i.x2,i.y2),this.pathData=e,this}});u4.exports=dAe});var l4=l(()=>{var vAe=il(),cAe=ie();cAe.register("blitter",function(e,t,i,r){return this.displayList.add(new vAe(this.scene,e,t,i,r))})});var f4=l(()=>{var pAe=rl(),mAe=ie();mAe.register("container",function(e,t,i){return this.displayList.add(new pAe(this.scene,e,t,i))})});var d4=l(()=>{var gAe=cm(),xAe=ie();xAe.register("dom",function(e,t,i,r,s){var n=new gAe(this.scene,e,t,i,r,s);return this.displayList.add(n),n})});var v4=l(()=>{var yAe=sl(),TAe=ie();TAe.register("dynamicBitmapText",function(e,t,i,r,s){return this.displayList.add(new yAe(this.scene,e,t,i,r,s))})});var c4=l(()=>{var EAe=pm(),SAe=ie();SAe.register("extern",function(){var e=new EAe(this.scene);return this.displayList.add(e),e})});var p4=l(()=>{var _Ae=ol(),wAe=ie();wAe.register("graphics",function(e){return this.displayList.add(new _Ae(this.scene,e))})});var m4=l(()=>{var CAe=fl(),RAe=ie();RAe.register("group",function(e,t){return this.updateList.add(new CAe(this.scene,e,t))})});var g4=l(()=>{var qAe=dl(),AAe=ie();AAe.register("image",function(e,t,i,r){return this.displayList.add(new qAe(this.scene,e,t,i,r))})});var x4=l(()=>{var bAe=cl(),PAe=ie();PAe.register("layer",function(e){return this.displayList.add(new bAe(this.scene,e))})});var y4=l(()=>{var MAe=ie(),LAe=yl();MAe.register("particles",function(e,t,i){return this.displayList.add(new LAe(this.scene,e,t,i))})});var T4=l(()=>{var OAe=ie(),FAe=Lm();OAe.register("follower",function(e,t,i,r,s){var n=new FAe(this.scene,e,t,i,r,s);return this.displayList.add(n),this.updateList.add(n),n})});var E4=l(()=>{var DAe=ie(),IAe=El();DAe.register("renderTexture",function(e,t,i,r,s,n){return this.displayList.add(new IAe(this.scene,e,t,i,r,s,n))})});var S4=l(()=>{var NAe=Sl(),GAe=ie();GAe.register("rope",function(e,t,i,r,s,n,a,h){return this.displayList.add(new NAe(this.scene,e,t,i,r,s,n,a,h))})});var _4=l(()=>{var BAe=ie(),UAe=aa();BAe.register("sprite",function(e,t,i,r){var s=new UAe(this.scene,e,t,i,r);return this.displayList.add(s),s})});var w4=l(()=>{var kAe=wh(),zAe=ie();zAe.register("bitmapText",function(e,t,i,r,s,n){return this.displayList.add(new kAe(this.scene,e,t,i,r,s,n))})});var C4=l(()=>{var YAe=wl(),XAe=ie();XAe.register("text",function(e,t,i,r){return this.displayList.add(new YAe(this.scene,e,t,i,r))})});var R4=l(()=>{var VAe=ql(),WAe=ie();WAe.register("tileSprite",function(e,t,i,r,s,n){return this.displayList.add(new VAe(this.scene,e,t,i,r,s,n))})});var q4=l(()=>{var HAe=Va(),KAe=ie();KAe.register("zone",function(e,t,i,r){return this.displayList.add(new HAe(this.scene,e,t,i,r))})});var A4=l(()=>{var ZAe=bl(),JAe=ie();JAe.register("video",function(e,t,i){return this.displayList.add(new ZAe(this.scene,e,t,i))})});var M4=l(()=>{var b4=Nm(),P4=ie();P4.register("arc",function(e,t,i,r,s,n,a,h){return this.displayList.add(new b4(this.scene,e,t,i,r,s,n,a,h))});P4.register("circle",function(e,t,i,r,s){return this.displayList.add(new b4(this.scene,e,t,i,0,360,!1,r,s))})});var L4=l(()=>{var QAe=ie(),$Ae=Gm();QAe.register("curve",function(e,t,i,r,s){return this.displayList.add(new $Ae(this.scene,e,t,i,r,s))})});var O4=l(()=>{var jAe=Bm(),ebe=ie();ebe.register("ellipse",function(e,t,i,r,s,n){return this.displayList.add(new jAe(this.scene,e,t,i,r,s,n))})});var F4=l(()=>{var tbe=ie(),ibe=km();tbe.register("grid",function(e,t,i,r,s,n,a,h,o,u){return this.displayList.add(new ibe(this.scene,e,t,i,r,s,n,a,h,o,u))})});var D4=l(()=>{var rbe=ie(),sbe=Xm();rbe.register("isobox",function(e,t,i,r,s,n,a){return this.displayList.add(new sbe(this.scene,e,t,i,r,s,n,a))})});var I4=l(()=>{var nbe=ie(),abe=Hm();nbe.register("isotriangle",function(e,t,i,r,s,n,a,h){return this.displayList.add(new abe(this.scene,e,t,i,r,s,n,a,h))})});var N4=l(()=>{var hbe=ie(),obe=Km();hbe.register("line",function(e,t,i,r,s,n,a,h){return this.displayList.add(new obe(this.scene,e,t,i,r,s,n,a,h))})});var G4=l(()=>{var ube=ie(),lbe=jm();ube.register("polygon",function(e,t,i,r,s){return this.displayList.add(new lbe(this.scene,e,t,i,r,s))})});var B4=l(()=>{var fbe=ie(),dbe=eg();fbe.register("rectangle",function(e,t,i,r,s,n){return this.displayList.add(new dbe(this.scene,e,t,i,r,s,n))})});var U4=l(()=>{var vbe=tg(),cbe=ie();cbe.register("star",function(e,t,i,r,s,n,a){return this.displayList.add(new vbe(this.scene,e,t,i,r,s,n,a))})});var k4=l(()=>{var pbe=ie(),mbe=hg();pbe.register("triangle",function(e,t,i,r,s,n,a,h,o,u){return this.displayList.add(new mbe(this.scene,e,t,i,r,s,n,a,h,o,u))})});var Y4=l(()=>{var gbe=il(),xbe=gt(),ybe=Pe(),z4=we();ybe.register("blitter",function(e,t){e===void 0&&(e={});var i=z4(e,"key",null),r=z4(e,"frame",null),s=new gbe(this.scene,0,0,i,r);return t!==void 0&&(e.add=t),xbe(this.scene,s,e),s})});var X4=l(()=>{var Tbe=gt(),Ebe=rl(),Sbe=Pe(),og=we();Sbe.register("container",function(e,t){e===void 0&&(e={});var i=og(e,"x",0),r=og(e,"y",0),s=og(e,"children",null),n=new Ebe(this.scene,i,r,s);return t!==void 0&&(e.add=t),Tbe(this.scene,n,e),n})});var V4=l(()=>{var _be=sl(),wbe=gt(),Cbe=Pe(),ug=we();Cbe.register("dynamicBitmapText",function(e,t){e===void 0&&(e={});var i=ug(e,"font",""),r=ug(e,"text",""),s=ug(e,"size",!1),n=new _be(this.scene,0,0,i,r,s);return t!==void 0&&(e.add=t),wbe(this.scene,n,e),n})});var W4=l(()=>{var Rbe=Pe(),qbe=ol();Rbe.register("graphics",function(e,t){e===void 0&&(e={}),t!==void 0&&(e.add=t);var i=new qbe(this.scene,e);return e.add&&this.scene.sys.displayList.add(i),i})});var H4=l(()=>{var Abe=Pe(),bbe=fl();Abe.register("group",function(e){return new bbe(this.scene,null,e)})});var Z4=l(()=>{var Pbe=gt(),Mbe=Pe(),K4=we(),Lbe=dl();Mbe.register("image",function(e,t){e===void 0&&(e={});var i=K4(e,"key",null),r=K4(e,"frame",null),s=new Lbe(this.scene,0,0,i,r);return t!==void 0&&(e.add=t),Pbe(this.scene,s,e),s})});var J4=l(()=>{var Obe=gt(),Fbe=cl(),Dbe=Pe(),Ibe=we();Dbe.register("layer",function(e,t){e===void 0&&(e={});var i=Ibe(e,"children",null),r=new Fbe(this.scene,i);return t!==void 0&&(e.add=t),Obe(this.scene,r,e),r})});var j4=l(()=>{var Nbe=Pe(),Q4=we(),$4=z(),Gbe=yl();Nbe.register("particles",function(e,t){e===void 0&&(e={});var i=Q4(e,"key",null),r=Q4(e,"frame",null),s=$4(e,"emitters",null),n=new Gbe(this.scene,i,r,s);t!==void 0&&(e.add=t);var a=$4(e,"add",!1);return a?this.displayList.add(n):this.updateList.add(n),n})});var eH=l(()=>{var Bbe=gt(),Ube=Pe(),da=we(),kbe=El();Ube.register("renderTexture",function(e,t){e===void 0&&(e={});var i=da(e,"x",0),r=da(e,"y",0),s=da(e,"width",32),n=da(e,"height",32),a=da(e,"key",void 0),h=da(e,"frame",void 0),o=new kbe(this.scene,i,r,s,n,a,h);return t!==void 0&&(e.add=t),Bbe(this.scene,o,e),o})});var tH=l(()=>{var zbe=gt(),Ybe=Pe(),lg=we(),fg=he(),Xbe=Sl();Ybe.register("rope",function(e,t){e===void 0&&(e={});var i=lg(e,"key",null),r=lg(e,"frame",null),s=lg(e,"horizontal",!0),n=fg(e,"points",void 0),a=fg(e,"colors",void 0),h=fg(e,"alphas",void 0),o=new Xbe(this.scene,0,0,i,r,n,s,a,h);return t!==void 0&&(e.add=t),zbe(this.scene,o,e),e.add||this.updateList.add(o),o})});var rH=l(()=>{var Vbe=gt(),Wbe=hm(),Hbe=Pe(),iH=we(),Kbe=aa();Hbe.register("sprite",function(e,t){e===void 0&&(e={});var i=iH(e,"key",null),r=iH(e,"frame",null),s=new Kbe(this.scene,0,0,i,r);return t!==void 0&&(e.add=t),Vbe(this.scene,s,e),Wbe(s,e),s})});var aH=l(()=>{var Zbe=wh(),Jbe=gt(),Qbe=Pe(),sH=we(),nH=he();Qbe.register("bitmapText",function(e,t){e===void 0&&(e={});var i=nH(e,"font",""),r=sH(e,"text",""),s=sH(e,"size",!1),n=nH(e,"align",0),a=new Zbe(this.scene,0,0,i,r,s,n);return t!==void 0&&(e.add=t),Jbe(this.scene,a,e),a})});var hH=l(()=>{var $be=gt(),jbe=Pe(),Mh=we(),ePe=wl();jbe.register("text",function(e,t){e===void 0&&(e={});var i=Mh(e,"text",""),r=Mh(e,"style",null),s=Mh(e,"padding",null);s!==null&&(r.padding=s);var n=new ePe(this.scene,0,0,i,r);return t!==void 0&&(e.add=t),$be(this.scene,n,e),n.autoRound=Mh(e,"autoRound",!0),n.resolution=Mh(e,"resolution",1),n})});var oH=l(()=>{var tPe=gt(),iPe=Pe(),va=we(),rPe=ql();iPe.register("tileSprite",function(e,t){e===void 0&&(e={});var i=va(e,"x",0),r=va(e,"y",0),s=va(e,"width",512),n=va(e,"height",512),a=va(e,"key",""),h=va(e,"frame",""),o=new rPe(this.scene,i,r,s,n,a,h);return t!==void 0&&(e.add=t),tPe(this.scene,o,e),o})});var uH=l(()=>{var sPe=Pe(),Ll=we(),nPe=Va();sPe.register("zone",function(e){var t=Ll(e,"x",0),i=Ll(e,"y",0),r=Ll(e,"width",1),s=Ll(e,"height",r);return new nPe(this.scene,t,i,r,s)})});var lH=l(()=>{var aPe=gt(),hPe=Pe(),oPe=we(),uPe=bl();hPe.register("video",function(e,t){e===void 0&&(e={});var i=oPe(e,"key",null),r=new uPe(this.scene,0,0,i);return t!==void 0&&(e.add=t),aPe(this.scene,r,e),e.add||this.updateList.add(r),r})});var dg=l((mje,fH)=>{var lPe=function(e,t,i){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(t))return e[t]=i,!0;if(t.indexOf(".")!==-1){for(var r=t.split("."),s=e,n=e,a=0;a<r.length;a++)if(s.hasOwnProperty(r[a]))n=s,s=s[r[a]];else return!1;return n[r[r.length-1]]=i,!0}return!1};fH.exports=lPe});var vH=l((gje,dH)=>{var fPe=Me(),dPe=function(e,t,i,r){if(!!t.shader){if(i.addToRenderList(t),e.pipelines.clear(),t.renderToTexture)t.load(),t.flush();else{var s=fPe(t,i,r).calc;(e.width!==t._rendererWidth||e.height!==t._rendererHeight)&&t.projOrtho(0,e.width,e.height,0),t.load(s.matrix),t.flush()}e.pipelines.rebind()}};dH.exports=dPe});var pH=l((xje,cH)=>{var vPe=function(){};cH.exports=vPe});var yH=l((yje,xH)=>{var mH=B(),gH=B();mH=vH();gH=pH();xH.exports={renderWebGL:mH,renderCanvas:gH}});var Ol=l((Tje,TH)=>{var cPe=C(),Ss=ye(),vg=Fe(),Mr=z(),pPe=Ye(),mPe=dg(),gPe=yH(),cg=Tt(),xPe=new cPe({Extends:vg,Mixins:[Ss.ComputedSize,Ss.Depth,Ss.GetBounds,Ss.Mask,Ss.Origin,Ss.ScrollFactor,Ss.Transform,Ss.Visible,gPe],initialize:function(t,i,r,s,n,a,h,o){r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=128),a===void 0&&(a=128),vg.call(this,t,"Shader"),this.blendMode=-1,this.shader;var u=t.sys.renderer;this.renderer=u,this.gl=u.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=u.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new cg,this._tempMatrix2=new cg,this._tempMatrix3=new cg,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=u.width,this._rendererHeight=u.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(r,s),this.setSize(n,a),this.setOrigin(.5,.5),this.setShader(i,h,o)},willRender:function(e){return this.renderToTexture?!0:!(vg.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&e.id)},setRenderToTexture:function(e,t){if(t===void 0&&(t=!1),!this.renderToTexture){var i=this.width,r=this.height,s=this.renderer;this.glTexture=s.createTextureFromSource(null,i,r,0),this.glTexture.flipY=t,this.framebuffer=s.createFramebuffer(i,r,this.glTexture,!1),this._rendererWidth=i,this._rendererHeight=r,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),e&&(this.texture=this.scene.sys.textures.addGLTexture(e,this.glTexture,i,r))}return this.shader&&(s.pipelines.clear(),this.load(),this.flush(),s.pipelines.rebind()),this},setShader:function(e,t,i){if(t===void 0&&(t=[]),typeof e=="string"){var r=this.scene.sys.cache.shader;if(!r.has(e))return console.warn("Shader missing: "+e),this;this.shader=r.get(e)}else this.shader=e;var s=this.gl,n=this.renderer;this.program&&s.deleteProgram(this.program);var a=n.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);s.uniformMatrix4fv(s.getUniformLocation(a,"uViewMatrix"),!1,this.viewMatrix),s.uniformMatrix4fv(s.getUniformLocation(a,"uProjectionMatrix"),!1,this.projectionMatrix),s.uniform2f(s.getUniformLocation(a,"uResolution"),this.width,this.height),this.program=a;var h=new Date,o={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[h.getFullYear(),h.getMonth(),h.getDate(),h.getHours()*60*60+h.getMinutes()*60+h.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=pPe(!0,{},this.shader.uniforms,o):this.uniforms=o;for(var u=0;u<4;u++)t[u]&&this.setSampler2D("iChannel"+u,t[u],u,i);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(e){return this.pointer=e,this},projOrtho:function(e,t,i,r){var s=-1e3,n=1e3,a=1/(e-t),h=1/(i-r),o=1/(s-n),u=this.projectionMatrix;u[0]=-2*a,u[5]=-2*h,u[10]=2*o,u[12]=(e+t)*a,u[13]=(r+i)*h,u[14]=(n+s)*o;var f=this.program,d=this.gl,v=this.renderer;v.setProgram(f),d.uniformMatrix4fv(d.getUniformLocation(f,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=t,this._rendererHeight=i},initUniforms:function(){var e=this.gl,t=this.renderer.glFuncMap,i=this.program;this._textureCount=0;for(var r in this.uniforms){var s=this.uniforms[r],n=s.type,a=t[n];s.uniformLocation=e.getUniformLocation(i,r),n!=="sampler2D"&&(s.glMatrix=a.matrix,s.glValueLength=a.length,s.glFunc=a.func)}},setSampler2DBuffer:function(e,t,i,r,s,n){s===void 0&&(s=0),n===void 0&&(n={});var a=this.uniforms[e];return a.value=t,n.width=i,n.height=r,a.textureData=n,this._textureCount=s,this.initSampler2D(a),this},setSampler2D:function(e,t,i,r){i===void 0&&(i=0);var s=this.scene.sys.textures;if(s.exists(t)){var n=s.getFrame(t);if(n.glTexture&&n.glTexture.isRenderTexture)return this.setSampler2DBuffer(e,n.glTexture,n.width,n.height,i,r);var a=this.uniforms[e],h=n.source;a.textureKey=t,a.source=h.image,a.value=n.glTexture,h.isGLTexture&&(r||(r={}),r.width=h.width,r.height=h.height),r&&(a.textureData=r),this._textureCount=i,this.initSampler2D(a)}return this},setUniform:function(e,t){return mPe(this.uniforms,e,t),this},getUniform:function(e){return Mr(this.uniforms,e,null)},setChannel0:function(e,t){return this.setSampler2D("iChannel0",e,0,t)},setChannel1:function(e,t){return this.setSampler2D("iChannel1",e,1,t)},setChannel2:function(e,t){return this.setSampler2D("iChannel2",e,2,t)},setChannel3:function(e,t){return this.setSampler2D("iChannel3",e,3,t)},initSampler2D:function(e){if(!!e.value){var t=this.gl;t.activeTexture(t.TEXTURE0+this._textureCount),t.bindTexture(t.TEXTURE_2D,e.value);var i=e.textureData;if(i&&!e.value.isRenderTexture){var r=t[Mr(i,"magFilter","linear").toUpperCase()],s=t[Mr(i,"minFilter","linear").toUpperCase()],n=t[Mr(i,"wrapS","repeat").toUpperCase()],a=t[Mr(i,"wrapT","repeat").toUpperCase()],h=t[Mr(i,"format","rgba").toUpperCase()];if(i.repeat&&(n=t.REPEAT,a=t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var o=Mr(i,"width",512),u=Mr(i,"height",2),f=Mr(i,"border",0);t.texImage2D(t.TEXTURE_2D,0,h,o,u,f,h,t.UNSIGNED_BYTE,null)}else t.texImage2D(t.TEXTURE_2D,0,h,t.RGBA,t.UNSIGNED_BYTE,e.source);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,a)}this.renderer.setProgram(this.program),t.uniform1i(e.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var e=this.gl,t=this.uniforms,i,r,s,n,a,h=0;for(var o in t)i=t[o],s=i.glFunc,r=i.glValueLength,n=i.uniformLocation,a=i.value,a!==null&&(r===1?i.glMatrix?s.call(e,n,i.transpose,a):s.call(e,n,a):r===2?s.call(e,n,a.x,a.y):r===3?s.call(e,n,a.x,a.y,a.z):r===4?s.call(e,n,a.x,a.y,a.z,a.w):i.type==="sampler2D"&&(e.activeTexture(e.TEXTURE0+h),e.bindTexture(e.TEXTURE_2D,a),e.uniform1i(n,h),h++))},load:function(e){var t=this.gl,i=this.width,r=this.height,s=this.renderer,n=this.program,a=this.viewMatrix;if(!this.renderToTexture){var h=-this._displayOriginX,o=-this._displayOriginY;a[0]=e[0],a[1]=e[1],a[4]=e[2],a[5]=e[3],a[8]=e[4],a[9]=e[5],a[12]=a[0]*h+a[4]*o,a[13]=a[1]*h+a[5]*o}t.useProgram(n),t.uniformMatrix4fv(t.getUniformLocation(n,"uViewMatrix"),!1,a),t.uniform2f(t.getUniformLocation(n,"uResolution"),this.width,this.height);var u=this.uniforms,f=u.resolution;f.value.x=i,f.value.y=r,u.time.value=s.game.loop.getDuration();var d=this.pointer;if(d){var v=u.mouse,c=d.x/i,p=1-d.y/r;v.value.x=c.toFixed(2),v.value.y=p.toFixed(2)}this.syncUniforms()},flush:function(){var e=this.width,t=this.height,i=this.program,r=this.gl,s=this.vertexBuffer,n=this.renderer,a=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(n.setFramebuffer(this.framebuffer),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)),r.bindBuffer(r.ARRAY_BUFFER,s);var h=r.getAttribLocation(i,"inPosition");h!==-1&&(r.enableVertexAttribArray(h),r.vertexAttribPointer(h,2,r.FLOAT,!1,a,0));var o=this.vertexViewF32;o[3]=t,o[4]=e,o[5]=t,o[8]=e,o[9]=t,o[10]=e;var u=6;r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,u*a)),r.drawArrays(r.TRIANGLES,0,u),this.renderToTexture&&n.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var e=this.gl;e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});TH.exports=xPe});var ca=l((Eje,EH)=>{var yPe=C(),TPe=Ae(),EPe=xe();function pg(e,t,i,r){var s=e-i,n=t-r,a=s*s+n*n;return Math.sqrt(a)}var SPe=new yPe({initialize:function(t,i,r){this.vertex1=t,this.vertex2=i,this.vertex3=r,this.bounds=new TPe,this._inCenter=new EPe},getInCenter:function(e){e===void 0&&(e=!0);var t=this.vertex1,i=this.vertex2,r=this.vertex3,s,n,a,h,o,u;e?(s=t.x,n=t.y,a=i.x,h=i.y,o=r.x,u=r.y):(s=t.vx,n=t.vy,a=i.vx,h=i.vy,o=r.vx,u=r.vy);var f=pg(o,u,a,h),d=pg(s,n,o,u),v=pg(a,h,s,n),c=f+d+v;return this._inCenter.set((s*f+a*d+o*v)/c,(n*f+h*d+u*v)/c)},contains:function(e,t,i){var r=this.vertex1,s=this.vertex2,n=this.vertex3,a=r.vx,h=r.vy,o=s.vx,u=s.vy,f=n.vx,d=n.vy;if(i){var v=i.a,c=i.b,p=i.c,m=i.d,x=i.e,g=i.f;a=r.vx*v+r.vy*p+x,h=r.vx*c+r.vy*m+g,o=s.vx*v+s.vy*p+x,u=s.vx*c+s.vy*m+g,f=n.vx*v+n.vy*p+x,d=n.vx*c+n.vy*m+g}var y=f-a,T=d-h,S=o-a,E=u-h,_=e-a,w=t-h,R=y*y+T*T,q=y*S+T*E,A=y*_+T*w,b=S*S+E*E,L=S*_+E*w,M=R*b-q*q,G=M===0?0:1/M,P=(b*A-q*L)*G,D=(R*L-q*A)*G;return P>=0&&D>=0&&P+D<1},isCounterClockwise:function(e){var t=this.vertex1,i=this.vertex2,r=this.vertex3,s=(i.vx-t.vx)*(r.vy-t.vy)-(i.vy-t.vy)*(r.vx-t.vx);return e<=0?s>=0:s<0},load:function(e,t,i,r,s){return i=this.vertex1.load(e,t,i,r,s),i=this.vertex2.load(e,t,i,r,s),i=this.vertex3.load(e,t,i,r,s),i},transformCoordinatesLocal:function(e,t,i,r){return this.vertex1.transformCoordinatesLocal(e,t,i,r),this.vertex2.transformCoordinatesLocal(e,t,i,r),this.vertex3.transformCoordinatesLocal(e,t,i,r),this},updateBounds:function(){var e=this.vertex1,t=this.vertex2,i=this.vertex3,r=this.bounds;return r.x=Math.min(e.vx,t.vx,i.vx),r.y=Math.min(e.vy,t.vy,i.vy),r.width=Math.max(e.vx,t.vx,i.vx)-r.x,r.height=Math.max(e.vy,t.vy,i.vy)-r.y,this},isInView:function(e,t,i,r,s,n,a,h,o,u,f){var d=this.vertex1.update(s,n,a,h,o,u,f,r),v=this.vertex2.update(s,n,a,h,o,u,f,r),c=this.vertex3.update(s,n,a,h,o,u,f,r);if(d.ta<=0&&v.ta<=0&&c.ta<=0||t&&!this.isCounterClockwise(i))return!1;var p=this.bounds;p.x=Math.min(d.tx,v.tx,c.tx),p.y=Math.min(d.ty,v.ty,c.ty),p.width=Math.max(d.tx,v.tx,c.tx)-p.x,p.height=Math.max(d.ty,v.ty,c.ty)-p.y;var m=e.x+e.width,x=e.y+e.height;return p.width<=0||p.height<=0||e.width<=0||e.height<=0?!1:!(p.right<e.x||p.bottom<e.y||p.x>m||p.y>x)},translate:function(e,t){t===void 0&&(t=0);var i=this.vertex1,r=this.vertex2,s=this.vertex3;return i.x+=e,i.y+=t,r.x+=e,r.y+=t,s.x+=e,s.y+=t,this},x:{get:function(){return this.getInCenter().x},set:function(e){var t=this.getInCenter();this.translate(e-t.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(e){var t=this.getInCenter();this.translate(0,e-t.y)}},alpha:{get:function(){var e=this.vertex1,t=this.vertex2,i=this.vertex3;return(e.alpha+t.alpha+i.alpha)/3},set:function(e){this.vertex1.alpha=e,this.vertex2.alpha=e,this.vertex3.alpha=e}},depth:{get:function(){var e=this.vertex1,t=this.vertex2,i=this.vertex3;return(e.vz+t.vz+i.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});EH.exports=SPe});var pa=l((Sje,_H)=>{var _Pe=C(),wPe=Te(),SH=mi(),CPe=new _Pe({Extends:SH,initialize:function(t,i,r,s,n,a,h,o,u,f){a===void 0&&(a=16777215),h===void 0&&(h=1),o===void 0&&(o=0),u===void 0&&(u=0),f===void 0&&(f=0),SH.call(this,t,i,r),this.vx=0,this.vy=0,this.vz=0,this.nx=o,this.ny=u,this.nz=f,this.u=s,this.v=n,this.color=a,this.alpha=h,this.tx=0,this.ty=0,this.ta=0},setUVs:function(e,t){return this.u=e,this.v=t,this},transformCoordinatesLocal:function(e,t,i,r){var s=this.x,n=this.y,a=this.z,h=e.val,o=s*h[0]+n*h[4]+a*h[8]+h[12],u=s*h[1]+n*h[5]+a*h[9]+h[13],f=s*h[2]+n*h[6]+a*h[10]+h[14],d=s*h[3]+n*h[7]+a*h[11]+h[15];this.vx=o/d*t,this.vy=-(u/d)*i,r<=0?this.vz=f/d:this.vz=-(f/d)},update:function(e,t,i,r,s,n,a,h){var o=this.vx*e+this.vy*i+s,u=this.vx*t+this.vy*r+n;return a&&(o=Math.round(o),u=Math.round(u)),this.tx=o,this.ty=u,this.ta=this.alpha*h,this},load:function(e,t,i,r,s){return e[++i]=this.tx,e[++i]=this.ty,e[++i]=this.u,e[++i]=this.v,e[++i]=r,e[++i]=s,t[++i]=wPe.getTintAppendFloatAlpha(this.color,this.ta),i}});_H.exports=CPe});var mg=l((_je,CH)=>{var RPe=ca(),wH=pa(),qPe=function(e,t,i,r,s,n,a){if(r===void 0&&(r=!1),n===void 0&&(n=16777215),a===void 0&&(a=1),e.length!==t.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var h={faces:[],vertices:[]},o,u,f,d,v,c,p,m,x,g,y,T=r?3:2,S=Array.isArray(n),E=Array.isArray(a);if(Array.isArray(i)&&i.length>0)for(o=0;o<i.length;o++){var _=i[o],w=i[o]*2,R=i[o]*T;u=e[R],f=e[R+1],d=r?e[R+2]:0,v=t[w],c=t[w+1],p=S?n[_]:n,m=E?a[_]:a,x=0,g=0,y=0,s&&(x=s[R],g=s[R+1],y=r?s[R+2]:0),h.vertices.push(new wH(u,f,d,v,c,p,m,x,g,y))}else{var q=0,A=0;for(o=0;o<e.length;o+=T)u=e[o],f=e[o+1],d=r?e[o+2]:0,v=t[q],c=t[q+1],p=S?n[A]:n,m=E?a[A]:a,x=0,g=0,y=0,s&&(x=s[o],g=s[o+1],y=r?s[o+2]:0),h.vertices.push(new wH(u,f,d,v,c,p,m,x,g,y)),q+=2,A++}for(o=0;o<h.vertices.length;o+=3){var b=h.vertices[o],L=h.vertices[o+1],M=h.vertices[o+2];h.faces.push(new RPe(b,L,M))}return h};CH.exports=qPe});var xg=l((wje,bH)=>{var APe=ca(),bPe=Er(),AH=mi(),gg=pa(),RH=new AH,qH=new AH,Fl=new bPe,PPe=function(e,t,i,r,s,n,a,h,o,u){i===void 0&&(i=1),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=0),a===void 0&&(a=0),h===void 0&&(h=0),o===void 0&&(o=0),u===void 0&&(u=!0);var f={faces:[],verts:[]},d=e.materials;RH.set(r,s,n),qH.set(a,h,o),Fl.fromRotationXYTranslation(qH,RH,u);for(var v=0;v<e.models.length;v++)for(var c=e.models[v],p=c.vertices,m=c.textureCoords,x=c.faces,g=0;g<x.length;g++){var y=x[g],T=y.vertices[0],S=y.vertices[1],E=y.vertices[2],_=p[T.vertexIndex],w=p[S.vertexIndex],R=p[E.vertexIndex],q=T.textureCoordsIndex,A=S.textureCoordsIndex,b=E.textureCoordsIndex,L=q===-1?{u:0,v:1}:m[q],M=A===-1?{u:0,v:0}:m[A],G=b===-1?{u:1,v:1}:m[b],P=16777215;y.material!==""&&d[y.material]&&(P=d[y.material]);var D=new gg(_.x*i,_.y*i,_.z*i,L.u,L.v,P).transformMat4(Fl),I=new gg(w.x*i,w.y*i,w.z*i,M.u,M.v,P).transformMat4(Fl),F=new gg(R.x*i,R.y*i,R.z*i,G.u,G.v,P).transformMat4(Fl);f.verts.push(D,I,F),f.faces.push(new APe(D,I,F))}return t&&(t.faces=t.faces.concat(f.faces),t.vertices=t.vertices.concat(f.verts)),f};bH.exports=PPe});var MH=l((Cje,PH)=>{var MPe=Me(),LPe=function(e,t,i,r){var s=t.faces,n=s.length;if(n!==0){i.addToRenderList(t);var a=e.pipelines.set(t.pipeline,t),h=MPe(t,i,r).calc,o=a.setGameObject(t),u=a.vertexViewF32,f=a.vertexViewU32,d=a.vertexCount*a.currentShader.vertexComponentCount-1,v=t.tintFill,c=[],p=t.debugCallback,m=h.a,x=h.b,g=h.c,y=h.d,T=h.e,S=h.f,E=t.viewPosition.z,_=t.hideCCW,w=i.roundPixels,R=i.alpha*t.alpha,q=0;e.pipelines.preBatch(t);for(var A=0;A<n;A++){var b=s[A];!b.isInView(i,_,E,R,m,x,g,y,T,S,w)||(a.shouldFlush(3)&&(a.flush(),d=0),d=b.load(u,f,d,o,v),q++,a.vertexCount+=3,p&&c.push(b))}t.totalFrame+=q,p&&p.call(t,t,c),e.pipelines.postBatch(t)}};PH.exports=LPe});var OH=l((Rje,LH)=>{var OPe=function(){};LH.exports=OPe});var NH=l((qje,IH)=>{var FH=B(),DH=B();FH=MH();DH=OH();IH.exports={renderWebGL:FH,renderCanvas:DH}});var Dl=l((Aje,UH)=>{var FPe=C(),ur=ye(),DPe=yr(),IPe=ca(),GH=Fe(),NPe=mg(),GPe=xg(),BPe=Me(),yg=Er(),UPe=NH(),BH=vs(),ma=mi(),kPe=pa(),zPe=new FPe({Extends:GH,Mixins:[ur.AlphaSingle,ur.BlendMode,ur.Depth,ur.Mask,ur.Pipeline,ur.Size,ur.Texture,ur.Transform,ur.Visible,ur.ScrollFactor,UPe],initialize:function(t,i,r,s,n,a,h,o,u,f,d,v){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s="__WHITE"),GH.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new ma,this.modelScale=new ma(1,1,1),this.modelRotation=new ma,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new yg,this.viewPosition=new ma,this.viewMatrix=new yg,this.projectionMatrix=new yg,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var c=t.sys.renderer;this.setPosition(i,r),this.setTexture(s,n),this.setSize(c.width,c.height),this.initPipeline(),this.setPerspective(c.width,c.height),a&&this.addVertices(a,h,o,u,f,d,v)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(e){return this.viewPosition.addScale(ma.LEFT,e),this.dirtyCache[10]=1,this},panY:function(e){return this.viewPosition.y+=ma.DOWN.y*e,this.dirtyCache[10]=1,this},panZ:function(e){return this.viewPosition.z+=e,this.dirtyCache[10]=1,this},setPerspective:function(e,t,i,r,s){return i===void 0&&(i=45),r===void 0&&(r=.01),s===void 0&&(s=1e3),this.projectionMatrix.perspective(DPe(i),e/t,r,s),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(e,t,i,r){return e===void 0&&(e=this.scene.sys.renderer.getAspectRatio()),t===void 0&&(t=1),i===void 0&&(i=-1e3),r===void 0&&(r=1e3),this.projectionMatrix.ortho(-e,e,-t,t,i,r),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(e){e.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(e,t,i,r,s,n,a,h,o){var u=this.scene.sys.cache.obj.get(e);return u&&GPe(u,this,t,i,r,s,n,a,h,o),this},sortByDepth:function(e,t){return e.depth-t.depth},depthSort:function(){return BH(this.faces,this.sortByDepth),this},addVertex:function(e,t,i,r,s,n,a){var h=new kPe(e,t,i,r,s,n,a);return this.vertices.push(h),h},addFace:function(e,t,i){var r=new IPe(e,t,i);return this.faces.push(r),this.dirtyCache[9]=-1,r},addVertices:function(e,t,i,r,s,n,a){var h=NPe(e,t,i,r,s,n,a);return h&&(this.faces=this.faces.concat(h.faces),this.vertices=this.vertices.concat(h.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(e){return this.faces[e]},getFaceAt:function(e,t,i){i===void 0&&(i=this.scene.sys.cameras.main);for(var r=BPe(this,i).calc,s=this.faces,n=[],a=0;a<s.length;a++){var h=s[a];h.contains(e,t,r)&&n.push(h)}return BH(n,this.sortByDepth)},setDebug:function(e,t){return this.debugGraphic=e,!e&&!t?this.debugCallback=null:t?this.debugCallback=t:this.debugCallback=this.renderDebug,this},isDirty:function(){var e=this.modelPosition,t=this.modelRotation,i=this.modelScale,r=this.dirtyCache,s=e.x,n=e.y,a=e.z,h=t.x,o=t.y,u=t.z,f=i.x,d=i.y,v=i.z,c=this.getFaceCount(),p=r[0],m=r[1],x=r[2],g=r[3],y=r[4],T=r[5],S=r[6],E=r[7],_=r[8],w=r[9];return r[0]=s,r[1]=n,r[2]=a,r[3]=h,r[4]=o,r[5]=u,r[6]=f,r[7]=d,r[8]=v,r[9]=c,p!==s||m!==n||x!==a||g!==h||y!==o||T!==u||S!==f||E!==d||_!==v||w!==c},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var e=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!e[10]&&!this.isDirty())){var t=this.width,i=this.height,r=this.viewMatrix,s=this.viewPosition;e[10]&&(r.identity(),r.translate(s),r.invert(),e[10]=0);var n=this.transformMatrix;n.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var a=s.z,h=this.faces,o=0;o<h.length;o++)h[o].transformCoordinatesLocal(n,t,i,a);this.depthSort()}},renderDebug:function(e,t){for(var i=e.debugGraphic,r=0;r<t.length;r++){var s=t[r],n=s.vertex1.tx,a=s.vertex1.ty,h=s.vertex2.tx,o=s.vertex2.ty,u=s.vertex3.tx,f=s.vertex3.ty;i.strokeTriangle(n,a,h,o,u,f)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});UH.exports=zPe});var zH=l((bje,kH)=>{var YPe=Me(),XPe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=YPe(t,i,r).calc,a=t.width,h=t.height,o=-t._radius,u=-t._radius,f=o+a,d=u+h,v=n.getX(0,0),c=n.getY(0,0),p=n.getX(o,u),m=n.getY(o,u),x=n.getX(o,d),g=n.getY(o,d),y=n.getX(f,d),T=n.getY(f,d),S=n.getX(f,u),E=n.getY(f,u);e.pipelines.preBatch(t),s.batchPointLight(t,i,p,m,x,g,y,T,S,E,v,c),e.pipelines.postBatch(t)};kH.exports=XPe});var VH=l((Pje,XH)=>{var YH=B(),VPe=B();YH=zH();XH.exports={renderWebGL:YH,renderCanvas:VPe}});var Lh=l((Mje,HH)=>{var WPe=C(),Lr=ye(),WH=Fe(),HPe=Xo(),KPe=Ks(),ZPe=VH(),JPe=new WPe({Extends:WH,Mixins:[Lr.AlphaSingle,Lr.BlendMode,Lr.Depth,Lr.GetBounds,Lr.Mask,Lr.Pipeline,Lr.ScrollFactor,Lr.Transform,Lr.Visible,ZPe],initialize:function(t,i,r,s,n,a,h){s===void 0&&(s=16777215),n===void 0&&(n=128),a===void 0&&(a=1),h===void 0&&(h=.1),WH.call(this,t,"PointLight"),this.initPipeline(KPe.POINTLIGHT_PIPELINE),this.setPosition(i,r),this.color=HPe(s),this.intensity=a,this.attenuation=h,this.width=n*2,this.height=n*2,this._radius=n},radius:{get:function(){return this._radius},set:function(e){this._radius=e,this.width=e*2,this.height=e*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});HH.exports=JPe});var KH=l(()=>{var QPe=Ol(),$Pe=ie();$Pe.register("shader",function(e,t,i,r,s,n,a){return this.displayList.add(new QPe(this.scene,e,t,i,r,s,n,a))})});var ZH=l(()=>{var jPe=Dl(),eMe=ie();eMe.register("mesh",function(e,t,i,r,s,n,a,h,o,u,f){return this.displayList.add(new jPe(this.scene,e,t,i,r,s,n,a,h,o,u,f))})});var JH=l(()=>{var tMe=ie(),iMe=Lh();tMe.register("pointlight",function(e,t,i,r,s,n){return this.displayList.add(new iMe(this.scene,e,t,i,r,s,n))})});var QH=l(()=>{var rMe=gt(),sMe=Pe(),Oh=we(),nMe=Ol();sMe.register("shader",function(e,t){e===void 0&&(e={});var i=Oh(e,"key",null),r=Oh(e,"x",0),s=Oh(e,"y",0),n=Oh(e,"width",128),a=Oh(e,"height",128),h=new nMe(this.scene,i,r,s,n,a);return t!==void 0&&(e.add=t),rMe(this.scene,h,e),h})});var jH=l(()=>{var aMe=gt(),hMe=Pe(),$H=we(),ln=he(),oMe=Dl();hMe.register("mesh",function(e,t){e===void 0&&(e={});var i=$H(e,"key",null),r=$H(e,"frame",null),s=ln(e,"vertices",[]),n=ln(e,"uvs",[]),a=ln(e,"indicies",[]),h=ln(e,"containsZ",!1),o=ln(e,"normals",[]),u=ln(e,"colors",16777215),f=ln(e,"alphas",1),d=new oMe(this.scene,0,0,i,r,s,n,a,h,o,u,f);return t!==void 0&&(e.add=t),aMe(this.scene,d,e),d})});var e6=l(()=>{var uMe=gt(),lMe=Pe(),Il=we(),fMe=Lh();lMe.register("pointlight",function(e,t){e===void 0&&(e={});var i=Il(e,"color",16777215),r=Il(e,"radius",128),s=Il(e,"intensity",1),n=Il(e,"attenuation",.1),a=new fMe(this.scene,0,0,i,r,s,n);return t!==void 0&&(e.add=t),uMe(this.scene,a,e),a})});var Eg=l((Xje,r6)=>{var t6=zr(),dMe=C(),i6=ye(),vMe=Ru(),cMe=Te(),Tg=new dMe({Extends:t6,Mixins:[i6.ScrollFactor,i6.Visible],initialize:function(t,i,r,s,n,a,h){t6.call(this,t,i,r),this.color=new vMe(s,n,a),this.intensity=h,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(e){return!(Tg.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&e.id)},setColor:function(e){var t=cMe.getFloatsFromUintRGB(e);return this.color.set(t[0],t[1],t[2]),this},setIntensity:function(e){return this.intensity=e,this},setRadius:function(e){return this.radius=e,this}});Tg.RENDER_MASK=15;r6.exports=Tg});var Nl=l((Vje,s6)=>{var pMe=function(e,t){var i=t.width/2,r=t.height/2,s=Math.abs(e.x-t.x-i),n=Math.abs(e.y-t.y-r),a=i+e.radius,h=r+e.radius;if(s>a||n>h)return!1;if(s<=i||n<=r)return!0;var o=s-i,u=n-r,f=o*o,d=u*u,v=e.radius*e.radius;return f+d<=v};s6.exports=pMe});var Sg=l((Wje,a6)=>{var mMe=Nl(),gMe=C(),xMe=Wr(),yMe=Eg(),TMe=Lh(),EMe=Ru(),SMe=Zs(),_Me=vs(),n6=Te(),wMe=new gMe({initialize:function(){this.lights=[],this.ambientColor=new EMe(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(e,t,i,r,s,n){return this.systems.displayList.add(new TMe(this.scene,e,t,i,r,s,n))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(e){for(var t=this.lights,i=e.worldView,r=[],s=0;s<t.length;s++){var n=t[s];n.willRender(e)&&mMe(n,i)&&r.push({light:n,distance:xMe(n.x,n.y,i.centerX,i.centerY)})}return r.length>this.maxLights&&(_Me(r,this.sortByDistance),r=r.slice(0,this.maxLights)),this.visibleLights=r.length,r},sortByDistance:function(e,t){return e.distance>=t.distance},setAmbientColor:function(e){var t=n6.getFloatsFromUintRGB(e);return this.ambientColor.set(t[0],t[1],t[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(e,t,i,r,s){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=128),r===void 0&&(r=16777215),s===void 0&&(s=1);var n=n6.getFloatsFromUintRGB(r),a=new yMe(e,t,i,n[0],n[1],n[2],s);return this.lights.push(a),a},removeLight:function(e){var t=this.lights.indexOf(e);return t>=0&&SMe(this.lights,t),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});a6.exports=wMe});var l6=l((Hje,u6)=>{var CMe=C(),h6=Sg(),RMe=ct(),_g=Ge(),o6=new CMe({Extends:h6,initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(_g.BOOT,this.boot,this),h6.call(this)},boot:function(){var e=this.systems.events;e.on(_g.SHUTDOWN,this.shutdown,this),e.on(_g.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});RMe.register("LightsPlugin",o6,"lights");u6.exports=o6});var d6=l((Kje,f6)=>{var hi={Events:Vr(),DisplayList:mz(),GameObjectCreator:Pe(),GameObjectFactory:ie(),UpdateList:Az(),Components:ye(),GetCalcMatrix:Me(),BuildGameObject:gt(),BuildGameObjectAnimation:hm(),GameObject:Fe(),BitmapText:wh(),Blitter:il(),Bob:lm(),Container:rl(),DOMElement:cm(),DynamicBitmapText:sl(),Extern:pm(),Graphics:ol(),Group:fl(),Image:dl(),Layer:cl(),Particles:_X(),PathFollower:Lm(),RenderTexture:El(),RetroFont:XX(),Rope:Sl(),Sprite:aa(),Text:wl(),GetTextSize:Fm(),MeasureText:Dm(),TextStyle:Im(),TileSprite:ql(),Zone:Va(),Video:bl(),Shape:ai(),Arc:Nm(),Curve:Gm(),Ellipse:Bm(),Grid:km(),IsoBox:Xm(),IsoTriangle:Hm(),Line:Km(),Polygon:jm(),Rectangle:eg(),Star:tg(),Triangle:hg(),Factories:{Blitter:l4(),Container:f4(),DOMElement:d4(),DynamicBitmapText:v4(),Extern:c4(),Graphics:p4(),Group:m4(),Image:g4(),Layer:x4(),Particles:y4(),PathFollower:T4(),RenderTexture:E4(),Rope:S4(),Sprite:_4(),StaticBitmapText:w4(),Text:C4(),TileSprite:R4(),Zone:q4(),Video:A4(),Arc:M4(),Curve:L4(),Ellipse:O4(),Grid:F4(),IsoBox:D4(),IsoTriangle:I4(),Line:N4(),Polygon:G4(),Rectangle:B4(),Star:U4(),Triangle:k4()},Creators:{Blitter:Y4(),Container:X4(),DynamicBitmapText:V4(),Graphics:W4(),Group:H4(),Image:Z4(),Layer:J4(),Particles:j4(),RenderTexture:eH(),Rope:tH(),Sprite:rH(),StaticBitmapText:aH(),Text:hH(),TileSprite:oH(),Zone:uH(),Video:lH()}};hi.Shader=Ol(),hi.Mesh=Dl(),hi.PointLight=Lh(),hi.Factories.Shader=KH(),hi.Factories.Mesh=ZH(),hi.Factories.PointLight=JH(),hi.Creators.Shader=QH(),hi.Creators.Mesh=jH(),hi.Creators.PointLight=e6(),hi.Light=Eg(),hi.LightsManager=Sg(),hi.LightsPlugin=l6();f6.exports=hi});var c6=l((Zje,v6)=>{var qMe=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};v6.exports=qMe});var m6=l((Jje,p6)=>{var AMe=zr(),bMe=function(e){return new AMe(e.x,e.y,e.radius)};p6.exports=bMe});var x6=l((Qje,g6)=>{var PMe=kr(),MMe=function(e,t){return PMe(e,t.x,t.y)};g6.exports=MMe});var T6=l(($je,y6)=>{var Gl=kr(),LMe=function(e,t){return Gl(e,t.x,t.y)&&Gl(e,t.right,t.y)&&Gl(e,t.x,t.bottom)&&Gl(e,t.right,t.bottom)};y6.exports=LMe});var S6=l((jje,E6)=>{var OMe=function(e,t){return t.setTo(e.x,e.y,e.radius)};E6.exports=OMe});var w6=l((eet,_6)=>{var FMe=function(e,t){return e.x===t.x&&e.y===t.y&&e.radius===t.radius};_6.exports=FMe});var R6=l((tet,C6)=>{var DMe=Ae(),IMe=function(e,t){return t===void 0&&(t=new DMe),t.x=e.left,t.y=e.top,t.width=e.diameter,t.height=e.diameter,t};C6.exports=IMe});var A6=l((iet,q6)=>{var NMe=function(e,t,i){return e.x+=t,e.y+=i,e};q6.exports=NMe});var P6=l((ret,b6)=>{var GMe=function(e,t){return e.x+=t.x,e.y+=t.y,e};b6.exports=GMe});var L6=l((set,M6)=>{var Rt=zr();Rt.Area=c6();Rt.Circumference=Id();Rt.CircumferencePoint=Eo();Rt.Clone=m6();Rt.Contains=kr();Rt.ContainsPoint=x6();Rt.ContainsRect=T6();Rt.CopyFrom=S6();Rt.Equals=w6();Rt.GetBounds=R6();Rt.GetPoint=Dd();Rt.GetPoints=Nd();Rt.Offset=A6();Rt.OffsetPoint=P6();Rt.Random=So();M6.exports=Rt});var F6=l((net,O6)=>{var BMe=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};O6.exports=BMe});var I6=l((aet,D6)=>{var UMe=na(),kMe=function(e){return new UMe(e.x,e.y,e.width,e.height)};D6.exports=kMe});var G6=l((het,N6)=>{var zMe=sa(),YMe=function(e,t){return zMe(e,t.x,t.y)};N6.exports=YMe});var U6=l((oet,B6)=>{var Bl=sa(),XMe=function(e,t){return Bl(e,t.x,t.y)&&Bl(e,t.right,t.y)&&Bl(e,t.x,t.bottom)&&Bl(e,t.right,t.bottom)};B6.exports=XMe});var z6=l((uet,k6)=>{var VMe=function(e,t){return t.setTo(e.x,e.y,e.width,e.height)};k6.exports=VMe});var X6=l((fet,Y6)=>{var WMe=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};Y6.exports=WMe});var W6=l((det,V6)=>{var HMe=Ae(),KMe=function(e,t){return t===void 0&&(t=new HMe),t.x=e.left,t.y=e.top,t.width=e.width,t.height=e.height,t};V6.exports=KMe});var K6=l((vet,H6)=>{var ZMe=function(e,t,i){return e.x+=t,e.y+=i,e};H6.exports=ZMe});var J6=l((cet,Z6)=>{var JMe=function(e,t){return e.x+=t.x,e.y+=t.y,e};Z6.exports=JMe});var $6=l((pet,Q6)=>{var qt=na();qt.Area=F6();qt.Circumference=gm();qt.CircumferencePoint=al();qt.Clone=I6();qt.Contains=sa();qt.ContainsPoint=G6();qt.ContainsRect=U6();qt.CopyFrom=z6();qt.Equals=X6();qt.GetBounds=W6();qt.GetPoint=mm();qt.GetPoints=xm();qt.Offset=K6();qt.OffsetPoint=J6();qt.Random=Io();Q6.exports=qt});var wg=l((met,j6)=>{var QMe=Wr(),$Me=function(e,t){return QMe(e.x,e.y,t.x,t.y)<=e.radius+t.radius};j6.exports=$Me});var t9=l((get,e9)=>{var ga=$(),jMe=wg(),eLe=function(e,t,i){if(i===void 0&&(i=[]),jMe(e,t)){var r=e.x,s=e.y,n=e.radius,a=t.x,h=t.y,o=t.radius,u,f,d,v,c;if(s===h)c=(o*o-n*n-a*a+r*r)/(2*(r-a)),u=1,f=-2*h,d=a*a+c*c-2*a*c+h*h-o*o,v=f*f-4*u*d,v===0?i.push(new ga(c,-f/(2*u))):v>0&&(i.push(new ga(c,(-f+Math.sqrt(v))/(2*u))),i.push(new ga(c,(-f-Math.sqrt(v))/(2*u))));else{var p=(r-a)/(s-h),m=(o*o-n*n-a*a+r*r-h*h+s*s)/(2*(s-h));u=p*p+1,f=2*s*p-2*m*p-2*r,d=r*r+s*s+m*m-n*n-2*s*m,v=f*f-4*u*d,v===0?(c=-f/(2*u),i.push(new ga(c,m-c*p))):v>0&&(c=(-f+Math.sqrt(v))/(2*u),i.push(new ga(c,m-c*p)),c=(-f-Math.sqrt(v))/(2*u),i.push(new ga(c,m-c*p)))}}return i};e9.exports=eLe});var Ul=l((xet,i9)=>{var Cg=kr(),tLe=$(),iLe=new tLe,rLe=function(e,t,i){if(i===void 0&&(i=iLe),Cg(t,e.x1,e.y1))return i.x=e.x1,i.y=e.y1,!0;if(Cg(t,e.x2,e.y2))return i.x=e.x2,i.y=e.y2,!0;var r=e.x2-e.x1,s=e.y2-e.y1,n=t.x-e.x1,a=t.y-e.y1,h=r*r+s*s,o=r,u=s;if(h>0){var f=(n*r+a*s)/h;o*=f,u*=f}i.x=e.x1+o,i.y=e.y1+u;var d=o*o+u*u;return d<=h&&o*r+u*s>=0&&Cg(t,i.x,i.y)};i9.exports=rLe});var kl=l((yet,r9)=>{var Rg=$(),sLe=Ul(),nLe=function(e,t,i){if(i===void 0&&(i=[]),sLe(e,t)){var r=e.x1,s=e.y1,n=e.x2,a=e.y2,h=t.x,o=t.y,u=t.radius,f=n-r,d=a-s,v=r-h,c=s-o,p=f*f+d*d,m=2*(f*v+d*c),x=v*v+c*c-u*u,g=m*m-4*p*x,y,T;if(g===0){var S=-m/(2*p);y=r+S*f,T=s+S*d,S>=0&&S<=1&&i.push(new Rg(y,T))}else if(g>0){var E=(-m-Math.sqrt(g))/(2*p);y=r+E*f,T=s+E*d,E>=0&&E<=1&&i.push(new Rg(y,T));var _=(-m+Math.sqrt(g))/(2*p);y=r+_*f,T=s+_*d,_>=0&&_<=1&&i.push(new Rg(y,T))}}return i};r9.exports=nLe});var n9=l((Tet,s9)=>{var zl=kl(),aLe=Nl(),hLe=function(e,t,i){if(i===void 0&&(i=[]),aLe(e,t)){var r=t.getLineA(),s=t.getLineB(),n=t.getLineC(),a=t.getLineD();zl(r,e,i),zl(s,e,i),zl(n,e,i),zl(a,e,i)}return i};s9.exports=hLe});var qg=l((Eet,a9)=>{var oLe=mi(),uLe=function(e,t,i){var r=e.x1,s=e.y1,n=e.x2,a=e.y2,h=t.x1,o=t.y1,u=t.x2,f=t.y2,d=n-r,v=a-s,c=u-h,p=f-o,m=p*d-c*v;if(d===0||m===0)return!1;var x=(d*(o-s)+v*(r-h))/(c*v-p*d),g=(h+c*x-r)/d;return g<0||x<0||x>1?null:(i===void 0&&(i=new oLe),i.set(r+d*g,s+v*g,g))};a9.exports=uLe});var Ag=l((Set,u9)=>{var o9=mi(),lLe=qg(),fLe=bi(),h9=new fLe,Yl=new o9,dLe=function(e,t,i){i===void 0&&(i=new o9);var r=!1;i.set(),Yl.set();for(var s=t[0],n=1;n<t.length;n++){var a=t[n];h9.setTo(s.x,s.y,a.x,a.y),s=a,lLe(e,h9,Yl)&&(!r||Yl.z<i.z)&&(i.copy(Yl),r=!0)}return r?i:null};u9.exports=dLe});var bg=l((_et,l9)=>{var vLe=mi(),cLe=nh(),pLe=Ag(),xa=new vLe,mLe=function(e,t,i){i===void 0&&(i=new cLe),Array.isArray(t)||(t=[t]);var r=!1;i.set(),xa.set();for(var s=0;s<t.length;s++)pLe(e,t[s].points,xa)&&(!r||xa.z<i.z)&&(i.set(xa.x,xa.y,xa.z,s),r=!0);return r?i:null};l9.exports=mLe});var fn=l((wet,f9)=>{var gLe=$(),xLe=function(e,t,i){i===void 0&&(i=new gLe);var r=e.x1,s=e.y1,n=e.x2,a=e.y2,h=t.x1,o=t.y1,u=t.x2,f=t.y2,d=(u-h)*(s-o)-(f-o)*(r-h),v=(n-r)*(s-o)-(a-s)*(r-h),c=(f-o)*(n-r)-(u-h)*(a-s);if(c===0)return!1;var p=d/c,m=v/c;return p>=0&&p<=1&&m>=0&&m<=1?(i.x=r+p*(n-r),i.y=s+p*(a-s),!0):!1};f9.exports=xLe});var Pg=l((Cet,d9)=>{var yLe=function(e,t){var i=e.x1,r=e.y1,s=e.x2,n=e.y2,a=t.x,h=t.y,o=t.right,u=t.bottom,f=0;if(i>=a&&i<=o&&r>=h&&r<=u||s>=a&&s<=o&&n>=h&&n<=u)return!0;if(i<a&&s>=a){if(f=r+(n-r)*(a-i)/(s-i),f>h&&f<=u)return!0}else if(i>o&&s<=o&&(f=r+(n-r)*(o-i)/(s-i),f>=h&&f<=u))return!0;if(r<h&&n>=h){if(f=i+(s-i)*(h-r)/(n-r),f>=a&&f<=o)return!0}else if(r>u&&n<=u&&(f=i+(s-i)*(u-r)/(n-r),f>=a&&f<=o))return!0;return!1};d9.exports=yLe});var Wl=l((Ret,v9)=>{var Xl=$(),Vl=fn(),TLe=Pg(),ELe=function(e,t,i){if(i===void 0&&(i=[]),TLe(e,t))for(var r=t.getLineA(),s=t.getLineB(),n=t.getLineC(),a=t.getLineD(),h=[new Xl,new Xl,new Xl,new Xl],o=[Vl(r,e,h[0]),Vl(s,e,h[1]),Vl(n,e,h[2]),Vl(a,e,h[3])],u=0;u<4;u++)o[u]&&i.push(h[u]);return i};v9.exports=ELe});var m9=l((qet,p9)=>{var SLe=nh(),_Le=bg(),wLe=bi(),c9=new wLe;function Mg(e,t,i,r,s){var n=Math.cos(e),a=Math.sin(e);c9.setTo(t,i,t+n,i+a);var h=_Le(c9,r);h&&s.push(new SLe(h.x,h.y,e,h.w))}function CLe(e,t){return e.z-t.z}var RLe=function(e,t,i){Array.isArray(i)||(i=[i]);for(var r=[],s=[],n=0;n<i.length;n++)for(var a=i[n].points,h=0;h<a.length;h++){var o=Math.atan2(a[h].y-t,a[h].x-e);s.indexOf(o)===-1&&(Mg(o,e,t,i,r),Mg(o-1e-5,e,t,i,r),Mg(o+1e-5,e,t,i,r),s.push(o))}return r.sort(CLe)};p9.exports=RLe});var Fh=l((Aet,g9)=>{var qLe=function(e,t){return e.width<=0||e.height<=0||t.width<=0||t.height<=0?!1:!(e.right<t.x||e.bottom<t.y||e.x>t.right||e.y>t.bottom)};g9.exports=qLe});var y9=l((bet,x9)=>{var ALe=Ae(),bLe=Fh(),PLe=function(e,t,i){return i===void 0&&(i=new ALe),bLe(e,t)&&(i.x=Math.max(e.x,t.x),i.y=Math.max(e.y,t.y),i.width=Math.min(e.right,t.right)-i.x,i.height=Math.min(e.bottom,t.bottom)-i.y),i};x9.exports=PLe});var E9=l((Pet,T9)=>{var Hl=Wl(),MLe=Fh(),LLe=function(e,t,i){if(i===void 0&&(i=[]),MLe(e,t)){var r=e.getLineA(),s=e.getLineB(),n=e.getLineC(),a=e.getLineD();Hl(r,t,i),Hl(s,t,i),Hl(n,t,i),Hl(a,t,i)}return i};T9.exports=LLe});var Kl=l((Met,S9)=>{var OLe=function(e,t,i,r){i===void 0&&(i=!1),r===void 0&&(r=[]);for(var s=e.x3-e.x1,n=e.y3-e.y1,a=e.x2-e.x1,h=e.y2-e.y1,o=s*s+n*n,u=s*a+n*h,f=a*a+h*h,d=o*f-u*u,v=d===0?0:1/d,c,p,m,x,g,y,T=e.x1,S=e.y1,E=0;E<t.length&&(m=t[E].x-T,x=t[E].y-S,g=s*m+n*x,y=a*m+h*x,c=(f*g-u*y)*v,p=(o*y-u*g)*v,!(c>=0&&p>=0&&c+p<1&&(r.push({x:t[E].x,y:t[E].y}),i)));E++);return r};S9.exports=OLe});var Lg=l((Let,_9)=>{var FLe=function(e,t){return t===void 0&&(t=[]),t.push({x:e.x,y:e.y}),t.push({x:e.right,y:e.y}),t.push({x:e.right,y:e.bottom}),t.push({x:e.x,y:e.bottom}),t};_9.exports=FLe});var Og=l((Oet,w9)=>{var Ti=fn(),ya=Yr(),DLe=Kl(),ILe=Lg(),NLe=function(e,t){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)return!1;var i=t.getLineA(),r=t.getLineB(),s=t.getLineC();if(ya(e,i.x1,i.y1)||ya(e,i.x2,i.y2)||ya(e,r.x1,r.y1)||ya(e,r.x2,r.y2)||ya(e,s.x1,s.y1)||ya(e,s.x2,s.y2))return!0;var n=e.getLineA(),a=e.getLineB(),h=e.getLineC(),o=e.getLineD();if(Ti(i,n)||Ti(i,a)||Ti(i,h)||Ti(i,o)||Ti(r,n)||Ti(r,a)||Ti(r,h)||Ti(r,o)||Ti(s,n)||Ti(s,a)||Ti(s,h)||Ti(s,o))return!0;var u=ILe(e),f=DLe(t,u,!0);return f.length>0};w9.exports=NLe});var R9=l((Fet,C9)=>{var GLe=Og(),Fg=Wl(),BLe=function(e,t,i){if(i===void 0&&(i=[]),GLe(e,t)){var r=t.getLineA(),s=t.getLineB(),n=t.getLineC();Fg(r,e,i),Fg(s,e,i),Fg(n,e,i)}return i};C9.exports=BLe});var Ig=l((Det,q9)=>{var Dg=Ul(),ULe=fa(),kLe=function(e,t){return e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top?!1:!!(ULe(e,t.x,t.y)||Dg(e.getLineA(),t)||Dg(e.getLineB(),t)||Dg(e.getLineC(),t))};q9.exports=kLe});var b9=l((Iet,A9)=>{var Ng=kl(),zLe=Ig(),YLe=function(e,t,i){if(i===void 0&&(i=[]),zLe(e,t)){var r=e.getLineA(),s=e.getLineB(),n=e.getLineC();Ng(r,t,i),Ng(s,t,i),Ng(n,t,i)}return i};A9.exports=YLe});var Bg=l((Net,P9)=>{var Gg=fn(),XLe=function(e,t){return!!(e.contains(t.x1,t.y1)||e.contains(t.x2,t.y2)||Gg(e.getLineA(),t)||Gg(e.getLineB(),t)||Gg(e.getLineC(),t))};P9.exports=XLe});var zg=l((Get,M9)=>{var Ug=$(),VLe=Bg(),kg=fn(),WLe=function(e,t,i){if(i===void 0&&(i=[]),VLe(e,t))for(var r=e.getLineA(),s=e.getLineB(),n=e.getLineC(),a=[new Ug,new Ug,new Ug],h=[kg(r,t,a[0]),kg(s,t,a[1]),kg(n,t,a[2])],o=0;o<3;o++)h[o]&&i.push(a[o]);return i};M9.exports=WLe});var Yg=l((Bet,L9)=>{var HLe=function(e,t){return t===void 0&&(t=[]),t.push({x:e.x1,y:e.y1}),t.push({x:e.x2,y:e.y2}),t.push({x:e.x3,y:e.y3}),t};L9.exports=HLe});var Xg=l((Uet,D9)=>{var O9=Kl(),F9=Yg(),Or=fn(),KLe=function(e,t){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return!1;var i=e.getLineA(),r=e.getLineB(),s=e.getLineC(),n=t.getLineA(),a=t.getLineB(),h=t.getLineC();if(Or(i,n)||Or(i,a)||Or(i,h)||Or(r,n)||Or(r,a)||Or(r,h)||Or(s,n)||Or(s,a)||Or(s,h))return!0;var o=F9(e),u=O9(t,o,!0);return u.length>0||(o=F9(t),u=O9(e,o,!0),u.length>0)};D9.exports=KLe});var N9=l((ket,I9)=>{var ZLe=Xg(),Vg=zg(),JLe=function(e,t,i){if(i===void 0&&(i=[]),ZLe(e,t)){var r=t.getLineA(),s=t.getLineB(),n=t.getLineC();Vg(e,r,i),Vg(e,s,i),Vg(e,n,i)}return i};I9.exports=JLe});var Wg=l((zet,G9)=>{var QLe=function(e,t,i){i===void 0&&(i=1);var r=t.x1,s=t.y1,n=t.x2,a=t.y2,h=e.x,o=e.y,u=(n-r)*(n-r)+(a-s)*(a-s);if(u===0)return!1;var f=((h-r)*(n-r)+(o-s)*(a-s))/u;if(f<0)return Math.sqrt((r-h)*(r-h)+(s-o)*(s-o))<=i;if(f>=0&&f<=1){var d=((s-o)*(n-r)-(r-h)*(a-s))/u;return Math.abs(d)*Math.sqrt(u)<=i}else return Math.sqrt((n-h)*(n-h)+(a-o)*(a-o))<=i};G9.exports=QLe});var U9=l((Yet,B9)=>{var $Le=Wg(),jLe=function(e,t){if(!$Le(e,t))return!1;var i=Math.min(t.x1,t.x2),r=Math.max(t.x1,t.x2),s=Math.min(t.y1,t.y2),n=Math.max(t.y1,t.y2);return e.x>=i&&e.x<=r&&e.y>=s&&e.y<=n};B9.exports=jLe});var z9=l((Xet,k9)=>{var eOe=function(e,t,i,r,s,n){return n===void 0&&(n=0),!(t>e.right+n||i<e.left-n||r>e.bottom+n||s<e.top-n)};k9.exports=eOe});var X9=l((Vet,Y9)=>{Y9.exports={CircleToCircle:wg(),CircleToRectangle:Nl(),GetCircleToCircle:t9(),GetCircleToRectangle:n9(),GetLineToCircle:kl(),GetLineToLine:qg(),GetLineToPoints:Ag(),GetLineToPolygon:bg(),GetLineToRectangle:Wl(),GetRaysFromPointToPolygon:m9(),GetRectangleIntersection:y9(),GetRectangleToRectangle:E9(),GetRectangleToTriangle:R9(),GetTriangleToCircle:b9(),GetTriangleToLine:zg(),GetTriangleToTriangle:N9(),LineToCircle:Ul(),LineToLine:fn(),LineToRectangle:Pg(),PointToLine:Wg(),PointToLineSegment:U9(),RectangleToRectangle:Fh(),RectangleToTriangle:Og(),RectangleToValues:z9(),TriangleToCircle:Ig(),TriangleToLine:Bg(),TriangleToTriangle:Xg()}});var dn=l((Wet,V9)=>{var tOe=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};V9.exports=tOe});var H9=l((Het,W9)=>{var iOe=function(e,t,i){var r=t-(e.x1+e.x2)/2,s=i-(e.y1+e.y2)/2;return e.x1+=r,e.y1+=s,e.x2+=r,e.y2+=s,e};W9.exports=iOe});var Z9=l((Ket,K9)=>{var rOe=bi(),sOe=function(e){return new rOe(e.x1,e.y1,e.x2,e.y2)};K9.exports=sOe});var Q9=l((Zet,J9)=>{var nOe=function(e,t){return t.setTo(e.x1,e.y1,e.x2,e.y2)};J9.exports=nOe});var j9=l((Jet,$9)=>{var aOe=function(e,t){return e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2};$9.exports=aOe});var t8=l((Qet,e8)=>{var hOe=gr(),oOe=function(e,t,i){i===void 0&&(i=t);var r=hOe(e),s=e.x2-e.x1,n=e.y2-e.y1;return t&&(e.x1=e.x1-s/r*t,e.y1=e.y1-n/r*t),i&&(e.x2=e.x2+s/r*i,e.y2=e.y2+n/r*i),e};e8.exports=oOe});var n8=l(($et,s8)=>{var i8=Zv(),uOe=gs(),r8=$(),lOe=function(e,t,i,r,s){r===void 0&&(r=0),s===void 0&&(s=[]);var n=[],a=e.x1,h=e.y1,o=e.x2-a,u=e.y2-h,f=uOe(t,s),d,v,c=i-1;for(d=0;d<c;d++)v=f(d/c),n.push(new r8(a+o*v,h+u*v));if(v=f(1),n.push(new r8(a+o*v,h+u*v)),r>0){var p=n[0],m=[p];for(d=1;d<n.length-1;d++){var x=n[d];i8(p,x)>=r&&(m.push(x),p=x)}var g=n[n.length-1];return i8(p,g)<r&&m.pop(),m.push(g),m}else return n};s8.exports=lOe});var h8=l((jet,a8)=>{var fOe=$(),dOe=function(e,t){return t===void 0&&(t=new fOe),t.x=(e.x1+e.x2)/2,t.y=(e.y1+e.y2)/2,t};a8.exports=dOe});var u8=l((ett,o8)=>{var vOe=$(),cOe=function(e,t,i){i===void 0&&(i=new vOe);var r=e.x1,s=e.y1,n=e.x2,a=e.y2,h=(n-r)*(n-r)+(a-s)*(a-s);if(h===0)return i;var o=((t.x-r)*(n-r)+(t.y-s)*(a-s))/h;return i.x=r+o*(n-r),i.y=s+o*(a-s),i};o8.exports=cOe});var f8=l((ttt,l8)=>{var pOe=Oe(),mOe=dn(),gOe=$(),xOe=function(e,t){t===void 0&&(t=new gOe);var i=mOe(e)-pOe.TAU;return t.x=Math.cos(i),t.y=Math.sin(i),t};l8.exports=xOe});var v8=l((itt,d8)=>{var yOe=function(e,t){var i=e.x1,r=e.y1,s=e.x2,n=e.y2,a=(s-i)*(s-i)+(n-r)*(n-r);if(a===0)return!1;var h=((r-t.y)*(s-i)-(i-t.x)*(n-r))/a;return Math.abs(h)*Math.sqrt(a)};d8.exports=yOe});var p8=l((rtt,c8)=>{var TOe=function(e){return Math.abs(e.y1-e.y2)};c8.exports=TOe});var Hg=l((stt,m8)=>{var EOe=Oe(),SOe=Xr(),_Oe=dn(),wOe=function(e){var t=_Oe(e)-EOe.TAU;return SOe(t,-Math.PI,Math.PI)};m8.exports=wOe});var x8=l((ntt,g8)=>{var COe=Oe(),ROe=dn(),qOe=function(e){return Math.cos(ROe(e)-COe.TAU)};g8.exports=qOe});var T8=l((att,y8)=>{var AOe=Oe(),bOe=dn(),POe=function(e){return Math.sin(bOe(e)-AOe.TAU)};y8.exports=POe});var S8=l((htt,E8)=>{var MOe=function(e,t,i){return e.x1+=t,e.y1+=i,e.x2+=t,e.y2+=i,e};E8.exports=MOe});var w8=l((ott,_8)=>{var LOe=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};_8.exports=LOe});var R8=l((utt,C8)=>{var OOe=dn(),FOe=Hg(),DOe=function(e,t){return 2*FOe(t)-Math.PI-OOe(e)};C8.exports=DOe});var Zl=l((ltt,q8)=>{var IOe=function(e,t,i,r){var s=Math.cos(r),n=Math.sin(r),a=e.x1-t,h=e.y1-i;return e.x1=a*s-h*n+t,e.y1=a*n+h*s+i,a=e.x2-t,h=e.y2-i,e.x2=a*s-h*n+t,e.y2=a*n+h*s+i,e};q8.exports=IOe});var b8=l((ftt,A8)=>{var NOe=Zl(),GOe=function(e,t){var i=(e.x1+e.x2)/2,r=(e.y1+e.y2)/2;return NOe(e,i,r,t)};A8.exports=GOe});var M8=l((dtt,P8)=>{var BOe=Zl(),UOe=function(e,t,i){return BOe(e,t.x,t.y,i)};P8.exports=UOe});var O8=l((vtt,L8)=>{var kOe=function(e,t,i,r,s){return e.x1=t,e.y1=i,e.x2=t+Math.cos(r)*s,e.y2=i+Math.sin(r)*s,e};L8.exports=kOe});var D8=l((ctt,F8)=>{var zOe=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};F8.exports=zOe});var N8=l((ptt,I8)=>{var YOe=function(e){return Math.abs(e.x1-e.x2)};I8.exports=YOe});var B8=l((mtt,G8)=>{var de=bi();de.Angle=dn();de.BresenhamPoints=nv();de.CenterOn=H9();de.Clone=Z9();de.CopyFrom=Q9();de.Equals=j9();de.Extend=t8();de.GetEasedPoints=n8();de.GetMidPoint=h8();de.GetNearestPoint=u8();de.GetNormal=f8();de.GetPoint=zd();de.GetPoints=wo();de.GetShortestDistance=v8();de.Height=p8();de.Length=gr();de.NormalAngle=Hg();de.NormalX=x8();de.NormalY=T8();de.Offset=S8();de.PerpSlope=w8();de.Random=Co();de.ReflectAngle=R8();de.Rotate=b8();de.RotateAroundPoint=M8();de.RotateAroundXY=Zl();de.SetToAngle=O8();de.Slope=D8();de.Width=N8();G8.exports=de});var V8=l((gtt,X8)=>{var U8=ca(),Ke=z(),XOe=Er(),Y8=mi(),Ta=pa(),k8=new Y8,z8=new Y8,vn=new XOe,VOe=function(e){var t=Ke(e,"mesh"),i=Ke(e,"texture",null),r=Ke(e,"frame"),s=Ke(e,"width",1),n=Ke(e,"height",s),a=Ke(e,"widthSegments",1),h=Ke(e,"heightSegments",a),o=Ke(e,"x",0),u=Ke(e,"y",0),f=Ke(e,"z",0),d=Ke(e,"rotateX",0),v=Ke(e,"rotateY",0),c=Ke(e,"rotateZ",0),p=Ke(e,"zIsUp",!0),m=Ke(e,"isOrtho",t?t.dirtyCache[11]:!1),x=Ke(e,"colors",[16777215]),g=Ke(e,"alphas",[1]),y=Ke(e,"tile",!1),T=Ke(e,"flipY",!1),S=Ke(e,"width",null),E={faces:[],verts:[]};if(k8.set(o,u,f),z8.set(d,v,c),vn.fromRotationXYTranslation(z8,k8,p),!i&&t)i=t.texture;else if(t&&typeof i=="string")i=t.scene.sys.textures.get(i);else return E;var _=i.get(r);!S&&m&&i&&t&&(s=_.width/t.height,n=_.height/t.height);var w=s/2,R=n/2,q=Math.floor(a),A=Math.floor(h),b=q+1,L=A+1,M=s/q,G=n/A,P=[],D=[],I,F,O=0,K=1,H=0,Y=1;_&&(O=_.u0,K=_.u1,T?(H=_.v1,Y=_.v0):(H=_.v0,Y=_.v1));var ee=K-O,U=Y-H;for(F=0;F<L;F++){var J=F*G-R;for(I=0;I<b;I++){var nt=I*M-w;D.push(nt,-J);var ve=O+ee*(I/q),yt=H+U*(F/A);P.push(ve,yt)}}Array.isArray(x)||(x=[x]),Array.isArray(g)||(g=[g]);var _e=0,at=0;for(F=0;F<A;F++)for(I=0;I<q;I++){var Je=(I+b*F)*2,te=(I+b*(F+1))*2,ke=(I+1+b*(F+1))*2,qe=(I+1+b*F)*2,Mt=x[at],lt=g[_e],oe=new Ta(D[Je],D[Je+1],0,P[Je],P[Je+1],Mt,lt).transformMat4(vn),ze=new Ta(D[te],D[te+1],0,P[te],P[te+1],Mt,lt).transformMat4(vn),ft=new Ta(D[qe],D[qe+1],0,P[qe],P[qe+1],Mt,lt).transformMat4(vn),X=new Ta(D[te],D[te+1],0,P[te],P[te+1],Mt,lt).transformMat4(vn),V=new Ta(D[ke],D[ke+1],0,P[ke],P[ke+1],Mt,lt).transformMat4(vn),Z=new Ta(D[qe],D[qe+1],0,P[qe],P[qe+1],Mt,lt).transformMat4(vn);y&&(oe.setUVs(O,Y),ze.setUVs(O,H),ft.setUVs(K,Y),X.setUVs(O,H),V.setUVs(K,H),Z.setUVs(K,Y)),at++,at===x.length&&(at=0),_e++,_e===g.length&&(_e=0),E.verts.push(oe,ze,ft,X,V,Z),E.faces.push(new U8(oe,ze,ft),new U8(X,V,Z))}return t&&(t.faces=t.faces.concat(E.faces),t.vertices=t.vertices.concat(E.verts)),E};X8.exports=VOe});var Zg=l((xtt,K8)=>{var W8=!0,H8="untitled",Ih="",Kg="";function WOe(e){var t=e.indexOf("#");return t>-1?e.substring(0,t):e}function Dh(e){return e.models.length===0&&e.models.push({faces:[],name:H8,textureCoords:[],vertexNormals:[],vertices:[]}),Ih="",e.models[e.models.length-1]}function HOe(e,t){var i=e.length>=2?e[1]:H8;t.models.push({faces:[],name:i,textureCoords:[],vertexNormals:[],vertices:[]}),Ih=""}function KOe(e){e.length===2&&(Ih=e[1])}function ZOe(e,t){var i=e.length,r=i>=2?parseFloat(e[1]):0,s=i>=3?parseFloat(e[2]):0,n=i>=4?parseFloat(e[3]):0;Dh(t).vertices.push({x:r,y:s,z:n})}function JOe(e,t){var i=e.length,r=i>=2?parseFloat(e[1]):0,s=i>=3?parseFloat(e[2]):0,n=i>=4?parseFloat(e[3]):0;isNaN(r)&&(r=0),isNaN(s)&&(s=0),isNaN(n)&&(n=0),W8&&(s=1-s),Dh(t).textureCoords.push({u:r,v:s,w:n})}function QOe(e,t){var i=e.length,r=i>=2?parseFloat(e[1]):0,s=i>=3?parseFloat(e[2]):0,n=i>=4?parseFloat(e[3]):0;Dh(t).vertexNormals.push({x:r,y:s,z:n})}function $Oe(e,t){var i=e.length-1;if(!(i<3)){for(var r={group:Ih,material:Kg,vertices:[]},s=0;s<i;s++){var n=e[s+1],a=n.split("/"),h=a.length;if(!(h<1||h>3)){var o=0,u=0,f=0;o=parseInt(a[0],10),h>1&&a[1]!==""&&(u=parseInt(a[1],10)),h>2&&(f=parseInt(a[2],10)),o!==0&&(o<0&&(o=Dh(t).vertices.length+1+o),u-=1,o-=1,f-=1,r.vertices.push({textureCoordsIndex:u,vertexIndex:o,vertexNormalIndex:f}))}}Dh(t).faces.push(r)}}function jOe(e,t){e.length>=2&&t.materialLibraries.push(e[1])}function eFe(e){e.length>=2&&(Kg=e[1])}var tFe=function(e,t){t===void 0&&(t=!0),W8=t;var i={materials:{},materialLibraries:[],models:[]};Ih="",Kg="";for(var r=e.split(`
`),s=0;s<r.length;s++){var n=WOe(r[s]),a=n.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"o":HOe(a,i);break;case"g":KOe(a);break;case"v":ZOe(a,i);break;case"vt":JOe(a,i);break;case"vn":QOe(a,i);break;case"f":$Oe(a,i);break;case"mtllib":jOe(a,i);break;case"usemtl":eFe(a);break}}return i};K8.exports=tFe});var Jg=l((ytt,Z8)=>{var iFe=An(),rFe=function(e){for(var t={},i=e.split(`
`),r="",s=0;s<i.length;s++){var n=i[s].trim();if(!(n.indexOf("#")===0||n==="")){var a=n.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":{r=a[1];break}case"kd":{var h=Math.floor(a[1]*255),o=a.length>=2?Math.floor(a[2]*255):h,u=a.length>=3?Math.floor(a[3]*255):h;t[r]=iFe(h,o,u);break}}}}return t};Z8.exports=rFe});var Q8=l((Ttt,J8)=>{var sFe=function(e,t,i,r){var s,n;if(i===void 0&&r===void 0){var a=e.getInCenter();s=a.x,n=a.y}var h=Math.cos(t),o=Math.sin(t),u=e.vertex1,f=e.vertex2,d=e.vertex3,v=u.x-s,c=u.y-n;u.set(v*h-c*o+s,v*o+c*h+n),v=f.x-s,c=f.y-n,f.set(v*h-c*o+s,v*o+c*h+n),v=d.x-s,c=d.y-n,d.set(v*h-c*o+s,v*o+c*h+n)};J8.exports=sFe});var j8=l((Ett,$8)=>{var nFe={Face:ca(),GenerateGridVerts:V8(),GenerateObjVerts:xg(),GenerateVerts:mg(),ParseObj:Zg(),ParseObjMaterial:Jg(),RotateFace:Q8(),Vertex:pa()};$8.exports=nFe});var t7=l((Stt,e7)=>{var aFe=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};e7.exports=aFe});var r7=l((_tt,i7)=>{var hFe=$(),oFe=function(e){return new hFe(e.x,e.y)};i7.exports=oFe});var n7=l((wtt,s7)=>{var uFe=function(e,t){return t.setTo(e.x,e.y)};s7.exports=uFe});var h7=l((Ctt,a7)=>{var lFe=function(e,t){return e.x===t.x&&e.y===t.y};a7.exports=lFe});var u7=l((Rtt,o7)=>{var fFe=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};o7.exports=fFe});var f7=l((qtt,l7)=>{var dFe=$(),vFe=function(e,t){if(t===void 0&&(t=new dFe),!Array.isArray(e))throw new Error("GetCentroid points argument must be an array");var i=e.length;if(i<1)throw new Error("GetCentroid points array must not be empty");if(i===1)t.x=e[0].x,t.y=e[0].y;else{for(var r=0;r<i;r++)t.x+=e[r].x,t.y+=e[r].y;t.x/=i,t.y/=i}return t};l7.exports=vFe});var Qg=l((Att,d7)=>{var cFe=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};d7.exports=cFe});var $g=l((btt,v7)=>{var pFe=function(e){return e.x*e.x+e.y*e.y};v7.exports=pFe});var p7=l((Ptt,c7)=>{var mFe=Ae(),gFe=function(e,t){t===void 0&&(t=new mFe);for(var i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,a=0;a<e.length;a++){var h=e[a];h.x>i&&(i=h.x),h.x<r&&(r=h.x),h.y>s&&(s=h.y),h.y<n&&(n=h.y)}return t.x=r,t.y=n,t.width=i-r,t.height=s-n,t};c7.exports=gFe});var g7=l((Mtt,m7)=>{var xFe=$(),yFe=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=new xFe),r.x=e.x+(t.x-e.x)*i,r.y=e.y+(t.y-e.y)*i,r};m7.exports=yFe});var y7=l((Ltt,x7)=>{var TFe=function(e){return e.setTo(e.y,e.x)};x7.exports=TFe});var E7=l((Ott,T7)=>{var EFe=$(),SFe=function(e,t){return t===void 0&&(t=new EFe),t.setTo(-e.x,-e.y)};T7.exports=SFe});var _7=l((Ftt,S7)=>{var _Fe=$(),wFe=$g(),CFe=function(e,t,i){i===void 0&&(i=new _Fe);var r=e.x*t.x+e.y*t.y,s=r/wFe(t);return s!==0&&(i.x=s*t.x,i.y=s*t.y),i};S7.exports=CFe});var C7=l((Dtt,w7)=>{var RFe=$(),qFe=function(e,t,i){i===void 0&&(i=new RFe);var r=e.x*t.x+e.y*t.y;return r!==0&&(i.x=r*t.x,i.y=r*t.y),i};w7.exports=qFe});var q7=l((Itt,R7)=>{var AFe=Qg(),bFe=function(e,t){if(e.x!==0||e.y!==0){var i=AFe(e);e.x/=i,e.y/=i}return e.x*=t,e.y*=t,e};R7.exports=bFe});var b7=l((Ntt,A7)=>{var At=$();At.Ceil=t7();At.Clone=r7();At.CopyFrom=n7();At.Equals=h7();At.Floor=u7();At.GetCentroid=f7();At.GetMagnitude=Qg();At.GetMagnitudeSq=$g();At.GetRectangleFromPoints=p7();At.Interpolate=g7();At.Invert=y7();At.Negative=E7();At.Project=_7();At.ProjectUnit=C7();At.SetMagnitude=q7();A7.exports=At});var M7=l((Gtt,P7)=>{var PFe=Ml(),MFe=function(e){return new PFe(e.points)};P7.exports=MFe});var O7=l((Btt,L7)=>{var LFe=Pl(),OFe=function(e,t){return LFe(e,t.x,t.y)};L7.exports=OFe});var D7=l((Utt,F7)=>{var FFe=function(e,t){t===void 0&&(t=[]);for(var i=0;i<e.points.length;i++)t.push(e.points[i].x),t.push(e.points[i].y);return t};F7.exports=FFe});var N7=l((ktt,I7)=>{var DFe=function(e){return e.points.reverse(),e};I7.exports=DFe});var B7=l((ztt,G7)=>{function IFe(e,t){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r}function NFe(e,t,i){var r=t.x,s=t.y,n=i.x-r,a=i.y-s;if(n!==0||a!==0){var h=((e.x-r)*n+(e.y-s)*a)/(n*n+a*a);h>1?(r=i.x,s=i.y):h>0&&(r+=n*h,s+=a*h)}return n=e.x-r,a=e.y-s,n*n+a*a}function GFe(e,t){for(var i=e[0],r=[i],s,n=1,a=e.length;n<a;n++)s=e[n],IFe(s,i)>t&&(r.push(s),i=s);return i!==s&&r.push(s),r}function jg(e,t,i,r,s){for(var n=r,a,h=t+1;h<i;h++){var o=NFe(e[h],e[t],e[i]);o>n&&(a=h,n=o)}n>r&&(a-t>1&&jg(e,t,a,r,s),s.push(e[a]),i-a>1&&jg(e,a,i,r,s))}function BFe(e,t){var i=e.length-1,r=[e[0]];return jg(e,0,i,t,r),r.push(e[i]),r}var UFe=function(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);var r=e.points;if(r.length>2){var s=t*t;i||(r=GFe(r,s)),e.setTo(BFe(r,s))}return e};G7.exports=UFe});var k7=l((Ytt,U7)=>{var kFe=function(e,t,i){for(var r=e.points,s=0;s<r.length;s++)r[s].x+=t,r[s].y+=i;return e};U7.exports=kFe});var Y7=l((Xtt,z7)=>{var oi=Ml();oi.Clone=M7();oi.Contains=Pl();oi.ContainsPoint=O7();oi.Earcut=$i();oi.GetAABB=Zm();oi.GetNumberArray=D7();oi.GetPoints=Qm();oi.Perimeter=Jm();oi.Reverse=N7();oi.Simplify=B7();oi.Smooth=$m();oi.Translate=k7();z7.exports=oi});var V7=l((Vtt,X7)=>{var zFe=function(e){return e.width*e.height};X7.exports=zFe});var H7=l((Wtt,W7)=>{var YFe=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};W7.exports=YFe});var Z7=l((Htt,K7)=>{var XFe=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};K7.exports=XFe});var Q7=l((Ktt,J7)=>{var VFe=Ae(),WFe=function(e){return new VFe(e.x,e.y,e.width,e.height)};J7.exports=WFe});var j7=l((Ztt,$7)=>{var HFe=Yr(),KFe=function(e,t){return HFe(e,t.x,t.y)};$7.exports=KFe});var e0=l((Jtt,eK)=>{var ZFe=function(e,t){return t.width*t.height>e.width*e.height?!1:t.x>e.x&&t.x<e.right&&t.right>e.x&&t.right<e.right&&t.y>e.y&&t.y<e.bottom&&t.bottom>e.y&&t.bottom<e.bottom};eK.exports=ZFe});var iK=l((Qtt,tK)=>{var JFe=function(e,t){return t.setTo(e.x,e.y,e.width,e.height)};tK.exports=JFe});var sK=l(($tt,rK)=>{var QFe=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};rK.exports=QFe});var Jl=l((jtt,nK)=>{var $Fe=function(e){return e.height===0?NaN:e.width/e.height};nK.exports=$Fe});var oK=l((eit,hK)=>{var aK=Jl(),jFe=function(e,t){var i=aK(e);return i<aK(t)?e.setSize(t.height*i,t.height):e.setSize(t.width,t.width/i),e.setPosition(t.centerX-e.width/2,t.centerY-e.height/2)};hK.exports=jFe});var fK=l((tit,lK)=>{var uK=Jl(),e2e=function(e,t){var i=uK(e);return i>uK(t)?e.setSize(t.height*i,t.height):e.setSize(t.width,t.width/i),e.setPosition(t.centerX-e.width/2,t.centerY-e.height/2)};lK.exports=e2e});var vK=l((iit,dK)=>{var t2e=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};dK.exports=t2e});var pK=l((rit,cK)=>{var i2e=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};cK.exports=i2e});var xK=l((sit,gK)=>{var r2e=Ae(),mK=Oe(),s2e=function(e,t){if(t===void 0&&(t=new r2e),e.length===0)return t;for(var i=Number.MAX_VALUE,r=Number.MAX_VALUE,s=mK.MIN_SAFE_INTEGER,n=mK.MIN_SAFE_INTEGER,a,h,o,u=0;u<e.length;u++)a=e[u],Array.isArray(a)?(h=a[0],o=a[1]):(h=a.x,o=a.y),i=Math.min(i,h),r=Math.min(r,o),s=Math.max(s,h),n=Math.max(n,o);return t.x=i,t.y=r,t.width=s-i,t.height=n-r,t};gK.exports=s2e});var TK=l((nit,yK)=>{var n2e=Ae(),a2e=function(e,t,i,r,s){return s===void 0&&(s=new n2e),s.setTo(Math.min(e,i),Math.min(t,r),Math.abs(e-i),Math.abs(t-r))};yK.exports=a2e});var SK=l((ait,EK)=>{var h2e=$(),o2e=function(e,t){return t===void 0&&(t=new h2e),t.x=e.centerX,t.y=e.centerY,t};EK.exports=o2e});var wK=l((hit,_K)=>{var u2e=$(),l2e=function(e,t){return t===void 0&&(t=new u2e),t.x=e.width,t.y=e.height,t};_K.exports=l2e});var RK=l((oit,CK)=>{var f2e=Wo(),d2e=function(e,t,i){var r=e.centerX,s=e.centerY;return e.setSize(e.width+t*2,e.height+i*2),f2e(e,r,s)};CK.exports=d2e});var AK=l((uit,qK)=>{var v2e=Ae(),c2e=Fh(),p2e=function(e,t,i){return i===void 0&&(i=new v2e),c2e(e,t)?(i.x=Math.max(e.x,t.x),i.y=Math.max(e.y,t.y),i.width=Math.min(e.right,t.right)-i.x,i.height=Math.min(e.bottom,t.bottom)-i.y):i.setEmpty(),i};qK.exports=p2e});var PK=l((lit,bK)=>{var m2e=function(e,t){for(var i=e.x,r=e.right,s=e.y,n=e.bottom,a=0;a<t.length;a++)i=Math.min(i,t[a].x),r=Math.max(r,t[a].x),s=Math.min(s,t[a].y),n=Math.max(n,t[a].y);return e.x=i,e.y=s,e.width=r-i,e.height=n-s,e};bK.exports=m2e});var LK=l((fit,MK)=>{var g2e=function(e,t){var i=Math.min(e.x,t.x),r=Math.max(e.right,t.right);e.x=i,e.width=r-i;var s=Math.min(e.y,t.y),n=Math.max(e.bottom,t.bottom);return e.y=s,e.height=n-s,e};MK.exports=g2e});var FK=l((dit,OK)=>{var x2e=function(e,t,i){var r=Math.min(e.x,t),s=Math.max(e.right,t);e.x=r,e.width=s-r;var n=Math.min(e.y,i),a=Math.max(e.bottom,i);return e.y=n,e.height=a-n,e};OK.exports=x2e});var IK=l((vit,DK)=>{var y2e=function(e,t,i){return e.x+=t,e.y+=i,e};DK.exports=y2e});var GK=l((cit,NK)=>{var T2e=function(e,t){return e.x+=t.x,e.y+=t.y,e};NK.exports=T2e});var UK=l((pit,BK)=>{var E2e=function(e,t){return e.x<t.right&&e.right>t.x&&e.y<t.bottom&&e.bottom>t.y};BK.exports=E2e});var zK=l((mit,kK)=>{var S2e=$(),_2e=yr(),w2e=function(e,t,i){i===void 0&&(i=new S2e),t=_2e(t);var r=Math.sin(t),s=Math.cos(t),n=s>0?e.width/2:e.width/-2,a=r>0?e.height/2:e.height/-2;return Math.abs(n*r)<Math.abs(a*s)?a=n*r/s:n=a*s/r,i.x=n+e.centerX,i.y=a+e.centerY,i};kK.exports=w2e});var XK=l((git,YK)=>{var C2e=nu(),R2e=e0(),q2e=$(),A2e=function(e,t,i){if(i===void 0&&(i=new q2e),R2e(e,t))switch(C2e(0,3)){case 0:i.x=e.x+Math.random()*(t.right-e.x),i.y=e.y+Math.random()*(t.top-e.y);break;case 1:i.x=t.x+Math.random()*(e.right-t.x),i.y=t.bottom+Math.random()*(e.bottom-t.bottom);break;case 2:i.x=e.x+Math.random()*(t.x-e.x),i.y=t.y+Math.random()*(e.bottom-t.y);break;case 3:i.x=t.right+Math.random()*(e.right-t.right),i.y=e.y+Math.random()*(t.bottom-e.y);break}return i};YK.exports=A2e});var WK=l((xit,VK)=>{var b2e=function(e,t){return e.width===t.width&&e.height===t.height};VK.exports=b2e});var KK=l((yit,HK)=>{var P2e=function(e,t,i){return i===void 0&&(i=t),e.width*=t,e.height*=i,e};HK.exports=P2e});var JK=l((Tit,ZK)=>{var j=Ae();j.Area=V7();j.Ceil=H7();j.CeilAll=Z7();j.CenterOn=Wo();j.Clone=Q7();j.Contains=Yr();j.ContainsPoint=j7();j.ContainsRect=e0();j.CopyFrom=iK();j.Decompose=Lg();j.Equals=sK();j.FitInside=oK();j.FitOutside=fK();j.Floor=vK();j.FloorAll=pK();j.FromPoints=xK();j.FromXY=TK();j.GetAspectRatio=Jl();j.GetCenter=SK();j.GetPoint=_o();j.GetPoints=kd();j.GetSize=wK();j.Inflate=RK();j.Intersection=AK();j.MarchingAnts=sv();j.MergePoints=PK();j.MergeRect=LK();j.MergeXY=FK();j.Offset=IK();j.OffsetPoint=GK();j.Overlaps=UK();j.Perimeter=Ua();j.PerimeterPoint=zK();j.Random=qo();j.RandomOutside=XK();j.SameDimensions=WK();j.Scale=KK();j.Union=fm();ZK.exports=j});var $K=l((Eit,QK)=>{var M2e=function(e){var t=e.x1,i=e.y1,r=e.x2,s=e.y2,n=e.x3,a=e.y3;return Math.abs(((n-t)*(s-i)-(r-t)*(a-i))/2)};QK.exports=M2e});var eZ=l((Sit,jK)=>{var L2e=Es(),O2e=function(e,t,i){var r=i*(Math.sqrt(3)/2),s=e,n=t,a=e+i/2,h=t+r,o=e-i/2,u=t+r;return new L2e(s,n,a,h,o,u)};jK.exports=O2e});var iZ=l((_it,tZ)=>{var F2e=$i(),D2e=Es(),I2e=function(e,t,i,r,s){t===void 0&&(t=null),i===void 0&&(i=1),r===void 0&&(r=1),s===void 0&&(s=[]);for(var n=F2e(e,t),a,h,o,u,f,d,v,c,p,m=0;m<n.length;m+=3)a=n[m],h=n[m+1],o=n[m+2],u=e[a*2]*i,f=e[a*2+1]*r,d=e[h*2]*i,v=e[h*2+1]*r,c=e[o*2]*i,p=e[o*2+1]*r,s.push(new D2e(u,f,d,v,c,p));return s};tZ.exports=I2e});var sZ=l((wit,rZ)=>{var N2e=Es(),G2e=function(e,t,i,r){r===void 0&&(r=i);var s=e,n=t,a=e,h=t-r,o=e+i,u=t;return new N2e(s,n,a,h,o,u)};rZ.exports=G2e});var t0=l((Cit,nZ)=>{var B2e=$(),U2e=function(e,t){return t===void 0&&(t=new B2e),t.x=(e.x1+e.x2+e.x3)/3,t.y=(e.y1+e.y2+e.y3)/3,t};nZ.exports=U2e});var i0=l((Rit,aZ)=>{var k2e=function(e,t,i){return e.x1+=t,e.y1+=i,e.x2+=t,e.y2+=i,e.x3+=t,e.y3+=i,e};aZ.exports=k2e});var oZ=l((qit,hZ)=>{var z2e=t0(),Y2e=i0(),X2e=function(e,t,i,r){r===void 0&&(r=z2e);var s=r(e),n=t-s.x,a=i-s.y;return Y2e(e,n,a)};hZ.exports=X2e});var lZ=l((Ait,uZ)=>{var V2e=xe();function r0(e,t,i,r){return e*r-t*i}var W2e=function(e,t){t===void 0&&(t=new V2e);var i=e.x3,r=e.y3,s=e.x1-i,n=e.y1-r,a=e.x2-i,h=e.y2-r,o=2*r0(s,n,a,h),u=r0(n,s*s+n*n,h,a*a+h*h),f=r0(s,s*s+n*n,a,a*a+h*h);return t.x=i-u/o,t.y=r+f/o,t};uZ.exports=W2e});var dZ=l((bit,fZ)=>{var H2e=zr(),K2e=function(e,t){t===void 0&&(t=new H2e);var i=e.x1,r=e.y1,s=e.x2,n=e.y2,a=e.x3,h=e.y3,o=s-i,u=n-r,f=a-i,d=h-r,v=o*(i+s)+u*(r+n),c=f*(i+a)+d*(r+h),p=2*(o*(h-n)-u*(a-s)),m,x;if(Math.abs(p)<1e-6){var g=Math.min(i,s,a),y=Math.min(r,n,h);m=(Math.max(i,s,a)-g)*.5,x=(Math.max(r,n,h)-y)*.5,t.x=g+m,t.y=y+x,t.radius=Math.sqrt(m*m+x*x)}else t.x=(d*v-u*c)/p,t.y=(o*c-f*v)/p,m=t.x-i,x=t.y-r,t.radius=Math.sqrt(m*m+x*x);return t};fZ.exports=K2e});var cZ=l((Pit,vZ)=>{var Z2e=Es(),J2e=function(e){return new Z2e(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};vZ.exports=J2e});var mZ=l((Mit,pZ)=>{var Q2e=fa(),$2e=function(e,t){return Q2e(e,t.x,t.y)};pZ.exports=$2e});var xZ=l((Lit,gZ)=>{var j2e=function(e,t){return t.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};gZ.exports=j2e});var TZ=l((Oit,yZ)=>{var eDe=function(e,t){return e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2&&e.x3===t.x3&&e.y3===t.y3};yZ.exports=eDe});var n0=l((Fit,EZ)=>{var tDe=$();function s0(e,t,i,r){var s=e-i,n=t-r,a=s*s+n*n;return Math.sqrt(a)}var iDe=function(e,t){t===void 0&&(t=new tDe);var i=e.x1,r=e.y1,s=e.x2,n=e.y2,a=e.x3,h=e.y3,o=s0(a,h,s,n),u=s0(i,r,a,h),f=s0(s,n,i,r),d=o+u+f;return t.x=(i*o+s*u+a*f)/d,t.y=(r*o+n*u+h*f)/d,t};EZ.exports=iDe});var _Z=l((Dit,SZ)=>{var a0=gr(),rDe=function(e){var t=e.getLineA(),i=e.getLineB(),r=e.getLineC();return a0(t)+a0(i)+a0(r)};SZ.exports=rDe});var Ql=l((Iit,wZ)=>{var sDe=function(e,t,i,r){var s=Math.cos(r),n=Math.sin(r),a=e.x1-t,h=e.y1-i;return e.x1=a*s-h*n+t,e.y1=a*n+h*s+i,a=e.x2-t,h=e.y2-i,e.x2=a*s-h*n+t,e.y2=a*n+h*s+i,a=e.x3-t,h=e.y3-i,e.x3=a*s-h*n+t,e.y3=a*n+h*s+i,e};wZ.exports=sDe});var RZ=l((Nit,CZ)=>{var nDe=Ql(),aDe=n0(),hDe=function(e,t){var i=aDe(e);return nDe(e,i.x,i.y,t)};CZ.exports=hDe});var AZ=l((Git,qZ)=>{var oDe=Ql(),uDe=function(e,t,i){return oDe(e,t.x,t.y,i)};qZ.exports=uDe});var PZ=l((Bit,bZ)=>{var Re=Es();Re.Area=$K();Re.BuildEquilateral=eZ();Re.BuildFromPolygon=iZ();Re.BuildRight=sZ();Re.CenterOn=oZ();Re.Centroid=t0();Re.CircumCenter=lZ();Re.CircumCircle=dZ();Re.Clone=cZ();Re.Contains=fa();Re.ContainsArray=Kl();Re.ContainsPoint=mZ();Re.CopyFrom=xZ();Re.Decompose=Yg();Re.Equals=TZ();Re.GetPoint=rg();Re.GetPoints=ng();Re.InCenter=n0();Re.Perimeter=_Z();Re.Offset=i0();Re.Random=No();Re.Rotate=RZ();Re.RotateAroundPoint=AZ();Re.RotateAroundXY=Ql();bZ.exports=Re});var LZ=l((Uit,MZ)=>{var lDe=Ki(),fDe=Ye(),h0={Circle:L6(),Ellipse:$6(),Intersects:X9(),Line:B8(),Mesh:j8(),Point:b7(),Polygon:Y7(),Rectangle:JK(),Triangle:PZ()};h0=fDe(!1,h0,lDe);MZ.exports=h0});var o0=l((kit,OZ)=>{var dDe=function(e,t){return function(i,r,s,n){var a=e.getPixelAlpha(r,s,n.texture.key,n.frame.name);return a&&a>=t}};OZ.exports=dDe});var u0=l((zit,FZ)=>{var vDe=function(e,t,i){return{gameObject:e,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:t,hitAreaCallback:i,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};FZ.exports=vDe});var l0=l((Yit,DZ)=>{var cDe=C(),pDe=new cDe({initialize:function(t,i){this.pad=t,this.events=t.events,this.index=i,this.value=0,this.threshold=.1},update:function(e){this.value=e},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});DZ.exports=pDe});var NZ=l((Xit,IZ)=>{IZ.exports="down"});var BZ=l((Vit,GZ)=>{GZ.exports="up"});var kZ=l((Wit,UZ)=>{UZ.exports="connected"});var YZ=l((Hit,zZ)=>{zZ.exports="disconnected"});var VZ=l((Kit,XZ)=>{XZ.exports="down"});var HZ=l((Zit,WZ)=>{WZ.exports="up"});var $l=l((Jit,KZ)=>{KZ.exports={BUTTON_DOWN:NZ(),BUTTON_UP:BZ(),CONNECTED:kZ(),DISCONNECTED:YZ(),GAMEPAD_BUTTON_DOWN:VZ(),GAMEPAD_BUTTON_UP:HZ()}});var f0=l((Qit,ZZ)=>{var mDe=C(),jl=$l(),gDe=new mDe({initialize:function(t,i){this.pad=t,this.events=t.manager,this.index=i,this.value=0,this.threshold=1,this.pressed=!1},update:function(e){this.value=e;var t=this.pad,i=this.index;e>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(jl.BUTTON_DOWN,t,this,e),this.pad.emit(jl.GAMEPAD_BUTTON_DOWN,i,e,this)):this.pressed&&(this.pressed=!1,this.events.emit(jl.BUTTON_UP,t,this,e),this.pad.emit(jl.GAMEPAD_BUTTON_UP,i,e,this))},destroy:function(){this.pad=null,this.events=null}});ZZ.exports=gDe});var d0=l(($it,$Z)=>{var xDe=l0(),yDe=f0(),TDe=C(),JZ=ue(),QZ=xe(),EDe=new TDe({Extends:JZ,initialize:function(t,i){JZ.call(this),this.manager=t,this.pad=i,this.id=i.id,this.index=i.index;for(var r=[],s=0;s<i.buttons.length;s++)r.push(new yDe(this,s));this.buttons=r;var n=[];for(s=0;s<i.axes.length;s++)n.push(new xDe(this,s));this.axes=n,this.vibration=i.vibrationActuator;var a={value:0,pressed:!1};this._LCLeft=r[14]?r[14]:a,this._LCRight=r[15]?r[15]:a,this._LCTop=r[12]?r[12]:a,this._LCBottom=r[13]?r[13]:a,this._RCLeft=r[2]?r[2]:a,this._RCRight=r[1]?r[1]:a,this._RCTop=r[3]?r[3]:a,this._RCBottom=r[0]?r[0]:a,this._FBLeftTop=r[4]?r[4]:a,this._FBLeftBottom=r[6]?r[6]:a,this._FBRightTop=r[5]?r[5]:a,this._FBRightBottom=r[7]?r[7]:a;var h={value:0};this._HAxisLeft=n[0]?n[0]:h,this._VAxisLeft=n[1]?n[1]:h,this._HAxisRight=n[2]?n[2]:h,this._VAxisRight=n[3]?n[3]:h,this.leftStick=new QZ,this.rightStick=new QZ,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(e){return this.axes[e].getValue()},setAxisThreshold:function(e){for(var t=0;t<this.axes.length;t++)this.axes[t].threshold=e},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(e){return this.buttons[e].value},isButtonDown:function(e){return this.buttons[e].pressed},update:function(e){if(!(e.timestamp<this._created)){var t,i=this.buttons,r=e.buttons,s=i.length;for(t=0;t<s;t++)i[t].update(r[t].value);var n=this.axes,a=e.axes;for(s=n.length,t=0;t<s;t++)n[t].update(a[t]);s>=2&&(this.leftStick.set(n[0].getValue(),n[1].getValue()),s>=4&&this.rightStick.set(n[2].getValue(),n[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var e;for(e=0;e<this.buttons.length;e++)this.buttons[e].destroy();for(e=0;e<this.axes.length;e++)this.axes[e].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});$Z.exports=EDe});var Gh=l((jit,jZ)=>{var SDe=he(),Fr={},Nh={};Nh.register=function(e,t,i,r,s){Fr[e]={plugin:t,mapping:i,settingsKey:r,configKey:s}};Nh.getPlugin=function(e){return Fr[e]};Nh.install=function(e){var t=e.scene.sys,i=t.settings.input,r=t.game.config;for(var s in Fr){var n=Fr[s].plugin,a=Fr[s].mapping,h=Fr[s].settingsKey,o=Fr[s].configKey;SDe(i,h,r[o])&&(e[a]=new n(e))}};Nh.remove=function(e){Fr.hasOwnProperty(e)&&delete Fr[e]};jZ.exports=Nh});var aJ=l((ert,nJ)=>{var _De=C(),eJ=ue(),tJ=$l(),iJ=d0(),rJ=he(),wDe=Gh(),Ea=ji(),sJ=new _De({Extends:eJ,initialize:function(t){eJ.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(Ea.BOOT,this.boot,this),t.pluginEvents.on(Ea.START,this.start,this)},boot:function(){var e=this.scene.sys.game,t=this.settings.input,i=e.config;this.enabled=rJ(t,"gamepad",i.inputGamepad)&&e.device.input.gamepads,this.target=rJ(t,"gamepad.target",i.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(Ea.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(Ea.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var e=this,t=this.target,i=function(r){r.defaultPrevented||!e.isActive()||(e.refreshPads(),e.queue.push(r))};this.onGamepadHandler=i,t.addEventListener("gamepadconnected",i,!1),t.addEventListener("gamepaddisconnected",i,!1),this.sceneInputPlugin.pluginEvents.on(Ea.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(Ea.UPDATE,this.update);for(var e=0;e<this.gamepads.length;e++)this.gamepads[e].removeAllListeners()},disconnectAll:function(){for(var e=0;e<this.gamepads.length;e++)this.gamepads[e].pad.connected=!1},refreshPads:function(){var e=navigator.getGamepads();if(!e)this.disconnectAll();else for(var t=this.gamepads,i=0;i<e.length;i++){var r=e[i];if(!!r){var s=r.id,n=r.index,a=t[n];if(a)a.id!==s?(a.destroy(),t[n]=new iJ(this,r)):a.update(r);else{var h=new iJ(this,r);t[n]=h,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=h):this._pad3=h:this._pad2=h:this._pad1=h}}}},getAll:function(){for(var e=[],t=this.gamepads,i=0;i<t.length;i++)t[i]&&e.push(t[i]);return e},getPad:function(e){for(var t=this.gamepads,i=0;i<t.length;i++)if(t[i]&&t[i].index===e)return t[i]},update:function(){if(!!this.enabled){this.refreshPads();var e=this.queue.length;if(e!==0)for(var t=this.queue.splice(0,e),i=0;i<e;i++){var r=t[i],s=this.getPad(r.gamepad.index);r.type==="gamepadconnected"?this.emit(tJ.CONNECTED,s,r):r.type==="gamepaddisconnected"&&this.emit(tJ.DISCONNECTED,s,r)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var e=0;e<this.gamepads.length;e++)this.gamepads[e]&&this.gamepads[e].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});wDe.register("GamepadPlugin",sJ,"gamepad","gamepad","inputGamepad");nJ.exports=sJ});var oJ=l((trt,hJ)=>{hJ.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}});var lJ=l((irt,uJ)=>{uJ.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}});var dJ=l((rrt,fJ)=>{fJ.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}});var cJ=l((srt,vJ)=>{vJ.exports={DUALSHOCK_4:oJ(),SNES_USB:lJ(),XBOX_360:dJ()}});var mJ=l((nrt,pJ)=>{pJ.exports={Axis:l0(),Button:f0(),Events:$l(),Gamepad:d0(),GamepadPlugin:aJ(),Configs:cJ()}});var SJ=l((art,EJ)=>{var CDe=zr(),RDe=kr(),qDe=C(),_s=Lu(),gJ=u0(),ADe=o0(),bDe=Wr(),PDe=na(),MDe=sa(),W=ji(),v0=ue(),ws=z(),Sa=Ki(),LDe=Gh(),ODe=ae(),FDe=ct(),xJ=Ae(),yJ=Yr(),Zt=Ge(),DDe=Es(),IDe=fa(),TJ=new qDe({Extends:v0,initialize:function(t){v0.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new v0,this.enabled=!0,this.displayList,this.cameras,LDe.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var i={cancelled:!1};this._eventContainer={stopPropagation:function(){i.cancelled=!0}},this._eventData=i,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(Zt.BOOT,this.boot,this),t.sys.events.on(Zt.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(Zt.DESTROY,this.destroy,this),this.pluginEvents.emit(W.BOOT)},start:function(){var e=this.systems.events;e.on(Zt.TRANSITION_START,this.transitionIn,this),e.on(Zt.TRANSITION_OUT,this.transitionOut,this),e.on(Zt.TRANSITION_COMPLETE,this.transitionComplete,this),e.on(Zt.PRE_UPDATE,this.preUpdate,this),e.once(Zt.SHUTDOWN,this.shutdown,this),this.manager.events.on(W.GAME_OUT,this.onGameOut,this),this.manager.events.on(W.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(W.START)},onGameOver:function(e){this.isActive()&&this.emit(W.GAME_OVER,e.timeStamp,e)},onGameOut:function(e){this.isActive()&&this.emit(W.GAME_OUT,e.timeStamp,e)},preUpdate:function(){this.pluginEvents.emit(W.PRE_UPDATE);var e=this._pendingRemoval,t=this._pendingInsertion,i=e.length,r=t.length;if(!(i===0&&r===0)){for(var s=this._list,n=0;n<i;n++){var a=e[n],h=s.indexOf(a);h>-1&&(s.splice(h,1),this.clear(a,!0))}e.length=0,this._pendingRemoval.length=0,this._list=s.concat(t.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(e,t){if(!this.isActive())return!1;if(this.pluginEvents.emit(W.UPDATE,e,t),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var i,r=this.manager,s=r.pointers,n=r.pointersTotal;for(i=0;i<n;i++)s[i].updateMotion();if(this._list.length===0)return!1;var a=this.pollRate;if(a===-1)return!1;if(a>0)if(this._pollTimer-=t,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var h=!1;for(i=0;i<n;i++){var o=0,u=s[i];this._tempZones=[],this._temp=this.hitTestPointer(u),this.sortGameObjects(this._temp,u),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),o+=this.processOverOutEvents(u),this.getDragState(u)===2&&this.processDragThresholdEvent(u,e),o>0&&(h=!0)}return h},update:function(e,t){if(!this.isActive())return!1;for(var i=t.length,r=!1,s=0;s<i;s++){var n=0,a=t[s];switch(this._tempZones=[],this._temp=this.hitTestPointer(a),this.sortGameObjects(this._temp,a),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),e){case _s.MOUSE_DOWN:n+=this.processDragDownEvent(a),n+=this.processDownEvents(a),n+=this.processOverOutEvents(a);break;case _s.MOUSE_UP:n+=this.processDragUpEvent(a),n+=this.processUpEvents(a),n+=this.processOverOutEvents(a);break;case _s.TOUCH_START:n+=this.processDragDownEvent(a),n+=this.processDownEvents(a),n+=this.processOverEvents(a);break;case _s.TOUCH_END:case _s.TOUCH_CANCEL:n+=this.processDragUpEvent(a),n+=this.processUpEvents(a),n+=this.processOutEvents(a);break;case _s.MOUSE_MOVE:case _s.TOUCH_MOVE:n+=this.processDragMoveEvent(a),n+=this.processMoveEvents(a),n+=this.processOverOutEvents(a);break;case _s.MOUSE_WHEEL:n+=this.processWheelEvent(a);break}n>0&&(r=!0)}return this._updatedThisFrame=!0,r},clear:function(e,t){t===void 0&&(t=!1);var i=e.input;if(!!i){t||this.queueForRemoval(e),i.gameObject=void 0,i.target=void 0,i.hitArea=void 0,i.hitAreaCallback=void 0,i.callbackContext=void 0,e.input=null;var r=this._draggable.indexOf(e);return r>-1&&this._draggable.splice(r,1),r=this._drag[0].indexOf(e),r>-1&&this._drag[0].splice(r,1),r=this._over[0].indexOf(e),r>-1&&(this._over[0].splice(r,1),this.manager.resetCursor(i)),e}},disable:function(e){e.input.enabled=!1},enable:function(e,t,i,r){return r===void 0&&(r=!1),e.input?e.input.enabled=!0:this.setHitArea(e,t,i),e.input&&r&&!e.input.dropZone&&(e.input.dropZone=r),this},hitTestPointer:function(e){for(var t=this.cameras.getCamerasBelowPointer(e),i=0;i<t.length;i++){for(var r=t[i],s=this.manager.hitTest(e,this._list,r),n=0;n<s.length;n++){var a=s[n];a.input.dropZone&&this._tempZones.push(a)}if(s.length>0)return e.camera=r,s}return e.camera=t[0],[]},processDownEvents:function(e){var t=0,i=this._temp,r=this._eventData,s=this._eventContainer;r.cancelled=!1;for(var n=!1,a=0;a<i.length;a++){var h=i[a];if(!!h.input){if(t++,h.emit(W.GAMEOBJECT_POINTER_DOWN,e,h.input.localX,h.input.localY,s),r.cancelled||!h.input){n=!0;break}if(this.emit(W.GAMEOBJECT_DOWN,e,h,s),r.cancelled||!h.input){n=!0;break}}}return!n&&this.manager&&(e.downElement===this.manager.game.canvas?this.emit(W.POINTER_DOWN,e,i):this.emit(W.POINTER_DOWN_OUTSIDE,e)),t},getDragState:function(e){return this._dragState[e.id]},setDragState:function(e,t){this._dragState[e.id]=t},processDragThresholdEvent:function(e,t){var i=!1,r=this.dragTimeThreshold,s=this.dragDistanceThreshold;if((s>0&&bDe(e.x,e.y,e.downX,e.downY)>=s||r>0&&t>=e.downTime+r)&&(i=!0),i)return this.setDragState(e,3),this.processDragStartList(e)},processDragStartList:function(e){if(this.getDragState(e)!==3)return 0;for(var t=this._drag[e.id],i=0;i<t.length;i++){var r=t[i],s=r.input;s.dragState=2,s.dragStartX=r.x,s.dragStartY=r.y,s.dragStartXGlobal=e.worldX,s.dragStartYGlobal=e.worldY,s.dragX=s.dragStartXGlobal-s.dragStartX,s.dragY=s.dragStartYGlobal-s.dragStartY,r.emit(W.GAMEOBJECT_DRAG_START,e,s.dragX,s.dragY),this.emit(W.DRAG_START,e,r)}return this.setDragState(e,4),t.length},processDragDownEvent:function(e){var t=this._temp;if(this._draggable.length===0||t.length===0||!e.primaryDown||this.getDragState(e)!==0)return 0;this.setDragState(e,1);for(var i=[],r=0;r<t.length;r++){var s=t[r];s.input.draggable&&s.input.dragState===0&&i.push(s)}return i.length===0?(this.setDragState(e,0),0):(i.length>1&&(this.sortGameObjects(i,e),this.topOnly&&i.splice(1)),this._drag[e.id]=i,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(e,3),this.processDragStartList(e)):(this.setDragState(e,2),0))},processDragMoveEvent:function(e){if(this.getDragState(e)===2&&this.processDragThresholdEvent(e,this.manager.game.loop.now),this.getDragState(e)!==4)return 0;for(var t=this._tempZones,i=this._drag[e.id],r=0;r<i.length;r++){var s=i[r],n=s.input,a=n.target;if(a){var h=t.indexOf(a);h===0?(s.emit(W.GAMEOBJECT_DRAG_OVER,e,a),this.emit(W.DRAG_OVER,e,s,a)):h>0?(s.emit(W.GAMEOBJECT_DRAG_LEAVE,e,a),this.emit(W.DRAG_LEAVE,e,s,a),n.target=t[0],a=n.target,s.emit(W.GAMEOBJECT_DRAG_ENTER,e,a),this.emit(W.DRAG_ENTER,e,s,a)):(s.emit(W.GAMEOBJECT_DRAG_LEAVE,e,a),this.emit(W.DRAG_LEAVE,e,s,a),t[0]?(n.target=t[0],a=n.target,s.emit(W.GAMEOBJECT_DRAG_ENTER,e,a),this.emit(W.DRAG_ENTER,e,s,a)):n.target=null)}else!a&&t[0]&&(n.target=t[0],a=n.target,s.emit(W.GAMEOBJECT_DRAG_ENTER,e,a),this.emit(W.DRAG_ENTER,e,s,a));var o,u;if(!s.parentContainer)o=e.worldX-n.dragX,u=e.worldY-n.dragY;else{var f=e.worldX-n.dragStartXGlobal,d=e.worldY-n.dragStartYGlobal,v=s.getParentRotation(),c=f*Math.cos(v)+d*Math.sin(v),p=d*Math.cos(v)-f*Math.sin(v);c*=1/s.parentContainer.scaleX,p*=1/s.parentContainer.scaleY,o=c+n.dragStartX,u=p+n.dragStartY}s.emit(W.GAMEOBJECT_DRAG,e,o,u),this.emit(W.DRAG,e,s,o,u)}return i.length},processDragUpEvent:function(e){for(var t=this._drag[e.id],i=0;i<t.length;i++){var r=t[i],s=r.input;if(s&&s.dragState===2){s.dragState=0,s.dragX=s.localX-r.displayOriginX,s.dragY=s.localY-r.displayOriginY;var n=!1,a=s.target;a&&(r.emit(W.GAMEOBJECT_DROP,e,a),this.emit(W.DROP,e,r,a),s.target=null,n=!0),r.input&&(r.emit(W.GAMEOBJECT_DRAG_END,e,s.dragX,s.dragY,n),this.emit(W.DRAG_END,e,r,n))}}return this.setDragState(e,0),t.splice(0),0},processMoveEvents:function(e){var t=0,i=this._temp,r=this._eventData,s=this._eventContainer;r.cancelled=!1;for(var n=!1,a=0;a<i.length;a++){var h=i[a];if(!!h.input){if(t++,h.emit(W.GAMEOBJECT_POINTER_MOVE,e,h.input.localX,h.input.localY,s),r.cancelled||!h.input){n=!0;break}if(this.emit(W.GAMEOBJECT_MOVE,e,h,s),r.cancelled||!h.input){n=!0;break}if(this.topOnly)break}}return n||this.emit(W.POINTER_MOVE,e,i),t},processWheelEvent:function(e){var t=0,i=this._temp,r=this._eventData,s=this._eventContainer;r.cancelled=!1;for(var n=!1,a=e.deltaX,h=e.deltaY,o=e.deltaZ,u=0;u<i.length;u++){var f=i[u];if(!!f.input){if(t++,f.emit(W.GAMEOBJECT_POINTER_WHEEL,e,a,h,o,s),r.cancelled||!f.input){n=!0;break}if(this.emit(W.GAMEOBJECT_WHEEL,e,f,a,h,o,s),r.cancelled||!f.input){n=!0;break}}}return n||this.emit(W.POINTER_WHEEL,e,i,a,h,o),t},processOverEvents:function(e){var t=this._temp,i=0,r=t.length,s=[];if(r>0){var n=this.manager,a=this._eventData,h=this._eventContainer;a.cancelled=!1;for(var o=!1,u=0;u<r;u++){var f=t[u];if(!!f.input){if(s.push(f),n.setCursor(f.input),f.emit(W.GAMEOBJECT_POINTER_OVER,e,f.input.localX,f.input.localY,h),i++,a.cancelled||!f.input){o=!0;break}if(this.emit(W.GAMEOBJECT_OVER,e,f,h),a.cancelled||!f.input){o=!0;break}}}o||this.emit(W.POINTER_OVER,e,s)}return this._over[e.id]=s,i},processOutEvents:function(e){var t=this._over[e.id],i=0,r=t.length;if(r>0){var s=this.manager,n=this._eventData,a=this._eventContainer;n.cancelled=!1;var h=!1;this.sortGameObjects(t,e);for(var o=0;o<r;o++){var u=t[o];if(u=t[o],!!u.input){if(s.resetCursor(u.input),u.emit(W.GAMEOBJECT_POINTER_OUT,e,a),i++,n.cancelled||!u.input){h=!0;break}if(this.emit(W.GAMEOBJECT_OUT,e,u,a),n.cancelled||!u.input){h=!0;break}h||this.emit(W.POINTER_OUT,e,t)}}this._over[e.id]=[]}return i},processOverOutEvents:function(e){var t=this._temp,i,r,s=[],n=[],a=[],h=this._over[e.id],o=this._drag[e.id],u=this.manager;for(i=0;i<h.length;i++)r=h[i],t.indexOf(r)===-1&&o.indexOf(r)===-1?s.push(r):a.push(r);for(i=0;i<t.length;i++)r=t[i],h.indexOf(r)===-1&&n.push(r);var f=s.length,d=0,v=this._eventData,c=this._eventContainer;v.cancelled=!1;var p=!1;if(f>0){for(this.sortGameObjects(s,e),i=0;i<f;i++)if(r=s[i],!!r.input){if(u.resetCursor(r.input),r.emit(W.GAMEOBJECT_POINTER_OUT,e,c),d++,v.cancelled||!r.input){p=!0;break}if(this.emit(W.GAMEOBJECT_OUT,e,r,c),v.cancelled||!r.input){p=!0;break}}p||this.emit(W.POINTER_OUT,e,s)}if(f=n.length,v.cancelled=!1,p=!1,f>0){for(this.sortGameObjects(n,e),i=0;i<f;i++)if(r=n[i],!!r.input){if(u.setCursor(r.input),r.emit(W.GAMEOBJECT_POINTER_OVER,e,r.input.localX,r.input.localY,c),d++,v.cancelled||!r.input){p=!0;break}if(this.emit(W.GAMEOBJECT_OVER,e,r,c),v.cancelled||!r.input){p=!0;break}}p||this.emit(W.POINTER_OVER,e,n)}return h=a.concat(n),this._over[e.id]=this.sortGameObjects(h,e),d},processUpEvents:function(e){var t=this._temp,i=this._eventData,r=this._eventContainer;i.cancelled=!1;for(var s=!1,n=0;n<t.length;n++){var a=t[n];if(!!a.input){if(a.emit(W.GAMEOBJECT_POINTER_UP,e,a.input.localX,a.input.localY,r),i.cancelled||!a.input){s=!0;break}if(this.emit(W.GAMEOBJECT_UP,e,a,r),i.cancelled||!a.input){s=!0;break}}}return!s&&this.manager&&(e.upElement===this.manager.game.canvas?this.emit(W.POINTER_UP,e,t):this.emit(W.POINTER_UP_OUTSIDE,e)),t.length},queueForInsertion:function(e){return this._pendingInsertion.indexOf(e)===-1&&this._list.indexOf(e)===-1&&this._pendingInsertion.push(e),this},queueForRemoval:function(e){return this._pendingRemoval.push(e),this},setDraggable:function(e,t){t===void 0&&(t=!0),Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i];r.input.draggable=t;var s=this._draggable.indexOf(r);t&&s===-1?this._draggable.push(r):!t&&s>-1&&this._draggable.splice(s,1)}return this},makePixelPerfect:function(e){e===void 0&&(e=1);var t=this.systems.textures;return ADe(t,e)},setHitArea:function(e,t,i){if(t===void 0)return this.setHitAreaFromTexture(e);Array.isArray(e)||(e=[e]);var r=!1,s=!1,n=!1,a=!1,h=!1,o=!0;if(ODe(t)){var u=t;t=ws(u,"hitArea",null),i=ws(u,"hitAreaCallback",null),r=ws(u,"draggable",!1),s=ws(u,"dropZone",!1),n=ws(u,"cursor",!1),a=ws(u,"useHandCursor",!1),h=ws(u,"pixelPerfect",!1);var f=ws(u,"alphaTolerance",1);h&&(t={},i=this.makePixelPerfect(f)),(!t||!i)&&(this.setHitAreaFromTexture(e),o=!1)}else typeof t=="function"&&!i&&(i=t,t={});for(var d=0;d<e.length;d++){var v=e[d];if(h&&v.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var c=v.input?v.input:gJ(v,t,i);c.customHitArea=o,c.dropZone=s,c.cursor=a?"pointer":n,v.input=c,r&&this.setDraggable(v),this.queueForInsertion(v)}return this},setHitAreaCircle:function(e,t,i,r,s){s===void 0&&(s=RDe);var n=new CDe(t,i,r);return this.setHitArea(e,n,s)},setHitAreaEllipse:function(e,t,i,r,s,n){n===void 0&&(n=MDe);var a=new PDe(t,i,r,s);return this.setHitArea(e,a,n)},setHitAreaFromTexture:function(e,t){t===void 0&&(t=yJ),Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i],s=r.frame,n=0,a=0;if(r.width?(n=r.width,a=r.height):s&&(n=s.realWidth,a=s.realHeight),r.type==="Container"&&(n===0||a===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}n!==0&&a!==0&&(r.input=gJ(r,new xJ(0,0,n,a),t),this.queueForInsertion(r))}return this},setHitAreaRectangle:function(e,t,i,r,s,n){n===void 0&&(n=yJ);var a=new xJ(t,i,r,s);return this.setHitArea(e,a,n)},setHitAreaTriangle:function(e,t,i,r,s,n,a,h){h===void 0&&(h=IDe);var o=new DDe(t,i,r,s,n,a);return this.setHitArea(e,o,h)},enableDebug:function(e,t){t===void 0&&(t=65280);var i=e.input;if(!i||!i.hitArea)return this;var r=i.hitArea,s=r.type,n=i.hitAreaDebug,a=this.systems.add,h=this.systems.updateList;n&&(h.remove(n),n.destroy(),n=null);var o=0,u=0;switch(s){case Sa.CIRCLE:n=a.arc(0,0,r.radius),o=r.x-r.radius,u=r.y-r.radius;break;case Sa.ELLIPSE:n=a.ellipse(0,0,r.width,r.height),o=r.x-r.width/2,u=r.y-r.height/2;break;case Sa.LINE:n=a.line(0,0,r.x1,r.y1,r.x2,r.y2);break;case Sa.POLYGON:n=a.polygon(0,0,r.points);break;case Sa.RECTANGLE:n=a.rectangle(0,0,r.width,r.height),o=r.x,u=r.y;break;case Sa.TRIANGLE:n=a.triangle(0,0,r.x1,r.y1,r.x2,r.y2,r.x3,r.y3);break}return n&&(n.isFilled=!1,n.preUpdate=function(){n.setStrokeStyle(1/e.scale,t),n.setDisplayOrigin(e.displayOriginX,e.displayOriginY);var f=e.x,d=e.y,v=e.rotation,c=e.scaleX,p=e.scaleY;if(e.parentContainer){var m=e.getWorldTransformMatrix();f=m.tx,d=m.ty,v=m.rotation,c=m.scaleX,p=m.scaleY}n.setRotation(v),n.setScale(c,p),n.setPosition(f+o,d+u),n.setScrollFactor(e.scrollFactorX,e.scrollFactorY),n.setDepth(e.depth)},h.add(n),i.hitAreaDebug=n),this},removeDebug:function(e){var t=e.input;if(t&&t.hitAreaDebug){var i=t.hitAreaDebug;this.systems.updateList.remove(i),i.destroy(),t.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(e){return this.pollRate=e,this._pollTimer=0,this},setGlobalTopOnly:function(e){return this.manager.globalTopOnly=e,this},setTopOnly:function(e){return this.topOnly=e,this},sortGameObjects:function(e,t){if(e.length<2)return e;var i=t.camera.renderList;return e.sort(function(r,s){return i.indexOf(s)-i.indexOf(r)})},sortDropZones:function(e){return e.length<2?e:(this.scene.sys.depthSort(),e.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(e,t){if(!e.parentContainer&&!t.parentContainer)return this.displayList.getIndex(t)-this.displayList.getIndex(e);if(e.parentContainer===t.parentContainer)return t.parentContainer.getIndex(t)-e.parentContainer.getIndex(e);if(e.parentContainer===t)return-1;if(t.parentContainer===e)return 1;for(var i=e.getIndexList(),r=t.getIndexList(),s=Math.min(i.length,r.length),n=0;n<s;n++){var a=i[n],h=r[n];if(a!==h)return h-a}return r.length-i.length;return 0},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(e){return this.manager.addPointer(e)},setDefaultCursor:function(e){return this.manager.setDefaultCursor(e),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(W.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var e=0;e<10;e++)this._drag[e]=[],this._over[e]=[];this.removeAllListeners();var t=this.manager;t.canvas.style.cursor=t.defaultCursor;var i=this.systems.events;i.off(Zt.TRANSITION_START,this.transitionIn,this),i.off(Zt.TRANSITION_OUT,this.transitionOut,this),i.off(Zt.TRANSITION_COMPLETE,this.transitionComplete,this),i.off(Zt.PRE_UPDATE,this.preUpdate,this),t.events.off(W.GAME_OUT,this.onGameOut,this),t.events.off(W.GAME_OVER,this.onGameOver,this),i.off(Zt.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(W.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(Zt.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});FDe.register("InputPlugin",TJ,"input");EJ.exports=TJ});var wJ=l((hrt,_J)=>{_J.exports="keydown"});var RJ=l((ort,CJ)=>{CJ.exports="keyup"});var AJ=l((urt,qJ)=>{qJ.exports="keycombomatch"});var PJ=l((lrt,bJ)=>{bJ.exports="down"});var LJ=l((frt,MJ)=>{MJ.exports="keydown-"});var FJ=l((drt,OJ)=>{OJ.exports="keyup-"});var IJ=l((vrt,DJ)=>{DJ.exports="up"});var Bh=l((crt,NJ)=>{NJ.exports={ANY_KEY_DOWN:wJ(),ANY_KEY_UP:RJ(),COMBO_MATCH:AJ(),DOWN:PJ(),KEY_DOWN:LJ(),KEY_UP:FJ(),UP:IJ()}});var p0=l((prt,BJ)=>{var NDe=C(),GJ=ue(),c0=Bh(),GDe=new NDe({Extends:GJ,initialize:function(t,i){GJ.call(this),this.plugin=t,this.keyCode=i,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(e){return this.emitOnRepeat=e,this},onDown:function(e){this.originalEvent=e,this.enabled&&(this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.location=e.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(c0.DOWN,this,e):(this.isDown=!0,this.isUp=!1,this.timeDown=e.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(c0.DOWN,this,e)))},onUp:function(e){this.originalEvent=e,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=e.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(c0.UP,this,e))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});BJ.exports=GDe});var m0=l((mrt,UJ)=>{var BDe=function(e,t){return t.timeLastMatched=e.timeStamp,t.index++,t.index===t.size?!0:(t.current=t.keyCodes[t.index],!1)};UJ.exports=BDe});var g0=l((grt,zJ)=>{var kJ=m0(),UDe=function(e,t){if(t.matched)return!0;var i=!1,r=!1;if(e.keyCode===t.current)if(t.index>0&&t.maxKeyDelay>0){var s=t.timeLastMatched+t.maxKeyDelay;e.timeStamp<=s&&(r=!0,i=kJ(e,t))}else r=!0,i=kJ(e,t);return!r&&t.resetOnWrongKey&&(t.index=0,t.current=t.keyCodes[0]),i&&(t.timeLastMatched=e.timeStamp,t.matched=!0,t.timeMatched=e.timeStamp),i};zJ.exports=UDe});var x0=l((xrt,YJ)=>{var kDe=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};YJ.exports=kDe});var T0=l((yrt,XJ)=>{var zDe=C(),y0=Bh(),ef=z(),YDe=g0(),XDe=x0(),VDe=new zDe({initialize:function(t,i,r){if(r===void 0&&(r={}),i.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var s=0;s<i.length;s++){var n=i[s];typeof n=="string"?this.keyCodes.push(n.toUpperCase().charCodeAt(0)):typeof n=="number"?this.keyCodes.push(n):n.hasOwnProperty("keyCode")&&this.keyCodes.push(n.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=ef(r,"resetOnWrongKey",!0),this.maxKeyDelay=ef(r,"maxKeyDelay",0),this.resetOnMatch=ef(r,"resetOnMatch",!1),this.deleteOnMatch=ef(r,"deleteOnMatch",!1);var a=this,h=function(o){if(!(a.matched||!a.enabled)){var u=YDe(o,a);u&&(a.manager.emit(y0.COMBO_MATCH,a,o),a.resetOnMatch?XDe(a):a.deleteOnMatch&&a.destroy())}};this.onKeyDown=h,this.manager.on(y0.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(y0.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});XJ.exports=VDe});var KJ=l((Trt,HJ)=>{var VJ=ph(),WJ={};for(E0 in VJ)WJ[VJ[E0]]=E0;var E0;HJ.exports=WJ});var eQ=l((Ert,jJ)=>{var WDe=C(),ZJ=ue(),tf=Bh(),JJ=Xe(),QJ=he(),_a=ji(),HDe=Gh(),S0=p0(),Cs=ph(),KDe=T0(),rf=KJ(),sf=Ge(),ZDe=rh(),$J=new WDe({Extends:ZJ,initialize:function(t){ZJ.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(_a.BOOT,this.boot,this),t.pluginEvents.on(_a.START,this.start,this)},boot:function(){var e=this.settings.input;this.enabled=QJ(e,"keyboard",!0);var t=QJ(e,"keyboard.capture",null);t&&this.addCaptures(t),this.sceneInputPlugin.pluginEvents.once(_a.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(_a.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(_a.SHUTDOWN,this.shutdown,this),this.game.events.on(JJ.BLUR,this.resetKeys,this),this.scene.sys.events.on(sf.PAUSE,this.resetKeys,this),this.scene.sys.events.on(sf.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(e){return this.manager.addCapture(e),this},removeCapture:function(e){return this.manager.removeCapture(e),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:Cs.UP,down:Cs.DOWN,left:Cs.LEFT,right:Cs.RIGHT,space:Cs.SPACE,shift:Cs.SHIFT})},addKeys:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!1);var r={};if(typeof e=="string"){e=e.split(",");for(var s=0;s<e.length;s++){var n=e[s].trim();n&&(r[n]=this.addKey(n,t,i))}}else for(var a in e)r[a]=this.addKey(e[a],t,i);return r},addKey:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!1);var r=this.keys;if(e instanceof S0){var s=r.indexOf(e);return s>-1?r[s]=e:r[e.keyCode]=e,t&&this.addCapture(e.keyCode),e.setEmitOnRepeat(i),e}return typeof e=="string"&&(e=Cs[e.toUpperCase()]),r[e]||(r[e]=new S0(this,e),t&&this.addCapture(e),r[e].setEmitOnRepeat(i)),r[e]},removeKey:function(e,t){t===void 0&&(t=!1);var i=this.keys,r;if(e instanceof S0){var s=i.indexOf(e);s>-1&&(r=this.keys[s],this.keys[s]=void 0)}else typeof e=="string"&&(e=Cs[e.toUpperCase()]);return i[e]&&(r=i[e],i[e]=void 0),r&&(r.plugin=null,t&&r.destroy()),this},removeAllKeys:function(e){for(var t=this.keys,i=0;i<t.length;i++){var r=t[i];r&&(t[i]=void 0,e&&r.destroy())}return this},createCombo:function(e,t){return new KDe(this,e,t)},checkDown:function(e,t){if(t===void 0&&(t=0),this.enabled&&e.isDown){var i=ZDe(this.time-e.timeDown,t);if(i>e._tick)return e._tick=i,!0}return!1},update:function(){var e=this.manager.queue,t=e.length;if(!(!this.isActive()||t===0))for(var i=this.keys,r=0;r<t;r++){var s=e[r],n=s.keyCode,a=i[n],h=!1;s.cancelled===void 0&&(s.cancelled=0,s.stopImmediatePropagation=function(){s.cancelled=1},s.stopPropagation=function(){s.cancelled=-1}),s.cancelled!==-1&&(n===this.prevCode&&s.timeStamp===this.prevTime&&s.type===this.prevType||(this.prevCode=n,this.prevTime=s.timeStamp,this.prevType=s.type,s.type==="keydown"?(a&&(h=a.isDown,a.onDown(s)),!s.cancelled&&(!a||!h)&&(rf[n]&&this.emit(tf.KEY_DOWN+rf[n],s),s.cancelled||this.emit(tf.ANY_KEY_DOWN,s))):(a&&a.onUp(s),s.cancelled||(rf[n]&&this.emit(tf.KEY_UP+rf[n],s),s.cancelled||this.emit(tf.ANY_KEY_UP,s))),s.cancelled===1&&(s.cancelled=0)))}},resetKeys:function(){for(var e=this.keys,t=0;t<e.length;t++)e[t]&&e[t].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(_a.MANAGER_PROCESS,this.update,this),this.game.events.off(JJ.BLUR,this.resetKeys),this.scene.sys.events.off(sf.PAUSE,this.resetKeys,this),this.scene.sys.events.off(sf.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var e=this.keys,t=0;t<e.length;t++)e[t]&&e[t].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});HDe.register("KeyboardPlugin",$J,"keyboard","keyboard","inputKeyboard");jJ.exports=$J});var iQ=l((Srt,tQ)=>{var JDe=function(e){return e._justDown?(e._justDown=!1,!0):!1};tQ.exports=JDe});var sQ=l((_rt,rQ)=>{var QDe=function(e){return e._justUp?(e._justUp=!1,!0):!1};rQ.exports=QDe});var aQ=l((wrt,nQ)=>{var $De=function(e,t){t===void 0&&(t=50);var i=e.plugin.game.loop.time-e.timeDown;return e.isDown&&i<t};nQ.exports=$De});var oQ=l((Crt,hQ)=>{var jDe=function(e,t){t===void 0&&(t=50);var i=e.plugin.game.loop.time-e.timeUp;return e.isUp&&i<t};hQ.exports=jDe});var lQ=l((Rrt,uQ)=>{uQ.exports={Events:Bh(),KeyboardManager:Rp(),KeyboardPlugin:eQ(),Key:p0(),KeyCodes:ph(),KeyCombo:T0(),AdvanceKeyCombo:m0(),ProcessKeyCombo:g0(),ResetKeyCombo:x0(),JustDown:iQ(),JustUp:sQ(),DownDuration:aQ(),UpDuration:oQ()}});var dQ=l((qrt,fQ)=>{fQ.exports={MouseManager:qp()}});var cQ=l((Art,vQ)=>{vQ.exports={TouchManager:Pp()}});var mQ=l((brt,pQ)=>{var eIe=Lu(),tIe=Ye(),_0={CreatePixelPerfectHandler:o0(),CreateInteractiveObject:u0(),Events:ji(),Gamepad:mJ(),InputManager:Mp(),InputPlugin:SJ(),InputPluginCache:Gh(),Keyboard:lQ(),Mouse:dQ(),Pointer:bp(),Touch:cQ()};_0=tIe(!1,_0,eIe);pQ.exports=_0});var Ie=l((Prt,gQ)=>{var iIe={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};gQ.exports=iIe});var Uh=l((Mrt,xQ)=>{var rIe=function(e,t){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:t+e.url:!1};xQ.exports=rIe});var kh=l((Lrt,yQ)=>{var sIe=function(e,t,i,r,s,n){return e===void 0&&(e=""),t===void 0&&(t=!0),i===void 0&&(i=""),r===void 0&&(r=""),s===void 0&&(s=0),n===void 0&&(n=!1),{responseType:e,async:t,user:i,password:r,timeout:s,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:n}};yQ.exports=sIe});var nf=l((Ort,TQ)=>{var nIe=Ye(),aIe=kh(),hIe=function(e,t){var i=e===void 0?aIe():nIe({},e);if(t)for(var r in t)t[r]!==void 0&&(i[r]=t[r]);return i};TQ.exports=hIe});var w0=l((Frt,EQ)=>{var oIe=nf(),uIe=function(e,t){var i=oIe(t,e.xhrSettings),r=new XMLHttpRequest;if(r.open("GET",e.src,i.async,i.user,i.password),r.responseType=e.xhrSettings.responseType,r.timeout=i.timeout,i.headers)for(var s in i.headers)r.setRequestHeader(s,i.headers[s]);return i.header&&i.headerValue&&r.setRequestHeader(i.header,i.headerValue),i.requestedWith&&r.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&r.overrideMimeType(i.overrideMimeType),i.withCredentials&&(r.withCredentials=!0),r.onload=e.onLoad.bind(e,r),r.onerror=e.onError.bind(e,r),r.onprogress=e.onProgress.bind(e),r.send(),r};EQ.exports=uIe});var Ze=l((Drt,SQ)=>{var lIe=C(),Rs=Ie(),C0=nn(),Dr=z(),fIe=Uh(),dIe=nf(),vIe=w0(),cIe=kh(),R0=new lIe({initialize:function(t,i){this.loader=t,this.cache=Dr(i,"cache",!1),this.type=Dr(i,"type",!1),this.key=Dr(i,"key",!1);var r=this.key;if(t.prefix&&t.prefix!==""&&(this.key=t.prefix+r),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var s=Dr(i,"url");s===void 0?s=t.path+r+"."+Dr(i,"extension",""):typeof s=="string"&&!s.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(s=t.path+s),this.url=s,this.src="",this.xhrSettings=cIe(Dr(i,"responseType",void 0)),Dr(i,"xhrSettings",!1)&&(this.xhrSettings=dIe(this.xhrSettings,Dr(i,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?Rs.FILE_POPULATED:Rs.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=Dr(i,"config",{}),this.multiFile,this.linkFile},setLink:function(e){this.linkFile=e,e.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===Rs.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=Rs.FILE_LOADING,this.src=fIe(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=vIe(this,this.loader.xhr))},onLoad:function(e,t){var i=e.responseURL&&(e.responseURL.indexOf("file://")===0||e.responseURL.indexOf("capacitor://")===0),r=i&&t.target.status===0,s=!(t.target&&t.target.status!==200)||r;e.readyState===4&&e.status>=400&&e.status<=599&&(s=!1),this.state=Rs.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,s)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(e){e.lengthComputable&&(this.bytesLoaded=e.loaded,this.bytesTotal=e.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(C0.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=Rs.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=Rs.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=Rs.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(e){e===void 0&&(e=this.data);var t=this.key,i=this.type;this.loader.emit(C0.FILE_COMPLETE,t,i,e),this.loader.emit(C0.FILE_KEY_COMPLETE+i+"-"+t,t,i,e),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});R0.createObjectURL=function(e,t,i){if(typeof URL=="function")e.src=URL.createObjectURL(t);else{var r=new FileReader;r.onload=function(){e.removeAttribute("crossOrigin"),e.src="data:"+(t.type||i)+";base64,"+r.result.split(",")[1]},r.onerror=e.onerror,r.readAsDataURL(t)}};R0.revokeObjectURL=function(e){typeof URL=="function"&&URL.revokeObjectURL(e.src)};SQ.exports=R0});var lr=l((Irt,RQ)=>{var pIe=C(),q0=Ie(),_Q=Ze(),mIe=se(),zh=z(),wQ=he(),CQ=ae(),A0=new pIe({Extends:_Q,initialize:function(t,i,r,s,n){var a="json";if(CQ(i)){var h=i;i=zh(h,"key"),r=zh(h,"url"),s=zh(h,"xhrSettings"),a=zh(h,"extension",a),n=zh(h,"dataKey",n)}var o={type:"json",cache:t.cacheManager.json,extension:a,responseType:"text",key:i,url:r,xhrSettings:s,config:n};_Q.call(this,t,o),CQ(r)&&(n?this.data=wQ(r,n):this.data=r,this.state=q0.FILE_POPULATED)},onProcess:function(){if(this.state!==q0.FILE_POPULATED){this.state=q0.FILE_PROCESSING;try{var e=JSON.parse(this.xhrLoader.responseText)}catch(i){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),i}var t=this.config;typeof t=="string"?this.data=wQ(e,t,e):this.data=e}this.onProcessComplete()}});mIe.register("json",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new A0(this,e[s]));else this.addFile(new A0(this,e,t,r,i));return this});RQ.exports=A0});var AQ=l((Nrt,qQ)=>{var gIe=C(),xIe=se(),b0=lr(),yIe=nn(),P0=new gIe({Extends:b0,initialize:function(t,i,r,s,n){b0.call(this,t,i,r,s,n),this.type="animationJSON"},onProcess:function(){this.loader.once(yIe.POST_PROCESS,this.onLoadComplete,this),b0.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});xIe.register("animation",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new P0(this,e[s]));else this.addFile(new P0(this,e,t,r,i));return this});qQ.exports=P0});var Ir=l((Grt,PQ)=>{var TIe=C(),bQ=Ie(),Yh=Ze(),EIe=se(),wa=z(),SIe=ae(),M0=new TIe({Extends:Yh,initialize:function e(t,i,r,s,n){var a="png",h;if(SIe(i)){var o=i;i=wa(o,"key"),r=wa(o,"url"),h=wa(o,"normalMap"),s=wa(o,"xhrSettings"),a=wa(o,"extension",a),n=wa(o,"frameConfig")}Array.isArray(r)&&(h=r[1],r=r[0]);var u={type:"image",cache:t.textureManager,extension:a,responseType:"blob",key:i,url:r,xhrSettings:s,config:n};if(Yh.call(this,t,u),h){var f=new e(t,this.key,h,s,n);f.type="normalMap",this.setLink(f),t.addFile(f)}},onProcess:function(){this.state=bQ.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var e=this;this.data.onload=function(){Yh.revokeObjectURL(e.data),e.onProcessComplete()},this.data.onerror=function(){Yh.revokeObjectURL(e.data),e.onProcessError()},Yh.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var e,t=this.linkFile;t&&t.state===bQ.FILE_COMPLETE?(this.type==="image"?e=this.cache.addImage(this.key,this.data,t.data):e=this.cache.addImage(t.key,t.data,this.data),this.pendingDestroy(e),t.pendingDestroy(e)):t||(e=this.cache.addImage(this.key,this.data),this.pendingDestroy(e))}});EIe.register("image",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new M0(this,e[r]));else this.addFile(new M0(this,e,t,i));return this});PQ.exports=M0});var Ui=l((Brt,MQ)=>{var _Ie=C(),wIe=new _Ie({initialize:function(t,i,r,s){var n=[];s.forEach(function(h){h&&n.push(h)}),this.loader=t,this.type=i,this.key=r,this.multiKeyIndex=t.multiKeyIndex++,this.files=n,this.complete=!1,this.pending=n.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var a=0;a<n.length;a++)n[a].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(e){return this.files.push(e),e.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(e){var t=this.files.indexOf(e);t!==-1&&this.pending--},onFileFailed:function(e){var t=this.files.indexOf(e);t!==-1&&this.failed++}});MQ.exports=wIe});var DQ=l((Urt,FQ)=>{var CIe=C(),RIe=se(),qs=z(),LQ=Ir(),qIe=ae(),OQ=lr(),L0=Ui(),O0=new CIe({Extends:L0,initialize:function(t,i,r,s,n,a){var h,o;if(qIe(i)){var u=i;i=qs(u,"key"),h=new LQ(t,{key:i,url:qs(u,"textureURL"),extension:qs(u,"textureExtension","png"),normalMap:qs(u,"normalMap"),xhrSettings:qs(u,"textureXhrSettings")}),o=new OQ(t,{key:i,url:qs(u,"atlasURL"),extension:qs(u,"atlasExtension","json"),xhrSettings:qs(u,"atlasXhrSettings")})}else h=new LQ(t,i,r,n),o=new OQ(t,i,s,a);h.linkFile?L0.call(this,t,"atlasjson",i,[h,o,h.linkFile]):L0.call(this,t,"atlasjson",i,[h,o])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(e.key,e.data,t.data,i),t.addToCache(),this.complete=!0}}});RIe.register("aseprite",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new O0(this,e[a]),this.addFile(n.files);else n=new O0(this,e,t,i,r,s),this.addFile(n.files);return this});FQ.exports=O0});var BQ=l((krt,GQ)=>{var AIe=C(),bIe=se(),As=z(),IQ=Ir(),PIe=ae(),NQ=lr(),F0=Ui(),D0=new AIe({Extends:F0,initialize:function(t,i,r,s,n,a){var h,o;if(PIe(i)){var u=i;i=As(u,"key"),h=new IQ(t,{key:i,url:As(u,"textureURL"),extension:As(u,"textureExtension","png"),normalMap:As(u,"normalMap"),xhrSettings:As(u,"textureXhrSettings")}),o=new NQ(t,{key:i,url:As(u,"atlasURL"),extension:As(u,"atlasExtension","json"),xhrSettings:As(u,"atlasXhrSettings")})}else h=new IQ(t,i,r,n),o=new NQ(t,i,s,a);h.linkFile?F0.call(this,t,"atlasjson",i,[h,o,h.linkFile]):F0.call(this,t,"atlasjson",i,[h,o])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(e.key,e.data,t.data,i),t.pendingDestroy(),this.complete=!0}}});bIe.register("atlas",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new D0(this,e[a]),this.addFile(n.files);else n=new D0(this,e,t,i,r,s),this.addFile(n.files);return this});GQ.exports=D0});var hf=l((zrt,kQ)=>{var MIe=C(),LIe=Ie(),UQ=Ze(),OIe=se(),af=z(),FIe=ae(),DIe=Tp(),I0=new MIe({Extends:UQ,initialize:function(t,i,r,s){var n="xml";if(FIe(i)){var a=i;i=af(a,"key"),r=af(a,"url"),s=af(a,"xhrSettings"),n=af(a,"extension",n)}var h={type:"xml",cache:t.cacheManager.xml,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};UQ.call(this,t,h)},onProcess:function(){this.state=LIe.FILE_PROCESSING,this.data=DIe(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});OIe.register("xml",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new I0(this,e[r]));else this.addFile(new I0(this,e,t,i));return this});kQ.exports=I0});var VQ=l((Yrt,XQ)=>{var IIe=C(),NIe=se(),bs=z(),zQ=Ir(),GIe=ae(),N0=Ui(),YQ=hf(),G0=new IIe({Extends:N0,initialize:function(t,i,r,s,n,a){var h,o;if(GIe(i)){var u=i;i=bs(u,"key"),h=new zQ(t,{key:i,url:bs(u,"textureURL"),extension:bs(u,"textureExtension","png"),normalMap:bs(u,"normalMap"),xhrSettings:bs(u,"textureXhrSettings")}),o=new YQ(t,{key:i,url:bs(u,"atlasURL"),extension:bs(u,"atlasExtension","xml"),xhrSettings:bs(u,"atlasXhrSettings")})}else h=new zQ(t,i,r,n),o=new YQ(t,i,s,a);h.linkFile?N0.call(this,t,"atlasxml",i,[h,o,h.linkFile]):N0.call(this,t,"atlasxml",i,[h,o])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(e.key,e.data,t.data,i),t.pendingDestroy(),this.complete=!0}}});NIe.register("atlasXML",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new G0(this,e[a]),this.addFile(n.files);else n=new G0(this,e,t,i,r,s),this.addFile(n.files);return this});XQ.exports=G0});var B0=l((Xrt,KQ)=>{var BIe=C(),UIe=nn(),WQ=Ze(),HQ=z(),kIe=Uh(),zIe=ae(),YIe=new BIe({Extends:WQ,initialize:function(t,i,r,s){if(zIe(i)){var n=i;i=HQ(n,"key"),s=HQ(n,"config",s)}var a={type:"audio",cache:t.cacheManager.audio,extension:r.type,key:i,url:r.url,config:s};WQ.call(this,t,a),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var e=0;e<this.data.length;e++){var t=this.data[e];t.oncanplaythrough=null,t.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(e){var t=e.target;t.oncanplaythrough=null,t.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(UIe.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var e=this.config&&this.config.instances||1;this.filesTotal=e,this.filesLoaded=0,this.percentComplete=0;for(var t=0;t<e;t++){var i=new Audio;i.dataset||(i.dataset={}),i.dataset.name=this.key+("0"+t).slice(-2),i.dataset.used="false",this.locked?i.dataset.locked="true":(i.dataset.locked="false",i.preload="auto",i.oncanplaythrough=this.onProgress.bind(this),i.onerror=this.onError.bind(this)),this.data.push(i)}for(t=0;t<this.data.length;t++)i=this.data[t],i.src=kIe(this,this.loader.baseURL),this.locked||i.load();this.locked&&setTimeout(this.onLoad.bind(this))}});KQ.exports=YIe});var U0=l((Vrt,QQ)=>{var XIe=C(),VIe=Ie(),ZQ=Ze(),WIe=se(),cn=z(),HIe=B0(),JQ=ae(),pn=new XIe({Extends:ZQ,initialize:function(t,i,r,s,n){if(JQ(i)){var a=i;i=cn(a,"key"),s=cn(a,"xhrSettings"),n=cn(a,"context",n)}var h={type:"audio",cache:t.cacheManager.audio,extension:r.type,responseType:"arraybuffer",key:i,url:r.url,xhrSettings:s,config:{context:n}};ZQ.call(this,t,h)},onProcess:function(){this.state=VIe.FILE_PROCESSING;var e=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(t){e.data=t,e.onProcessComplete()},function(t){console.error("Error decoding audio: "+e.key+" - ",t?t.message:null),e.onProcessError()}),this.config.context=null}});pn.create=function(e,t,i,r,s){var n=e.systems.game,a=n.config.audio,h=n.device.audio;JQ(t)&&(i=cn(t,"url",[]),r=cn(t,"config",{}));var o=pn.getAudioURL(n,i);return o?h.webAudio&&!a.disableWebAudio?new pn(e,t,o,s,n.sound.context):new HIe(e,t,o,r):null};pn.getAudioURL=function(e,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=cn(t[i],"url",t[i]);if(r.indexOf("blob:")===0||r.indexOf("data:")===0)return{url:r,type:""};var s=r.match(/\.([a-zA-Z0-9]+)($|\?)/);if(s=cn(t[i],"type",s?s[1]:"").toLowerCase(),e.device.audio[s])return{url:r,type:s}}return null};WIe.register("audio",function(e,t,i,r){var s=this.systems.game,n=s.config.audio,a=s.device.audio;if(n.noAudio||!a.webAudio&&!a.audioData)return this;var h;if(Array.isArray(e))for(var o=0;o<e.length;o++)h=pn.create(this,e[o]),h&&this.addFile(h);else h=pn.create(this,e,t,i,r),h&&this.addFile(h);return this});QQ.exports=pn});var t$=l(()=>{var $Q=U0(),KIe=C(),ZIe=se(),Ps=z(),JIe=ae(),jQ=lr(),k0=Ui(),e$=new KIe({Extends:k0,initialize:function(t,i,r,s,n,a,h){if(JIe(i)){var o=i;i=Ps(o,"key"),r=Ps(o,"jsonURL"),s=Ps(o,"audioURL"),n=Ps(o,"audioConfig"),a=Ps(o,"audioXhrSettings"),h=Ps(o,"jsonXhrSettings")}var u;if(!s)u=new jQ(t,i,r,h),k0.call(this,t,"audiosprite",i,[u]),this.config.resourceLoad=!0,this.config.audioConfig=n,this.config.audioXhrSettings=a;else{var f=$Q.create(t,i,s,n,a);f&&(u=new jQ(t,i,r,h),k0.call(this,t,"audiosprite",i,[f,u]),this.config.resourceLoad=!1)}},onFileComplete:function(e){var t=this.files.indexOf(e);if(t!==-1&&(this.pending--,this.config.resourceLoad&&e.type==="json"&&e.data.hasOwnProperty("resources"))){var i=e.data.resources,r=Ps(this.config,"audioConfig"),s=Ps(this.config,"audioXhrSettings"),n=$Q.create(this.loader,e.key,i,r,s);n&&(this.addToMultiFile(n),this.loader.addFile(n))}},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1];e.addToCache(),t.addToCache(),this.complete=!0}}});ZIe.register("audioSprite",function(e,t,i,r,s,n){var a=this.systems.game,h=a.config.audio,o=a.device.audio;if(h&&h.noAudio||!o.webAudio&&!o.audioData)return this;var u;if(Array.isArray(e))for(var f=0;f<e.length;f++)u=new e$(this,e[f]),u.files&&this.addFile(u.files);else u=new e$(this,e,t,i,r,s,n),u.files&&this.addFile(u.files);return this})});var s$=l((Krt,r$)=>{var QIe=C(),$Ie=Ie(),i$=Ze(),jIe=se(),Xh=z(),eNe=ae(),z0=new QIe({Extends:i$,initialize:function(t,i,r,s,n){var a="bin";if(eNe(i)){var h=i;i=Xh(h,"key"),r=Xh(h,"url"),s=Xh(h,"xhrSettings"),a=Xh(h,"extension",a),n=Xh(h,"dataType",n)}var o={type:"binary",cache:t.cacheManager.binary,extension:a,responseType:"arraybuffer",key:i,url:r,xhrSettings:s,config:{dataType:n}};i$.call(this,t,o)},onProcess:function(){this.state=$Ie.FILE_PROCESSING;var e=this.config.dataType;this.data=e?new e(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});jIe.register("binary",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new z0(this,e[s]));else this.addFile(new z0(this,e,t,r,i));return this});r$.exports=z0});var o$=l((Zrt,h$)=>{var tNe=C(),iNe=se(),Ms=z(),n$=Ir(),rNe=ae(),Y0=Ui(),sNe=tl(),a$=hf(),X0=new tNe({Extends:Y0,initialize:function(t,i,r,s,n,a){var h,o;if(rNe(i)){var u=i;i=Ms(u,"key"),h=new n$(t,{key:i,url:Ms(u,"textureURL"),extension:Ms(u,"textureExtension","png"),normalMap:Ms(u,"normalMap"),xhrSettings:Ms(u,"textureXhrSettings")}),o=new a$(t,{key:i,url:Ms(u,"fontDataURL"),extension:Ms(u,"fontDataExtension","xml"),xhrSettings:Ms(u,"fontDataXhrSettings")})}else h=new n$(t,i,r,n),o=new a$(t,i,s,a);h.linkFile?Y0.call(this,t,"bitmapfont",i,[h,o,h.linkFile]):Y0.call(this,t,"bitmapfont",i,[h,o])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1];e.addToCache(),t.pendingDestroy();var i=e.cache.get(e.key),r=sNe(t.data,e.cache.getFrame(e.key),0,0,i);this.loader.cacheManager.bitmapFont.add(e.key,{data:r,texture:e.key,frame:null}),this.complete=!0}}});iNe.register("bitmapFont",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new X0(this,e[a]),this.addFile(n.files);else n=new X0(this,e,t,i,r,s),this.addFile(n.files);return this});h$.exports=X0});var f$=l((Jrt,l$)=>{var nNe=C(),aNe=Ie(),u$=Ze(),hNe=se(),of=z(),oNe=ae(),V0=new nNe({Extends:u$,initialize:function(t,i,r,s){var n="css";if(oNe(i)){var a=i;i=of(a,"key"),r=of(a,"url"),s=of(a,"xhrSettings"),n=of(a,"extension",n)}var h={type:"script",cache:!1,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};u$.call(this,t,h)},onProcess:function(){this.state=aNe.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});hNe.register("css",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new V0(this,e[r]));else this.addFile(new V0(this,e,t,i));return this});l$.exports=V0});var c$=l((Qrt,v$)=>{var uNe=C(),lNe=Ie(),d$=Ze(),fNe=se(),Vh=z(),dNe=ae(),uf=np(),W0=new uNe({Extends:d$,initialize:function(t,i,r,s,n){var a="glsl";if(dNe(i)){var h=i;i=Vh(h,"key"),r=Vh(h,"url"),s=Vh(h,"shaderType","fragment"),n=Vh(h,"xhrSettings"),a=Vh(h,"extension",a)}else s===void 0&&(s="fragment");var o={type:"glsl",cache:t.cacheManager.shader,extension:a,responseType:"text",key:i,url:r,config:{shaderType:s},xhrSettings:n};d$.call(this,t,o)},onProcess:function(){this.state=lNe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e=this.data.split(`
`),t=this.extractBlock(e,0);if(t)for(;t;){var i=this.getShaderName(t.header),r=this.getShaderType(t.header),s=this.getShaderUniforms(t.header),n=t.shader;if(this.cache.has(i)){var a=this.cache.get(i);r==="fragment"?a.fragmentSrc=n:a.vertexSrc=n,a.uniforms||(a.uniforms=s)}else r==="fragment"?this.cache.add(i,new uf(i,n,"",s)):this.cache.add(i,new uf(i,"",n,s));t=this.extractBlock(e,t.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new uf(this.key,this.data)):this.cache.add(this.key,new uf(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(e){for(var t=0;t<e.length;t++){var i=e[t].trim();if(i.substring(0,5)==="name:")return i.substring(5).trim()}return this.key},getShaderType:function(e){for(var t=0;t<e.length;t++){var i=e[t].trim();if(i.substring(0,5)==="type:")return i.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(e){for(var t={},i=0;i<e.length;i++){var r=e[i].trim();if(r.substring(0,8)==="uniform."){var s=r.indexOf(":");if(s){var n=r.substring(8,s);try{t[n]=JSON.parse(r.substring(s+1))}catch(a){console.warn("Invalid uniform JSON: "+n)}}}}return t},extractBlock:function(e,t){for(var i=-1,r=-1,s=-1,n=!1,a=!1,h=[],o=[],u=t;u<e.length;u++){var f=e[u].trim();if(f==="---")if(i===-1)i=u,n=!0;else if(n)r=u,n=!1,a=!0;else{a=!1;break}else n?h.push(f):a&&(o.push(f),s=u)}return!n&&r!==-1?{header:h,shader:o.join(`
`),offset:s}:null}});fNe.register("glsl",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new W0(this,e[s]));else this.addFile(new W0(this,e,t,i,r));return this});v$.exports=W0});var g$=l(($rt,m$)=>{var vNe=C(),cNe=Ie(),p$=Ze(),pNe=se(),lf=z(),mNe=ae(),H0=new vNe({Extends:p$,initialize:function(t,i,r,s){var n="html";if(mNe(i)){var a=i;i=lf(a,"key"),r=lf(a,"url"),s=lf(a,"xhrSettings"),n=lf(a,"extension",n)}var h={type:"text",cache:t.cacheManager.html,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};p$.call(this,t,h)},onProcess:function(){this.state=cNe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});pNe.register("html",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new H0(this,e[r]));else this.addFile(new H0(this,e,t,i));return this});m$.exports=H0});var T$=l((jrt,y$)=>{var gNe=C(),x$=Ie(),Wh=Ze(),xNe=se(),Ca=z(),yNe=ae(),K0=new gNe({Extends:Wh,initialize:function(t,i,r,s,n,a){s===void 0&&(s=512),n===void 0&&(n=512);var h="html";if(yNe(i)){var o=i;i=Ca(o,"key"),r=Ca(o,"url"),a=Ca(o,"xhrSettings"),h=Ca(o,"extension",h),s=Ca(o,"width",s),n=Ca(o,"height",n)}var u={type:"html",cache:t.textureManager,extension:h,responseType:"text",key:i,url:r,xhrSettings:a,config:{width:s,height:n}};Wh.call(this,t,u)},onProcess:function(){this.state=x$.FILE_PROCESSING;var e=this.config.width,t=this.config.height,i=[];i.push('<svg width="'+e+'px" height="'+t+'px" viewBox="0 0 '+e+" "+t+'" xmlns="http://www.w3.org/2000/svg">'),i.push('<foreignObject width="100%" height="100%">'),i.push('<body xmlns="http://www.w3.org/1999/xhtml">'),i.push(this.xhrLoader.responseText),i.push("</body>"),i.push("</foreignObject>"),i.push("</svg>");var r=[i.join(`
`)],s=this;try{var n=new window.Blob(r,{type:"image/svg+xml;charset=utf-8"})}catch(a){s.state=x$.FILE_ERRORED,s.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){Wh.revokeObjectURL(s.data),s.onProcessComplete()},this.data.onerror=function(){Wh.revokeObjectURL(s.data),s.onProcessError()},Wh.createObjectURL(this.data,n,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});xNe.register("htmlTexture",function(e,t,i,r,s){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new K0(this,e[n]));else this.addFile(new K0(this,e,t,i,r,s));return this});y$.exports=K0});var w$=l((est,_$)=>{var TNe=C(),ENe=se(),Ei=z(),E$=Ir(),SNe=ae(),_Ne=lr(),S$=Ui(),Z0=new TNe({Extends:S$,initialize:function(t,i,r,s,n,a,h){if(SNe(i)){var o=i;i=Ei(o,"key"),Ei(o,"url",!1)?r=Ei(o,"url"):r=Ei(o,"atlasURL"),a=Ei(o,"xhrSettings"),s=Ei(o,"path"),n=Ei(o,"baseURL"),h=Ei(o,"textureXhrSettings")}var u=new _Ne(t,i,r,a);S$.call(this,t,"multiatlas",i,[u]),this.config.path=s,this.config.baseURL=n,this.config.textureXhrSettings=h},onFileComplete:function(e){var t=this.files.indexOf(e);if(t!==-1&&(this.pending--,e.type==="json"&&e.data.hasOwnProperty("textures"))){var i=e.data.textures,r=this.config,s=this.loader,n=s.baseURL,a=s.path,h=s.prefix,o=Ei(r,"baseURL",this.baseURL),u=Ei(r,"path",this.path),f=Ei(r,"prefix",this.prefix),d=Ei(r,"textureXhrSettings");s.setBaseURL(o),s.setPath(u),s.setPrefix(f);for(var v=0;v<i.length;v++){var c=i[v].image,p="MA"+this.multiKeyIndex+"_"+c,m=new E$(s,p,c,d);if(this.addToMultiFile(m),s.addFile(m),i[v].normalMap){var x=new E$(s,p,i[v].normalMap,d);x.type="normalMap",m.setLink(x),this.addToMultiFile(x),s.addFile(x)}}s.setBaseURL(n),s.setPath(a),s.setPrefix(h)}},addToCache:function(){if(this.isReadyToProcess()){for(var e=this.files[0],t=[],i=[],r=[],s=1;s<this.files.length;s++){var n=this.files[s];if(n.type!=="normalMap")for(var a=n.key.indexOf("_"),h=n.key.substr(a+1),o=n.data,u=0;u<e.data.textures.length;u++){var f=e.data.textures[u];if(f.image===h){i.push(o),t.push(f),n.linkFile&&r.push(n.linkFile.data);break}}}for(r.length===0&&(r=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,i,t,r),this.complete=!0,s=0;s<this.files.length;s++)this.files[s].pendingDestroy()}}});ENe.register("multiatlas",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new Z0(this,e[a]),this.addFile(n.files);else n=new Z0(this,e,t,i,r,s),this.addFile(n.files);return this});_$.exports=Z0});var Q0=l((tst,R$)=>{var wNe=C(),CNe=Ie(),C$=Ze(),RNe=se(),ff=z(),qNe=ae(),J0=new wNe({Extends:C$,initialize:function(t,i,r,s){var n="js";if(qNe(i)){var a=i;i=ff(a,"key"),r=ff(a,"url"),s=ff(a,"xhrSettings"),n=ff(a,"extension",n)}var h={type:"script",cache:!1,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};C$.call(this,t,h)},onProcess:function(){this.state=CNe.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});RNe.register("script",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new J0(this,e[r]));else this.addFile(new J0(this,e,t,i));return this});R$.exports=J0});var b$=l((ist,A$)=>{var ANe=C(),bNe=se(),df=z(),PNe=ae(),q$=Ui(),MNe=Q0(),$0=new ANe({Extends:q$,initialize:function(t,i,r,s){var n="js",a=[];if(PNe(i)){var h=i;i=df(h,"key"),r=df(h,"url"),s=df(h,"xhrSettings"),n=df(h,"extension",n)}Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++){var u=new MNe(t,{key:i+"_"+o.toString(),url:r[o],extension:n,xhrSettings:s});u.onProcess=function(){this.onProcessComplete()},a.push(u)}q$.call(this,t,"scripts",i,a)},addToCache:function(){if(this.isReadyToProcess()){for(var e=0;e<this.files.length;e++){var t=this.files[e];t.data=document.createElement("script"),t.data.language="javascript",t.data.type="text/javascript",t.data.defer=!1,t.data.text=t.xhrLoader.responseText,document.head.appendChild(t.data)}this.complete=!0}}});bNe.register("scripts",function(e,t,i){var r;if(Array.isArray(e))for(var s=0;s<e.length;s++)r=new $0(this,e[s]),this.addFile(r.files);else r=new $0(this,e,t,i),this.addFile(r.files);return this});A$.exports=$0});var vf=l((rst,M$)=>{var LNe=C(),ONe=Ie(),P$=Ze(),FNe=se(),Ra=z(),DNe=ae(),j0=new LNe({Extends:P$,initialize:function(t,i,r,s){var n="text",a="txt",h=t.cacheManager.text;if(DNe(i)){var o=i;i=Ra(o,"key"),r=Ra(o,"url"),s=Ra(o,"xhrSettings"),a=Ra(o,"extension",a),n=Ra(o,"type",n),h=Ra(o,"cache",h)}var u={type:n,cache:h,extension:a,responseType:"text",key:i,url:r,xhrSettings:s};P$.call(this,t,u)},onProcess:function(){this.state=ONe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});FNe.register("text",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new j0(this,e[r]));else this.addFile(new j0(this,e,t,i));return this});M$.exports=j0});var F$=l((sst,O$)=>{var INe=C(),NNe=se(),Ls=z(),GNe=ae(),L$=Ui(),BNe=Zg(),UNe=Jg(),cf=vf(),ex=new INe({Extends:L$,initialize:function(t,i,r,s,n,a){var h,o,u=t.cacheManager.obj;if(GNe(i)){var f=i;i=Ls(f,"key"),h=new cf(t,{key:i,type:"obj",cache:u,url:Ls(f,"url"),extension:Ls(f,"extension","obj"),xhrSettings:Ls(f,"xhrSettings"),config:{flipUV:Ls(f,"flipUV",n)}}),s=Ls(f,"matURL"),s&&(o=new cf(t,{key:i,type:"mat",cache:u,url:s,extension:Ls(f,"matExtension","mat"),xhrSettings:Ls(f,"xhrSettings")}))}else h=new cf(t,{key:i,url:r,type:"obj",cache:u,extension:"obj",xhrSettings:a,config:{flipUV:n}}),s&&(o=new cf(t,{key:i,url:s,type:"mat",cache:u,extension:"mat",xhrSettings:a}));L$.call(this,t,"obj",i,[h,o])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=BNe(e.data,e.config.flipUV);t&&(i.materials=UNe(t.data)),e.cache.add(e.key,i),this.complete=!0}}});NNe.register("obj",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new ex(this,e[a]),this.addFile(n.files);else n=new ex(this,e,t,i,r,s),this.addFile(n.files);return this});O$.exports=ex});var G$=l((nst,N$)=>{var kNe=C(),D$=Ie(),zNe=se(),I$=lr(),tx=new kNe({Extends:I$,initialize:function(t,i,r,s,n){I$.call(this,t,i,r,s,n),this.type="packfile"},onProcess:function(){this.state!==D$.FILE_POPULATED&&(this.state=D$.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});zNe.register("pack",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new tx(this,e[s]));else this.addFile(new tx(this,e,t,r,i));return this});N$.exports=tx});var k$=l((ast,U$)=>{var YNe=C(),ix=Ie(),B$=Ze(),XNe=se(),Os=z(),VNe=ae(),rx=new YNe({Extends:B$,initialize:function(t,i,r,s,n,a){var h="js";if(VNe(i)){var o=i;i=Os(o,"key"),r=Os(o,"url"),a=Os(o,"xhrSettings"),h=Os(o,"extension",h),s=Os(o,"start"),n=Os(o,"mapping")}var u={type:"plugin",cache:!1,extension:h,responseType:"text",key:i,url:r,xhrSettings:a,config:{start:s,mapping:n}};B$.call(this,t,u),typeof r=="function"&&(this.data=r,this.state=ix.FILE_POPULATED)},onProcess:function(){var e=this.loader.systems.plugins,t=this.config,i=Os(t,"start",!1),r=Os(t,"mapping",null);if(this.state===ix.FILE_POPULATED)e.install(this.key,this.data,i,r);else{this.state=ix.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var s=e.install(this.key,window[this.key],i,r);(i||r)&&(this.loader.systems[r]=s,this.loader.scene[r]=s)}this.onProcessComplete()}});XNe.register("plugin",function(e,t,i,r,s){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new rx(this,e[n]));else this.addFile(new rx(this,e,t,i,r,s));return this});U$.exports=rx});var X$=l((hst,Y$)=>{var WNe=C(),HNe=Ie(),z$=Ze(),KNe=se(),pf=z(),ZNe=ae(),sx=new WNe({Extends:z$,initialize:function(t,i,r,s){var n="js";if(ZNe(i)){var a=i;i=pf(a,"key"),r=pf(a,"url"),s=pf(a,"xhrSettings"),n=pf(a,"extension",n)}var h={type:"text",extension:n,responseType:"text",key:i,url:r,xhrSettings:s};z$.call(this,t,h)},onProcess:function(){this.state=HNe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),t=eval;this.loader.sceneManager.add(this.key,t(e)),this.complete=!0}});KNe.register("sceneFile",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new sx(this,e[r]));else this.addFile(new sx(this,e,t,i));return this});Y$.exports=sx});var H$=l((ost,W$)=>{var JNe=C(),nx=Ie(),V$=Ze(),QNe=se(),Fs=z(),$Ne=ae(),ax=new JNe({Extends:V$,initialize:function(t,i,r,s,n,a){var h="js";if($Ne(i)){var o=i;i=Fs(o,"key"),r=Fs(o,"url"),a=Fs(o,"xhrSettings"),h=Fs(o,"extension",h),s=Fs(o,"systemKey"),n=Fs(o,"sceneKey")}var u={type:"scenePlugin",cache:!1,extension:h,responseType:"text",key:i,url:r,xhrSettings:a,config:{systemKey:s,sceneKey:n}};V$.call(this,t,u),typeof r=="function"&&(this.data=r,this.state=nx.FILE_POPULATED)},onProcess:function(){var e=this.loader.systems.plugins,t=this.config,i=this.key,r=Fs(t,"systemKey",i),s=Fs(t,"sceneKey",i);this.state===nx.FILE_POPULATED?e.installScenePlugin(r,this.data,s,this.loader.scene,!0):(this.state=nx.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),e.installScenePlugin(r,window[this.key],s,this.loader.scene,!0)),this.onProcessComplete()}});QNe.register("scenePlugin",function(e,t,i,r,s){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new ax(this,e[n]));else this.addFile(new ax(this,e,t,i,r,s));return this});W$.exports=ax});var J$=l((ust,Z$)=>{var jNe=C(),eGe=se(),K$=Ir(),hx=new jNe({Extends:K$,initialize:function(t,i,r,s,n){K$.call(this,t,i,r,n,s),this.type="spritesheet"},addToCache:function(){var e=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(e)}});eGe.register("spritesheet",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new hx(this,e[s]));else this.addFile(new hx(this,e,t,i,r));return this});Z$.exports=hx});var $$=l((lst,Q$)=>{var tGe=C(),iGe=Ie(),Hh=Ze(),rGe=se(),Ds=z(),sGe=ae(),ox=new tGe({Extends:Hh,initialize:function(t,i,r,s,n){var a="svg";if(sGe(i)){var h=i;i=Ds(h,"key"),r=Ds(h,"url"),s=Ds(h,"svgConfig",{}),n=Ds(h,"xhrSettings"),a=Ds(h,"extension",a)}var o={type:"svg",cache:t.textureManager,extension:a,responseType:"text",key:i,url:r,xhrSettings:n,config:{width:Ds(s,"width"),height:Ds(s,"height"),scale:Ds(s,"scale")}};Hh.call(this,t,o)},onProcess:function(){this.state=iGe.FILE_PROCESSING;var e=this.xhrLoader.responseText,t=[e],i=this.config.width,r=this.config.height,s=this.config.scale;e:if(i&&r||s){var n=null,a=new DOMParser;n=a.parseFromString(e,"text/xml");var h=n.getElementsByTagName("svg")[0],o=h.hasAttribute("viewBox"),u=parseFloat(h.getAttribute("width")),f=parseFloat(h.getAttribute("height"));if(!o&&u&&f)h.setAttribute("viewBox","0  0 "+u+" "+f);else if(o&&!u&&!f){var d=h.getAttribute("viewBox").split(/\s+|,/);u=d[2],f=d[3]}if(s)if(u&&f)i=u*s,r=f*s;else break e;h.setAttribute("width",i.toString()+"px"),h.setAttribute("height",r.toString()+"px"),t=[new XMLSerializer().serializeToString(h)]}try{var v=new window.Blob(t,{type:"image/svg+xml;charset=utf-8"})}catch(m){this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var c=this,p=!1;this.data.onload=function(){p||Hh.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){p?c.onProcessError():(p=!0,Hh.revokeObjectURL(c.data),c.data.src="data:image/svg+xml,"+encodeURIComponent(t.join("")))},Hh.createObjectURL(this.data,v,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});rGe.register("svg",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new ox(this,e[s]));else this.addFile(new ox(this,e,t,i,r));return this});Q$.exports=ox});var mf=l((fst,j$)=>{j$.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}});var ij=l((dst,tj)=>{var nGe=C(),aGe=Ie(),ej=Ze(),hGe=se(),gf=z(),oGe=ae(),uGe=mf(),ux=new nGe({Extends:ej,initialize:function(t,i,r,s){var n="csv";if(oGe(i)){var a=i;i=gf(a,"key"),r=gf(a,"url"),s=gf(a,"xhrSettings"),n=gf(a,"extension",n)}var h={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};ej.call(this,t,h),this.tilemapFormat=uGe.CSV},onProcess:function(){this.state=aGe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});hGe.register("tilemapCSV",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new ux(this,e[r]));else this.addFile(new ux(this,e,t,i));return this});tj.exports=ux});var nj=l((vst,sj)=>{var lGe=C(),fGe=se(),rj=lr(),dGe=mf(),lx=new lGe({Extends:rj,initialize:function(t,i,r,s){rj.call(this,t,i,r,s),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var e={format:dGe.WELTMEISTER,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});fGe.register("tilemapImpact",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new lx(this,e[r]));else this.addFile(new lx(this,e,t,i));return this});sj.exports=lx});var oj=l((cst,hj)=>{var vGe=C(),cGe=se(),aj=lr(),pGe=mf(),fx=new vGe({Extends:aj,initialize:function(t,i,r,s){aj.call(this,t,i,r,s),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var e={format:pGe.TILED_JSON,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});cGe.register("tilemapTiledJSON",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new fx(this,e[r]));else this.addFile(new fx(this,e,t,i));return this});hj.exports=fx});var dj=l((pst,fj)=>{var mGe=C(),gGe=se(),Is=z(),uj=Ir(),xGe=ae(),dx=Ui(),lj=vf(),vx=new mGe({Extends:dx,initialize:function(t,i,r,s,n,a){var h,o;if(xGe(i)){var u=i;i=Is(u,"key"),h=new uj(t,{key:i,url:Is(u,"textureURL"),extension:Is(u,"textureExtension","png"),normalMap:Is(u,"normalMap"),xhrSettings:Is(u,"textureXhrSettings")}),o=new lj(t,{key:i,url:Is(u,"atlasURL"),extension:Is(u,"atlasExtension","txt"),xhrSettings:Is(u,"atlasXhrSettings")})}else h=new uj(t,i,r,n),o=new lj(t,i,s,a);h.linkFile?dx.call(this,t,"unityatlas",i,[h,o,h.linkFile]):dx.call(this,t,"unityatlas",i,[h,o])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(e.key,e.data,t.data,i),t.pendingDestroy(),this.complete=!0}}});gGe.register("unityAtlas",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new vx(this,e[a]),this.addFile(n.files);else n=new vx(this,e,t,i,r,s),this.addFile(n.files);return this});fj.exports=vx});var cj=l((mst,vj)=>{var yGe=C(),TGe=Ie(),Kh=Ze(),EGe=se(),SGe=Uh(),Ns=z(),_Ge=ae(),mn=new yGe({Extends:Kh,initialize:function(t,i,r,s,n,a,h){s===void 0&&(s="loadeddata"),n===void 0&&(n=!1),a===void 0&&(a=!1),s!=="loadeddata"&&s!=="canplay"&&s!=="canplaythrough"&&(s="loadeddata");var o={type:"video",cache:t.cacheManager.video,extension:r.type,responseType:"blob",key:i,url:r.url,xhrSettings:h,config:{loadEvent:s,asBlob:n,noAudio:a}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),Kh.call(this,t,o)},onProcess:function(){if(this.state=TGe.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var e=this.createVideoElement();this.data=e;var t=this;this.data.onloadeddata=function(){t.onProcessComplete()},this.data.onerror=function(){Kh.revokeObjectURL(t.data),t.onProcessError()},Kh.createObjectURL(e,this.xhrLoader.response,""),e.load()},createVideoElement:function(){var e=document.createElement("video");return e.controls=!1,e.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(e.muted=!0,e.defaultMuted=!0,e.setAttribute("autoplay","autoplay")),e.setAttribute("playsinline","playsinline"),e.setAttribute("preload","auto"),e},onVideoLoadHandler:function(e){var t=e.target;t.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),t.removeEventListener("error",this.onErrorCallback,!0),this.data=t,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(e){var t=e.target;t&&(t.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),t.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var e=this.config.loadEvent;if(this.config.asBlob)Kh.prototype.load.call(this);else{this.percentComplete=0;var t=this.createVideoElement();t.addEventListener(e,this.onLoadCallback,!0),t.addEventListener("error",this.onErrorCallback,!0),t.src=SGe(this,this.loader.baseURL),t.load()}}});mn.create=function(e,t,i,r,s,n,a){var h=e.systems.game;_Ge(t)&&(i=Ns(t,"url",[]),r=Ns(t,"loadEvent","loadeddata"),s=Ns(t,"asBlob",!1),n=Ns(t,"noAudio",!1),a=Ns(t,"xhrSettings"),t=Ns(t,"key"));var o=mn.getVideoURL(h,i);if(o)return new mn(e,t,o,r,s,n,a)};mn.getVideoURL=function(e,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=Ns(t[i],"url",t[i]);if(r.indexOf("blob:")===0)return{url:r,type:""};var s;if(r.indexOf("data:")===0?s=r.split(",")[0].match(/\/(.*?);/):s=r.match(/\.([a-zA-Z0-9]+)($|\?)/),s=Ns(t[i],"type",s?s[1]:"").toLowerCase(),e.device.video[s])return{url:r,type:s}}return null};EGe.register("video",function(e,t,i,r,s,n){var a;if(Array.isArray(e))for(var h=0;h<e.length;h++)a=mn.create(this,e[h]),a&&this.addFile(a);else a=mn.create(this,e,t,i,r,s,n),a&&this.addFile(a);return this});vj.exports=mn});var mj=l((gst,pj)=>{pj.exports={AnimationJSONFile:AQ(),AsepriteFile:DQ(),AtlasJSONFile:BQ(),AtlasXMLFile:VQ(),AudioFile:U0(),AudioSpriteFile:t$(),BinaryFile:s$(),BitmapFontFile:o$(),CSSFile:f$(),GLSLFile:c$(),HTML5AudioFile:B0(),HTMLFile:g$(),HTMLTextureFile:T$(),ImageFile:Ir(),JSONFile:lr(),MultiAtlasFile:w$(),MultiScriptFile:b$(),OBJFile:F$(),PackFile:G$(),PluginFile:k$(),SceneFile:X$(),ScenePluginFile:H$(),ScriptFile:Q0(),SpriteSheetFile:J$(),SVGFile:$$(),TextFile:vf(),TilemapCSVFile:ij(),TilemapImpactFile:nj(),TilemapJSONFile:oj(),UnityAtlasFile:dj(),VideoFile:cj(),XMLFile:hf()}});var Tj=l((xst,yj)=>{var wGe=C(),Bt=Ie(),xf=ll(),gj=ue(),gn=nn(),CGe=se(),rt=z(),RGe=ct(),fr=Ge(),qGe=kh(),xj=new wGe({Extends:gj,initialize:function(t){gj.call(this);var i=t.sys.game.config,r=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,CGe.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(rt(r,"baseURL",i.loaderBaseURL)),this.setPath(rt(r,"path",i.loaderPath)),this.setPrefix(rt(r,"prefix",i.loaderPrefix)),this.maxParallelDownloads=rt(r,"maxParallelDownloads",i.loaderMaxParallelDownloads),this.xhr=qGe(rt(r,"responseType",i.loaderResponseType),rt(r,"async",i.loaderAsync),rt(r,"user",i.loaderUser),rt(r,"password",i.loaderPassword),rt(r,"timeout",i.loaderTimeout),rt(r,"withCredentials",i.loaderWithCredentials)),this.crossOrigin=rt(r,"crossOrigin",i.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new xf,this.inflight=new xf,this.queue=new xf,this._deleteQueue=new xf,this.totalFailed=0,this.totalComplete=0,this.state=Bt.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(fr.BOOT,this.boot,this),t.sys.events.on(fr.START,this.pluginStart,this)},boot:function(){this.systems.events.once(fr.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(fr.SHUTDOWN,this.shutdown,this)},setBaseURL:function(e){return e===void 0&&(e=""),e!==""&&e.substr(-1)!=="/"&&(e=e.concat("/")),this.baseURL=e,this},setPath:function(e){return e===void 0&&(e=""),e!==""&&e.substr(-1)!=="/"&&(e=e.concat("/")),this.path=e,this},setPrefix:function(e){return e===void 0&&(e=""),this.prefix=e,this},setCORS:function(e){return this.crossOrigin=e,this},addFile:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];this.keyExists(i)||(this.list.set(i),this.emit(gn.ADD,i.key,i.type,this,i),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(e){var t=e.hasCacheConflict();return t||this.list.iterate(function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1}),!t&&this.isLoading()&&(this.inflight.iterate(function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1}),this.queue.iterate(function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1})),t},addPack:function(e,t){t&&e.hasOwnProperty(t)&&(e={packKey:e[t]});var i=0,r=this.baseURL,s=this.path,n=this.prefix;for(var a in e)if(!!Object.prototype.hasOwnProperty.call(e,a)){var h=e[a],o=rt(h,"baseURL",r),u=rt(h,"path",s),f=rt(h,"prefix",n),d=rt(h,"files",null),v=rt(h,"defaultType","void");if(Array.isArray(d)){this.setBaseURL(o),this.setPath(u),this.setPrefix(f);for(var c=0;c<d.length;c++){var p=d[c],m=p.hasOwnProperty("type")?p.type:v;this[m]&&(this[m](p),i++)}}}return this.setBaseURL(r),this.setPath(s),this.setPrefix(n),i>0},isLoading:function(){return this.state===Bt.LOADER_LOADING||this.state===Bt.LOADER_PROCESSING},isReady:function(){return this.state===Bt.LOADER_IDLE||this.state===Bt.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(gn.START,this),this.list.size===0?this.loadComplete():(this.state=Bt.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(fr.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(gn.PROGRESS,this.progress)},update:function(){this.state===Bt.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(e){if((e.state===Bt.FILE_POPULATED||e.state===Bt.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(e),this.list.delete(e),e.crossOrigin||(e.crossOrigin=this.crossOrigin),e.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(e,t){!this.inflight||(this.inflight.delete(e),this.updateProgress(),t?(this.totalComplete++,this.queue.set(e),this.emit(gn.FILE_LOAD,e),e.onProcess()):(this.totalFailed++,this._deleteQueue.set(e),this.emit(gn.FILE_LOAD_ERROR,e),this.fileProcessComplete(e)))},fileProcessComplete:function(e){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(e.state===Bt.FILE_ERRORED?e.multiFile&&e.multiFile.onFileFailed(e):e.state===Bt.FILE_COMPLETE&&(e.multiFile?e.multiFile.isReadyToProcess()&&e.multiFile.addToCache():e.addToCache()),this.queue.delete(e),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(gn.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=Bt.LOADER_COMPLETE,this.systems.events.off(fr.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(gn.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(e){this._deleteQueue.set(e)},saveJSON:function(e,t){return this.save(JSON.stringify(e),t)},save:function(e,t,i){t===void 0&&(t="file.json"),i===void 0&&(i="application/json");var r=new Blob([e],{type:i}),s=URL.createObjectURL(r),n=document.createElement("a");return n.download=t,n.textContent="Download "+t,n.href=s,n.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var e=this.systems.game.config,t=this.systems.settings.loader;this.setBaseURL(rt(t,"baseURL",e.loaderBaseURL)),this.setPath(rt(t,"path",e.loaderPath)),this.setPrefix(rt(t,"prefix",e.loaderPrefix)),this.state=Bt.LOADER_IDLE},shutdown:function(){this.reset(),this.state=Bt.LOADER_SHUTDOWN,this.systems.events.off(fr.UPDATE,this.update,this),this.systems.events.off(fr.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=Bt.LOADER_DESTROYED,this.systems.events.off(fr.UPDATE,this.update,this),this.systems.events.off(fr.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});RGe.register("Loader",xj,"load");yj.exports=xj});var Sj=l((yst,Ej)=>{var AGe=Ie(),bGe=Ye(),cx={Events:nn(),FileTypes:mj(),File:Ze(),FileTypesManager:se(),GetURL:Uh(),LoaderPlugin:Tj(),MergeXHRSettings:nf(),MultiFile:Ui(),XHRLoader:w0(),XHRSettings:kh()};cx=bGe(!1,cx,AGe);Ej.exports=cx});var px=l((Tst,_j)=>{var PGe=C(),MGe=new PGe({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});_j.exports=MGe});var Rj=l((Est,Cj)=>{var wj=px(),LGe=C(),OGe=Ge(),FGe=new LGe({Extends:wj,initialize:function(t,i,r){wj.call(this,i),this.scene=t,this.systems=t.sys,this.pluginKey=r,t.sys.events.once(OGe.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});Cj.exports=FGe});var Aj=l((Sst,qj)=>{qj.exports={BasePlugin:px(),DefaultPlugins:lu(),PluginCache:ct(),PluginManager:Lp(),ScenePlugin:Rj()}});var Pj=l((_st,bj)=>{bj.exports={CanvasRenderer:xc(),GetBlendModes:mc(),SetTransform:wt()}});var Lj=l((wst,Mj)=>{Mj.exports={Canvas:pc(),WebGL:Hc()}});var Fj=l((Cst,Oj)=>{Oj.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)});var Ij=l((Rst,Dj)=>{var DGe=C(),IGe=gu(),yf=z(),NGe=Fj(),GGe=kc(),mx=Qi(),BGe=new DGe({Extends:mx,initialize:function(t){t.renderTarget=yf(t,"renderTarget",1),t.fragShader=yf(t,"fragShader",NGe),t.vertShader=yf(t,"vertShader",GGe),t.attributes=yf(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],mx.call(this,t),this.isPostFX=!0,this.gameObject,this.colorMatrix=new IGe,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){mx.prototype.boot.call(this);var e=this.manager.UTILITY_PIPELINE;this.fullFrame1=e.fullFrame1,this.fullFrame2=e.fullFrame2,this.halfFrame1=e.halfFrame1,this.halfFrame2=e.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(e){this.bindAndDraw(e)},copyFrame:function(e,t,i,r,s){this.manager.copyFrame(e,t,i,r,s)},copyToGame:function(e){this.manager.copyToGame(e)},drawFrame:function(e,t,i){this.manager.drawFrame(e,t,i,this.colorMatrix)},blendFrames:function(e,t,i,r,s){this.manager.blendFrames(e,t,i,r,s)},blendFramesAdditive:function(e,t,i,r,s){this.manager.blendFramesAdditive(e,t,i,r,s)},clearFrame:function(e,t){this.manager.clearFrame(e,t)},blitFrame:function(e,t,i,r,s,n){this.manager.blitFrame(e,t,i,r,s,n)},copyFrameRect:function(e,t,i,r,s,n,a,h){this.manager.copyFrameRect(e,t,i,r,s,n,a,h)},bindAndDraw:function(e,t,i,r,s){i===void 0&&(i=!0),r===void 0&&(r=!0);var n=this.gl,a=this.renderer;this.bind(s),this.set1i("uMainSampler",0),t?(n.viewport(0,0,t.width,t.height),n.bindFramebuffer(n.FRAMEBUFFER,t.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t.texture,0),i&&(r?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT))):(a.popFramebuffer(!1,!1,!1),a.currentFramebuffer||n.viewport(0,0,a.width,a.height)),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.texture),n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.STATIC_DRAW),n.drawArrays(n.TRIANGLES,0,6),t?(n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null)):a.resetTextures()}});Dj.exports=BGe});var Gj=l((qst,Nj)=>{var UGe=Ks(),kGe=Ye(),gx={BitmapMaskPipeline:_c(),Events:yc(),GraphicsPipeline:Pc(),LightPipeline:Ic(),MultiPipeline:Bn(),PointLightPipeline:Gc(),PostFXPipeline:Ij(),RopePipeline:Bc(),SinglePipeline:Uc(),UtilityPipeline:Yc()};gx=kGe(!1,gx,UGe);Nj.exports=gx});var Uj=l((Ast,Bj)=>{var zGe=Nn(),YGe=Ye(),xx={PipelineManager:Vc(),Pipelines:Gj(),RenderTarget:ah(),Utils:Te(),WebGLPipeline:Qi(),WebGLRenderer:Kc(),WebGLShader:Ec()};xx=YGe(!1,xx,zGe);Bj.exports=xx});var zj=l((bst,kj)=>{kj.exports={Canvas:Pj(),Events:Hs(),Snapshot:Lj(),WebGL:Uj()}});var Xj=l((Pst,Yj)=>{var Tf=Ye(),Ef=qu(),Nr={Center:cp(),Events:Mn(),Orientation:pp(),ScaleManager:Fp(),ScaleModes:mp(),Zoom:gp()};Nr=Tf(!1,Nr,Ef.CENTER);Nr=Tf(!1,Nr,Ef.ORIENTATION);Nr=Tf(!1,Nr,Ef.SCALE_MODE);Nr=Tf(!1,Nr,Ef.ZOOM);Yj.exports=Nr});var Hj=l((Mst,Wj)=>{var XGe=Le(),VGe=C(),Si=Ge(),ki=z(),WGe=ct(),Vj=new VGe({initialize:function(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(Si.BOOT,this.boot,this),t.sys.events.on(Si.START,this.pluginStart,this)},boot:function(){this.systems.events.once(Si.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(Si.SHUTDOWN,this.shutdown,this)},start:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",e,t),this},restart:function(e){var t=this.key;return this.manager.queueOp("stop",t),this.manager.queueOp("start",t,e),this},transition:function(e){e===void 0&&(e={});var t=ki(e,"target",!1),i=this.manager.getScene(t);if(!t||!this.checkValidTransition(i))return!1;var r=ki(e,"duration",1e3);this._elapsed=0,this._target=i,this._duration=r,this._willSleep=ki(e,"sleep",!1),this._willRemove=ki(e,"remove",!1);var s=ki(e,"onUpdate",null);s&&(this._onUpdate=s,this._onUpdateScope=ki(e,"onUpdateScope",this.scene));var n=ki(e,"allowInput",!1);this.settings.transitionAllowInput=n;var a=i.sys.settings;return a.isTransition=!0,a.transitionFrom=this.scene,a.transitionDuration=r,a.transitionAllowInput=n,ki(e,"moveAbove",!1)?this.manager.moveAbove(this.key,t):ki(e,"moveBelow",!1)&&this.manager.moveBelow(this.key,t),i.sys.isSleeping()?i.sys.wake(ki(e,"data")):this.manager.start(t,ki(e,"data")),this.systems.events.emit(Si.TRANSITION_OUT,i,r),this.systems.events.on(Si.UPDATE,this.step,this),!0},checkValidTransition:function(e){return!(!e||e.sys.isActive()||e.sys.isTransitioning()||e===this.scene||this.systems.isTransitioning())},step:function(e,t){this._elapsed+=t,this.transitionProgress=XGe(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var e=this._target.sys,t=this._target.sys.settings;this.systems.events.off(Si.UPDATE,this.step,this),e.events.emit(Si.TRANSITION_COMPLETE,this.scene),t.isTransition=!1,t.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(e,t,i,r){return this.manager.add(e,t,i,r)},launch:function(e,t){return e&&e!==this.key&&this.manager.queueOp("start",e,t),this},run:function(e,t){return e&&e!==this.key&&this.manager.queueOp("run",e,t),this},pause:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("pause",e,t),this},resume:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("resume",e,t),this},sleep:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("sleep",e,t),this},wake:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("wake",e,t),this},switch:function(e){return e!==this.key&&this.manager.queueOp("switch",this.key,e),this},stop:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("stop",e,t),this},setActive:function(e,t,i){t===void 0&&(t=this.key);var r=this.manager.getScene(t);return r&&r.sys.setActive(e,i),this},setVisible:function(e,t){t===void 0&&(t=this.key);var i=this.manager.getScene(t);return i&&i.sys.setVisible(e),this},isSleeping:function(e){return e===void 0&&(e=this.key),this.manager.isSleeping(e)},isActive:function(e){return e===void 0&&(e=this.key),this.manager.isActive(e)},isPaused:function(e){return e===void 0&&(e=this.key),this.manager.isPaused(e)},isVisible:function(e){return e===void 0&&(e=this.key),this.manager.isVisible(e)},swapPosition:function(e,t){return t===void 0&&(t=this.key),e!==t&&this.manager.swapPosition(e,t),this},moveAbove:function(e,t){return t===void 0&&(t=this.key),e!==t&&this.manager.moveAbove(e,t),this},moveBelow:function(e,t){return t===void 0&&(t=this.key),e!==t&&this.manager.moveBelow(e,t),this},remove:function(e){return e===void 0&&(e=this.key),this.manager.remove(e),this},moveUp:function(e){return e===void 0&&(e=this.key),this.manager.moveUp(e),this},moveDown:function(e){return e===void 0&&(e=this.key),this.manager.moveDown(e),this},bringToTop:function(e){return e===void 0&&(e=this.key),this.manager.bringToTop(e),this},sendToBack:function(e){return e===void 0&&(e=this.key),this.manager.sendToBack(e),this},get:function(e){return this.manager.getScene(e)},getIndex:function(e){return e===void 0&&(e=this.key),this.manager.getIndex(e)},shutdown:function(){var e=this.systems.events;e.off(Si.SHUTDOWN,this.shutdown,this),e.off(Si.POST_UPDATE,this.step,this),e.off(Si.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(Si.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});WGe.register("ScenePlugin",Vj,"scenePlugin");Wj.exports=Vj});var Zj=l((Lst,Kj)=>{var HGe=gh(),KGe=Ye(),yx={Events:Ge(),GetPhysicsPlugins:Dp(),GetScenePlugins:Ip(),SceneManager:zp(),ScenePlugin:Hj(),Settings:Bp(),Systems:zu()};yx=KGe(!1,yx,HGe);Kj.exports=yx});var eee=l((Ost,jj)=>{var ZGe=tm();function wf(e){var t=[".left",".top",".right",".bottom"];if(!(this instanceof wf))return new wf(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}wf.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!_f(e,t))return i;for(var s=[],n,a,h,o;t;){for(n=0,a=t.children.length;n<a;n++)h=t.children[n],o=t.leaf?r(h):h,_f(e,o)&&(t.leaf?i.push(h):Ex(e,o)?this._all(h,i):s.push(h));t=s.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!_f(e,t))return!1;for(var r=[],s,n,a,h;t;){for(s=0,n=t.children.length;s<n;s++)if(a=t.children[s],h=t.leaf?i(a):a,_f(e,h)){if(t.leaf||Ex(e,h))return!0;r.push(a)}t=r.pop()}return!1},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=r;else if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Aa([]),this},remove:function(e,t){if(!e)return this;for(var i=this.data,r=this.toBBox(e),s=[],n=[],a,h,o,u;i||s.length;){if(i||(i=s.pop(),h=s[s.length-1],a=n.pop(),u=!0),i.leaf&&(o=JGe(e,i.children,t),o!==-1))return i.children.splice(o,1),s.push(i),this._condense(s),this;!u&&!i.leaf&&Ex(i,r)?(s.push(i),n.push(a),a=0,h=i,i=i.children[0]):h?(a++,i=h.children[a],u=!1):i=null}return this},toBBox:function(e){return e},compareMinX:Jj,compareMinY:Qj,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var s=i-t+1,n=this._maxEntries,a;if(s<=n)return a=Aa(e.slice(t,i+1)),qa(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(n)),n=Math.ceil(s/Math.pow(n,r-1))),a=Aa([]),a.leaf=!1,a.height=r;var h=Math.ceil(s/n),o=h*Math.ceil(Math.sqrt(n)),u,f,d,v;for($j(e,t,i,o,this.compareMinX),u=t;u<=i;u+=o)for(d=Math.min(u+o-1,i),$j(e,u,d,h,this.compareMinY),f=u;f<=d;f+=h)v=Math.min(f+h-1,d),a.children.push(this._build(e,f,v,r-1));return qa(a,this.toBBox),a},_chooseSubtree:function(e,t,i,r){for(var s,n,a,h,o,u,f,d;r.push(t),!(t.leaf||r.length-1===i);){for(f=d=1/0,s=0,n=t.children.length;s<n;s++)a=t.children[s],o=Tx(a),u=QGe(e,a)-o,u<d?(d=u,f=o<f?o:f,h=a):u===d&&o<f&&(f=o,h=a);t=h||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,s=i?e:r(e),n=[],a=this._chooseSubtree(s,this.data,t,n);for(a.children.push(e),Jh(a,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)},_split:function(e,t){var i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var n=this._chooseSplitIndex(i,s,r),a=Aa(i.children.splice(n,i.children.length-n));a.height=i.height,a.leaf=i.leaf,qa(i,this.toBBox),qa(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(e,t){this.data=Aa([e,t]),this.data.height=e.height+1,this.data.leaf=!1,qa(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,s,n,a,h,o,u,f;for(o=u=1/0,r=t;r<=i-t;r++)s=Zh(e,0,r,this.toBBox),n=Zh(e,r,i,this.toBBox),a=$Ge(s,n),h=Tx(s)+Tx(n),a<o?(o=a,f=r,u=h<u?h:u):a===o&&h<u&&(u=h,f=r);return f},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:Jj,s=e.leaf?this.compareMinY:Qj,n=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,s);n<a&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var s=this.toBBox,n=Zh(e,0,t,s),a=Zh(e,i-t,i,s),h=Sf(n)+Sf(a),o,u;for(o=t;o<i-t;o++)u=e.children[o],Jh(n,e.leaf?s(u):u),h+=Sf(n);for(o=i-t-1;o>=t;o--)u=e.children[o],Jh(a,e.leaf?s(u):u),h+=Sf(a);return h},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)Jh(t[r],e)},_condense:function(e){for(var t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():qa(e[t],this.toBBox)},compareMinX:function(e,t){return e.left-t.left},compareMinY:function(e,t){return e.top-t.top},toBBox:function(e){return{minX:e.left,minY:e.top,maxX:e.right,maxY:e.bottom}}};function JGe(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function qa(e,t){Zh(e,0,e.children.length,t,e)}function Zh(e,t,i,r,s){s||(s=Aa(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n=t,a;n<i;n++)a=e.children[n],Jh(s,e.leaf?r(a):a);return s}function Jh(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Jj(e,t){return e.minX-t.minX}function Qj(e,t){return e.minY-t.minY}function Tx(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Sf(e){return e.maxX-e.minX+(e.maxY-e.minY)}function QGe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function $Ge(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,n-r)}function Ex(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function _f(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Aa(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function $j(e,t,i,r,s){for(var n=[t,i],a;n.length;)i=n.pop(),t=n.pop(),!(i-t<=r)&&(a=t+Math.ceil((i-t)/r/2)*r,ZGe(e,a,t,i,s),n.push(t,a,a,i))}jj.exports=wf});var iee=l((Fst,tee)=>{tee.exports={Events:rm(),List:ia(),Map:qn(),ProcessQueue:sm(),RTree:eee(),Set:ll(),Size:Op()}});var see=l((Dst,ree)=>{var jGe={LINEAR:0,NEAREST:1};ree.exports=jGe});var hee=l((Ist,aee)=>{var eBe=Ye(),nee=see(),Sx={CanvasTexture:Wp(),Events:In(),FilterMode:nee,Frame:Kn(),Parsers:Hp(),Texture:Xu(),TextureManager:Kp(),TextureSource:Yp()};Sx=eBe(!1,Sx,nee);aee.exports=Sx});var _x=l((Nst,oee)=>{var tBe=C(),Gr=z(),iBe=new tBe({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(e){return this.delay=Gr(e,"delay",0),this.repeat=Gr(e,"repeat",0),this.loop=Gr(e,"loop",!1),this.callback=Gr(e,"callback",void 0),this.callbackScope=Gr(e,"callbackScope",this.callback),this.args=Gr(e,"args",[]),this.timeScale=Gr(e,"timeScale",1),this.startAt=Gr(e,"startAt",0),this.paused=Gr(e,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var e=this.delay+this.delay*this.repeat,t=this.elapsed+this.delay*(this.repeat-this.repeatCount);return t/e}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(e){e===void 0&&(e=!1),this.elapsed=this.delay,this.hasDispatched=!e,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});oee.exports=iBe});var dee=l((Gst,fee)=>{var rBe=C(),sBe=ct(),dr=Ge(),uee=_x(),wx=tn(),lee=new rBe({initialize:function(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(dr.BOOT,this.boot,this),t.sys.events.on(dr.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(dr.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(dr.PRE_UPDATE,this.preUpdate,this),e.on(dr.UPDATE,this.update,this),e.once(dr.SHUTDOWN,this.shutdown,this)},addEvent:function(e){var t;return e instanceof uee?(t=e,this.removeEvent(t),t.elapsed=t.startAt,t.hasDispatched=!1,t.repeatCount=t.repeat===-1||t.loop?999999999999:t.repeat):t=new uee(e),this._pendingInsertion.push(t),t},delayedCall:function(e,t,i,r){return this.addEvent({delay:e,callback:t,args:i,callbackScope:r})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];wx(this._pendingRemoval,i),wx(this._pendingInsertion,i),wx(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var e=this._pendingRemoval.length,t=this._pendingInsertion.length;if(!(e===0&&t===0)){var i,r;for(i=0;i<e;i++){r=this._pendingRemoval[i];var s=this._active.indexOf(r);s>-1&&this._active.splice(s,1),r.destroy()}for(i=0;i<t;i++)r=this._pendingInsertion[i],this._active.push(r);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(e,t){if(this.now=e,!this.paused){t*=this.timeScale;for(var i=0;i<this._active.length;i++){var r=this._active[i];if(!r.paused&&(r.elapsed+=t*r.timeScale,r.elapsed>=r.delay)){var s=r.elapsed-r.delay;r.elapsed=r.delay,!r.hasDispatched&&r.callback&&(r.hasDispatched=!0,r.callback.apply(r.callbackScope,r.args)),r.repeatCount>0?(r.repeatCount--,r.elapsed=s,r.hasDispatched=!1):this._pendingRemoval.push(r)}}}},shutdown:function(){var e;for(e=0;e<this._pendingInsertion.length;e++)this._pendingInsertion[e].destroy();for(e=0;e<this._active.length;e++)this._active[e].destroy();for(e=0;e<this._pendingRemoval.length;e++)this._pendingRemoval[e].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var t=this.systems.events;t.off(dr.PRE_UPDATE,this.preUpdate,this),t.off(dr.UPDATE,this.update,this),t.off(dr.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(dr.START,this.start,this),this.scene=null,this.systems=null}});sBe.register("Clock",lee,"time");fee.exports=lee});var cee=l((Bst,vee)=>{vee.exports={Clock:dee(),TimerEvent:_x()}});var Qh=l((Ust,pee)=>{var nBe=function(e,t,i){var r;if(e.hasOwnProperty(t)){var s=typeof e[t];s==="function"?r=function(n,a,h,o,u,f){return e[t](n,a,h,o,u,f)}:r=function(){return e[t]}}else typeof i=="function"?r=i:r=function(){return i};return r};pee.exports=nBe});var gee=l((kst,mee)=>{mee.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]});var Cx=l((zst,xee)=>{var aBe=gee(),hBe=function(e){var t,i=[];if(e.hasOwnProperty("props"))for(t in e.props)t.substr(0,1)!=="_"&&i.push({key:t,value:e.props[t]});else for(t in e)aBe.indexOf(t)===-1&&t.substr(0,1)!=="_"&&i.push({key:t,value:e[t]});return i};xee.exports=hBe});var Cf=l((Yst,yee)=>{var oBe=he(),uBe=function(e){var t=oBe(e,"targets",null);return t===null||(typeof t=="function"&&(t=t.call()),Array.isArray(t)||(t=[t])),t};yee.exports=uBe});var Rx=l((Xst,Tee)=>{var lBe=he(),fBe=function(e){var t=lBe(e,"tweens",null);return t===null?[]:(typeof t=="function"&&(t=t.call()),Array.isArray(t)||(t=[t]),t)};Tee.exports=fBe});var Rf=l((Vst,wee)=>{function Eee(e){return!!e.getActive&&typeof e.getActive=="function"}function See(e){return!!e.getStart&&typeof e.getStart=="function"}function _ee(e){return!!e.getEnd&&typeof e.getEnd=="function"}function dBe(e){return See(e)||_ee(e)||Eee(e)}var $h=function(e,t){var i,r=function(p,m,x){return x},s=function(p,m,x){return x},n=null,a=typeof t;if(a==="number")r=function(){return t};else if(a==="string"){var h=t[0],o=parseFloat(t.substr(2));switch(h){case"+":r=function(p,m,x){return x+o};break;case"-":r=function(p,m,x){return x-o};break;case"*":r=function(p,m,x){return x*o};break;case"/":r=function(p,m,x){return x/o};break;default:r=function(){return parseFloat(t)}}}else if(a==="function")r=t;else if(a==="object")if(dBe(t))Eee(t)&&(n=t.getActive),_ee(t)&&(r=t.getEnd),See(t)&&(s=t.getStart);else if(t.hasOwnProperty("value"))i=$h(e,t.value);else{var u=t.hasOwnProperty("to"),f=t.hasOwnProperty("from"),d=t.hasOwnProperty("start");if(u&&(f||d)){if(i=$h(e,t.to),d){var v=$h(e,t.start);i.getActive=v.getEnd}if(f){var c=$h(e,t.from);i.getStart=c.getEnd}}}return i||(i={getActive:n,getEnd:r,getStart:s}),i};wee.exports=$h});var qf=l((Wst,Cee)=>{var vBe={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};Cee.exports=vBe});var qee=l((Hst,Ree)=>{Ree.exports="complete"});var bee=l((Kst,Aee)=>{Aee.exports="loop"});var Mee=l((Zst,Pee)=>{Pee.exports="pause"});var Oee=l((Jst,Lee)=>{Lee.exports="resume"});var Dee=l((Qst,Fee)=>{Fee.exports="start"});var Nee=l(($st,Iee)=>{Iee.exports="update"});var Bee=l((jst,Gee)=>{Gee.exports="active"});var kee=l((ent,Uee)=>{Uee.exports="complete"});var Yee=l((tnt,zee)=>{zee.exports="loop"});var Vee=l((int,Xee)=>{Xee.exports="repeat"});var Hee=l((rnt,Wee)=>{Wee.exports="start"});var Zee=l((snt,Kee)=>{Kee.exports="stop"});var Qee=l((nnt,Jee)=>{Jee.exports="update"});var jee=l((ant,$ee)=>{$ee.exports="yoyo"});var Af=l((hnt,ete)=>{ete.exports={TIMELINE_COMPLETE:qee(),TIMELINE_LOOP:bee(),TIMELINE_PAUSE:Mee(),TIMELINE_RESUME:Oee(),TIMELINE_START:Dee(),TIMELINE_UPDATE:Nee(),TWEEN_ACTIVE:Bee(),TWEEN_COMPLETE:kee(),TWEEN_LOOP:Yee(),TWEEN_REPEAT:Vee(),TWEEN_START:Hee(),TWEEN_STOP:Zee(),TWEEN_UPDATE:Qee(),TWEEN_YOYO:jee()}});var bf=l((ont,rte)=>{var cBe=C(),tte=ue(),ui=Af(),pBe=Pe(),mBe=ie(),k=wn(),gBe=Oe(),ite=new cBe({Extends:tte,initialize:function(t,i,r){tte.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=i,this.totalData=i.length,this.targets=r,this.totalTargets=r.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=k.PENDING_ADD,this._pausedState=k.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(e){return e===void 0&&(e=0),this.data[e].current},setTimeScale:function(e){return this.timeScale=e,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===k.ACTIVE},isPaused:function(){return this.state===k.PAUSED},hasTarget:function(e){return this.targets.indexOf(e)!==-1},updateTo:function(e,t,i){i===void 0&&(i=!1);for(var r=0;r<this.totalData;r++){var s=this.data[r];s.key===e&&(s.end=t,i&&(s.start=s.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===k.ACTIVE?this.seek(0):this.state===k.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===k.PENDING_ADD?this:this.play()},calcDuration:function(){for(var e=0,t=gBe.MAX_SAFE_INTEGER,i=this.data,r=0;r<this.totalData;r++){var s=i[r];s.t1=s.duration+s.hold,s.yoyo&&(s.t1+=s.duration),s.t2=s.t1+s.repeatDelay,s.totalDuration=s.delay+s.t1,s.repeat===-1?s.totalDuration+=s.t2*999999999999:s.repeat>0&&(s.totalDuration+=s.t2*s.repeat),s.totalDuration>e&&(e=s.totalDuration),s.delay<t&&(t=s.delay)}this.duration=Math.max(e,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=t},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=k.PENDING_ADD,this._pausedState=k.INIT,!1;for(var e=this.data,t=this.totalTargets,i=0;i<this.totalData;i++){var r=e[i],s=r.target,n=r.gen,a=r.key,h=r.index;r.delay=n.delay(s,a,0,h,t,this),r.duration=Math.max(n.duration(s,a,0,h,t,this),.001),r.hold=n.hold(s,a,0,h,t,this),r.repeat=n.repeat(s,a,0,h,t,this),r.repeatDelay=n.repeatDelay(s,a,0,h,t,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=k.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(ui.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=k.LOOP_DELAY):(this.state=k.ACTIVE,this.dispatchTweenEvent(ui.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=k.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=k.PENDING_REMOVE,this.dispatchTweenEvent(ui.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===k.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=k.PAUSED,this)},play:function(e){e===void 0&&(e=!1);var t=this.state;return t===k.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=k.ACTIVE,this):t===k.ACTIVE||t===k.PENDING_ADD&&this._pausedState===k.PENDING_ADD?this:!this.parentIsTimeline&&(t===k.PENDING_REMOVE||t===k.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(e),this.calculatedOffset===0?this.state=k.ACTIVE:(this.countdown=this.calculatedOffset,this.state=k.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(e),this.state=k.ACTIVE,this.makeActive()),this)},resetTweenData:function(e){for(var t=this.data,i=this.totalData,r=this.totalTargets,s=0;s<i;s++){var n=t[s],a=n.target,h=n.key,o=n.index;n.progress=0,n.elapsed=0,n.repeatCounter=n.repeat===-1?999999999999:n.repeat,e?(n.start=n.getStartValue(a,h,n.start,o,r,this),n.end=n.getEndValue(a,h,n.end,o,r,this),n.current=n.start,n.state=k.PLAYING_FORWARD):n.state=k.PENDING_RENDER,n.delay>0&&(n.elapsed=n.delay,n.state=k.DELAY),n.getActiveValue&&(a[h]=n.getActiveValue(n.target,n.key,n.start))}},resume:function(){return this.state===k.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(e,t){t===void 0&&(t=16.6),this.state===k.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var i=this.data,r=this.totalTargets,s=0;s<this.totalData;s++){var n=i[s],a=n.target,h=n.gen,o=n.key,u=n.index;n.progress=0,n.elapsed=0,n.repeatCounter=n.repeat===-1?999999999999:n.repeat,n.delay=h.delay(a,o,0,u,r,this),n.duration=Math.max(h.duration(a,o,0,u,r,this),.001),n.hold=h.hold(a,o,0,u,r,this),n.repeat=h.repeat(a,o,0,u,r,this),n.repeatDelay=h.repeatDelay(a,o,0,u,r,this),n.current=n.start,n.state=k.PLAYING_FORWARD,this.updateTweenData(this,n,0,u,r),n.delay>0&&(n.elapsed=n.delay,n.state=k.DELAY)}this.calcDuration();var f=!1;this.state===k.PAUSED&&(f=!0,this.state=k.ACTIVE),this.isSeeking=!0;do this.update(0,t);while(this.totalProgress<e);return this.isSeeking=!1,f&&(this.state=k.PAUSED),this},setCallback:function(e,t,i,r){return this.callbacks[e]={func:t,scope:r,params:[this,null].concat(i)},this},complete:function(e){return e===void 0&&(e=0),e?(this.state=k.COMPLETE_DELAY,this.countdown=e):(this.state=k.PENDING_REMOVE,this.dispatchTweenEvent(ui.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(e){return this.state===k.ACTIVE&&e!==void 0&&this.seek(e),this.state!==k.REMOVED&&((this.state===k.PAUSED||this.state===k.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(ui.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=k.PENDING_REMOVE),this},update:function(e,t){if(this.state===k.PAUSED)return!1;switch(this.useFrames&&(t=1*this.parent.timeScale),t*=this.timeScale,this.elapsed+=t,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=t,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case k.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=t,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(ui.TWEEN_START,this.callbacks.onStart)));for(var i=!1,r=0;r<this.totalData;r++){var s=this.data[r];this.updateTweenData(this,s,t)&&(i=!0)}i||this.nextState();break;case k.LOOP_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=k.ACTIVE,this.dispatchTweenEvent(ui.TWEEN_LOOP,this.callbacks.onLoop));break;case k.OFFSET_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=k.ACTIVE);break;case k.COMPLETE_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=k.PENDING_REMOVE,this.dispatchTweenEvent(ui.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===k.PENDING_REMOVE},dispatchTweenDataEvent:function(e,t,i){this.isSeeking||(this.emit(e,this,i.key,i.target,i.current,i.previous),t&&(t.params[1]=i.target,t.func.apply(t.scope,t.params)))},dispatchTweenEvent:function(e,t){this.isSeeking||(this.emit(e,this,this.targets),t&&(t.params[1]=this.targets,t.func.apply(t.scope,t.params)))},setStateFromEnd:function(e,t,i){return t.yoyo?(t.elapsed=i,t.progress=i/t.duration,t.flipX&&t.target.toggleFlipX(),t.flipY&&t.target.toggleFlipY(),this.dispatchTweenDataEvent(ui.TWEEN_YOYO,e.callbacks.onYoyo,t),t.start=t.getStartValue(t.target,t.key,t.start,t.index,e.totalTargets,e),k.PLAYING_BACKWARD):t.repeatCounter>0?(t.repeatCounter--,t.elapsed=i,t.progress=i/t.duration,t.flipX&&t.target.toggleFlipX(),t.flipY&&t.target.toggleFlipY(),t.start=t.getStartValue(t.target,t.key,t.start,t.index,e.totalTargets,e),t.end=t.getEndValue(t.target,t.key,t.start,t.index,e.totalTargets,e),t.repeatDelay>0?(t.elapsed=t.repeatDelay-i,t.current=t.start,t.target[t.key]=t.current,k.REPEAT_DELAY):(this.dispatchTweenDataEvent(ui.TWEEN_REPEAT,e.callbacks.onRepeat,t),k.PLAYING_FORWARD)):k.COMPLETE},setStateFromStart:function(e,t,i){return t.repeatCounter>0?(t.repeatCounter--,t.elapsed=i,t.progress=i/t.duration,t.flipX&&t.target.toggleFlipX(),t.flipY&&t.target.toggleFlipY(),t.end=t.getEndValue(t.target,t.key,t.start,t.index,e.totalTargets,e),t.repeatDelay>0?(t.elapsed=t.repeatDelay-i,t.current=t.start,t.target[t.key]=t.current,k.REPEAT_DELAY):(this.dispatchTweenDataEvent(ui.TWEEN_REPEAT,e.callbacks.onRepeat,t),k.PLAYING_FORWARD)):k.COMPLETE},updateTweenData:function(e,t,i){var r=t.target;switch(t.state){case k.PLAYING_FORWARD:case k.PLAYING_BACKWARD:if(!r){t.state=k.COMPLETE;break}var s=t.elapsed,n=t.duration,a=0;s+=i,s>n&&(a=s-n,s=n);var h=t.state===k.PLAYING_FORWARD,o=s/n;if(t.elapsed=s,t.progress=o,t.previous=t.current,o===1)h?(t.current=t.end,r[t.key]=t.end,t.hold>0?(t.elapsed=t.hold-a,t.state=k.HOLD_DELAY):t.state=this.setStateFromEnd(e,t,a)):(t.current=t.start,r[t.key]=t.start,t.state=this.setStateFromStart(e,t,a));else{var u=h?t.ease(o):t.ease(1-o);t.current=t.start+(t.end-t.start)*u,r[t.key]=t.current}this.dispatchTweenDataEvent(ui.TWEEN_UPDATE,e.callbacks.onUpdate,t);break;case k.DELAY:t.elapsed-=i,t.elapsed<=0&&(t.elapsed=Math.abs(t.elapsed),t.state=k.PENDING_RENDER);break;case k.REPEAT_DELAY:t.elapsed-=i,t.elapsed<=0&&(t.elapsed=Math.abs(t.elapsed),t.state=k.PLAYING_FORWARD,this.dispatchTweenDataEvent(ui.TWEEN_REPEAT,e.callbacks.onRepeat,t));break;case k.HOLD_DELAY:t.elapsed-=i,t.elapsed<=0&&(t.state=this.setStateFromEnd(e,t,Math.abs(t.elapsed)));break;case k.PENDING_RENDER:r?(t.start=t.getStartValue(r,t.key,r[t.key],t.index,e.totalTargets,e),t.end=t.getEndValue(r,t.key,t.start,t.index,e.totalTargets,e),t.current=t.start,r[t.key]=t.start,t.state=k.PLAYING_FORWARD):t.state=k.COMPLETE;break}return t.state!==k.COMPLETE}});ite.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"];mBe.register("tween",function(e){return this.scene.sys.tweens.add(e)});pBe.register("tween",function(e){return this.scene.sys.tweens.create(e)});rte.exports=ite});var Pf=l((unt,ste)=>{var xBe=function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p){return{target:e,index:t,key:i,getActiveValue:n,getEndValue:r,getStartValue:s,ease:a,duration:0,totalDuration:0,delay:0,yoyo:u,hold:0,repeat:0,repeatDelay:0,flipX:c,flipY:p,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:h,duration:o,hold:f,repeat:d,repeatDelay:v},state:0}};ste.exports=xBe});var Ax=l((lnt,ate)=>{var yBe=qf(),Mf=we(),qx=_n(),TBe=gs(),jh=Qh(),Gs=he(),EBe=Rf(),nte=bf(),SBe=Pf(),_Be=function(e,t,i){i===void 0&&(i=yBe);var r=Gs(t,"from",0),s=Gs(t,"to",1),n=[{value:r}],a=jh(t,"delay",i.delay),h=jh(t,"duration",i.duration),o=Gs(t,"easeParams",i.easeParams),u=TBe(Gs(t,"ease",i.ease),o),f=jh(t,"hold",i.hold),d=jh(t,"repeat",i.repeat),v=jh(t,"repeatDelay",i.repeatDelay),c=qx(t,"yoyo",i.yoyo),p=[],m=EBe("value",s),x=SBe(n[0],0,"value",m.getEnd,m.getStart,m.getActive,u,a,h,c,f,d,v,!1,!1);x.start=r,x.current=r,x.to=s,p.push(x);var g=new nte(e,p,n);g.offset=Mf(t,"offset",null),g.completeDelay=Mf(t,"completeDelay",0),g.loop=Math.round(Mf(t,"loop",0)),g.loopDelay=Math.round(Mf(t,"loopDelay",0)),g.paused=qx(t,"paused",!1),g.useFrames=qx(t,"useFrames",!1);for(var y=Gs(t,"callbackScope",g),T=nte.TYPES,S=0;S<T.length;S++){var E=T[S],_=Gs(t,E,!1);if(_){var w=Gs(t,E+"Scope",y),R=Gs(t,E+"Params",[]);g.setCallback(E,_,R,w)}}return g};ate.exports=_Be});var bx=l((fnt,hte)=>{var wBe=gs(),Lf=he(),CBe=Oe(),RBe=function(e,t){t===void 0&&(t={});var i,r=Lf(t,"start",0),s=Lf(t,"ease",null),n=Lf(t,"grid",null),a=Lf(t,"from",0),h=a==="first",o=a==="center",u=a==="last",f=typeof a=="number",d=Array.isArray(e),v=parseFloat(d?e[0]:e),c=d?parseFloat(e[1]):0,p=Math.max(v,c);if(d&&(r+=v),n){var m=n[0],x=n[1],g=0,y=0,T=0,S=0,E=[];u?(g=m-1,y=x-1):f?(g=a%m,y=Math.floor(a/m)):o&&(g=(m-1)/2,y=(x-1)/2);for(var _=CBe.MIN_SAFE_INTEGER,w=0;w<x;w++){E[w]=[];for(var R=0;R<m;R++){T=g-R,S=y-w;var q=Math.sqrt(T*T+S*S);q>_&&(_=q),E[w][R]=q}}}var A=s?wBe(s):null;return n?i=function(b,L,M,G){var P=0,D=G%m,I=Math.floor(G/m);D>=0&&D<m&&I>=0&&I<x&&(P=E[I][D]);var F;if(d){var O=c-v;A?F=P/_*O*A(P/_):F=P/_*O}else A?F=P*v*A(P/_):F=P*v;return F+r}:i=function(b,L,M,G,P){P--;var D;h?D=G:o?D=Math.abs(P/2-G):u?D=P-G:f&&(D=Math.abs(a-G));var I;if(d){var F;o?F=(c-v)/P*(D*2):F=(c-v)/P*D,A?I=F*A(D/P):I=F}else A?I=P*p*A(D/P):I=D*v;return I+r},i};hte.exports=RBe});var eo=l((dnt,lte)=>{var qBe=qf(),Of=we(),Bs=_n(),ote=gs(),vr=Qh(),ABe=Cx(),bBe=Cf(),Us=he(),PBe=Rf(),ute=bf(),MBe=Pf(),LBe=function(e,t,i){i===void 0&&(i=qBe);for(var r=i.targets?i.targets:bBe(t),s=ABe(t),n=vr(t,"delay",i.delay),a=vr(t,"duration",i.duration),h=Us(t,"easeParams",i.easeParams),o=ote(Us(t,"ease",i.ease),h),u=vr(t,"hold",i.hold),f=vr(t,"repeat",i.repeat),d=vr(t,"repeatDelay",i.repeatDelay),v=Bs(t,"yoyo",i.yoyo),c=Bs(t,"flipX",i.flipX),p=Bs(t,"flipY",i.flipY),m=[],x=0;x<s.length;x++)for(var g=s[x].key,y=s[x].value,T=0;T<r.length;T++){var S=PBe(g,y),E=MBe(r[T],T,g,S.getEnd,S.getStart,S.getActive,ote(Us(y,"ease",o),Us(y,"easeParams",h)),vr(y,"delay",n),vr(y,"duration",a),Bs(y,"yoyo",v),vr(y,"hold",u),vr(y,"repeat",f),vr(y,"repeatDelay",d),Bs(y,"flipX",c),Bs(y,"flipY",p));m.push(E)}var _=new ute(e,m,r);_.offset=Of(t,"offset",null),_.completeDelay=Of(t,"completeDelay",0),_.loop=Math.round(Of(t,"loop",0)),_.loopDelay=Math.round(Of(t,"loopDelay",0)),_.paused=Bs(t,"paused",!1),_.useFrames=Bs(t,"useFrames",!1);for(var w=Us(t,"callbackScope",_),R=ute.TYPES,q=0;q<R.length;q++){var A=R[q],b=Us(t,A,!1);if(b){var L=Us(t,A+"Scope",w),M=Us(t,A+"Params",[]);_.setCallback(A,b,M,L)}}return _};lte.exports=LBe});var Mx=l((vnt,dte)=>{var OBe=C(),fte=ue(),ks=Af(),FBe=eo(),Ue=wn(),Px=new OBe({Extends:fte,initialize:function(t){fte.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=Ue.PENDING_ADD,this._pausedState=Ue.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(e,t){this.emit(e,this),t&&t.func.apply(t.scope,t.params)},setTimeScale:function(e){return this.timeScale=e,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===Ue.ACTIVE},add:function(e){return this.queue(FBe(this,e))},queue:function(e){return this.isPlaying()||(e.parent=this,e.parentIsTimeline=!0,this.data.push(e),this.totalData=this.data.length),this},hasOffset:function(e){return e.offset!==null},isOffsetAbsolute:function(e){return typeof e=="number"},isOffsetRelative:function(e){var t=typeof e;if(t==="string"){var i=e[0];if(i==="-"||i==="+")return!0}return!1},getRelativeOffset:function(e,t){var i=e[0],r=parseFloat(e.substr(2)),s=t;switch(i){case"+":s+=r;break;case"-":s-=r;break}return Math.max(0,s)},calcDuration:function(){for(var e=0,t=0,i=0,r=0;r<this.totalData;r++){var s=this.data[r];s.init(),this.hasOffset(s)?this.isOffsetAbsolute(s.offset)?(s.calculatedOffset=s.offset,s.offset===0&&(i=0)):this.isOffsetRelative(s.offset)&&(s.calculatedOffset=this.getRelativeOffset(s.offset,e)):s.calculatedOffset=i,e=s.totalDuration+s.calculatedOffset,t+=s.totalDuration,i+=s.totalDuration}this.duration=t,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=Ue.PAUSED,!1):!0},resetTweens:function(e){for(var t=0;t<this.totalData;t++){var i=this.data[t];i.play(e)}},setCallback:function(e,t,i,r){return Px.TYPES.indexOf(e)!==-1&&(this.callbacks[e]={func:t,scope:r,params:[this].concat(i)}),this},makeActive:function(e){return this.manager.makeActive(e)},play:function(){if(this.state!==Ue.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=Ue.ACTIVE;this.dispatchTimelineEvent(ks.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=Ue.LOOP_DELAY):(this.state=Ue.ACTIVE,this.dispatchTimelineEvent(ks.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=Ue.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=Ue.PENDING_REMOVE,this.dispatchTimelineEvent(ks.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(e,t){if(this.state!==Ue.PAUSED){switch(this.useFrames&&(t=1*this.manager.timeScale),t*=this.timeScale,this.elapsed+=t,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=t,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case Ue.ACTIVE:for(var i=this.totalData,r=0;r<this.totalData;r++){var s=this.data[r];s.update(e,t)&&i--}this.dispatchTimelineEvent(ks.TIMELINE_UPDATE,this.callbacks.onUpdate),i===0&&this.nextState();break;case Ue.LOOP_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=Ue.ACTIVE,this.dispatchTimelineEvent(ks.TIMELINE_LOOP,this.callbacks.onLoop));break;case Ue.COMPLETE_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=Ue.PENDING_REMOVE,this.dispatchTimelineEvent(ks.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===Ue.PENDING_REMOVE}},stop:function(){this.state=Ue.PENDING_REMOVE},pause:function(){if(this.state!==Ue.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=Ue.PAUSED,this.emit(ks.TIMELINE_PAUSE,this),this},resume:function(){return this.state===Ue.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(ks.TIMELINE_RESUME,this)),this},hasTarget:function(e){for(var t=0;t<this.data.length;t++)if(this.data[t].hasTarget(e))return!0;return!1},destroy:function(){for(var e=0;e<this.data.length;e++)this.data[e].stop()}});Px.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"];dte.exports=Px});var Lx=l((cnt,vte)=>{var DBe=hs(),IBe=qf(),Ff=we(),to=_n(),NBe=gs(),io=Qh(),GBe=Cf(),BBe=Rx(),ut=he(),UBe=Mx(),kBe=eo(),zBe=function(e,t){var i=new UBe(e);i.completeDelay=Ff(t,"completeDelay",0),i.loop=Math.round(Ff(t,"loop",0)),i.loopDelay=Math.round(Ff(t,"loopDelay",0)),i.paused=to(t,"paused",!1),i.useFrames=to(t,"useFrames",!1);var r=ut(t,"callbackScope",i),s=ut(t,"onStart",!1);if(s){var n=ut(t,"onStartScope",r),a=ut(t,"onStartParams",[]);i.setCallback("onStart",s,a,n)}var h=ut(t,"onUpdate",!1);if(h){var o=ut(t,"onUpdateScope",r),u=ut(t,"onUpdateParams",[]);i.setCallback("onUpdate",h,u,o)}var f=ut(t,"onLoop",!1);if(f){var d=ut(t,"onLoopScope",r),v=ut(t,"onLoopParams",[]);i.setCallback("onLoop",f,v,d)}var c=ut(t,"onYoyo",!1);if(c){var p=ut(t,"onYoyoScope",r),m=ut(t,"onYoyoParams",[]);i.setCallback("onYoyo",c,m,p)}var x=ut(t,"onComplete",!1);if(x){var g=ut(t,"onCompleteScope",r),y=ut(t,"onCompleteParams",[]);i.setCallback("onComplete",x,y,g)}var T=BBe(t);if(T.length===0)return i.paused=!0,i;var S=DBe(IBe);S.targets=GBe(t);var E=Ff(t,"totalDuration",0);E>0?S.duration=Math.floor(E/T.length):S.duration=io(t,"duration",S.duration),S.delay=io(t,"delay",S.delay),S.easeParams=ut(t,"easeParams",S.easeParams),S.ease=NBe(ut(t,"ease",S.ease),S.easeParams),S.hold=io(t,"hold",S.hold),S.repeat=io(t,"repeat",S.repeat),S.repeatDelay=io(t,"repeatDelay",S.repeatDelay),S.yoyo=to(t,"yoyo",S.yoyo),S.flipX=to(t,"flipX",S.flipX),S.flipY=to(t,"flipY",S.flipY);for(var _=0;_<T.length;_++)i.queue(kBe(i,T[_],S));return i};vte.exports=zBe});var pte=l((pnt,cte)=>{cte.exports={GetBoolean:_n(),GetEaseFunction:gs(),GetNewValue:Qh(),GetProps:Cx(),GetTargets:Cf(),GetTweens:Rx(),GetValueOp:Rf(),NumberTweenBuilder:Ax(),StaggerBuilder:bx(),TimelineBuilder:Lx(),TweenBuilder:eo()}});var Tte=l((mnt,yte)=>{var Df=tn(),YBe=C(),XBe=Ax(),VBe=ct(),cr=Ge(),WBe=bx(),mte=Lx(),ro=wn(),gte=eo(),xte=new YBe({initialize:function(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(cr.BOOT,this.boot,this),t.sys.events.on(cr.START,this.start,this)},boot:function(){this.systems.events.once(cr.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(cr.PRE_UPDATE,this.preUpdate,this),e.on(cr.UPDATE,this.update,this),e.once(cr.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(e){return mte(this,e)},timeline:function(e){var t=mte(this,e);return t.paused||(this._add.push(t),this._toProcess++),t},create:function(e){return gte(this,e)},add:function(e){var t=gte(this,e);return this._add.push(t),this._toProcess++,t},existing:function(e){return this._add.push(e),this._toProcess++,this},addCounter:function(e){var t=XBe(this,e);return this._add.push(t),this._toProcess++,t},stagger:function(e,t){return WBe(e,t)},preUpdate:function(){if(this._toProcess!==0){var e=this._destroy,t=this._active,i=this._pending,r,s;for(r=0;r<e.length;r++){s=e[r];var n=t.indexOf(s);n===-1?(n=i.indexOf(s),n>-1&&(s.state=ro.REMOVED,i.splice(n,1))):(s.state=ro.REMOVED,t.splice(n,1))}for(e.length=0,e=this._add,r=0;r<e.length;r++)s=e[r],s.state===ro.PENDING_ADD&&(s.init()?(s.play(),this._active.push(s)):this._pending.push(s));e.length=0,this._toProcess=0}},update:function(e,t){var i=this._active,r;t*=this.timeScale;for(var s=0;s<i.length;s++)r=i[s],r.update(e,t)&&(this._destroy.push(r),this._toProcess++)},remove:function(e){return Df(this._add,e),Df(this._pending,e),Df(this._active,e),Df(this._destroy,e),e.state=ro.REMOVED,this},makeActive:function(e){if(this._add.indexOf(e)!==-1||this._active.indexOf(e)!==-1)return this;var t=this._pending.indexOf(e);return t!==-1&&this._pending.splice(t,1),this._add.push(e),e.state=ro.PENDING_ADD,this._toProcess++,this},each:function(e,t){for(var i=[null],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var s in this.list)i[0]=this.list[s],e.apply(t,i)},getAllTweens:function(){for(var e=this._active,t=[],i=0;i<e.length;i++)t.push(e[i]);return t},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(e,t){t===void 0&&(t=!1);var i=this._active,r,s=[],n,a;for(Array.isArray(e)||(e=[e]),n=0;n<i.length;n++)for(r=i[n],a=0;a<e.length;a++)r.hasTarget(e[a])&&s.push(r);if(t)for(i=this._pending,n=0;n<i.length;n++)for(r=i[n],a=0;a<e.length;a++)r.hasTarget(e[a])&&s.push(r);return s},isTweening:function(e){for(var t=this._active,i,r=0;r<t.length;r++)if(i=t[r],i.hasTarget(e)&&i.isPlaying())return!0;return!1},killAll:function(){for(var e=this.getAllTweens(),t=0;t<e.length;t++)e[t].stop();return this},killTweensOf:function(e){for(var t=this.getTweensOf(e),i=0;i<t.length;i++)t[i].stop();return this},pauseAll:function(){for(var e=this._active,t=0;t<e.length;t++)e[t].pause();return this},resumeAll:function(){for(var e=this._active,t=0;t<e.length;t++)e[t].resume();return this},setGlobalTimeScale:function(e){return this.timeScale=e,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var e=this.systems.events;e.off(cr.PRE_UPDATE,this.preUpdate,this),e.off(cr.UPDATE,this.update,this),e.off(cr.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(cr.START,this.start,this),this.scene=null,this.systems=null}});VBe.register("TweenManager",xte,"tweens");yte.exports=xte});var Ste=l((gnt,Ete)=>{var HBe=wn(),KBe=Ye(),Ox={Builders:pte(),Events:Af(),TweenManager:Tte(),Tween:bf(),TweenData:Pf(),Timeline:Mx()};Ox=KBe(!1,Ox,HBe);Ete.exports=Ox});var wte=l((xnt,_te)=>{var If="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ZBe=function(e,t){for(var i=new Uint8Array(e),r=i.length,s=t?"data:"+t+";base64,":"",n=0;n<r;n+=3)s+=If[i[n]>>2],s+=If[(i[n]&3)<<4|i[n+1]>>4],s+=If[(i[n+1]&15)<<2|i[n+2]>>6],s+=If[i[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};_te.exports=ZBe});var Rte=l((ynt,Cte)=>{Cte.exports={ArrayBufferToBase64:wte(),Base64ToArrayBuffer:$p()}});var Ate=l((Tnt,qte)=>{var JBe=he(),QBe=Le(),$Be=function(e,t,i,r,s){s===void 0&&(s=i);var n=JBe(e,t,s);return QBe(n,i,r)};qte.exports=$Be});var Pte=l((Ent,bte)=>{var jBe=function(e,t){for(var i=0;i<t.length;i++)if(!e.hasOwnProperty(t[i]))return!1;return!0};bte.exports=jBe});var Lte=l((Snt,Mte)=>{var eUe=hs(),tUe=function(e,t){var i=eUe(e);for(var r in t)i.hasOwnProperty(r)&&(i[r]=t[r]);return i};Mte.exports=tUe});var Fte=l((_nt,Ote)=>{var iUe=pl(),rUe=function(e,t){for(var i={},r=0;r<t.length;r++){var s=t[r];iUe(e,s)&&(i[s]=e[s])}return i};Ote.exports=rUe});var Ite=l((wnt,Dte)=>{Dte.exports={Clone:hs(),DeepCopy:Po(),Extend:Ye(),GetAdvancedValue:we(),GetFastValue:z(),GetMinMaxValue:Ate(),GetValue:he(),HasAll:Pte(),HasAny:bm(),HasValue:pl(),IsPlainObject:ae(),Merge:Np(),MergeRight:Lte(),Pick:Fte(),SetValue:dg()}});var Gte=l((Cnt,Nte)=>{var sUe=function(e,t){return e.replace(/%([0-9]+)/g,function(i,r){return t[Number(r)-1]})};Nte.exports=sUe});var Ute=l((Rnt,Bte)=>{var nUe=function(e,t){return t===0?e.slice(1):e.slice(0,t-1)+e.slice(t)};Bte.exports=nUe});var zte=l((qnt,kte)=>{var aUe=function(e){return e.split("").reverse().join("")};kte.exports=aUe});var Xte=l((Ant,Yte)=>{Yte.exports={Format:Gte(),Pad:Mu(),RemoveAt:Ute(),Reverse:zte(),UppercaseFirst:ku(),UUID:Tl()}});var Wte=l((bnt,Vte)=>{Vte.exports={Array:el(),Base64:Rte(),Objects:Ite(),String:Xte(),NOOP:B()}});var nie=l((vo,zf)=>{(function(e,t){"use strict";var i="1.0.2",r="",s="?",n="function",a="undefined",h="object",o="string",u="major",f="model",d="name",v="type",c="vendor",p="version",m="architecture",x="console",g="mobile",y="tablet",T="smarttv",S="wearable",E="embedded",_=255,w="Amazon",R="Apple",q="ASUS",A="BlackBerry",b="Browser",L="Chrome",M="Edge",G="Firefox",P="Google",D="Huawei",I="LG",F="Microsoft",O="Motorola",K="Opera",H="Samsung",Y="Sony",ee="Xiaomi",U="Zebra",J="Facebook",nt=function(X,V){var Z={};for(var pe in X)V[pe]&&V[pe].length%2===0?Z[pe]=V[pe].concat(X[pe]):Z[pe]=X[pe];return Z},ve=function(X){for(var V={},Z=0;Z<X.length;Z++)V[X[Z].toUpperCase()]=X[Z];return V},yt=function(X,V){return typeof X===o?_e(V).indexOf(_e(X))!==-1:!1},_e=function(X){return X.toLowerCase()},at=function(X){return typeof X===o?X.replace(/[^\d\.]/g,r).split(".")[0]:t},Je=function(X,V){if(typeof X===o)return X=X.replace(/^\s\s*/,r).replace(/\s\s*$/,r),typeof V===a?X:X.substring(0,_)},te=function(X,V){for(var Z=0,pe,Q,zi,ce,Na,Yi;Z<V.length&&!Na;){var vy=V[Z],cy=V[Z+1];for(pe=Q=0;pe<vy.length&&!Na;)if(Na=vy[pe++].exec(X),Na)for(zi=0;zi<cy.length;zi++)Yi=Na[++Q],ce=cy[zi],typeof ce===h&&ce.length>0?ce.length===2?typeof ce[1]==n?this[ce[0]]=ce[1].call(this,Yi):this[ce[0]]=ce[1]:ce.length===3?typeof ce[1]===n&&!(ce[1].exec&&ce[1].test)?this[ce[0]]=Yi?ce[1].call(this,Yi,ce[2]):t:this[ce[0]]=Yi?Yi.replace(ce[1],ce[2]):t:ce.length===4&&(this[ce[0]]=Yi?ce[3].call(this,Yi.replace(ce[1],ce[2])):t):this[ce]=Yi||t;Z+=2}},ke=function(X,V){for(var Z in V)if(typeof V[Z]===h&&V[Z].length>0){for(var pe=0;pe<V[Z].length;pe++)if(yt(V[Z][pe],X))return Z===s?t:Z}else if(yt(V[Z],X))return Z===s?t:Z;return X},qe={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Mt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},lt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,K+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[d,K]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UC"+b]],[/\bqbcore\/([\w\.]+)/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+b],p],[/\bfocus\/([\w\.]+)/i],[p,[d,G+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,K+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,K+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI "+b]],[/fxios\/([-\w\.]+)/i],[p,[d,G]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+b]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+b],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,J],p],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,L+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,L+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android "+b]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,ke,qe]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,G+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,_e]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,r,_e]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,_e]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[c,H],[v,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[c,H],[v,g]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[c,R],[v,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[c,R],[v,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[c,D],[v,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[f,[c,D],[v,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[c,ee],[v,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[c,ee],[v,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[c,"OPPO"],[v,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[c,"Vivo"],[v,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[c,"Realme"],[v,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[c,O],[v,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[c,O],[v,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[c,I],[v,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[c,I],[v,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[c,"Lenovo"],[v,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[c,"Nokia"],[v,g]],[/(pixel c)\b/i],[f,[c,P],[v,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[c,P],[v,g]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[c,Y],[v,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[c,Y],[v,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[c,"OnePlus"],[v,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[c,w],[v,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[c,w],[v,g]],[/(playbook);[-\w\),; ]+(rim)/i],[f,c,[v,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[c,A],[v,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[c,q],[v,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[c,q],[v,g]],[/(nexus 9)/i],[f,[c,"HTC"],[v,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[c,[f,/_/g," "],[v,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[c,"Acer"],[v,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[c,"Meizu"],[v,g]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[c,"Sharp"],[v,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[c,f,[v,g]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[c,f,[v,y]],[/(surface duo)/i],[f,[c,F],[v,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[c,"Fairphone"],[v,g]],[/(u304aa)/i],[f,[c,"AT&T"],[v,g]],[/\bsie-(\w*)/i],[f,[c,"Siemens"],[v,g]],[/\b(rct\w+) b/i],[f,[c,"RCA"],[v,y]],[/\b(venue[\d ]{2,7}) b/i],[f,[c,"Dell"],[v,y]],[/\b(q(?:mv|ta)\w+) b/i],[f,[c,"Verizon"],[v,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[c,"Barnes & Noble"],[v,y]],[/\b(tm\d{3}\w+) b/i],[f,[c,"NuVision"],[v,y]],[/\b(k88) b/i],[f,[c,"ZTE"],[v,y]],[/\b(nx\d{3}j) b/i],[f,[c,"ZTE"],[v,g]],[/\b(gen\d{3}) b.+49h/i],[f,[c,"Swiss"],[v,g]],[/\b(zur\d{3}) b/i],[f,[c,"Swiss"],[v,y]],[/\b((zeki)?tb.*\b) b/i],[f,[c,"Zeki"],[v,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[c,"Dragon Touch"],f,[v,y]],[/\b(ns-?\w{0,9}) b/i],[f,[c,"Insignia"],[v,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[c,"NextBook"],[v,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[c,"Voice"],f,[v,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[c,"LvTel"],f,[v,g]],[/\b(ph-1) /i],[f,[c,"Essential"],[v,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[c,"Envizen"],[v,y]],[/\b(trio[-\w\. ]+) b/i],[f,[c,"MachSpeed"],[v,y]],[/\btu_(1491) b/i],[f,[c,"Rotor"],[v,y]],[/(shield[\w ]+) b/i],[f,[c,"Nvidia"],[v,y]],[/(sprint) (\w+)/i],[c,f,[v,g]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[c,F],[v,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[c,U],[v,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[c,U],[v,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[c,f,[v,x]],[/droid.+; (shield) bui/i],[f,[c,"Nvidia"],[v,x]],[/(playstation [345portablevi]+)/i],[f,[c,Y],[v,x]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[c,F],[v,x]],[/smart-tv.+(samsung)/i],[c,[v,T]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[c,H],[v,T]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[c,I],[v,T]],[/(apple) ?tv/i],[c,[f,R+" TV"],[v,T]],[/crkey/i],[[f,L+"cast"],[c,P],[v,T]],[/droid.+aft(\w)( bui|\))/i],[f,[c,w],[v,T]],[/\(dtv[\);].+(aquos)/i],[f,[c,"Sharp"],[v,T]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[c,Je],[f,Je],[v,T]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[v,T]],[/((pebble))app/i],[c,f,[v,S]],[/droid.+; (glass) \d/i],[f,[c,P],[v,S]],[/droid.+; (wt63?0{2,3})\)/i],[f,[c,U],[v,S]],[/(quest( 2)?)/i],[f,[c,J],[v,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[c,[v,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[v,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[v,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[v,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[v,g]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[c,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,M+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[p,ke,Mt]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[p,ke,Mt]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,A]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,G+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[d,L+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],p],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,p]]},oe=function(X,V){if(typeof X===h&&(V=X,X=t),!(this instanceof oe))return new oe(X,V).getResult();var Z=X||(typeof e!==a&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:r),pe=V?nt(lt,V):lt;return this.getBrowser=function(){var Q={};return Q[d]=t,Q[p]=t,te.call(Q,Z,pe.browser),Q.major=at(Q.version),Q},this.getCPU=function(){var Q={};return Q[m]=t,te.call(Q,Z,pe.cpu),Q},this.getDevice=function(){var Q={};return Q[c]=t,Q[f]=t,Q[v]=t,te.call(Q,Z,pe.device),Q},this.getEngine=function(){var Q={};return Q[d]=t,Q[p]=t,te.call(Q,Z,pe.engine),Q},this.getOS=function(){var Q={};return Q[d]=t,Q[p]=t,te.call(Q,Z,pe.os),Q},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Z},this.setUA=function(Q){return Z=typeof Q===o&&Q.length>_?Je(Q,_):Q,this},this.setUA(Z),this};oe.VERSION=i,oe.BROWSER=ve([d,p,u]),oe.CPU=ve([m]),oe.DEVICE=ve([f,c,v,x,g,T,y,S,E]),oe.ENGINE=oe.OS=ve([d,p]),typeof vo!==a?(typeof zf!==a&&zf.exports&&(vo=zf.exports=oe),vo.UAParser=oe):typeof define===n&&define.amd?define(function(){return oe}):typeof e!==a&&(e.UAParser=oe);var ze=typeof e!==a&&(e.jQuery||e.Zepto);if(ze&&!ze.ua){var ft=new oe;ze.ua=ft.getResult(),ze.ua.get=function(){return ft.getUA()},ze.ua.set=function(X){ft.setUA(X);var V=ft.getResult();for(var Z in V)ze.ua[Z]=V[Z]}}})(typeof window=="object"?window:vo)});var hUe=Qt(),oUe=Ye(),Nf={Actions:hv(),Cache:YC(),Cameras:db(),Core:TF(),Class:C(),Create:FF(),Data:BF(),Display:b2(),DOM:Y2(),Events:Z2(),Game:ZU(),GameObjects:d6(),Geom:LZ(),Input:mQ(),Loader:Sj(),Math:uu(),Plugins:Aj(),Renderer:zj(),Scale:Xj(),Scene:Up(),Scenes:Zj(),Structs:iee(),Textures:hee(),Time:cee(),Tweens:Ste(),Utils:Wte()};Nf=oUe(!1,Nf,hUe);var ba=Nf;window.Phaser=Nf;function Gf(e){let t=Math.floor(e.length/2),i=[...e].sort((r,s)=>r-s);return e.length%2!==0?i[t]:(i[t-1]+i[t])/2}function Hte(e){let t=Gf(e);return 1.4826*Gf(e.map(i=>Math.abs(i-t)))}var Kte=400,so=class extends Phaser.Scene{constructor(){super({key:"TitleScene"})}preload(){this.load.image("cursor","assets/cursor.png"),this.load.image("mouse","assets/mouse.jpg"),this.load.image("touchscreen","assets/touchscreen.jpg"),this.load.image("trackball","assets/trackball.jpg"),this.load.image("trackpad","assets/trackpad.jpg"),this.load.image("y","assets/check.png"),this.load.image("n","assets/x.png")}create(){let i=this.game.config.height/2;this.frame_times=Array(Kte).fill(0),this.i=0;let r=a=>{s.disableInteractive(),n.disableInteractive(),this.scale.startFullscreen(),this.tweens.addCounter({from:255,to:0,duration:200,onUpdate:h=>{let o=Math.floor(h.getValue());this.cameras.main.setAlpha(o/255)},onComplete:()=>{let h=this.frame_times.map((d,v,c)=>d-c[v-1]).slice(1),o=1e3/Gf(h),u=!0;isFinite(o)||(console.warn("Not enough time to guess a refresh rate, defaulting to 60 Hz."),o=60,u=!1),console.log(`median: ${o}`),this.game.user_config.hand=a,this.game.user_config.refresh_rate_est=o,this.game.user_config.refresh_rate_measured=u,this.input.mouse.requestPointerLock();let f={has_api:!1,charging:!1};navigator.getBattery?navigator.getBattery().then(d=>{f.has_api=!0,f.charging=d.charging,this.game.user_config.battery=f,this.scene.start("MainScene")}):(this.game.user_config.battery=f,this.scene.start("MainScene"))}})};this.add.rectangle(i-6,i+100,6,500,16777215),this.add.rexBBCodeText(i,120,`If using a laptop,
please plug into a wall outlet
before continuing for best performance.`,{fontFamily:"Verdana",fontStyle:"bold",fontSize:40,color:"#dddddd",stroke:"#444444",strokeThickness:6,align:"center",backgroundColor:"#460000",padding:{left:5,right:5,top:5,bottom:5}}).setOrigin(.5,.5),this.add.text(i,270,`Select one option below to start
 (will enter fullscreen).`,{fontFamily:"Verdana",fontSize:32,color:"#bbbbbb",stroke:"#444444",strokeThickness:2,align:"center"}).setOrigin(.5,.5);let s=this.add.text(i-250,i+100,`Click this side
if using the mouse
with your left hand.`,{fontFamily:"Verdana",fontSize:32,color:"#dddddd",stroke:"#444444",strokeThickness:2,align:"center"}).setOrigin(.5,.5).setInteractive().once("pointerdown",()=>{r("left")}),n=this.add.text(i+250,i+100,`Click this side
if using the mouse
with your right hand.`,{fontFamily:"Verdana",fontSize:32,color:"#dddddd",stroke:"#444444",strokeThickness:2,align:"center"}).setOrigin(.5,.5).setInteractive().once("pointerdown",()=>{r("right")})}update(){this.frame_times[this.i]=this.game.loop.now,this.i++,this.i%=Kte}};var uUe=Phaser.Utils.Objects.GetValue;function Zte(e,t,i,r,s){var n=e.add.rexBBCodeText(t,i,r,s);return n.typing=e.plugins.get("rexTextTypingPlugin").add(n,uUe(s,"type",void 0)),n.start=function(a,h){return h!==void 0&&this.typing.setTypeSpeed(h),this.typing.start(a),this},n}function Jte(e){let t=new Object;for(let i=0;i<e.length;i++)t[e[i]]=i+1;return Object.freeze(t),t}var lUe=16777215,fUe=8832474,Pa=642574,Qte=16776960;var dUe=16711680,vUe=6710886,cUe=20;var Ma=class extends Phaser.GameObjects.Container{constructor(t,i,r,s=!0,n=!1){let a=t.add.circle(0,-100,cUe,Pa),h=t.add.circle(0,100,8,fUe,s),o=t.add.circle(0,100,15,lUe),u=t.add.rectangle(-300,100,50,100,16776960).setOrigin(.5,.5),f=t.add.rectangle(-300,100,50,2,vUe).setOrigin(.5,.5),d=t.add.text(-300,200,"Not confident",{fontFamily:"Verdana",color:"#ffffff",backgroundColor:"#000000",fontSize:20,align:"center"}).setOrigin(.5,.5),v=t.add.text(-300,0,"Very confident",{fontFamily:"Verdana",color:"#ffffff",backgroundColor:"#000000",fontSize:20,align:"center"}).setOrigin(.5,.5);a.visible=!1;let c=t.add.image(0,100,"cursor").setOrigin(0,0).setScale(.2),p=[a,h,o,c,u,f,d,v];super(t,i,r,p);let m=0,x=-100,g=Phaser.Math.DegToRad(270-6),y=200*Math.cos(g),T=200*Math.sin(g)+100;t.add.existing(this),this.tl1=t.tweens.timeline({loop:-1,loopDelay:0,paused:!0,tweens:[{targets:a,y:-100,ease:"Linear",duration:200,onStart:()=>{o.visible=!0},onComplete:()=>{o.visible=!1,a.visible=!0}},{offset:600,targets:c,x:m,y:x-50,ease:"Power2",duration:300},{offset:600,targets:h,x:n?y:m,y:n?T:x,ease:"Power2",duration:300,onStart:()=>{a.fillColor=Pa,a.visible=!0,o.visible=!1},onComplete:()=>{a.fillColor=Pa,a.visible=!0,o.visible=!1}},{offset:1400,targets:c,x:0,y:100,ease:"Power2",duration:100,onStart:()=>{o.visible=!0,a.visible=!1},onComplete:()=>{o.visible=!0,a.visible=!1}},{offset:1400,targets:h,x:0,y:100,ease:"Power2",duration:100,onComplete:()=>{this.counter=0,u.setFillStyle(Pa)}},{offset:2e3,targets:u,y:100,ease:"Linear",duration:500,onStart:()=>{u.visible=!0},onComplete:()=>{u.visible=!0}},{offset:2e3,targets:f,y:70,ease:"Power2",duration:500,onStart:()=>{f.visible=!0},onComplete:()=>{f.visible=!0}},{offset:2500,targets:f,y:100,ease:"linear",duration:0,onStart:()=>{f.visible=!0},onComplete:()=>{f.visible=!0,u.setFillStyle(Qte)}},{offset:3e3,targets:a,y:-100,ease:"Linear",duration:200,onStart:()=>{a.fillColor=Pa,a.visible=!0,o.visible=!1},onComplete:()=>{a.fillColor==Pa,a.visible=!0,o.visible=!1}},{offset:3e3+200,targets:c,x:m,y:x-50,ease:"Power2",duration:300,onStart:()=>{o.visible=!1},onComplete:()=>{o.visible=!1}},{offset:3e3+200,targets:h,x:n?y:m,y:n?T:x,ease:"Power2",duration:300,onStart:()=>{o.visible=!1},onComplete:()=>{o.visible=!1}},{offset:3900,targets:c,x:0,y:100,ease:"Power2",duration:100,onStart:()=>{a.visible=!1,o.visible=!0},onComplete:()=>{a.visible=!1,o.visible=!0}},{offset:3900,targets:h,x:0,y:100,ease:"Power2",duration:100,onComplete:()=>{a.visible=!1,o.visible=!0,u.setFillStyle(dUe)}},{offset:4500,targets:u,y:100,ease:"Linear",duration:500,onStart:()=>{u.visible=!0},onComplete:()=>{u.visible=!0}},{offset:4500,targets:f,y:130,ease:"Power2",duration:500,onStart:()=>{f.visible=!0},onComplete:()=>{f.visible=!0}},{offset:5e3,targets:f,y:100,ease:"linear",duration:0,onStart:()=>{f.visible=!0},onComplete:()=>{f.visible=!0,u.setFillStyle(Qte)}}]})}play(){this.tl1.play(),this.tl1.resume()}stop(){this.tl1.pause()}};function Fx(e,t){var i={};for(var r in e)i[r]=e[r];for(var r in t)i[r]=t[r];return i}function Dx(e,t,i){return Math.min(Math.max(e,t),i)}function Bf(e,t){let i=Math.abs(e-t)%360,r=i>180?360-i:i,s=e-t>=0&&e-t<=180||e-t<=-180&&e-t>=-360?-1:1;return r*s}function $te(){let e=new Uint32Array(1);return self.crypto.getRandomValues(e),e/4294967296}function Uf(e=80,t=4,i=1){let r=0,s=0,n=10,a=10,h=150,o=0,u=0,f=50,d=270,v=.25,c=2;if(i==1)var p=1,m=!0;else if(i==2)var p=-1,m=!0;else var m=!1;let x=[];x.push({trial_type:"instruct_basic"});for(let T=0;T<n;T++)x.push({trial_type:"practice_basic",aim:!1,rot_or_clamp:!1,manip_angle:0,report:!1,fb:6,target_angle:d,cursor_cloud_sd:0,sign_val:p,group_num:i,grad_bool:m});x.push({trial_type:"instruct_report"});for(let T=0;T<a;T++)x.push({trial_type:"practice_report",aim:!1,rot_or_clamp:!1,manip_angle:0,report:!0,fb:6,target_angle:d,cursor_cloud_sd:0,sign_val:p,group_num:i,grad_bool:m});for(let T=0;T<h;T++){if(m==!0)var g=15,y=p*(15*$te()-7.5+Math.min(g,T*v));else var y=15*$te()-7.5,g=0;x.push({trial_type:"adapt_report",aim:!1,rot_or_clamp:"rot",manip_angle:y,report:!0,fb:6,target_angle:d,cursor_cloud_sd:0,step_val:p*Math.min(g,T*v),max:g,sign_val:p,group_num:i,grad_bool:m})}x.push({trial_type:"instruct_wash"});for(let T=0;T<f;T++)x.push({trial_type:"wash",aim:!1,rot_or_clamp:!1,manip_angle:0,fb:0,target_angle:d,cursor_cloud_sd:0,sign_val:p,group_num:i,grad_bool:m});return x}var jte=16777215,Ix=642574;var pUe=16711680,mUe=6710886;var no=10934762,eie=15,La=8,tie=12;var xt=378,ao=30,iie=.25;var gUe=1e3,xUe=300,yUe=500,TUe=100,EUe=500,SUe=2,ho=50,xn={},Ne=Jte(["INSTRUCT","AIM","REPORT","PRETRIAL","MOVING","POSTTRIAL","END"]),kf={reached_away:1,late_start:2,slow_reach:4,wiggly_reach:8,returned_to_center:16,early_start:32},Oa={mp:1,ep:2,online:4};function _Ue(e){return e.filter(t=>!t.trial_type.startsWith("instruct_")).length}function rie(e){var t=Math.sqrt(-2*Math.log(1-Math.random()))*Math.cos(2*Math.PI*Math.random());return e*t}var oo=class extends Phaser.Scene{constructor(){super({key:"MainScene"}),this._state=Ne.INSTRUCT,this.entering=!0,this.all_data={practice_basic:[],practice_aim:[],practice_report:[],adapt_report:[],clamp:[],rot:[],wash:[]}}preload(){}create(){let t=this.game.config,i=this.game.user_config;this.cameras.main.setBounds(-t.width/2,-t.height/2,t.width,t.height);let r=t.height,s=r/2;this.trial_counter=0,this.entering=!0,this.state=Ne.INSTRUCT,this.rts=[],this.movets=[],this.is_debug=i.debug,this.is_debug?(this.trials=Uf(4,i.clamp_size,i.group),this.typing_speed=10):(this.trials=Uf(80,i.clamp_size,i.group),this.typing_speed=10);let n=Phaser.Math.DegToRad(270),a=xt*Math.cos(n),h=xt*Math.sin(n);this.target=this.add.circle(a,h,eie,mUe),this.target.visible=!1,this.user_cursor=this.add.circle(ao,ao,La,no),this.fake_cursor=this.add.circle(0,0,La,no).setVisible(!1),this.dbg_cursor=this.add.circle(0,0,La,pUe,1).setVisible(!1),this.center=this.add.circle(0,0,tie,jte),this.origin=new Phaser.Geom.Circle(0,0,tie),this.endpoint_cursor=this.add.circle(0,0,La,no),this.endpoint_cursor.visible=!1,this.midpoint_cursor=this.add.circle(0,0,La,no),this.midpoint_cursor.visible=!1,this.midpoint_raw_angle=0,this.midpoint_cursor_angle=0,this.endpoint_angle=0,this.endpoint_raw_angle=0,this.rt=this.add.renderTexture(0,0,500,500).setOrigin(.5,.5),this.rt.camera.setBounds(-250,-250,500,500),this.confidence_scale=this.add.rectangle(-350,0,50,100,16776960).setOrigin(.5,.5).setVisible(!1),this.confidence_thumb=this.add.rectangle(-350,0,50,2,3895711).setOrigin(.5,.5).setVisible(!1),this.confidence_value=0,this.sense=2,this.confidence_txt1=this.add.text(-270,100,"Not confident",{fontFamily:"Verdana",color:"#ffffff",backgroundColor:"#000000",fontSize:24,align:"center"}).setOrigin(1,.5).setVisible(!1),this.confidence_txt2=this.add.text(-260,-80,"Very confident",{fontFamily:"Verdana",color:"#ffffff",backgroundColor:"#000000",fontSize:24,align:"center"}).setOrigin(1,.5).setVisible(!1),this.confidence_instruct=this.add.text(0,-450,"How confident are you about your next reach?",{fontFamily:"Verdana",color:"#ffffff",backgroundColor:"#000000",fontSize:40,align:"center"}).setOrigin(.5,.5).setVisible(!1),this.input.keyboard.on("keydown-UP",o=>{if(this.confidence_thumb.visible){if(this.keypress=!0,o.repeat?this.sense=Math.min(this.sense+.5,4):this.sense=2,this.confidence_thumb.y=Math.max(-50,this.confidence_thumb.y-this.sense),this.confidence_value=Math.round((-this.confidence_thumb.y+50/100)*100),this.confidence_thumb.y<0)var u=Phaser.Display.Color.GetColor((this.confidence_thumb.y+50)/50*255,255,0);else var u=Phaser.Display.Color.GetColor(255,255-this.confidence_thumb.y/50*255,0);console.log(u),this.confidence_scale.setFillStyle(u)}}),this.input.keyboard.on("keydown-DOWN",o=>{if(this.confidence_thumb.visible){if(this.keypress=!0,o.repeat?this.sense=Math.min(this.sense+.5,4):this.sense=2,this.confidence_thumb.y=Math.min(50,this.confidence_thumb.y+this.sense),this.confidence_value=Math.round((-this.confidence_thumb.y+50)/100*100),this.confidence_thumb.y<0)var u=Phaser.Display.Color.GetColor((this.confidence_thumb.y+50)/50*255,255,0);else var u=Phaser.Display.Color.GetColor(255,255-this.confidence_thumb.y/50*255,0);console.log(u),this.confidence_scale.setFillStyle(u)}}),this.aim_angle=0,this.aim_line=this.add.line(0,0,0,0,0,.8*xt,16777215).setOrigin(.5,.5).setVisible(!1),this.aim_reticle=this.add.text(0,xt,"X",{fontFamily:"Verdana",fontSize:50,align:"center"}).setOrigin(.5,.5).setVisible(!1),this.aim_txt=this.add.text(0,s-100,"Click the mouse button to set aim.",{fontFamily:"Verdana",fontSize:50,align:"center"}).setOrigin(.5,.5).setVisible(!1),this.aim_line.y=.5*xt,this.move_instruct=this.add.text(0,450,"Move!",{fontFamily:"Verdana",color:"#ffffff",backgroundColor:"#000000",fontSize:40,align:"center"}).setOrigin(.5,.5).setVisible(!1),this.darkener=this.add.rectangle(0,0,r,r,0).setAlpha(1),this.other_warns=this.add.rexBBCodeText(0,0,"",{fontFamily:"Verdana",fontStyle:"bold",fontSize:50,color:"#ffffff",align:"center",stroke:"#444444",backgroundColor:"#000000",strokeThickness:4}).setOrigin(.5,.5).setVisible(!1),this.instructions=Zte(this,-400,-s+50,"",{fontFamily:"Verdana",fontSize:20,wrap:{mode:"word",width:800}}).setVisible(!1),this.start_txt=this.add.text(0,s-100,"Click the mouse button to continue.",{fontFamily:"Verdana",fontSize:50,align:"center"}).setOrigin(.5,.5).setVisible(!1),this.debug_txt=this.add.text(-s,-s,""),this.progress=this.add.text(s,-s,"").setOrigin(1,0),this.tmp_counter=1,this.total_len=_Ue(this.trials),this.examples={basic:new Ma(this,0,200,!0,!1).setVisible(!1),clamp:new Ma(this,0,200,!0,!0).setVisible(!1)},this.raw_x=ao,this.raw_y=ao,this.next_trial(),this.input.on("pointerdown",()=>{this.state!==Ne.END&&(this.scale.startFullscreen(),this.time.delayedCall(300,()=>{this.input.mouse.requestPointerLock()}))}),this.input.on("pointerlockchange",()=>{console.log("oh no, this does not work")}),this.ptr_cb=o=>{if(this.input.mouse.locked){let u="getCoalescedEvents"in o,f="altitudeAngle"in o,d=u&&f?o.getCoalescedEvents():[o];for(let v of d){let c=v.movementX*iie,p=v.movementY*iie;this.raw_x+=c,this.raw_y+=p,this.raw_x=Dx(this.raw_x,-s,s),this.raw_y=Dx(this.raw_y,-s,s);let m=Math.sqrt(Math.pow(this.raw_x,2)+Math.pow(this.raw_y,2)),x=Phaser.Math.RadToDeg(Phaser.Math.Angle.Normalize(Math.atan2(this.raw_y,this.raw_x))),g=this.raw_x,y=this.raw_y;this.dbg_cursor.setPosition(g,y),this.cursor_angle=x,this.user_cursor.x=g,this.user_cursor.y=y,this.extent=m,this.current_trial.rot_or_clamp=="clamp"?this.rad=Phaser.Math.DegToRad(this.current_trial.manip_angle+this.current_trial.target_angle):this.current_trial.rot_or_clamp=="rot"?this.rad=Phaser.Math.DegToRad(this.current_trial.manip_angle+this.cursor_angle):this.rad=Phaser.Math.DegToRad(this.cursor_angle),this.fake_cursor.x=m*Math.cos(this.rad),this.fake_cursor.y=m*Math.sin(this.rad),this.state===Ne.MOVING&&(this.current_trial.fb&Oa.online&&(this.rt.x=this.fake_cursor.x,this.rt.y=this.fake_cursor.y),m>=.5*xt&&this.midpoint_cursor.x==0&&this.midpoint_cursor.y==0?(this.midpoint_cursor.x=this.fake_cursor.x,this.midpoint_cursor.y=this.fake_cursor.y,this.midpoint_raw_angle=this.cursor_angle,this.midpoint_cursor_angle=Phaser.Math.RadToDeg(this.rad),this.current_trial.fb&Oa.mp&&(this.current_trial.cursor_cloud_sd>0?(this.rt.x=this.midpoint_cursor.x,this.rt.y=this.midpoint_cursor.y,this.rt.draw(this.cloud)):this.midpoint_cursor.visible=!0,this.mp_fb_done=!1,this.time.delayedCall(TUe,()=>{this.midpoint_cursor.visible=!1,this.rt.clear(),this.mp_fb_done=!0}))):this.mp_fb_done=!0,this.movement_data.push({evt_time:v.timeStamp,raw_x:this.raw_x,raw_y:this.raw_y,cursor_x:this.fake_cursor.x,cursor_y:this.fake_cursor.y,cursor_extent:m,cursor_angle:Phaser.Math.RadToDeg(this.rad)})),this.state===Ne.AIM&&(this.aim_reticle.x=xt*Math.cos(Phaser.Math.DegToRad(this.cursor_angle)),this.aim_reticle.y=xt*Math.sin(Phaser.Math.DegToRad(this.cursor_angle)),this.aim_reticle.angle=this.cursor_angle-90,this.aim_line.x=this.aim_reticle.x*.5,this.aim_line.y=this.aim_reticle.y*.5,this.aim_line.angle=this.cursor_angle-90),this.state===Ne.POSTTRIAL&&(this.endpoint_cursor.x=xt*Math.cos(Phaser.Math.DegToRad(this.endpoint_angle)),this.endpoint_cursor.y=xt*Math.sin(Phaser.Math.DegToRad(this.endpoint_angle)))}}},document.addEventListener("pointermove",this.ptr_cb,{passive:!0,capture:!0}),xn.instruct_basic=`Use your mouse to hit the [color=#00ff00]green[/color] target with the cursor as accurately as possible. Hold the cursor in the white circle at the center of the screen to start a trial.

        After some reaches, you will be asked to rate how confident you are that your next reach will accurately hit the target,

        Use the arrow (or numpad) keys on your keyboard to control the bar on the colored rating scale. The [color=#00ff00]UP-arrow[/color] increases confidence and [color=#ff0000]DOWN[/color] decreases confidence. Holding down an arrow key moves the bar faster. Change your confidence based on how accurate you are! Then Press ENTER to register your rating.

        Some trials will require a confidence rating and others will not. In the example below we show the system cursor to illustrate the mouse position, but it will never be visible when you are doing the task.`,xn.instruct_aim=`Great work! Now, before each trial, we may ask you to indicate where you intend to move. Use your mouse to control the reticle and place the X where you intend to move your hand. 

            Once you've set where your intended aim, right click to proceed to the trial. Remember to move toward where you aimed!`,xn.instruct_report=`Now, before each reach, use your keyboard arrows to rate how confident you are that where you reach will result in a target hit. 

      UP is higher confidence, DOWN is lower confidence. 

      The rating bar always starts in the middle

      Once you've rated your confidence, press ENTER to register your rating, then reach again!`,xn.instruct_clamp=`Excellent job! In this section, the cursor will now be broken. It will move in a straight line toward the target, but it will always land slightly off of the center.

            [color=#ffff00]You will see the cursor follow this path no matter where you actually move your mouse. You can ignore the cursor and keep moving as you were before.[/color] 

            Ignore the cursor and try to move your mouse straight to the very center of the target. The cursor will never seem to hit the target, but that is because it is broken. 

            The cursor will always be offset but you can ignore that and keep reaching straight towards the target.

            Remember to make fast, straight movements toward the center of the target. Always try to hit the center of the target!`,xn.instruct_rot=`Excellent job! In this section, the cursor will now be broken. It will move a slightly different direction from where you move your hand.

            [color=#ffff00]You should try to adjust your movement to make the cursor hit the target. Specifically, you should find a spot to aim where the cursor goes straight to the target.[/color] 

            Ignore the cursor and try to move your mouse straight to the very center of the target. The cursor will never seem to hit the target, but that is because it is broken. 

            The cursor will always be offset but you can ignore that and keep reaching straight towards the target.

            Remember to make fast, straight movements toward the center of the target. Always try to hit the center of the target!`,xn.instruct_wash="Great work! You are almost finished! In this section you will not need to rate confidence. Also, you wont see the cursor when reaching. Still reach straight to the target, even though you will not see the cursor."}update(){let t=this.current_trial;switch(this.state){case Ne.INSTRUCT:if(this.entering){this.entering=!1;let v=t.trial_type;this.instructions.visible=!0,this.darkener.visible=!0,this.instructions.start(xn[v],this.typing_speed),v==="instruct_basic"?(this.examples.basic.visible=!0,this.examples.basic.play()):(v==="instruct_clamp"||v==="instruct_rot"||v==="break")&&(this.examples.clamp.visible=!0,this.examples.clamp.play()),this.instructions.typing.once("complete",()=>{this.start_txt.visible=!0,this.input.once("pointerdown",()=>{this.examples.basic.stop(),this.examples.basic.visible=!1,this.examples.clamp.stop(),this.examples.clamp.visible=!1,this.next_trial(),this.darkener.visible=!1,this.instructions.visible=!1,this.instructions.text="",this.start_txt.visible=!1})})}break;case Ne.AIM:if(this.entering){this.entering=!1,this.user_cursor.visible=!1,this.fake_cursor.visible=!1,this.aim_line.visible=!0,this.aim_reticle.visible=!0,this.aim_txt.visible=!0;var i=Phaser.Math.DegToRad(this.current_trial.target_angle);this.target.x=xt*Math.cos(i),this.target.y=xt*Math.sin(i),this.target.fillColor=Ix,this.target.visible=!0,this.input.once("pointerdown",()=>{this.aim_line.visible=!1,this.aim_reticle.visible=!1,this.aim_txt.visible=!0,this.aim_angle=this.cursor_angle,console.log("Aim Angle: "+this.aim_angle),this.state=Ne.REPORT})}break;case Ne.REPORT:if(this.entering){this.keypress=!1;let v=this.current_trial.grad_bool,c=this.current_trial.sign_val,p=this.current_trial.group_num,m=this.current_trial.max;console.log("group: "+p),console.log("manipulation: "+this.current_trial.manip_angle),console.log("step: "+this.current_trial.step_val),console.log("max: "+m),console.log("sign: "+c),console.log("gradual?: "+v),this.entering=!1,this.user_cursor.visible=!1,this.fake_cursor.visible=!1,this.aim_line.visible=this.current_trial.aim,this.aim_reticle.visible=this.current_trial.aim,this.aim_txt.visible=this.current_trial.aim;var i=Phaser.Math.DegToRad(this.current_trial.target_angle);this.target.x=xt*Math.cos(i),this.target.y=xt*Math.sin(i),this.target.fillColor=Ix,this.target.visible=!0,this.center.visible=!0,this.confidence_thumb.y=0,this.confidence_scale.setFillStyle(16776960),this.confidence_value=50,this.confidence_txt1.setVisible(!0),this.confidence_txt2.setVisible(!0),this.confidence_instruct.setVisible(!0),this.confidence_scale.setVisible(!0),this.confidence_thumb.setVisible(!0)}this.keypress==!0&&this.input.keyboard.once("keydown-ENTER",()=>{this.aim_line.visible=!1,this.aim_reticle.visible=!1,this.aim_txt.visible=!1,this.confidence_txt1.visible=!1,this.confidence_txt2.visible=!1,this.confidence_instruct.visible=!1,this.confidence_thumb.visible=!1,this.confidence_scale.visible=!1,this.confidence_value=Math.round((-this.confidence_thumb.y+50)/100*100),console.log("Confidence: "+this.confidence_value),this.state=Ne.PRETRIAL});break;case Ne.PRETRIAL:if(this.entering&&(this.origin.visible=!0,this.center.visible=!0,this.entering=!1,this.target.visible=!1,this.hold_val=yUe,this.hold_t=this.hold_val,this.user_cursor.visible=!0,this.t_ref=window.performance.now(),this.move_instruct.setVisible(!0),this.current_trial.cursor_cloud_sd>0)){var r=this.current_trial.cursor_cloud_sd*96/2.54,s=Array.apply(null,Array(ho)).map(function(){return rie(r)}),n=Array.apply(null,Array(ho)).map(function(){return rie(r)}),a=s.reduce((v,c)=>v+c)/ho;s=s.map(v=>v-a);var h=n.reduce((v,c)=>v+c)/ho;n=n.map(v=>v-h);for(var o=[],u=0;u<ho;u++)o[u]=this.add.circle(s[u],n[u],SUe,no,.2);this.cloud=this.add.container(0,0).setVisible(!1),this.cloud.add(o)}Phaser.Geom.Circle.ContainsPoint(this.origin,this.user_cursor)?(this.hold_t-=this.game.loop.delta,this.hold_t<=0&&(this.inter_trial_interval=window.performance.now()-this.t_ref,this.raw_x=0,this.raw_y=0,this.extent=0,this.user_cursor.x=0,this.user_cursor.y=0,this.user_cursor.visible=!1,this.state=Ne.MOVING,this.movement_data=[])):this.hold_t=this.hold_val;break;case Ne.MOVING:if(this.entering){this.entering=!1,this.rt.clear(),this.current_trial.fb&Oa.online&&this.rt.draw(this.cloud),this.reference_time=this.game.loop.now,this.last_frame_time=this.game.loop.now,this.dropped_frame_count=0,this.dts=[],this.movement_data.splice(0,0,{evt_time:this.reference_time,raw_x:0,raw_y:0,cursor_x:0,cursor_y:0,cursor_extent:0,cursor_angle:0}),this.center.visible=!1;var i=Phaser.Math.DegToRad(this.current_trial.target_angle);this.target.x=xt*Math.cos(i),this.target.y=xt*Math.sin(i),this.target.fillColor=Ix,this.target.visible=!0,this.fake_cursor.visible=(t.fb&Oa.online)>0&&t.cursor_cloud_sd==0}else{let v=1/this.game.user_config.refresh_rate_est*1e3,c=this.game.loop.now-this.last_frame_time;this.dropped_frame_count+=c>1.5*v,this.dts.push(c),this.last_frame_time=this.game.loop.now}Math.sqrt(Math.pow(this.user_cursor.x,2)+Math.pow(this.user_cursor.y,2))>=.98*xt&&(this.state=Ne.POSTTRIAL,this.user_cursor.visible=!1,this.fake_cursor.visible=!1,this.rt.clear(),this.endpoint_angle=Phaser.Math.RadToDeg(this.rad),this.endpoint_raw_angle=this.cursor_angle);break;case Ne.POSTTRIAL:if(this.entering){this.entering=!1,this.move_instruct.setVisible(!1);let v={movement_data:this.movement_data,ref_time:this.reference_time,trial_number:this.trial_counter++,target_size_radius:eie,cursor_size_radius:La,iti:this.inter_trial_interval,hold_time:this.hold_val,dropped_frame_count:this.dropped_frame_count},c=Fx(t,v);console.log("Combo Data: "+c);let p=EUe,m=0,x=v.movement_data[1],g=v.movement_data[v.movement_data.length-1],y=t.target_angle,T=this.movement_data.filter(b=>b.cursor_extent>15).map(b=>b.cursor_angle),S=T.slice(-1),E=T.map(b=>Bf(b,S)),_=null,w=null;if(g&&v.movement_data.length>2){var f=v.movement_data.findIndex(function(b){return b.cursor_extent>=15});_=v.movement_data[f].evt_time-this.reference_time,w=g.evt_time-v.movement_data[f].evt_time}console.log(_),_!==null&&(this.rts.push(_),this.movets.push(w));let R=!1,q=1e3,A=0;Math.abs(Bf(g.cursor_angle,y))>=60&&(A|=kf.reached_away,R||(R=!0,this.other_warns.text="[b]Please try to hit the target.[/b]")),_>=gUe&&(A|=kf.late_start,R||(R=!0,this.other_warns.text=`[b]Please start the
reach sooner.[/b]`)),w>=xUe&&(A|=kf.slow_reach,R||(R=!0,this.other_warns.text=`[b]Please move quickly
 through the target.[/b]`)),Hte(E)>10&&(A|=kf.wiggly_reach,R||(R=!0,this.other_warns.text=`[b]Please make [color=yellow]straight[/color]
reaches toward the target.[/b]`)),R?(p+=q,this.other_warns.visible=!0,this.target.visible=!1,this.time.delayedCall(q,()=>{this.other_warns.visible=!1})):this.current_trial.cursor_cloud_sd>0&&(this.current_trial.fb&Oa.ep)>0?(this.rt.x=this.endpoint_cursor.x,this.rt.y=this.endpoint_cursor.y,this.rt.draw(this.cloud)):this.endpoint_cursor.visible=this.current_trial.fb&Oa.ep,c.reaction_time=_,c.reach_time=w,c.aim_angle=this.aim_angle,c.midpoint_raw_angle=this.midpoint_raw_angle,c.midpoint_cursor_angle=this.midpoint_cursor_angle,c.endpoint_raw_angle=this.endpoint_raw_angle,c.endpoint_cursor_angle=this.endpoint_angle,c.confidence=this.confidence_value,this.time.delayedCall(m,()=>{this.time.delayedCall(p,()=>{c.any_punishment=R,c.punish_types=A,this.all_data[t.trial_type].push(c),this.tmp_counter++,this.raw_x=this.raw_y=this.user_cursor.x=this.user_cursor.y=ao,this.user_cursor.visible=!0,this.fake_cursor.visible=!1,this.target.visible=!1,this.endpoint_cursor.visible=!1,this.rt.clear(),this.midpoint_cursor.x=0,this.midpoint_cursor.y=0,this.rt.x=0,this.rt.y=0,this.tweens.add({targets:this.user_cursor,scale:{from:0,to:1},ease:"Elastic",easeParams:[5,.5],duration:800,onComplete:()=>{this.next_trial()}})})})}break;case Ne.END:this.entering&&(this.entering=!1,this.input.mouse.releasePointerLock(),document.removeEventListener("pointermove",this.ptr_cb,{passive:!0,capture:!0}),this.tweens.addCounter({from:255,to:0,duration:2e3,onUpdate:v=>{let c=Math.floor(v.getValue());this.cameras.main.setAlpha(c/255)},onComplete:()=>{this.scene.start("EndScene",this.all_data)}}));break}}get state(){return this._state}set state(t){this.entering=!0,this._state=t}next_trial(){this.tmp_counter>this.total_len?this.progress.visible=!1:this.progress.text=`${"Trial: "+this.tmp_counter} / ${this.total_len}`,this.current_trial=this.trials.shift();let t=this.current_trial,i="";t!==void 0&&(i=t.trial_type),t===void 0||this.trials.length<1&&i.startsWith("break")?this.state=Ne.END:i.startsWith("instruct_")||i.startsWith("break")?this.state=Ne.INSTRUCT:i.startsWith("practice")||i.startsWith("clamp")||i.startsWith("rot")||i.startsWith("wash")||i.startsWith("adapt")?this.current_trial.aim?(this.state=Ne.AIM,this.target.visible=!0):this.current_trial.report?(this.state=Ne.REPORT,this.target.visible=!0):(this.state=Ne.PRETRIAL,this.center.fillColor=jte,this.target.visible=!1):console.error("Oh no, wrong next_trial.")}};function sie(e,t){return fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e,(i,r)=>r&&r.toFixed?Number(r.toFixed(3)):r)}).then(function(i){return i.status!==200?console.log("There was an issue: "+i.status):console.log("No issues ;)"),i}).catch(function(i){return console.log("Fetch err: ",i),500})}function wUe(e){return sie(e,"/.netlify/functions/mailgun")}function CUe(e){return sie(e,"/.netlify/functions/faunadb")}function uo(e){return[wUe(e),CUe(e)]}var fo=class extends Phaser.Scene{constructor(){super({key:"EndScene"})}create(t){let i=this.game.config.height,r=i/2,s=this.game.user_config.id,n=this.game.user_config.is_sona;this.scale.stopFullscreen();let a=n?".":` (will redirect within
10 seconds after selection).`,h=this.add.text(r,100,`Last question!
Select which input device
you used${a}`,{fontFamily:"Verdana",fontSize:20,align:"center"}).setOrigin(.5,.5),o="https://google.com/?cc=";this.game.user_config.is_prolific?o="https://app.prolific.co/submissions/complete?cc=":n&&(o=`https://yale.sona-systems.com/webstudy_credit.aspx?experiment_id=1479&credit_token=762ab607160043e58dd4ba6e9e1b288d&survey_code=${s}`);function u(m){let x={config:m.game.user_config,data:t};if(n){window.removeEventListener("beforeunload",lo),Promise.all(uo(x)).then(S=>{window.location.href=o+"8E059F9A"}),h.visible=!1,m.add.text(r,r-100,`Click here to download
the debriefing.`,{fontFamily:"Verdana",fontStyle:"bold",fontSize:40,color:"#dddddd",stroke:"#444444",strokeThickness:4,align:"center"}).setOrigin(.5,.5).setInteractive().on("pointerdown",()=>{let S=document.createElement("a");S.href="./assets/actlab_debrief.pdf",S.target="_blank",S.download="actlab_debrief.pdf",S.click()});let T=m.add.text(r,r+100,`Click here to get SONA credit.
(Will take a moment to redirect)`,{fontFamily:"Verdana",fontStyle:"bold",fontSize:40,color:"#00ff00",stroke:"#444444",strokeThickness:4,align:"center"}).setOrigin(.5,.5).setInteractive().once("pointerdown",()=>{T.text="Redirecting now...",window.removeEventListener("beforeunload",lo),Promise.all(uo(x)).then(S=>{window.location.href=o})})}else{window.removeEventListener("beforeunload",lo);var g=document.createElement("a"),y=new Blob([JSON.stringify(x)],{type:"text/plain"});g.href=URL.createObjectURL(y),g.download=`data_${JSON.stringify(new Date)}.json`,g.click(),URL.revokeObjectURL(g.href),Promise.all(uo(x)).then(T=>{window.location.href=o+"8E059F9A"})}}function f(m){m.tweens.add({targets:[d,c,p,v],scale:{from:1,to:0},duration:500})}let d=this.add.image(i*.3,i*.3,"mouse").setInteractive().setOrigin(.5,.5);d.on("pointerdown",()=>{this.game.user_config.device="mouse",f(this),u(this)});let v=this.add.image(i*.3,i*.7,"touchscreen").setInteractive().setOrigin(.5,.5);v.on("pointerdown",()=>{this.game.user_config.device="touchscreen",f(this),u(this)});let c=this.add.image(i*.7,i*.3,"trackball").setInteractive().setOrigin(.5,.5);c.on("pointerdown",()=>{this.game.user_config.device="trackball",f(this),u(this)});let p=this.add.image(i*.7,i*.7,"trackpad").setInteractive().setOrigin(.5,.5);p.on("pointerdown",()=>{this.game.user_config.device="trackpad",f(this),u(this)})}};var dse=yse(nie());var RUe=Phaser.Renderer.WebGL.Utils,qUe=function(e,t,i,r){if(!(t.width===0||t.height===0)){i.addToRenderList(t);var s=t.frame,n=s.width,a=s.height,h=RUe.getTintAppendFloatAlpha,o=e.pipelines.set(t.pipeline,t),u=o.setTexture2D(s.glTexture,t);e.pipelines.preBatch(t),o.batchTexture(t,s.glTexture,n,a,t.x,t.y,n/t.style.resolution,a/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,a,h(t.tintTopLeft,i.alpha*t._alphaTL),h(t.tintTopRight,i.alpha*t._alphaTR),h(t.tintBottomLeft,i.alpha*t._alphaBL),h(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,r,!1,u),e.pipelines.postBatch(t)}},aie=qUe;var AUe=function(e,t,i,r){t.width===0||t.height===0||(i.addToRenderList(t),e.batchSprite(t,t.frame,i,r))},hie=AUe;var oie={renderWebGL:aie,renderCanvas:hie};var Yf=Phaser.Display.Canvas.CanvasPool,bUe=function(e){var t=Yf.create(this),i=t.getContext("2d");e.syncFont(t,i);var r=i.measureText(e.testString);if("actualBoundingBoxAscent"in r){var s=r.actualBoundingBoxAscent,n=r.actualBoundingBoxDescent,u={ascent:s,descent:n,fontSize:s+n};return Yf.remove(t),u}var a=Math.ceil(r.width*e.baselineX),h=a,o=2*h;h=h*e.baselineY|0,t.width=a,t.height=o,i.fillStyle="#f00",i.fillRect(0,0,a,o),i.font=e._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(e.testString,0,h);var u={ascent:0,descent:0,fontSize:0};if(!i.getImageData(0,0,a,o))return u.ascent=h,u.descent=h+6,u.fontSize=u.ascent+u.descent,Yf.remove(t),u;var f=i.getImageData(0,0,a,o).data,d=f.length,v=a*4,c,p,m=0,x=!1;for(c=0;c<h;c++){for(p=0;p<v;p+=4)if(f[m+p]!==255){x=!0;break}if(!x)m+=v;else break}for(u.ascent=h-c,m=d-v,x=!1,c=o;c>h;c--){for(p=0;p<v;p+=4)if(f[m+p]!==255){x=!0;break}if(!x)m-=v;else break}return u.descent=c-h,u.fontSize=u.ascent+u.descent,Yf.remove(t),u},Nx=bUe;var PUe={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/},le=PUe;var MUe=Phaser.Utils.String.Pad,LUe=function(e,t,i){if(e==null)return e;switch(typeof e){case"string":return e;case"number":return`#${MUe(Math.floor(e).toString(16),6,"0",1)}`;case"function":return e(t,i);case"object":return e.hasOwnProperty("r")?e.hasOwnProperty("a")?`rgba(${e.r},${e.g},${e.b},${e.a})`:`rgb(${e.r},${e.g},${e.b})`:e.hasOwnProperty("h")?e.hasOwnProperty("a")?`hsla(${e.h},${e.s},${e.l},${e.a})`:`hsl(${e.h},${e.s},${e.l})`:e;default:return e}},st=LUe;var OUe=Phaser.Utils.Objects.GetAdvancedValue,Jt=Phaser.Utils.Objects.GetValue,Gx={backgroundColor:["backgroundColor",null,st],backgroundColor2:["backgroundColor2",null,st],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,st],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",st],stroke:["stroke","#fff",st],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",st],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",st],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]},Bx=class{constructor(t,i){this.parent=t,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(i,!1,!0);var r=Jt(i,"metrics",!1);r?this.metrics={ascent:Jt(r,"ascent",0),descent:Jt(r,"descent",0),fontSize:Jt(r,"fontSize",0)}:this.metrics=Nx(this)}get canvas(){return this.parent.canvasText.canvas}get context(){return this.parent.canvasText.context}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==le.NO_WRAP&&this.wrapWidth===0}setStyle(t,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!1),t&&t.hasOwnProperty("wrap")){var s=t.wrap;if(s.hasOwnProperty("mode")){var n=s.mode;typeof n=="string"&&(s.mode=uie[n])}else s.hasOwnProperty("width")&&(s.mode=1)}t&&t.rtl&&r&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");for(var a in Gx){var h=Gx[a],o=h[0],u=r?h[1]:this[a],f=h[2];if(a==="wrapCallback"||a==="wrapCallbackScope")this[a]=Jt(t,o,u);else{var d=OUe(t,o,u);f&&(d=f(d)),this[a]=d}}var v=Jt(t,"font",null);v===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=v;var c=Jt(t,"fill",null);c!==null&&(this.color=st(c));var p=Jt(t,"images",void 0);return p&&this.parent.addImage(p),i?this.update(!0):this.parent}syncFont(t,i){i.font=this._font}syncStyle(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"}syncShadow(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=Nx(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=Jt(t,"fontFamily","Courier"),this.fontSize=Jt(t,"fontSize","16px"),this.fontStyle=Jt(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,i,r){return r===void 0&&(r=!0),this.backgroundColor=st(t,this.canvas,this.context),this.backgroundColor2=st(i,this.canvas,this.context),this.backgroundHorizontalGradient=r,this.update(!1)}setBackgroundStrokeColor(t,i){return this.backgroundStrokeColor=st(t,this.canvas,this.context),this.backgroundStrokeLineWidth=i,this.update(!1)}setBackgroundCornerRadius(t,i){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=i,this.update(!1)}setFill(t){return this.color=st(t,this.canvas,this.context),this.update(!1)}setColor(t){return this.color=st(t,this.canvas,this.context),this.update(!1)}setStroke(t,i){return t===void 0?this.strokeThickness=0:(i===void 0&&(i=this.strokeThickness),this.stroke=st(t,this.canvas,this.context),this.strokeThickness=i),this.update(!0)}setShadow(t,i,r,s,n,a){return t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r="#000"),s===void 0&&(s=0),n===void 0&&(n=!1),a===void 0&&(a=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=st(r,this.canvas,this.context),this.shadowBlur=s,this.shadowStroke=n,this.shadowFill=a,this.update(!1)}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=st(t,this.canvas,this.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,i,r){return t===void 0&&(t="#000"),i===void 0&&(i=0),r===void 0&&(r=0),this.underlineColor=st(t,this.canvas,this.context),this.underlineThickness=i,this.underlineOffset=r,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=st(t,this.canvas,this.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=uie[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,i){return t===void 0&&(t="left"),i===void 0&&(i="top"),this.halign=t,this.valign=i,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,i){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=Jt(i,"fontFamily",this.fontFamily),this.fontSize=Jt(i,"fontSize",this.fontSize),this.fontStyle=Jt(i,"fontStyle",this.fontStyle)),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={};for(var i in Gx)t[i]=this[i];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}},pat={left:le.hleft,center:le.hcenter,right:le.hright},mat={top:le.vtop,center:le.vcenter,bottom:le.vbottom},uie={none:le.NO_WRAP,word:le.WORD_WRAP,char:le.CHAR_WRAP,character:le.CHAR_WRAP},Xf=Bx;var Ux=Phaser.Display.Canvas.CanvasPool,FUe=function(e,t,i){i===void 0&&(i={});var r=Ux.create(this),s=r.getContext("2d");e.syncFont(r,s);var n=s.measureText(t),a=Math.ceil(n.width*e.baselineX),h=a,o=2*h;if(h=h*e.baselineY|0,r.width=a,r.height=o,s.fillStyle="#f00",s.fillRect(0,0,a,o),s.font=e._font,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(e.testString,0,h),i.left=0,a===0||o===0||!s.getImageData(0,0,a,o))return Ux.remove(r),i;for(var u=s.getImageData(0,0,a,o).data,f=!1,d=0;d<a;d++){for(var v=0;v<o;v++){var c=(v*a+d)*4;if(u[c]!==255){i.left=d,f=!0;break}}if(f)break}return Ux.remove(r),i},lie=FUe;var zs=Phaser.Utils.Objects.GetValue,kx=class{constructor(t,i,r,s,n){this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,i,r,s,n)}setTo(t,i,r,s,n){return this.setPosition(t,i),this.setRadius(n),this.setSize(r,s),this}setPosition(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.x=t,this.y=i,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,i){return this.width=t,this.height=i,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var i,r;typeof t=="number"?(i=t,r=t):(i=zs(t,"x",0),r=zs(t,"y",0));var s=this.cornerRadius;s.tl=Vf(zs(t,"tl",void 0),i,r),s.tr=Vf(zs(t,"tr",void 0),i,r),s.bl=Vf(zs(t,"bl",void 0),i,r),s.br=Vf(zs(t,"br",void 0),i,r)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Wf(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Wf(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Wf(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Wf(this.cornerRadius.br,t)}},Vf=function(e,t,i){return e===void 0?{x:t,y:i}:typeof e=="number"?{x:e,y:e}:e},Wf=function(e,t){typeof t=="number"?(e.x=t,e.y=t):(e.x=zs(t,"x",0),e.y=zs(t,"y",0))},fie=kx;var Kf=Phaser.Math.DegToRad,die=Kf(0),vie=Kf(90),cie=Kf(180),pie=Kf(270),DUe=function(e,t,i,r,s,n,a){var h=new fie(t,i,r,s,n),o=h.minWidth,u=h.minHeight,f=r>=o?1:r/o,d=s>=u?1:s/u,v=h.cornerRadius,c,p,m,x,g;e.save(),e.beginPath(),e.translate(t,i),c=v.br,p=c.x*f,m=c.y*d,x=r-p,g=s-m,e.moveTo(r,g),p>0&&m>0?Hf(e,x,g,p,m,die,vie,a):(e.lineTo(r,s),e.lineTo(x,s)),c=v.bl,p=c.x*f,m=c.y*d,x=p,g=s-m,e.lineTo(p,s),p>0&&m>0?Hf(e,x,g,p,m,vie,cie,a):(e.lineTo(0,s),e.lineTo(0,g)),c=v.tl,p=c.x*f,m=c.y*d,x=p,g=m,e.lineTo(0,g),p>0&&m>0?Hf(e,x,g,p,m,cie,pie,a):(e.lineTo(0,0),e.lineTo(x,0)),c=v.tr,p=c.x*f,m=c.y*d,x=r-p,g=m,e.lineTo(x,0),p>0&&m>0?Hf(e,x,g,p,m,pie,die,a):(e.lineTo(r,0),e.lineTo(r,g)),e.closePath(),e.restore()},Hf=function(e,t,i,r,s,n,a,h){if(h==null)e.ellipse(t,i,r,s,0,n,a);else{h+=1;for(var o,u,f,d=(a-n)/h,v=0;v<=h;v++)f=n+d*v,o=t+r*Math.cos(f),u=i+s*Math.sin(f),e.lineTo(o,u)}},mie=DUe;var IUe=function(e,t,i,r,s,n,a,h,o,u,f,d,v){if(mie(t,i,r,s,n,a,v),h!=null){if(f!=null){var c;d?c=t.createLinearGradient(0,0,s,0):c=t.createLinearGradient(0,0,0,n),c.addColorStop(0,h),c.addColorStop(1,f),h=c}t.fillStyle=h,t.fill()}o!=null&&u>0&&(t.strokeStyle=o,t.lineWidth=u,t.stroke())},gie=IUe;var NUe=function(e,t,i,r,s,n,a,h){if(!(t==null&&i==null)){var o=e.canvas.width,u=e.canvas.height;i==null&&(r=0);var f=r/2;o-=r,u-=r,gie(e.canvas,e.context,f,f,o,u,s,t,i,r,n,a,h)}},xie=NUe;var yie={draw(e,t,i,r){var s=this.penManager;this.hitAreaManager.clear();var n=this.context;n.save();var a=this.defaultStyle;this.clear(),xie(this,a.backgroundColor,a.backgroundStrokeColor,a.backgroundStrokeLineWidth,a.backgroundCornerRadius,a.backgroundColor2,a.backgroundHorizontalGradient,a.backgroundCornerIteration),e+=this.startXOffset,t+=this.startYOffset;var h=a.halign,o=a.valign,u,f=a.lineHeight,d=s.lines,v=d.length,c=a.maxLines,p,m,x;c>0&&v>c?(p=c,o==="center"?m=Math.floor((v-p)/2):o==="bottom"?m=v-p:m=0):(p=v,m=0),x=m+p;var g,y,T=this.rtl,S=T?this.parent.width:void 0;o==="center"?y=Math.max((r-p*f)/2,0):o==="bottom"?y=Math.max(r-p*f-2,0):y=0,y+=t;for(var E=m;E<x;E++)if(u=s.getLineWidth(E),u!==0){for(var _=d[E],w=_.length,R=h,q=0;q<w;q++){var A=_[q].prop.align;if(A!==void 0){R=A;break}}R==="center"?g=(i-u)/2:R==="right"?g=T?0:i-u:g=T?i-u:0,g+=e;for(var q=0;q<w;q++)this.drawPen(_[q],g,y,S)}n.restore()},drawPen(e,t,i,r){t+=e.x,i+=e.y+(e.prop.y||0),r!==void 0&&(t=r-t);var s=this.canvas,n=this.context;n.save();var a=this.parser.propToContextStyle(this.defaultStyle,e.prop);a.buildFont(),a.syncFont(s,n),a.syncStyle(s,n),a.underlineThickness>0&&e.width>0&&this.drawUnderline(t,i,e.width,a),e.isTextPen&&this.drawText(t,i,e.text,a),e.isImagePen&&this.drawImage(t,i,e.prop.img,a),n.restore(),e.hasAreaMarker&&e.width>0&&this.hitAreaManager.add(e.prop.area,t,i-this.startYOffset,e.width,this.defaultStyle.lineHeight)},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawUnderline(e,t,i,r){t+=r.underlineOffset-r.underlineThickness/2,this.autoRound&&(e=Math.round(e),t=Math.round(t));var s=this.context,n=s.lineCap;s.lineCap="butt",s.strokeStyle=r.underlineColor,s.lineWidth=r.underlineThickness,s.beginPath(),s.moveTo(e,t),s.lineTo(e+i,t),s.stroke(),s.lineCap=n},drawText(e,t,i,r){this.autoRound&&(e=Math.round(e),t=Math.round(t));var s=this.context;r.stroke&&r.stroke!=="none"&&r.strokeThickness>0&&(r.syncShadow(s,r.shadowStroke),s.strokeText(i,e,t)),r.color&&r.color!=="none"&&(r.syncShadow(s,r.shadowFill),s.fillText(i,e,t))},drawImage(e,t,i,r){t-=this.startYOffset,this.parent.imageManager.draw(i,this.context,e,t,this.autoRound)}};var zx=class{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}},Tie=zx;var Br=Tie;var yn=Phaser.Utils.Objects.GetValue,GUe=le.NO_NEWLINE,Eie=le.RAW_NEWLINE,Yx=class{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=yn(t,"text",""),this.x=yn(t,"x",0),this.y=yn(t,"y",0),this.width=yn(t,"width",0);var i=yn(t,"prop",null);i===null&&(i={}),this.prop=i,this.newLineMode=yn(t,"newLineMode",0),this.startIndex=yn(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===Eie&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==GUe&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===Eie&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}},Sie=Yx;var BUe=function(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t];return e},_ie=BUe;var UUe=function(e,t){var i=Array.isArray(e);if(t===void 0?t=i?[]:{}:_ie(t),i){t.length=e.length;for(var r=0,s=e.length;r<s;r++)t[r]=e[r]}else for(var n in e)t[n]=e[n];return t},Fa=UUe;var kUe=function(){},wie=kUe;var Zf=Phaser.Utils.Objects.GetFastValue,Cie=le.NO_NEWLINE,zUe=le.WRAPPED_NEWLINE,YUe=new Br,XUe=new Br,co=class{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=Zf(t,"pensPool",YUe),this.LinesPool=Zf(t,"linesPool",XUe),this.tagToText=Zf(t,"tagToText",wie),this.tagToTextScope=Zf(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,i=this.lines.length;t<i;t++)this.lines[t].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,i,r,s,n,a){var h=this.PensPool.pop();return h==null&&(h=new Sie),Tn.text=t,Tn.x=i,Tn.y=r,Tn.width=s,Tn.prop=n,Tn.newLineMode=a,h.resetFromJSON(Tn),this.addPen(h),this}addImagePen(t,i,r,s){return this.addTextPen("",t,i,r,s,Cie),this}addNewLinePen(){var t=this.lastPen,i=t?t.lastX:0,r=t?t.y:0,s=t?Fa(t.prop):null;return this.addTextPen("",i,r,0,s,zUe),this}addPen(t){var i=this.lastPen;i==null?t.startIndex=0:t.startIndex=i.endIndex,this.pens.push(t);var r=this.lastLine;r==null&&(r=this.LinesPool.pop()||[],this.lines.push(r)),r.push(t),t.newLineMode!==Cie&&(r=this.LinesPool.pop()||[],this.lines.push(r)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new co),t.clear();for(var i=0,r=this.lines.length;i<r;i++)for(var s=this.lines[i],n=0,a=s.length;n<a;n++){var h=s[n];t.addPen(h.text,h.x,h.y,h.width,Fa(h.prop),h.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var i=this.lines[t];return i&&i[0]?i[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var i,r=!1,s;for(i=t;i>=0&&(s=this.lines[i],r=s!=null&&s.length>0,!r);i--);if(!r)return 0;var n=s[s.length-1];return n.endIndex}getLineWidth(t){var i=this.lines[t];if(!i)return 0;var r=i[i.length-1];if(r==null)return 0;var s=r.lastX;return s}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,i=0,r=0,s=this.lines.length;r<s;r++)t=this.getLineWidth(r),t>i&&(i=t);return this.maxLinesWidth=i,i}getLineWidths(){for(var t=[],i=0,r=this.lines.length;i<r;i++)t.push(this.getLineWidth(i));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",i=this.pens,r=0,s=i.length;r<s;r++)t+=i[r].plainText;return t}get rawTextLength(){for(var t=0,i=this.pens,r=0,s=this.pens.length;r<s;r++)t+=i[r].rawTextLength;return t}getSliceTagText(t,i,r){if(t===void 0&&(t=0),i===void 0){var s=this.lastPen;if(s==null)return"";i=s.endIndex}r===void 0&&(r=!1);for(var n="",a,h,o,u,f,d,v,c,p=0,m=this.pens.length;p<m&&(h=this.pens[p],f=h.endIndex,!(!(f<=t)&&(h=this.pens[p],o=r?h.wrapText:h.plainText,v=h.prop,u=h.startIndex,d=u>=t&&f<=i,d||(o=o.substring(t-u,i-u)),this.tagToTextScope?n+=this.tagToText.call(this.tagToTextScope,o,v,c):n+=this.tagToText(o,v,c),c=v,f>=i)));p++);return n}get length(){return this.lines.length}set length(t){this.clear()}},Tn={},Rie=co;var VUe=Phaser.Geom.Rectangle,qie=new Br,Xx=class{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return qie.pushMultiple(this.hitAreas),this}add(t,i,r,s,n){var a=qie.pop();return a===null?a=new VUe(i,r,s,n):a.setTo(i,r,s,n),a.key=t,this.hitAreas.push(a),this}getFirst(t,i){for(var r=0,s=this.hitAreas.length;r<s;r++){var n=this.hitAreas[r];if(n.contains(t,i))return n}return null}drawBounds(t,i,r){i===void 0&&(i=16777215),r&&t.save().scaleCanvas(r.scaleX,r.scaleY).rotateCanvas(r.rotation).translateCanvas(r.x,r.y);for(var s=0,n=this.hitAreas.length;s<n;s++){var a=this.hitAreas[s];t.lineStyle(1,i).strokeRect(a.x,a.y,a.width,a.height)}return r&&t.restore(),this}},Aie=Xx;var WUe=function(){this.parent.on("pointerdown",HUe,this).on("pointerup",KUe,this).on("pointermove",Vx,this).on("pointerover",Vx,this).on("pointerout",function(e,t){Vx.call(this,e,null,null,t)},this)},HUe=function(e,t,i,r){var s=this.hitAreaManager.getFirst(t,i);s!==null&&po.call(this,"areadown",s.key,e,t,i)},KUe=function(e,t,i,r){var s=this.hitAreaManager.getFirst(t,i);s!==null&&po.call(this,"areaup",s.key,e,t,i)},Vx=function(e,t,i,r){if(t===null){this.lastHitAreaKey!==null&&po.call(this,"areaout",this.lastHitAreaKey,e),this.lastHitAreaKey=null;return}var s=this.hitAreaManager.getFirst(t,i),n=s?s.key:null;this.lastHitAreaKey!==n&&(this.lastHitAreaKey!==null&&po.call(this,"areaout",this.lastHitAreaKey,e),n!==null&&po.call(this,"areaover",n,e,t,i),this.lastHitAreaKey=n)},po=function(e,t,i,r,s){this.parent.emit(`${e}-${t}`,i,r,s),this.parent.emit(e,t,i,r,s)},bie=WUe;var Wx=new Br,Pie=function(e){!e||Wx.push(e)},Mie=function(e){!e||Wx.pushMultiple(e)},Ur=function(e,t,i){var r=Wx.pop();return r===null&&(r={}),r.text=e,r.width=t,r.newLineMode=i,r};var ZUe=le.NO_NEWLINE,JUe=le.RAW_NEWLINE,Hx=le.WRAPPED_NEWLINE,Lie=le.NO_WRAP,QUe=le.WORD_WRAP,$Ue=le.CHAR_WRAP,jUe=le.SPLITREGEXP,Oie=function(e,t,i,r,s){r<=0&&(i=Lie);var n=[];if(!e||!e.length)return n;for(var a=i===Lie,h=i===QUe,o=e.split(jUe),u,f,d,v=0,c=o.length;v<c;v++){if(u=o[v],d=v===c-1?ZUe:JUe,a){var p=t(u);n.push(Ur(u,p,d));continue}if(f=v===0?r-s:r,u.length<=100){var p=t(u);if(p<=f){n.push(Ur(u,p,d));continue}}var m,x;h?(m=u.split(" "),x=m[m.length-1]==="",x&&(m.length-=1)):m=u;for(var g,y,T,S="",E=0,_,w=h?t(" "):void 0,R=0,q=m.length;R<q;R++){if(g=m[R],y=t(g),T=R===q-1,h&&(!T||x)&&(g+=" ",y+=w),h&&y>r){S!==""?n.push(Ur(S,E,Hx)):R===0&&s>0&&n.push(Ur("",0,Hx)),n.push(...Oie(g,t,$Ue,r,0));var A=n.pop();S=A.text,E=A.width,Pie(A),S===" "&&(S="",E=0);continue}_=E+y,_>f?(n.push(Ur(S,E,Hx)),S=g,E=y,f=r):(S+=g,E=_),T&&n.push(Ur(S,E,d))}}return n},Fie=Oie;var Jf=Phaser.Utils.Objects.GetValue,eke=le.NO_WRAP,tke=le.NO_NEWLINE,Qf=class{constructor(t){this.parent=t.parent,this.context=Jf(t,"context",null),this.canvas=this.context.canvas,this.parser=Jf(t,"parser",null),this.defaultStyle=Jf(t,"style",null),this.autoRound=!0,this.pensPool=Jf(t,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new Aie,this.lastHitAreaKey=null;var i=this.context;this.getTextWidth=function(r){return i.measureText(r).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(t,i,r,s,n){if(n===void 0&&(n=this.penManager),n.clear(),t==="")return n;var a=this.parent.style;if(a.isWrapFitMode){var h=this.parent.padding;r=a.fixedWidth-h.left-h.right}for(var o=this.canvas,u=this.context,f=function(G){return u.measureText(G).width},d=0,v=0,c=a.wrapCallback,p=a.wrapCallbackScope,m=!0,x,g,y,T=this.parser.splitText(t),S,E,_=0,w=T.length;_<w;_++)if(S=this.parser.tagTextToProp(T[_],g),x=S.plainText,g=S.prop,g.img){var R=this.imageManager.getOuterWidth(g.img);r>0&&i!==eke&&r<d+R&&(n.addNewLinePen(),v+=s,d=0),n.addImagePen(d,v,R,Fa(g)),d+=R}else if(x!==""){if(u.save(),y=this.parser.propToContextStyle(this.defaultStyle,g),y.buildFont(),y.syncFont(o,u),y.syncStyle(o,u),!c)E=Fie(x,f,i,r,d);else{E=c.call(p,x,f,r,d),typeof E=="string"&&(E=E.split(`
`));for(var b,q=0,A=E.length;q<A;q++)b=E[q],typeof b=="string"?E[q]=Ur(b,f(b),q<A-1?2:0):m=!1}for(var b,q=0,A=E.length;q<A;q++)b=E[q],n.addTextPen(b.text,d,v,b.width,Fa(g),b.newLineMode),b.newLineMode!==tke?(d=0,v+=s):d+=b.width;m&&Mie(E),E=null,u.restore()}for(var _=0,w=this.lines.length;_<w;_++){var L=this.lines[_],M=L[L.length-1];M&&(M.width+=this.parser.getStrokeThinkness(this.defaultStyle,M.prop))}return n}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,i=this.defaultStyle.maxLines;return i>0&&t>i&&(t=i),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,i=this.defaultStyle.lineHeight*t;return t>0&&(i-=this.defaultStyle.lineSpacing),i}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new Rie({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,i,r){var s;if(t==null)s=this.penManager.plainText;else{var n,a=this.parser.splitText(t,1);s="";for(var h=0,o=a.length;h<o;h++)s+=a[h]}return(i!=null||r!=null)&&(i==null&&(i=0),r==null&&(r=s.length),s=s.substring(i,r)),s}getPenManager(t,i){if(t===void 0)return this.copyPenManager(i,this.penManager);i===void 0&&(i=this.newPenManager());var r=this.defaultStyle;return this.updatePenManager(t,r.wrapMode,r.wrapWidth,r.lineHeight,i),i}getText(t,i,r,s){if(t==null)return this.penManager.getSliceTagText(i,r,s);var n=this.tmpPenManager,a=this.defaultStyle;return this.updatePenManager(t,a.wrapMode,a.wrapWidth,a.lineHeight,n),n.getSliceTagText(i,r,s)}copyPenManager(t,i){return i===void 0&&(i=this.penManager),i.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}},ike={setInteractive:bie};Object.assign(Qf.prototype,yie,ike);var Die=Qf;var Kx=Phaser.Utils.Objects.GetValue,rke=function(e,t){t===void 0&&(t={key:e}),t.hasOwnProperty("key")||(t.key=e);var i=t.key,r=t.frame,s=t.width,n=t.height;if(s===void 0||n===void 0){var a=this.textureManager.getFrame(i,r),h=a?a.cutWidth:0,o=a?a.cutHeight:0;s===void 0&&n===void 0?(s=h,n=o):s===void 0?s=h*(n/o):n===void 0&&(n=o*(s/h))}this.images[e]={key:i,frame:r,width:s,height:n,y:Kx(t,"y",0),left:Kx(t,"left",0),right:Kx(t,"right",0)}},$f=rke;var ske=function(e,t,i,r,s){var n=this.get(e);i+=n.left,r+=n.y,s&&(i=Math.round(i),r=Math.round(r));var a=this.textureManager.getFrame(n.key,n.frame);t.drawImage(a.source.image,a.cutX,a.cutY,a.cutWidth,a.cutHeight,i,r,n.width,n.height)},Iie=ske;var jf=class{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,i){if(typeof t=="string")$f.call(this,t,i);else if(Array.isArray(t))for(var r=t,s=0,n=r.length;s<n;s++)$f.call(this,r[s]);else{var r=t;for(var t in r)$f.call(this,t,r[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var i=this.get(t);return i?i.width+i.left+i.right:0}getFrame(t){var i=this.get(t);return i?this.textureManager.getFrame(i.key,i.frame):void 0}hasTexture(t){return!!this.getFrame(t)}},nke={draw:Iie};Object.assign(jf.prototype,nke);var Nie=jf;var ake=function(e,t,i,r,s,n,a){var h=e.sys.textures,o=e.renderer;r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=t.width),a===void 0&&(a=t.height);var u;h.exists(i)?u=h.get(i):u=h.createCanvas(i,n,a);var f=u.getSourceImage();f.width!==n&&(f.width=n),f.height!==a&&(f.height=a);var d=f.getContext("2d");d.clearRect(0,0,n,a),d.drawImage(t,r,s,n,a),o.gl&&u&&o.canvasToTexture(f,u.source[0].glTexture,!0,0)},Gie=ake;var hke=Phaser.Utils.Objects.IsPlainObject,oke=Phaser.DOM.AddToDOM,Bie=Phaser.Display.Canvas.CanvasPool,Uie=Phaser.GameObjects.GameObject,pr=Phaser.Utils.Objects.GetValue,uke=Phaser.DOM.RemoveFromDOM,lke=le.SPLITREGEXP,Zx={},ed=class extends Uie{constructor(t,i,r,s,n,a,h){if(hke(i)){var o=i;i=pr(o,"x",0),r=pr(o,"y",0),s=pr(o,"text",""),n=pr(o,"style","")}if(i===void 0&&(i=0),r===void 0&&(r=0),super(t,a),this.renderer=t.sys.game.renderer,this.setPosition(i,r),this.setOrigin(0,0),this.initPipeline(),this.canvas=Bie.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,n){if(n.hasOwnProperty("align")){var u=n.align;delete n.align,n.halign=u}n.hasOwnProperty("stroke")&&!n.hasOwnProperty("strokeThickness")&&(n.strokeThickness=1)}this.style=new Xf(this,n),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),Zx.hasOwnProperty(a)||(Zx[a]=new Br),this.canvasText=new Die({parent:this,context:this.context,parser:h,style:this.style,pensPool:Zx[a]}),this.parser=h,this.initRTL(),n&&n.padding&&this.setPadding(n.padding),this.setText(s),t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&uke(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),Bie.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",oke(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}appendText(t){return t==null?this:(Array.isArray(t)&&(t=t.join(`
`)),this.setText(this.text+t.toString()),this)}setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,i){return this.style.setFixedSize(t,i)}setBackgroundColor(t,i,r){return this.style.setBackgroundColor(t,i,r)}setBackgroundStrokeColor(t,i){return this.style.setBackgroundStrokeColor(t,i)}setBackgroundCornerRadius(t,i){return this.style.setBackgroundCornerRadius(t,i)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,i){return this.style.setStroke(t,i)}setShadow(t,i,r,s,n,a){return this.style.setShadow(t,i,r,s,n,a)}setShadowOffset(t,i){return this.style.setShadowOffset(t,i)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}setXOffset(t){return this.style.setXOffset(t)}setPadding(t,i,r,s){if(typeof t=="object"){var n=t,a=pr(n,"x",null);a!==null?(t=a,r=a):(t=pr(n,"left",0),r=pr(n,"right",t));var h=pr(n,"y",null);h!==null?(i=h,s=h):(i=pr(n,"top",0),s=pr(n,"bottom",i))}else t===void 0&&(t=0),i===void 0&&(i=t),r===void 0&&(r=t),s===void 0&&(s=i);return this.padding.left=t,this.padding.top=i,this.padding.right=r,this.padding.bottom=s,this.updateText(!1)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}updateText(t){t===void 0&&(t=!0);var i=this.canvasText,r=this.style;t&&i.updatePenManager(this._text,r.wrapMode,r.wrapWidth,r.lineHeight);var s=this.padding,n,a,h=Math.ceil(i.linesWidth);r.fixedWidth===0?(this.width=h+s.left+s.right,n=h):(this.width=r.fixedWidth,n=this.width-s.left-s.right,n<h&&(n=h)),r.fixedHeight===0?(this.height=i.linesHeight+s.top+s.bottom,a=i.linesHeight):(this.height=r.fixedHeight,a=this.height-s.top-s.bottom,a<i.linesHeight&&(a=i.linesHeight));var o=this.width,u=this.height;this.updateDisplayOrigin();var f=r.resolution;o*=f,u*=f,o=Math.max(Math.ceil(o),1),u=Math.max(Math.ceil(u),1);var d=this.canvas,v=this.context;d.width!==o||d.height!==u?(d.width=o,d.height=u,this.frame.setSize(o,u)):v.clearRect(0,0,o,u),v.save(),v.scale(f,f);var c=this.style.rtl?s.right:s.left,p=s.top;i.draw(c,p,n,a),v.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(d,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var m=this.input;return m&&!m.customHitArea&&(m.hitArea.width=this.width,m.hitArea.height=this.height),this}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,i){return this.style.setTextMetrics(t,i)}toJSON(){var t=Ut.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=i,t}setInteractive(t,i,r){var s=!!this.input;return Uie.prototype.setInteractive.call(this,t,i,r),s||this.canvasText.setInteractive(),this}getWrappedText(t,i,r){return t=this.canvasText.getText(t,i,r,!0),t.split(lke)}getPlainText(t,i,r){return this.canvasText.getPlainText(t,i,r)}getText(t,i,r,s){return s===void 0&&(s=!1),this.canvasText.getText(t,i,r,s)}getSubString(t,i,r){return this.getText(t,i,r)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,i){return this.canvasText.getPenManager(t,i)}setSize(t,i){return this.setFixedSize(t,i)}resize(t,i){return this.setFixedSize(t,i)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}get imageManager(){return this._imageManager||(this._imageManager=new Nie(this.scene)),this._imageManager}addImage(t,i){return this.imageManager.add(t,i),this}drawAreaBounds(t,i){return this.canvasText.hitAreaManager.drawBounds(t,i,this),this}measureTextMargins(t,i){return lie(this.style,t,i)}generateTexture(t,i,r,s,n){var a=this.canvas;return s===void 0?s=a.width:s*=this.resolution,n===void 0?n=a.height:n*=this.resolution,Gie(this.scene,a,t,i,r,s,n),this}},Ut=Phaser.GameObjects.Components;Phaser.Class.mixin(ed,[Ut.Alpha,Ut.BlendMode,Ut.ComputedSize,Ut.Crop,Ut.Depth,Ut.Flip,Ut.GetBounds,Ut.Mask,Ut.Origin,Ut.Pipeline,Ut.ScrollFactor,Ut.Tint,Ut.Transform,Ut.Visible,oie]);var kie=ed;var kt=function(e,t){return t===void 0?`\\[${e}\\]`:`\\[${e}=(${t})\\]`},li=function(e){return`\\[/${e}\\]`},zie="[-.0-9]+",Jx="[a-z]+|#[0-9abcdef]+",Qx="[^\\]]+",Yie="esc",Xie=kt(Yie),Vie=li(Yie),Wie="raw",Hie=kt(Wie),Kie=li(Wie),Zie="b",Jie=kt(Zie),Qie=li(Zie),$ie="i",jie=kt($ie),ere=li($ie),tre="size",ire=kt(tre,zie),rre=li(tre),sre="color",nre=kt(sre,Jx),are=li(sre),$x="u",hre=kt($x),ore=kt($x,Jx),ure=li($x),lre="shadow",fre=kt(lre),dre=li(lre),jx="stroke",vre=kt(jx),cre=kt(jx,Jx),pre=li(jx),mre="y",gre=kt(mre,zie),xre=li(mre),yre="img",Tre=kt(yre,Qx),Ere=li(yre),Sre="area",_re=kt(Sre,Qx),wre=li(Sre),Cre="align",Rre=kt(Cre,Qx),qre=li(Cre),td=new RegExp(Xie,"i"),mo=new RegExp(Vie,"i"),id=new RegExp(Hie,"i"),go=new RegExp(Kie,"i"),Are=new RegExp(Jie,"i"),bre=new RegExp(Qie,"i"),Pre=new RegExp(jie,"i"),Mre=new RegExp(ere,"i"),ey=new RegExp(ire,"i"),Lre=new RegExp(rre,"i"),ty=new RegExp(nre,"i"),Ore=new RegExp(are,"i"),Fre=new RegExp(hre,"i"),iy=new RegExp(ore,"i"),Dre=new RegExp(ure,"i"),Ire=new RegExp(fre,"i"),Nre=new RegExp(dre,"i"),Gre=new RegExp(vre,"i"),ry=new RegExp(cre,"i"),Bre=new RegExp(pre,"i"),sy=new RegExp(gre,"i"),Ure=new RegExp(xre,"i"),ny=new RegExp(Tre,"i"),kre=new RegExp(Ere,"i"),ay=new RegExp(_re,"i"),zre=new RegExp(wre,"i"),hy=new RegExp(Rre,"i"),Yre=new RegExp(qre,"i"),rd=new RegExp([Hie,Kie,Xie,Vie,Jie,Qie,jie,ere,ire,rre,nre,are,hre,ore,ure,fre,dre,vre,cre,pre,gre,xre,Tre,Ere,_re,wre,Rre,qre].join("|"),"ig");var fke=function(e,t){for(var i=[],r=0,s=!1,n=!1;;){var a=rd.exec(e);if(!a)break;var h=a[0];if(n)if(mo.test(h))n=!1;else continue;else if(s)if(go.test(h))s=!1;else continue;else td.test(h)?n=!0:id.test(h)&&(s=!0);var o=rd.lastIndex-h.length;if(r<o){var u=e.substring(r,o);i.push(u)}t===void 0&&i.push(h),r=rd.lastIndex}var f=e.length;return r<f&&i.push(e.substring(r,f)),i},Xre=fke;var bt=!1,Pt=!0,dke={plainText:null,prevProp:null},vke=function(e,t){t==null&&(t={});var i="";if(t.img&&fe(t,bt,"img"),t.esc)mo.test(e)?fe(t,bt,"esc"):i=e;else if(t.raw)go.test(e)?fe(t,bt,"raw"):i=e;else if(td.test(e))fe(t,Pt,"esc",!0);else if(mo.test(e))fe(t,bt,"esc");else if(id.test(e))fe(t,Pt,"raw",!0);else if(go.test(e))fe(t,bt,"raw");else if(Are.test(e))fe(t,Pt,"b",!0);else if(bre.test(e))fe(t,bt,"b");else if(Pre.test(e))fe(t,Pt,"i",!0);else if(Mre.test(e))fe(t,bt,"i");else if(ey.test(e)){var r=e.match(ey);fe(t,Pt,"size",`${r[1]}px`)}else if(Lre.test(e))fe(t,bt,"size");else if(ty.test(e)){var r=e.match(ty);fe(t,Pt,"color",r[1])}else if(Ore.test(e))fe(t,bt,"color");else if(Fre.test(e))fe(t,Pt,"u",!0);else if(iy.test(e)){var r=e.match(iy);fe(t,Pt,"u",r[1])}else if(Dre.test(e))fe(t,bt,"u");else if(Ire.test(e))fe(t,Pt,"shadow",!0);else if(Nre.test(e))fe(t,bt,"shadow");else if(Gre.test(e))fe(t,Pt,"stroke",!0);else if(ry.test(e)){var r=e.match(ry);fe(t,Pt,"stroke",r[1])}else if(Bre.test(e))fe(t,bt,"stroke");else if(sy.test(e)){var r=e.match(sy);fe(t,Pt,"y",parseFloat(r[1]))}else if(Ure.test(e))fe(t,bt,"y");else if(ny.test(e)){var r=e.match(ny);fe(t,Pt,"img",r[1])}else if(kre.test(e))fe(t,bt,"img");else if(ay.test(e)){var r=e.match(ay);fe(t,Pt,"area",r[1])}else if(zre.test(e))fe(t,bt,"area");else if(hy.test(e)){var r=e.match(hy);fe(t,Pt,"align",r[1])}else Yre.test(e)?fe(t,bt,"align"):i=e;var s=dke;return s.plainText=i,s.prop=t,s},fe=function(e,t,i,r){return t===Pt?e[i]=r:e.hasOwnProperty(i)&&delete e[i],e},Vre=vke;var cke=function(e,t){var i=mke;if(t.hasOwnProperty("img"))i.image=t.img;else{if(i.image=null,t.hasOwnProperty("family")?i.fontFamily=t.family:i.fontFamily=e.fontFamily,t.hasOwnProperty("size")){var r=t.size;typeof r=="number"&&(r=`${r}px`),i.fontSize=r}else i.fontSize=e.fontSize;i.fontStyle=pke(t.b,t.i),t.hasOwnProperty("color")?i.color=t.color:i.color=e.color,t.hasOwnProperty("stroke")?t.stroke===!0?(i.stroke=e.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=t.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=e.stroke,i.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(i.shadowColor=e.shadowColor,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor=t.shadow,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor="#000",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,i.shadowStroke=!1,i.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(i.underlineColor=e.underlineColor,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor=t.u,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor="#000",i.underlineThickness=0,i.underlineOffset=0),i},pke=function(e,t){return e&&t?"bold italic":e?"bold":t?"italic":""},mke=new Xf,Wre=cke;var gke=function(e,t,i){i==null&&(i=xke);var r=[];for(var s in i)t.hasOwnProperty(s)||r.push(`[/${s}]`);for(var s in t){var n=t[s];if(i[s]!==n)switch(s){case"size":r.push(`[size=${n.replace("px","")}]`);break;case"color":case"stroke":case"y":case"img":case"area":case"align":r.push(`[${s}=${n}]`);break;case"u":n===!0?r.push("[u]"):r.push(`[u=${n}]`);break;default:r.push(`[${s}]`);break}}return r.push(e),r.join("")},xke={},Hre=gke;var sd=class{getStrokeThinkness(t,i){var r;return i.hasOwnProperty("stroke")?r=t.strokeThickness:r=0,r}},yke={splitText:Xre,tagTextToProp:Vre,propToContextStyle:Wre,propToTagText:Hre};Object.assign(sd.prototype,yke);var Kre=sd;var oy=class extends kie{constructor(t,i,r,s,n){var a=new Kre(n);super(t,i,r,s,n,"rexBBCodeText",a)}},Da=oy;function Zre(e,t,i,r){var s=new Da(this.scene,e,t,i,r);return this.scene.add.existing(s),s}var nd=Phaser.Utils.Objects.GetAdvancedValue,Tke=Phaser.GameObjects.BuildGameObject;function Jre(e,t){e===void 0&&(e={}),t!==void 0&&(e.add=t);var i=nd(e,"text",""),r=nd(e,"style",null),s=nd(e,"padding",null);s!==null&&(r.padding=s);var n=new Da(this.scene,0,0,i,r);return Tke(this.scene,n,e),n.autoRound=nd(e,"autoRound",!0),n}var Qre=function(e){return e==null||e===""||e.length===0},Eke=function(e,t,i){var r=e;if(!Qre(t)){typeof t=="string"&&(t=t.split("."));for(var s,n=0,a=t.length;n<a;n++){if(s=t[n],r[s]==null||typeof r[s]!="object"){var h;n===a-1?i===void 0?h={}:h=i:h={},r[s]=h}r=r[s]}}return r},Ske=function(e,t,i){if(typeof e=="object"){if(Qre(t)){if(i==null)return;typeof i=="object"&&(e=i)}else{typeof t=="string"&&(t=t.split("."));var r=t.pop(),s=Eke(e,t);s[r]=i}return e}},$re=Ske;var uy=class extends Phaser.Plugins.BasePlugin{constructor(t){super(t),t.registerGameObject("rexBBCodeText",Zre,Jre)}start(){var t=this.game.events;t.on("destroy",this.destroy,this)}};$re(window,"RexPlugins.GameObjects.BBCodeText",Da);var jre=uy;var ese={setEventEmitter(e,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var _ke=Phaser.Scene,wke=function(e){return e instanceof _ke},ad=wke;var Cke=function(e){if(e==null||typeof e!="object")return null;if(ad(e))return e;if(e.scene&&ad(e.scene))return e.scene;if(e.parent&&e.parent.scene&&ad(e.parent.scene))return e.parent.scene},tse=Cke;var Rke=Phaser.Utils.Objects.GetValue,hd=class{constructor(t,i){this.parent=t,this.scene=tse(t),this.isShutdown=!1,this.setEventEmitter(Rke(i,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,i){this.destroy(i)}};Object.assign(hd.prototype,ese);var ise=hd;var qke=Phaser.GameObjects.Text,Ake=function(e){return e instanceof qke},rse=Ake;var bke=Phaser.GameObjects.BitmapText,Pke=function(e){return e instanceof bke},sse=Pke;var xo=0,yo=1,To=2;var Mke=function(e){var t;return sse(e)?t=To:rse(e)?t=xo:t=yo,t},od=Mke;var Lke=function(e,t){var i=od(e);switch(i){case xo:e.style.syncFont(e.canvas,e.context),t=e.runWordWrap(t);break;case yo:t=e.getText(t,void 0,void 0,!0);break;case To:t=e.setText(t).getTextBounds().wrappedText;break}return t},nse=Lke;var Oke=function(e,t){var i=od(e);switch(i){case xo:var n=e.style,r=n.wordWrapWidth,s=n.wordWrapCallback;n.wordWrapWidth=0,n.wordWrapCallback=void 0,e.setText(t),n.wordWrapWidth=r,n.wordWrapCallback=s;break;case yo:var n=e.style,a=n.wrapMode;n.wrapMode=0,e.setText(t),n.wrapMode=a;break;case To:var h=e._maxWidth;e._maxWidth=0,e.setText(t),e._maxWidth=h;break}},ase=Oke;var Ia=Phaser.Utils.Objects.GetFastValue,ly=Phaser.Utils.Objects.GetValue,fy=class extends ise{constructor(t,i){super(t,i),this.timer=null,this.resetFromJSON(i)}resetFromJSON(t){this.setTextWrapEnable(ly(t,"wrap",!1)),this.setTypeMode(ly(t,"typeMode",0)),this.setTypeSpeed(ly(t,"speed",333)),this.setTextCallback=Ia(t,"setTextCallback",null),this.setTextCallbackScope=Ia(t,"setTextCallbackScope",null),this.setTypingContent(Ia(t,"text","")),this.typingIdx=Ia(t,"typingIdx",0),this.insertIdx=Ia(t,"insertIdx",null);var i=Ia(t,"elapsed",null);return i!==null&&this.start(void 0,void 0,this.typingIdx,i),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=Fke[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var i=hse(t);this.textWrapEnable&&(i=nse(this.parent,i)),this._text=i}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(t,i,r,s){return t!==void 0&&this.setTypingContent(t),i!==void 0&&(this.speed=i),r===void 0&&(r=0),this.typingIdx=r+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(s)),this}appendText(t){var i=this.text.concat(hse(t));return this.isTyping?this.setTypingContent(i):this.start(i,void 0,this.textLen),this}stop(t){var i=this.getTimer();return i&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,i,r,s){var n;if(s===0){var a=0,h=i;this.insertIdx=h,n=this.getSubString(t,a,h)}else if(s===1){var h=r,a=h-i;this.insertIdx=0,n=this.getSubString(t,a,h)}else if(s===2){var o=r/2,a=Math.floor(o-i/2),h=a+i;this.insertIdx=i%2?i:0,n=this.getSubString(t,a,h)}else if(s===3){var u=Math.floor(i/2),f;if(u>0){var h=r,a=h-u;f=this.getSubString(t,a,h)}else f="";var d=i-u,v;if(d>0){var a=0,h=a+d;this.insertIdx=h,v=this.getSubString(t,a,h)}else v="",this.insertIdx=0;n=v+f}return n}startTimer(t){this.timer&&this.freeTimer();var i,r;return t===void 0?(i=0,r=0):(i=this.speed,r=t),this.timer=this.scene.time.addEvent({delay:0,startAt:r,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):t=this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?ase(this.parent,t):this.parent.setText(t)}getTextLength(t){var i=this.parent,r;return i.getPlainText?r=i.getPlainText(t).length:r=t.length,r}getSubString(t,i,r){var s=this.parent,n;return s.getSubString?n=s.getSubString(t,i,r):n=t.slice(i,r),n}},hse=function(e){return Array.isArray(e)?e=e.join(`
`):typeof e=="number"&&(e=e.toString()),e},Fke={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},ose=fy;var use=ose;var dy=class extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){var t=this.game.events;t.on("destroy",this.destroy,this)}add(t,i){return new use(t,i)}},lse=dy;var fse=1e3,Dke={type:ba.AUTO,backgroundColor:"#000000",scale:{parent:"phaser-game",mode:ba.Scale.FIT,autoCenter:ba.Scale.CENTER_BOTH,width:fse,height:fse},audio:{noAudio:!0},scene:[so,oo,fo],plugins:{global:[{key:"rexBBCodeTextPlugin",plugin:jre,start:!0},{key:"rexTextTypingPlugin",plugin:lse,start:!0}]}};window.addEventListener("load",()=>my(void 0,null,function*(){let e=new ba.Game(Dke),t=new URL(window.location.href).searchParams,i=h=>[...Array(h)].map(()=>(~~(Math.random()*36)).toString(36)).join(""),r=t.get("SONA_ID")||t.get("PROLIFIC_PID")||t.get("id")||i(8),s=270,n=new dse.default().getResult(),a={id:r.slice(0,8),is_prolific:t.get("PROLIFIC_PID")!==null,is_sona:t.get("SONA_ID")!==null,group:t.get("GROUP"),institution:"yale",description:"Confidence v2",datetime:new Date,already_visited:localStorage.getItem("target-onset")!==null,width:e.config.width,height:e.config.height,clamp_size:4,renderer:e.config.renderType===ba.CANVAS?"canvas":"webgl",user_agent:{browser:n.browser,os:n.os},fullscreen_supported:document.fullscreenEnabled,debug:t.get("debug")!==null,version:6,reference_angle:s};e.user_config=a,localStorage.setItem("target-onset",1)}));function lo(e){return e.preventDefault(),e.returnValue="","experiment not done yet."}window.addEventListener("beforeunload",lo);})();
/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/
